System.register("chunks:///_virtual/ABIContract.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"ed69euR4gZPuZT3Un37+nWu","ABIContract",void 0);e("default",[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientFunds",type:"error"},{inputs:[],name:"InvalidAddress",type:"error"},{inputs:[],name:"InvalidBuyIn",type:"error"},{inputs:[],name:"InvalidConversion",type:"error"},{inputs:[],name:"InvalidNumberOfParticipants",type:"error"},{inputs:[],name:"InvalidRange",type:"error"},{inputs:[],name:"InvalidSessionStatus",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"NotRollupToken",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint96",name:"amount",type:"uint96"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint32",name:"requestId",type:"uint32"},{indexed:!0,internalType:"uint32",name:"sessionId",type:"uint32"}],name:"FinishSessionRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"sessionId",type:"uint32"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint96",name:"buyIn",type:"uint96"}],name:"JoinedSession",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"sessionId",type:"uint32"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint96",name:"amount",type:"uint96"}],name:"LeftSession",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint96",name:"amount",type:"uint96"}],name:"Lock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint96",name:"minBuyIn",type:"uint96"},{indexed:!1,internalType:"uint96",name:"maxBuyIn",type:"uint96"}],name:"RollupTokenAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"RollupTokenRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"sessionId",type:"uint32"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"}],name:"SessionCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"sessionId",type:"uint32"}],name:"SessionFinished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"prevSigner",type:"address"},{indexed:!0,internalType:"address",name:"newSigner",type:"address"}],name:"TrustedSignerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint96",name:"amount",type:"uint96"}],name:"Unlock",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint96",name:"amount",type:"uint96"}],name:"Withdraw",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"ROLLUP_ID",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint96",name:"_minBuyIn",type:"uint96"},{internalType:"uint96",name:"_maxBuyIn",type:"uint96"}],name:"addRollupToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint96",name:"_buyIn",type:"uint96"},{internalType:"uint32",name:"_maxParticipant",type:"uint32"}],name:"createSession",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint32",name:"_sessionId",type:"uint32"},{internalType:"uint96",name:"_buyIn",type:"uint96"}],name:"depositIntoSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint96",name:"_amount",type:"uint96"}],name:"depositRollupReserves",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_sessionId",type:"uint32"},{internalType:"uint96",name:"_balance",type:"uint96"},{internalType:"bytes",name:"_signature",type:"bytes"},{internalType:"uint32",name:"_rn",type:"uint32"}],name:"finishSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint16",name:"_rollupId",type:"uint16"},{internalType:"address",name:"_signer",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_sessionId",type:"uint32"},{internalType:"uint96",name:"_buyIn",type:"uint96"},{internalType:"uint32",name:"_rn",type:"uint32"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"joinSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_sessionId",type:"uint32"},{internalType:"uint96",name:"_balance",type:"uint96"},{internalType:"uint32",name:"_rn",type:"uint32"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"leaveSession",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lockedFunds",outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"}],name:"removeRollupToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"rollupTokens",outputs:[{internalType:"uint96",name:"minBuyIn",type:"uint96"},{internalType:"uint96",name:"maxBuyIn",type:"uint96"},{internalType:"uint8",name:"supported",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint96",name:"",type:"uint96"}],name:"sessions",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"creator",type:"address"},{internalType:"uint32",name:"maxParticipant",type:"uint32"},{internalType:"uint32",name:"currentParticipantNumber",type:"uint32"},{internalType:"uint8",name:"status",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_admin",type:"address"}],name:"setRollupAdmin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newSigner",type:"address"}],name:"setTrustedSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint32",name:"",type:"uint32"}],name:"usedRn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"userDeposits",outputs:[{internalType:"uint96",name:"",type:"uint96"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"userSession",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint96",name:"_amount",type:"uint96"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint96",name:"_amount",type:"uint96"}],name:"withdrawRollupReserves",outputs:[],stateMutability:"nonpayable",type:"function"}]);n._RF.pop()}}}));

System.register("chunks:///_virtual/alchemy.mjs",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,s;return{setters:[function(t){e=t.inheritsLoose,r=t.regeneratorRuntime,n=t.createForOfIteratorHelperLoose,i=t.createClass,o=t.assertThisInitialized},function(t){s=t.cclegacy}],execute:function(){var a,u;t("Network",void 0),s._RF.push({},"45f3c0a/1NPIoJVeWB+dWUe","alchemy",void 0);var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function h(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){if(this instanceof t){var r=[null];r.push.apply(r,arguments);var n=Function.bind.apply(e,r);return new n}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var l,d={exports:{}};
/**
      * [js-sha3]{@link https://github.com/emn178/js-sha3}
      *
      * @version 0.8.0
      * @author Chen, Yi-Cyuan [emn178@gmail.com]
      * @copyright Chen, Yi-Cyuan 2015-2018
      * @license MIT
      */l=d,function(){var t="input is invalid type",e="object"==typeof window,r=e?window:{};r.JS_SHA3_NO_WINDOW&&(e=!1);var n=!e&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=c:n&&(r=self);var i=!r.JS_SHA3_NO_COMMON_JS&&l.exports,o=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,s="0123456789abcdef".split(""),a=[4,1024,262144,67108864],u=[0,8,16,24],f=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],d=[128,256],p=["hex","buffer","arrayBuffer","array","digest"],m={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!o||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var v=function(t,e,r){return function(n){return new R(t,e,t).update(n)[r]()}},g=function(t,e,r){return function(n,i){return new R(t,e,i).update(n)[r]()}},b=function(t,e,r){return function(e,n,i,o){return k["cshake"+t].update(e,n,i,o)[r]()}},w=function(t,e,r){return function(e,n,i,o){return k["kmac"+t].update(e,n,i,o)[r]()}},y=function(t,e,r,n){for(var i=0;i<p.length;++i){var o=p[i];t[o]=e(r,n,o)}return t},A=function(t,e){var r=v(t,e,"hex");return r.create=function(){return new R(t,e,t)},r.update=function(t){return r.create().update(t)},y(r,v,t,e)},E=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:A},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:A},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(t,e){var r=g(t,e,"hex");return r.create=function(r){return new R(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},y(r,g,t,e)}},{name:"cshake",padding:a,bits:d,createMethod:function(t,e){var r=m[t],n=b(t,0,"hex");return n.create=function(n,i,o){return i||o?new R(t,e,n).bytepad([i,o],r):k["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},y(n,b,t,e)}},{name:"kmac",padding:a,bits:d,createMethod:function(t,e){var r=m[t],n=w(t,0,"hex");return n.create=function(n,i,o){return new P(t,e,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},y(n,w,t,e)}}],k={},x=[],N=0;N<E.length;++N)for(var _=E[N],T=_.bits,S=0;S<T.length;++S){var I=_.name+"_"+T[S];if(x.push(I),k[I]=_.createMethod(T[S],_.padding),"sha3"!==_.name){var C=_.name+T[S];x.push(C),k[C]=k[I]}}function R(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(t,e,r){R.call(this,t,e,r)}R.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(o&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||o&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,s,a=this.blocks,c=this.byteCount,f=e.length,h=this.blockCount,l=0,d=this.s;l<f;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<h+1;++i)a[i]=0;if(r)for(i=this.start;l<f&&i<c;++l)a[i>>2]|=e[l]<<u[3&i++];else for(i=this.start;l<f&&i<c;++l)(s=e.charCodeAt(l))<128?a[i>>2]|=s<<u[3&i++]:s<2048?(a[i>>2]|=(192|s>>6)<<u[3&i++],a[i>>2]|=(128|63&s)<<u[3&i++]):s<55296||s>=57344?(a[i>>2]|=(224|s>>12)<<u[3&i++],a[i>>2]|=(128|s>>6&63)<<u[3&i++],a[i>>2]|=(128|63&s)<<u[3&i++]):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++l)),a[i>>2]|=(240|s>>18)<<u[3&i++],a[i>>2]|=(128|s>>12&63)<<u[3&i++],a[i>>2]|=(128|s>>6&63)<<u[3&i++],a[i>>2]|=(128|63&s)<<u[3&i++]);if(this.lastByteIndex=i,i>=c){for(this.start=i-c,this.block=a[h],i=0;i<h;++i)d[i]^=a[i];M(d),this.reset=!0}else this.start=i}return this},R.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];for(r=255&(t>>=8);r>0;)i.unshift(r),r=255&(t>>=8),++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},R.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(o&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||o&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,s=e.length;if(r)i=s;else for(var a=0;a<e.length;++a){var u=e.charCodeAt(a);u<128?i+=1:u<2048?i+=2:u<55296||u>=57344?i+=3:(u=65536+((1023&u)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},R.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=e-r%e,o=[];return o.length=i,this.update(o),this},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];M(n)}},R.prototype.toString=R.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,a=0,u="";a<n;){for(o=0;o<e&&a<n;++o,++a)t=r[o],u+=s[t>>4&15]+s[15&t]+s[t>>12&15]+s[t>>8&15]+s[t>>20&15]+s[t>>16&15]+s[t>>28&15]+s[t>>24&15];a%e==0&&(M(r),o=0)}return i&&(t=r[o],u+=s[t>>4&15]+s[15&t],i>1&&(u+=s[t>>12&15]+s[t>>8&15]),i>2&&(u+=s[t>>20&15]+s[t>>16&15])),u},R.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(t);s<n;){for(o=0;o<e&&s<n;++o,++s)u[s]=r[o];s%e==0&&M(r)}return i&&(u[o]=r[o],t=t.slice(0,a)),t},R.prototype.buffer=R.prototype.arrayBuffer,R.prototype.digest=R.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,u=[];a<i;){for(s=0;s<r&&a<i;++s,++a)t=a<<2,e=n[s],u[t]=255&e,u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;a%r==0&&M(n)}return o&&(t=a<<2,e=n[s],u[t]=255&e,o>1&&(u[t+1]=e>>8&255),o>2&&(u[t+2]=e>>16&255)),u},P.prototype=new R,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),R.prototype.finalize.call(this)};var M=function(t){var e,r,n,i,o,s,a,u,c,h,l,d,p,m,v,g,b,w,y,A,E,k,x,N,_,T,S,I,C,R,P,M,B,O,F,D,L,U,G,z,H,q,j,K,W,V,J,Q,Y,X,Z,$,tt,et,rt,nt,it,ot,st,at,ut,ct,ft;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],u=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|a>>>31),r=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|s>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(u<<1|c>>>31),r=o^(c<<1|u>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=s^(h<<1|l>>>31),r=a^(l<<1|h>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=u^(d<<1|p>>>31),r=c^(p<<1|d>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=h^(i<<1|o>>>31),r=l^(o<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,m=t[0],v=t[1],V=t[11]<<4|t[10]>>>28,J=t[10]<<4|t[11]>>>28,I=t[20]<<3|t[21]>>>29,C=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,q=t[40]<<18|t[41]>>>14,j=t[41]<<18|t[40]>>>14,O=t[2]<<1|t[3]>>>31,F=t[3]<<1|t[2]>>>31,g=t[13]<<12|t[12]>>>20,b=t[12]<<12|t[13]>>>20,Q=t[22]<<10|t[23]>>>22,Y=t[23]<<10|t[22]>>>22,R=t[33]<<13|t[32]>>>19,P=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,ft=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,D=t[14]<<6|t[15]>>>26,L=t[15]<<6|t[14]>>>26,w=t[25]<<11|t[24]>>>21,y=t[24]<<11|t[25]>>>21,X=t[34]<<15|t[35]>>>17,Z=t[35]<<15|t[34]>>>17,M=t[45]<<29|t[44]>>>3,B=t[44]<<29|t[45]>>>3,N=t[6]<<28|t[7]>>>4,_=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,U=t[26]<<25|t[27]>>>7,G=t[27]<<25|t[26]>>>7,A=t[36]<<21|t[37]>>>11,E=t[37]<<21|t[36]>>>11,$=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,K=t[8]<<27|t[9]>>>5,W=t[9]<<27|t[8]>>>5,T=t[18]<<20|t[19]>>>12,S=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,z=t[38]<<8|t[39]>>>24,H=t[39]<<8|t[38]>>>24,k=t[48]<<14|t[49]>>>18,x=t[49]<<14|t[48]>>>18,t[0]=m^~g&w,t[1]=v^~b&y,t[10]=N^~T&I,t[11]=_^~S&C,t[20]=O^~D&U,t[21]=F^~L&G,t[30]=K^~V&Q,t[31]=W^~J&Y,t[40]=et^~nt&ot,t[41]=rt^~it&st,t[2]=g^~w&A,t[3]=b^~y&E,t[12]=T^~I&R,t[13]=S^~C&P,t[22]=D^~U&z,t[23]=L^~G&H,t[32]=V^~Q&X,t[33]=J^~Y&Z,t[42]=nt^~ot&at,t[43]=it^~st&ut,t[4]=w^~A&k,t[5]=y^~E&x,t[14]=I^~R&M,t[15]=C^~P&B,t[24]=U^~z&q,t[25]=G^~H&j,t[34]=Q^~X&$,t[35]=Y^~Z&tt,t[44]=ot^~at&ct,t[45]=st^~ut&ft,t[6]=A^~k&m,t[7]=E^~x&v,t[16]=R^~M&N,t[17]=P^~B&_,t[26]=z^~q&O,t[27]=H^~j&F,t[36]=X^~$&K,t[37]=Z^~tt&W,t[46]=at^~ct&et,t[47]=ut^~ft&rt,t[8]=k^~m&g,t[9]=x^~v&b,t[18]=M^~N&T,t[19]=B^~_&S,t[28]=q^~O&D,t[29]=j^~F&L,t[38]=$^~K&V,t[39]=tt^~W&J,t[48]=ct^~et&nt,t[49]=ft^~rt&it,t[0]^=f[n],t[1]^=f[n+1]};if(i)l.exports=k;else for(N=0;N<x.length;++N)r[x[N]]=k[x[N]]}();var p=f(d.exports),m=!1,v=!1,g={debug:1,default:2,info:2,warning:3,error:4,off:5},b=g.default,w=null;var y,A,E=function(){try{var t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(e){try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(y||(y={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"}(A||(A={}));var k="0123456789abcdef",x=function(){function t(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}var e=t.prototype;return e._log=function(t,e){var r=t.toLowerCase();null==g[r]&&this.throwArgumentError("invalid log level name","logLevel",t),b>g[r]||console.log.apply(console,e)},e.debug=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.DEBUG,r)},e.info=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.INFO,r)},e.warn=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.WARNING,r)},e.makeError=function(e,r,n){if(v)return this.makeError("censored error",r,{});r||(r=t.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(t){var e=n[t];try{if(e instanceof Uint8Array){for(var r="",o=0;o<e.length;o++)r+=k[e[o]>>4],r+=k[15&e[o]];i.push(t+"=Uint8Array(0x"+r+")")}else i.push(t+"="+JSON.stringify(e))}catch(e){i.push(t+"="+JSON.stringify(n[t].toString()))}})),i.push("code="+r),i.push("version="+this.version);var o=e,s="";switch(r){case A.NUMERIC_FAULT:s="NUMERIC_FAULT";var a=e;switch(a){case"overflow":case"underflow":case"division-by-zero":s+="-"+a;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break;case A.CALL_EXCEPTION:case A.INSUFFICIENT_FUNDS:case A.MISSING_NEW:case A.NONCE_EXPIRED:case A.REPLACEMENT_UNDERPRICED:case A.TRANSACTION_REPLACED:case A.UNPREDICTABLE_GAS_LIMIT:s=r}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),i.length&&(e+=" ("+i.join(", ")+")");var u=new Error(e);return u.reason=o,u.code=r,Object.keys(n).forEach((function(t){u[t]=n[t]})),u},e.throwError=function(t,e,r){throw this.makeError(t,e,r)},e.throwArgumentError=function(e,r,n){return this.throwError(e,t.errors.INVALID_ARGUMENT,{argument:r,value:n})},e.assert=function(t,e,r,n){t||this.throwError(e,r,n)},e.assertArgument=function(t,e,r,n){t||this.throwArgumentError(e,r,n)},e.checkNormalize=function(e){E&&this.throwError("platform missing String.prototype.normalize",t.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:E})},e.checkSafeUint53=function(e,r){"number"==typeof e&&(null==r&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))},e.checkArgumentCount=function(e,r,n){n=n?": "+n:"",e<r&&this.throwError("missing argument"+n,t.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,t.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})},e.checkNew=function(e,r){e!==Object&&null!=e||this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})},e.checkAbstract=function(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",t.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})},t.globalLogger=function(){return w||(w=new t("logger/5.7.0")),w},t.setCensorship=function(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),m){if(!e)return;this.globalLogger().throwError("error censorship permanent",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}v=!!e,m=!!r},t.setLogLevel=function(e){var r=g[e.toLowerCase()];null!=r?b=r:t.globalLogger().warn("invalid log level - "+e)},t.from=function(e){return new t(e)},t}();x.errors=A,x.levels=y;var N=new x("bytes/5.7.0");function _(t){return!!t.toHexString}function T(t){return t.slice||(t.slice=function(){var e=Array.prototype.slice.call(arguments);return T(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function S(t){return B(t)&&!(t.length%2)||C(t)}function I(t){return"number"==typeof t&&t==t&&t%1==0}function C(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(!I(t.length)||t.length<0)return!1;for(var e=0;e<t.length;e++){var r=t[e];if(!I(r)||r<0||r>=256)return!1}return!0}function R(t,e){if(e||(e={}),"number"==typeof t){N.checkSafeUint53(t,"invalid arrayify value");for(var r=[];t;)r.unshift(255&t),t=parseInt(String(t/256));return 0===r.length&&r.push(0),T(new Uint8Array(r))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),_(t)&&(t=t.toHexString()),B(t)){var n=t.substring(2);n.length%2&&("left"===e.hexPad?n="0"+n:"right"===e.hexPad?n+="0":N.throwArgumentError("hex data is odd-length","value",t));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return T(new Uint8Array(i))}return C(t)?T(new Uint8Array(t)):N.throwArgumentError("invalid arrayify value","value",t)}function P(t){var e=t.map((function(t){return R(t)})),r=e.reduce((function(t,e){return t+e.length}),0),n=new Uint8Array(r);return e.reduce((function(t,e){return n.set(e,t),t+e.length}),0),T(n)}function M(t){var e=R(t);if(0===e.length)return e;for(var r=0;r<e.length&&0===e[r];)r++;return r&&(e=e.slice(r)),e}function B(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}var O="0123456789abcdef";function F(t,e){if(e||(e={}),"number"==typeof t){N.checkSafeUint53(t,"invalid hexlify value");for(var r="";t;)r=O[15&t]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"==typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),_(t))return t.toHexString();if(B(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":N.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(C(t)){for(var n="0x",i=0;i<t.length;i++){var o=t[i];n+=O[(240&o)>>4]+O[15&o]}return n}return N.throwArgumentError("invalid hexlify value","value",t)}function D(t){if("string"!=typeof t)t=F(t);else if(!B(t)||t.length%2)return null;return(t.length-2)/2}function L(t,e,r){return"string"!=typeof t?t=F(t):(!B(t)||t.length%2)&&N.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function U(t){var e="0x";return t.forEach((function(t){e+=F(t).substring(2)})),e}function G(t){var e=z(F(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function z(t){"string"!=typeof t&&(t=F(t)),B(t)||N.throwArgumentError("invalid hex string","value",t),t=t.substring(2);for(var e=0;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}function H(t,e){for("string"!=typeof t?t=F(t):B(t)||N.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&N.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function q(t){var e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(S(t)){var r=R(t);64===r.length?(e.v=27+(r[32]>>7),r[32]&=127,e.r=F(r.slice(0,32)),e.s=F(r.slice(32,64))):65===r.length?(e.r=F(r.slice(0,32)),e.s=F(r.slice(32,64)),e.v=r[64]):N.throwArgumentError("invalid signature string","signature",t),e.v<27&&(0===e.v||1===e.v?e.v+=27:N.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=F(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){var n=function(t,e){(t=R(t)).length>e&&N.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(e);return r.set(t,e-t.length),T(r)}(R(e._vs),32);e._vs=F(n);var i=n[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=i:e.recoveryParam!==i&&N.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),n[0]&=127;var o=F(n);null==e.s?e.s=o:e.s!==o&&N.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?N.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{var s=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==s&&N.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&B(e.r)?e.r=H(e.r,32):N.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&B(e.s)?e.s=H(e.s,32):N.throwArgumentError("signature missing or invalid s","signature",t);var a=R(e.s);a[0]>=128&&N.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(a[0]|=128);var u=F(a);e._vs&&(B(e._vs)||N.throwArgumentError("signature invalid _vs","signature",t),e._vs=H(e._vs,32)),null==e._vs?e._vs=u:e._vs!==u&&N.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function j(t){return"0x"+p.keccak_256(R(t))}var K={exports:{}},W=h(Object.freeze({__proto__:null,default:{}}));!function(t){!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:W.Buffer}catch(t){}function s(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function u(t,e,n,i){for(var o=0,s=0,a=Math.min(t.length,n),u=e;u<a;u++){var c=t.charCodeAt(u)-48;o*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),o+=s}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,f=r;f<a;f+=n)c=u(t,f,f+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var h=1;for(c=u(t,f,t.length,e),f=0;f<s;f++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype._move=function(t){c(t,this)},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(t){i.prototype.inspect=f}else i.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==o||s!==this.length-1?h[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],f=d[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(f).toString(t);n=(p=p.idivn(f)).isZero()?m+n:h[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;r.words[0]=a;for(var c=1;c<n;c++){for(var f=u>>>26,h=67108863&u,l=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=l;d++){var p=c-d|0;f+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}r.words[c]=0|h,u=0|f}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r++]=255&s,r<t.length&&(t[r++]=s>>8&255),r<t.length&&(t[r++]=s>>16&255),6===o?(r<t.length&&(t[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0},i.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;t[r--]=255&s,r>=0&&(t[r--]=s>>8&255),r>=0&&(t[r--]=s>>16&255),6===o?(r>=0&&(t[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,r){var n,i,o,s=t.words,a=e.words,u=r.words,c=0,f=0|s[0],h=8191&f,l=f>>>13,d=0|s[1],p=8191&d,m=d>>>13,v=0|s[2],g=8191&v,b=v>>>13,w=0|s[3],y=8191&w,A=w>>>13,E=0|s[4],k=8191&E,x=E>>>13,N=0|s[5],_=8191&N,T=N>>>13,S=0|s[6],I=8191&S,C=S>>>13,R=0|s[7],P=8191&R,M=R>>>13,B=0|s[8],O=8191&B,F=B>>>13,D=0|s[9],L=8191&D,U=D>>>13,G=0|a[0],z=8191&G,H=G>>>13,q=0|a[1],j=8191&q,K=q>>>13,W=0|a[2],V=8191&W,J=W>>>13,Q=0|a[3],Y=8191&Q,X=Q>>>13,Z=0|a[4],$=8191&Z,tt=Z>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ft=0|a[8],ht=8191&ft,lt=ft>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var vt=(c+(n=Math.imul(h,z))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(l,z)|0))<<13)|0;c=((o=Math.imul(l,H))+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,H))+Math.imul(m,z)|0,o=Math.imul(m,H);var gt=(c+(n=n+Math.imul(h,j)|0)|0)+((8191&(i=(i=i+Math.imul(h,K)|0)+Math.imul(l,j)|0))<<13)|0;c=((o=o+Math.imul(l,K)|0)+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(g,z),i=(i=Math.imul(g,H))+Math.imul(b,z)|0,o=Math.imul(b,H),n=n+Math.imul(p,j)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,j)|0,o=o+Math.imul(m,K)|0;var bt=(c+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(l,V)|0))<<13)|0;c=((o=o+Math.imul(l,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(y,z),i=(i=Math.imul(y,H))+Math.imul(A,z)|0,o=Math.imul(A,H),n=n+Math.imul(g,j)|0,i=(i=i+Math.imul(g,K)|0)+Math.imul(b,j)|0,o=o+Math.imul(b,K)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,V)|0,o=o+Math.imul(m,J)|0;var wt=(c+(n=n+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,X)|0)+Math.imul(l,Y)|0))<<13)|0;c=((o=o+Math.imul(l,X)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,H))+Math.imul(x,z)|0,o=Math.imul(x,H),n=n+Math.imul(y,j)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(A,j)|0,o=o+Math.imul(A,K)|0,n=n+Math.imul(g,V)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(b,V)|0,o=o+Math.imul(b,J)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,X)|0;var yt=(c+(n=n+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(l,$)|0))<<13)|0;c=((o=o+Math.imul(l,tt)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(_,z),i=(i=Math.imul(_,H))+Math.imul(T,z)|0,o=Math.imul(T,H),n=n+Math.imul(k,j)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(x,j)|0,o=o+Math.imul(x,K)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(g,Y)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(b,Y)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,tt)|0;var At=(c+(n=n+Math.imul(h,rt)|0)|0)+((8191&(i=(i=i+Math.imul(h,nt)|0)+Math.imul(l,rt)|0))<<13)|0;c=((o=o+Math.imul(l,nt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,H))+Math.imul(C,z)|0,o=Math.imul(C,H),n=n+Math.imul(_,j)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(T,j)|0,o=o+Math.imul(T,K)|0,n=n+Math.imul(k,V)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,X)|0)+Math.imul(A,Y)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(g,$)|0,i=(i=i+Math.imul(g,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var Et=(c+(n=n+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(l,ot)|0))<<13)|0;c=((o=o+Math.imul(l,st)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,H))+Math.imul(M,z)|0,o=Math.imul(M,H),n=n+Math.imul(I,j)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(C,j)|0,o=o+Math.imul(C,K)|0,n=n+Math.imul(_,V)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(x,Y)|0,o=o+Math.imul(x,X)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,tt)|0,n=n+Math.imul(g,rt)|0,i=(i=i+Math.imul(g,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var kt=(c+(n=n+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(l,ut)|0))<<13)|0;c=((o=o+Math.imul(l,ct)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(O,z),i=(i=Math.imul(O,H))+Math.imul(F,z)|0,o=Math.imul(F,H),n=n+Math.imul(P,j)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(M,j)|0,o=o+Math.imul(M,K)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,J)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,X)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(k,$)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(A,rt)|0,o=o+Math.imul(A,nt)|0,n=n+Math.imul(g,ot)|0,i=(i=i+Math.imul(g,st)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,st)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0;var xt=(c+(n=n+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,lt)|0)+Math.imul(l,ht)|0))<<13)|0;c=((o=o+Math.imul(l,lt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,H))+Math.imul(U,z)|0,o=Math.imul(U,H),n=n+Math.imul(O,j)|0,i=(i=i+Math.imul(O,K)|0)+Math.imul(F,j)|0,o=o+Math.imul(F,K)|0,n=n+Math.imul(P,V)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(M,V)|0,o=o+Math.imul(M,J)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(_,$)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,n=n+Math.imul(g,ut)|0,i=(i=i+Math.imul(g,ct)|0)+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,lt)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,lt)|0;var Nt=(c+(n=n+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,mt)|0)+Math.imul(l,pt)|0))<<13)|0;c=((o=o+Math.imul(l,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(L,j),i=(i=Math.imul(L,K))+Math.imul(U,j)|0,o=Math.imul(U,K),n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(F,V)|0,o=o+Math.imul(F,J)|0,n=n+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(M,Y)|0,o=o+Math.imul(M,X)|0,n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(_,rt)|0,i=(i=i+Math.imul(_,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,n=n+Math.imul(g,ht)|0,i=(i=i+Math.imul(g,lt)|0)+Math.imul(b,ht)|0,o=o+Math.imul(b,lt)|0;var _t=(c+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(L,V),i=(i=Math.imul(L,J))+Math.imul(U,V)|0,o=Math.imul(U,J),n=n+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,X)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(_,ot)|0,i=(i=i+Math.imul(_,st)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,st)|0,n=n+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,ct)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,lt)|0)+Math.imul(A,ht)|0,o=o+Math.imul(A,lt)|0;var Tt=(c+(n=n+Math.imul(g,pt)|0)|0)+((8191&(i=(i=i+Math.imul(g,mt)|0)+Math.imul(b,pt)|0))<<13)|0;c=((o=o+Math.imul(b,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(L,Y),i=(i=Math.imul(L,X))+Math.imul(U,Y)|0,o=Math.imul(U,X),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(M,rt)|0,o=o+Math.imul(M,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,n=n+Math.imul(_,ut)|0,i=(i=i+Math.imul(_,ct)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ct)|0,n=n+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,lt)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,lt)|0;var St=(c+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(A,pt)|0))<<13)|0;c=((o=o+Math.imul(A,mt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(L,$),i=(i=Math.imul(L,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(O,rt)|0,i=(i=i+Math.imul(O,nt)|0)+Math.imul(F,rt)|0,o=o+Math.imul(F,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,n=n+Math.imul(I,ut)|0,i=(i=i+Math.imul(I,ct)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(_,ht)|0,i=(i=i+Math.imul(_,lt)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,lt)|0;var It=(c+(n=n+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,mt)|0)+Math.imul(x,pt)|0))<<13)|0;c=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(L,rt),i=(i=Math.imul(L,nt))+Math.imul(U,rt)|0,o=Math.imul(U,nt),n=n+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,n=n+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,lt)|0;var Ct=(c+(n=n+Math.imul(_,pt)|0)|0)+((8191&(i=(i=i+Math.imul(_,mt)|0)+Math.imul(T,pt)|0))<<13)|0;c=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(L,ot),i=(i=Math.imul(L,st))+Math.imul(U,ot)|0,o=Math.imul(U,st),n=n+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(F,ut)|0,o=o+Math.imul(F,ct)|0,n=n+Math.imul(P,ht)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(M,ht)|0,o=o+Math.imul(M,lt)|0;var Rt=(c+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(C,pt)|0))<<13)|0;c=((o=o+Math.imul(C,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(L,ut),i=(i=Math.imul(L,ct))+Math.imul(U,ut)|0,o=Math.imul(U,ct),n=n+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,lt)|0)+Math.imul(F,ht)|0,o=o+Math.imul(F,lt)|0;var Pt=(c+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(L,ht),i=(i=Math.imul(L,lt))+Math.imul(U,ht)|0,o=Math.imul(U,lt);var Mt=(c+(n=n+Math.imul(O,pt)|0)|0)+((8191&(i=(i=i+Math.imul(O,mt)|0)+Math.imul(F,pt)|0))<<13)|0;c=((o=o+Math.imul(F,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863;var Bt=(c+(n=Math.imul(L,pt))|0)+((8191&(i=(i=Math.imul(L,mt))+Math.imul(U,pt)|0))<<13)|0;return c=((o=Math.imul(U,mt))+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,u[0]=vt,u[1]=gt,u[2]=bt,u[3]=wt,u[4]=yt,u[5]=At,u[6]=Et,u[7]=kt,u[8]=xt,u[9]=Nt,u[10]=_t,u[11]=Tt,u[12]=St,u[13]=It,u[14]=Ct,u[15]=Rt,u[16]=Pt,u[17]=Mt,u[18]=Bt,0!==c&&(u[19]=c,r.length++),r};function v(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var f=o-c,h=(0|t.words[f])*(0|e.words[c]),l=67108863&h;a=67108863&(l=l+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(l>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function g(t,e,r){return v(t,e,r)}Math.imul||(m=p),i.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?m(this,t,e):r<63?p(this,t,e):r<1024?v(this,t,e):g(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),g(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var o=r.sqr();n<e.length;n++,o=o.sqr())0!==e[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var f=0;for(c=this.length-1;c>=0&&(0!==f||c>=i);c--){var h=0|this.words[c];this.words[c]=f<<26-o|h>>>o,f=h&a}return u&&0!==f&&(u.words[u.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),o=t,s=0|o.words[o.length-1];0!==(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,u=n.length-o.length;if("mod"!==e){(a=new i(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var f=n.clone()._ishlnsubmul(o,1,u);0===f.negative&&(n=f,a&&(a.words[u]=1));for(var h=u-1;h>=0;h--){var l=67108864*(0|n.words[o.length+h])+(0|n.words[o.length+h-1]);for(l=Math.min(l/s|0,67108863),n._ishlnsubmul(o,l,h);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(o,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=l)}return a&&a._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),u=new i(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var f=n.clone(),h=e.clone();!e.isZero();){for(var l=0,d=1;0==(e.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(e.iushrn(l);l-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(f),s.isub(h)),o.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(f),u.isub(h)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a),s.isub(u)):(n.isub(e),a.isub(o),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var h=0,l=1;0==(n.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new x(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function N(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},n(y,w),y.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(A,w),n(E,w),n(k,w),k.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new A;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new k}return b[t]=e,e},x.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);0!==this.pow(f,c).cmp(u);)f.redIAdd(u);for(var h=this.pow(f,o),l=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=s;0!==d.cmp(a);){for(var m=d,v=0;0!==m.cmp(a);v++)m=m.redSqr();r(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));l=l.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return l},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var o=r[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],f=u-1;f>=0;f--){var h=c>>f&1;o!==r[0]&&(o=this.sqr(o)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===n&&0===f)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}u=26}return o},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new N(t)},n(N,x),N.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},N.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},N.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},N.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},N.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,c)}(K);var V=f(K.exports),J="bignumber/5.7.0",Q=V.BN,Y=new x(J),X={},Z=9007199254740991;var $=!1,tt=function(){function t(t,e){t!==X&&Y.throwError("cannot call constructor directly; use BigNumber.from",x.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}var e=t.prototype;return e.fromTwos=function(t){return rt(nt(this).fromTwos(t))},e.toTwos=function(t){return rt(nt(this).toTwos(t))},e.abs=function(){return"-"===this._hex[0]?t.from(this._hex.substring(1)):this},e.add=function(t){return rt(nt(this).add(nt(t)))},e.sub=function(t){return rt(nt(this).sub(nt(t)))},e.div=function(e){return t.from(e).isZero()&&it("division-by-zero","div"),rt(nt(this).div(nt(e)))},e.mul=function(t){return rt(nt(this).mul(nt(t)))},e.mod=function(t){var e=nt(t);return e.isNeg()&&it("division-by-zero","mod"),rt(nt(this).umod(e))},e.pow=function(t){var e=nt(t);return e.isNeg()&&it("negative-power","pow"),rt(nt(this).pow(e))},e.and=function(t){var e=nt(t);return(this.isNegative()||e.isNeg())&&it("unbound-bitwise-result","and"),rt(nt(this).and(e))},e.or=function(t){var e=nt(t);return(this.isNegative()||e.isNeg())&&it("unbound-bitwise-result","or"),rt(nt(this).or(e))},e.xor=function(t){var e=nt(t);return(this.isNegative()||e.isNeg())&&it("unbound-bitwise-result","xor"),rt(nt(this).xor(e))},e.mask=function(t){return(this.isNegative()||t<0)&&it("negative-width","mask"),rt(nt(this).maskn(t))},e.shl=function(t){return(this.isNegative()||t<0)&&it("negative-width","shl"),rt(nt(this).shln(t))},e.shr=function(t){return(this.isNegative()||t<0)&&it("negative-width","shr"),rt(nt(this).shrn(t))},e.eq=function(t){return nt(this).eq(nt(t))},e.lt=function(t){return nt(this).lt(nt(t))},e.lte=function(t){return nt(this).lte(nt(t))},e.gt=function(t){return nt(this).gt(nt(t))},e.gte=function(t){return nt(this).gte(nt(t))},e.isNegative=function(){return"-"===this._hex[0]},e.isZero=function(){return nt(this).isZero()},e.toNumber=function(){try{return nt(this).toNumber()}catch(t){it("overflow","toNumber",this.toString())}return null},e.toBigInt=function(){try{return BigInt(this.toString())}catch(t){}return Y.throwError("this platform does not support BigInt",x.errors.UNSUPPORTED_OPERATION,{value:this.toString()})},e.toString=function(){return arguments.length>0&&(10===arguments[0]?$||($=!0,Y.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Y.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",x.errors.UNEXPECTED_ARGUMENT,{}):Y.throwError("BigNumber.toString does not accept parameters",x.errors.UNEXPECTED_ARGUMENT,{})),nt(this).toString(10)},e.toHexString=function(){return this._hex},e.toJSON=function(t){return{type:"BigNumber",hex:this.toHexString()}},t.from=function(e){if(e instanceof t)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new t(X,et(e)):e.match(/^-?[0-9]+$/)?new t(X,et(new Q(e))):Y.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&it("underflow","BigNumber.from",e),(e>=Z||e<=-Z)&&it("overflow","BigNumber.from",e),t.from(String(e));var r=e;if("bigint"==typeof r)return t.from(r.toString());if(C(r))return t.from(F(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"==typeof n)return t.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"==typeof i&&(B(i)||"-"===i[0]&&B(i.substring(1))))return t.from(i)}return Y.throwArgumentError("invalid BigNumber value","value",e)},t.isBigNumber=function(t){return!(!t||!t._isBigNumber)},t}();function et(t){if("string"!=typeof t)return et(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&Y.throwArgumentError("invalid hex","value",t),"0x00"===(t=et(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function rt(t){return tt.from(et(t))}function nt(t){var e=tt.from(t).toHexString();return"-"===e[0]?new Q("-"+e.substring(3),16):new Q(e.substring(2),16)}function it(t,e,r){var n={fault:t,operation:e};return null!=r&&(n.value=r),Y.throwError(t,x.errors.NUMERIC_FAULT,n)}var ot=new x(J),st={},at=tt.from(0),ut=tt.from(-1);function ct(t,e,r,n){var i={fault:e,operation:r};return void 0!==n&&(i.value=n),ot.throwError(t,x.errors.NUMERIC_FAULT,i)}for(var ft="0";ft.length<256;)ft+=ft;function ht(t){if("number"!=typeof t)try{t=tt.from(t).toNumber()}catch(t){}return"number"==typeof t&&t>=0&&t<=256&&!(t%1)?"1"+ft.substring(0,t):ot.throwArgumentError("invalid decimal size","decimals",t)}function lt(t,e){null==e&&(e=0);var r=ht(e),n=(t=tt.from(t)).lt(at);n&&(t=t.mul(ut));for(var i=t.mod(r).toString();i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];var o=t.div(r).toString();return t=1===r.length?o:o+"."+i,n&&(t="-"+t),t}function dt(t,e){null==e&&(e=0);var r=ht(e);"string"==typeof t&&t.match(/^-?[0-9.]+$/)||ot.throwArgumentError("invalid decimal value","value",t);var n="-"===t.substring(0,1);n&&(t=t.substring(1)),"."===t&&ot.throwArgumentError("missing value","value",t);var i=t.split(".");i.length>2&&ot.throwArgumentError("too many decimal points","value",t);var o=i[0],s=i[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>r.length-1&&ct("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<r.length-1;)s+="0";var a=tt.from(o),u=tt.from(s),c=a.mul(r).add(u);return n&&(c=c.mul(ut)),c}var pt,mt,vt=function(){function t(t,e,r,n){t!==st&&ot.throwError("cannot use FixedFormat constructor; use FixedFormat.from",x.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=r,this.decimals=n,this.name=(e?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=ht(n),Object.freeze(this)}return t.from=function(e){if(e instanceof t)return e;"number"==typeof e&&(e="fixed128x"+e);var r=!0,n=128,i=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)r=!1;else{var o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||ot.throwArgumentError("invalid fixed format","format",e),r="u"!==o[1],n=parseInt(o[2]),i=parseInt(o[3])}else if(e){var s=function(t,r,n){return null==e[t]?n:(typeof e[t]!==r&&ot.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t]),e[t])};r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&ot.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&ot.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new t(st,r,n,i)},t}(),gt=function(){function t(t,e,r,n){t!==st&&ot.throwError("cannot use FixedNumber constructor; use FixedNumber.from",x.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=e,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}var e=t.prototype;return e._checkFormat=function(t){this.format.name!==t.format.name&&ot.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)},e.addUnsafe=function(e){this._checkFormat(e);var r=dt(this._value,this.format.decimals),n=dt(e._value,e.format.decimals);return t.fromValue(r.add(n),this.format.decimals,this.format)},e.subUnsafe=function(e){this._checkFormat(e);var r=dt(this._value,this.format.decimals),n=dt(e._value,e.format.decimals);return t.fromValue(r.sub(n),this.format.decimals,this.format)},e.mulUnsafe=function(e){this._checkFormat(e);var r=dt(this._value,this.format.decimals),n=dt(e._value,e.format.decimals);return t.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)},e.divUnsafe=function(e){this._checkFormat(e);var r=dt(this._value,this.format.decimals),n=dt(e._value,e.format.decimals);return t.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)},e.floor=function(){var e=this.toString().split(".");1===e.length&&e.push("0");var r=t.from(e[0],this.format),n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(bt.toFormat(r.format))),r},e.ceiling=function(){var e=this.toString().split(".");1===e.length&&e.push("0");var r=t.from(e[0],this.format),n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(bt.toFormat(r.format))),r},e.round=function(e){null==e&&(e=0);var r=this.toString().split(".");if(1===r.length&&r.push("0"),(e<0||e>80||e%1)&&ot.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;var n=t.from("1"+ft.substring(0,e),this.format),i=wt.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)},e.isZero=function(){return"0.0"===this._value||"0"===this._value},e.isNegative=function(){return"-"===this._value[0]},e.toString=function(){return this._value},e.toHexString=function(t){return null==t?this._hex:(t%8&&ot.throwArgumentError("invalid byte width","width",t),H(tt.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString(),t/8))},e.toUnsafeFloat=function(){return parseFloat(this.toString())},e.toFormat=function(e){return t.fromString(this._value,e)},t.fromValue=function(e,r,n){return null!=n||null==r||function(t){return null!=t&&(tt.isBigNumber(t)||"number"==typeof t&&t%1==0||"string"==typeof t&&!!t.match(/^-?[0-9]+$/)||B(t)||"bigint"==typeof t||C(t))}(r)||(n=r,r=null),null==r&&(r=0),null==n&&(n="fixed"),t.fromString(lt(e,r),vt.from(n))},t.fromString=function(e,r){null==r&&(r="fixed");var n=vt.from(r),i=dt(e,n.decimals);!n.signed&&i.lt(at)&&ct("unsigned value cannot be negative","overflow","value",e);var o=null;o=n.signed?i.toTwos(n.width).toHexString():H(o=i.toHexString(),n.width/8);var s=lt(i,n.decimals);return new t(st,o,s,n)},t.fromBytes=function(e,r){null==r&&(r="fixed");var n=vt.from(r);if(R(e).length>n.width/8)throw new Error("overflow");var i=tt.from(e);n.signed&&(i=i.fromTwos(n.width));var o=i.toTwos((n.signed?0:1)+n.width).toHexString(),s=lt(i,n.decimals);return new t(st,o,s,n)},t.from=function(e,r){if("string"==typeof e)return t.fromString(e,r);if(C(e))return t.fromBytes(e,r);try{return t.fromValue(e,0,r)}catch(t){if(t.code!==x.errors.INVALID_ARGUMENT)throw t}return ot.throwArgumentError("invalid FixedNumber value","value",e)},t.isFixedNumber=function(t){return!(!t||!t._isFixedNumber)},t}(),bt=gt.from(1),wt=gt.from("0.5"),yt=tt.from(-1),At=tt.from(0),Et=tt.from(1),kt=tt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),xt=new x("strings/5.7.0");function Nt(t,e,r,n,i){if(t===mt.BAD_PREFIX||t===mt.UNEXPECTED_CONTINUE){for(var o=0,s=e+1;s<r.length&&r[s]>>6==2;s++)o++;return o}return t===mt.OVERRUN?r.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(pt||(pt={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(mt||(mt={}));var _t=Object.freeze({error:function(t,e,r,n,i){return xt.throwArgumentError("invalid codepoint at offset "+e+"; "+t,"bytes",r)},ignore:Nt,replace:function(t,e,r,n,i){return t===mt.OVERLONG?(n.push(i),0):(n.push(65533),Nt(t,e,r))}});function Tt(t,e){null==e&&(e=_t.error),t=R(t);for(var r=[],n=0;n<t.length;){var i=t[n++];if(i>>7!=0){var o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=e(128==(192&i)?mt.UNEXPECTED_CONTINUE:mt.BAD_PREFIX,n-1,t,r);continue}o=3,s=65535}if(n-1+o>=t.length)n+=e(mt.OVERRUN,n-1,t,r);else{for(var a=i&(1<<8-o-1)-1,u=0;u<o;u++){var c=t[n];if(128!=(192&c)){n+=e(mt.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|63&c,n++}null!==a&&(a>1114111?n+=e(mt.OUT_OF_RANGE,n-1-o,t,r,a):a>=55296&&a<=57343?n+=e(mt.UTF16_SURROGATE,n-1-o,t,r,a):a<=s?n+=e(mt.OVERLONG,n-1-o,t,r,a):r.push(a))}}else r.push(i)}return r}function St(t,e){void 0===e&&(e=pt.current),e!=pt.current&&(xt.checkNormalize(),t=t.normalize(e));for(var r=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=t.charCodeAt(n);if(n>=t.length||56320!=(64512&o))throw new Error("invalid utf-8 string");var s=65536+((1023&i)<<10)+(1023&o);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return R(r)}function It(t,e){return Tt(t,e).map((function(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t)))})).join("")}function Ct(t,e){e||(e=function(t){return[parseInt(t,16)]});var r=0,n={};return t.split(",").forEach((function(t){var i=t.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])})),n}function Rt(t){var e=0;return t.split(",").map((function(t){var r=t.split("-");return 1===r.length?r[1]="0":""===r[1]&&(r[1]="1"),{l:e+parseInt(r[0],16),h:e=parseInt(r[1],16)}}))}function Pt(t){return j(St(t))}Rt("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Ct("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Ct("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Ct("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!=0)throw new Error("bad data");for(var e=[],r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e})),Rt("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");var Mt="hash/5.7.0";function Bt(t){t=atob(t);for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return R(e)}function Ot(t){t=R(t);for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function Ft(t,e){null==e&&(e=1);var r=[],n=r.forEach;return function t(e,i){n.call(e,(function(e){i>0&&Array.isArray(e)?t(e,i-1):r.push(e)}))}(t,e),r}function Dt(t){return e=function(t){var e=0;function r(){return t[e++]<<8|t[e++]}for(var n=r(),i=1,o=[0,1],s=1;s<n;s++)o.push(i+=r());var a=r(),u=e;e+=a;var c=0,f=0;function h(){return 0==c&&(f=f<<8|t[e++],c=8),f>>--c&1}for(var l=Math.pow(2,31),d=l>>>1,p=d>>1,m=l-1,v=0,g=0;g<31;g++)v=v<<1|h();for(var b=[],w=0,y=l;;){for(var A=Math.floor(((v-w+1)*i-1)/y),E=0,k=n;k-E>1;){var x=E+k>>>1;A<o[x]?k=x:E=x}if(0==E)break;b.push(E);for(var N=w+Math.floor(y*o[E]/i),_=w+Math.floor(y*o[E+1]/i)-1;0==((N^_)&d);)v=v<<1&m|h(),N=N<<1&m,_=_<<1&m|1;for(;N&~_&p;)v=v&d|v<<1&m>>>1|h(),N=N<<1^d,_=(_^d)<<1|d|1;w=N,y=1+_-N}var T=n-4;return b.map((function(e){switch(e-T){case 3:return T+65792+(t[u++]<<16|t[u++]<<8|t[u++]);case 2:return T+256+(t[u++]<<8|t[u++]);case 1:return T+t[u++];default:return e-1}}))}(t),r=0,function(){return e[r++]};var e,r}function Lt(t){return 1&t?~t>>1:t>>1}function Ut(t,e){for(var r=Array(t),n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function Gt(t,e){for(var r=Array(t),n=0,i=0;n<t;n++)r[n]=i+=Lt(e());return r}function zt(t,e){for(var r=Ut(t(),t),n=t(),i=Ut(n,t),o=function(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=1+e();return r}(n,t),s=0;s<n;s++)for(var a=0;a<o[s];a++)r.push(i[s]+a);return e?r.map((function(t){return e[t]})):r}function Ht(t,e,r){for(var n=Array(t).fill(void 0).map((function(){return[]})),i=0;i<e;i++)Gt(t,r).forEach((function(t,e){return n[e].push(t)}));return n}function qt(t,e){var r=1+e(),n=e(),i=function(t){for(var e=[];;){var r=t();if(0==r)break;e.push(r)}return e}(e);return Ft(Ht(i.length,1+t,e).map((function(t,e){var o=t[0],s=t.slice(1);return Array(i[e]).fill(void 0).map((function(t,e){var i=e*n;return[o+e*r,s.map((function(t){return t+i}))]}))})))}function jt(t,e){return Ht(1+e(),1+t,e).map((function(t){return[t[0],t.slice(1)]}))}var Kt,Wt,Vt=Dt(Bt("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),Jt=new Set(zt(Vt)),Qt=new Set(zt(Vt)),Yt=function(t){for(var e=[];;){var r=t();if(0==r)break;e.push(qt(r,t))}for(;;){var n=t()-1;if(n<0)break;e.push(jt(n,t))}return function(t){for(var e={},r=0;r<t.length;r++){var n=t[r];e[n[0]]=n[1]}return e}(Ft(e))}(Vt),Xt=(Wt=zt(Kt=Vt).sort((function(t,e){return t-e})),function t(){for(var e=[];;){var r=zt(Kt,Wt);if(0==r.length)break;e.push({set:new Set(r),node:t()})}e.sort((function(t,e){return e.set.size-t.set.size}));var n=Kt();return{branches:e,valid:n%3,fe0f:!!(1&(n=n/3|0)),save:1==(n>>=1),check:2==n}}());function Zt(t){return e=t,void 0===r&&(r=pt.current),Tt(St(e,r));var e,r}function $t(t){return t.filter((function(t){return 65039!=t}))}function te(t){for(var e,r=n(t.split("."));!(e=r()).done;){var i=e.value,o=Zt(i);try{for(var s=o.lastIndexOf(95)-1;s>=0;s--)if(95!==o[s])throw new Error("underscore only allowed at start");if(o.length>=4&&o.every((function(t){return t<128}))&&45===o[2]&&45===o[3])throw new Error("invalid label extension")}catch(t){throw new Error('Invalid label "'+i+'": '+t.message)}}return t}function ee(t){return te(function(t,e){var r=Zt(t).reverse(),n=[];for(;r.length;){var i=re(r);if(i)n.push.apply(n,e(i));else{var o=r.pop();if(Jt.has(o))n.push(o);else if(!Qt.has(o)){var s=Yt[o];if(!s)throw new Error("Disallowed codepoint: 0x"+o.toString(16).toUpperCase());n.push.apply(n,s)}}}return te(function(t){return t.normalize("NFC")}(String.fromCodePoint.apply(String,n)))}(t,$t))}function re(t,e){var r,n,i,o=Xt,s=[],a=t.length;e&&(e.length=0);for(var u=function(){var u=t[--a];if(!(o=null===(r=o.branches.find((function(t){return t.set.has(u)})))||void 0===r?void 0:r.node))return 0;if(o.save)i=u;else if(o.check&&u===i)return 0;s.push(u),o.fe0f&&(s.push(65039),a>0&&65039==t[a-1]&&a--),o.valid&&(n=s.slice(),2==o.valid&&n.splice(1,1),e&&e.push.apply(e,t.slice(a).reverse()),t.length=a)};a&&0!==u(););return n}var ne=new x(Mt),ie=new Uint8Array(32);function oe(t){if(0===t.length)throw new Error("invalid ENS name; empty component");return t}function se(t){var e=St(ee(t)),r=[];if(0===t.length)return r;for(var n=0,i=0;i<e.length;i++){46===e[i]&&(r.push(oe(e.slice(n,i))),n=i+1)}if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(oe(e.slice(n))),r}function ae(t){"string"!=typeof t&&ne.throwArgumentError("invalid ENS name; not a string","name",t);for(var e=ie,r=se(t);r.length;)e=j(P([e,j(r.pop())]));return F(e)}ie.fill(0);var ue=new x("rlp/5.7.0");function ce(t){for(var e=[];t;)e.unshift(255&t),t>>=8;return e}function fe(t,e,r){for(var n=0,i=0;i<r;i++)n=256*n+t[e+i];return n}function he(t){if(Array.isArray(t)){var e=[];if(t.forEach((function(t){e=e.concat(he(t))})),e.length<=55)return e.unshift(192+e.length),e;var r=ce(e.length);return r.unshift(247+r.length),r.concat(e)}S(t)||ue.throwArgumentError("RLP object must be BytesLike","object",t);var n=Array.prototype.slice.call(R(t));if(1===n.length&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;var i=ce(n.length);return i.unshift(183+i.length),i.concat(n)}function le(t){return F(he(t))}function de(t,e,r,n){for(var i=[];r<e+1+n;){var o=pe(t,r);i.push(o.result),(r+=o.consumed)>e+1+n&&ue.throwError("child data too short",x.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function pe(t,e){if(0===t.length&&ue.throwError("data too short",x.errors.BUFFER_OVERRUN,{}),t[e]>=248){var r=t[e]-247;e+1+r>t.length&&ue.throwError("data short segment too short",x.errors.BUFFER_OVERRUN,{});var n=fe(t,e+1,r);return e+1+r+n>t.length&&ue.throwError("data long segment too short",x.errors.BUFFER_OVERRUN,{}),de(t,e,e+1+r,r+n)}if(t[e]>=192){var i=t[e]-192;return e+1+i>t.length&&ue.throwError("data array too short",x.errors.BUFFER_OVERRUN,{}),de(t,e,e+1,i)}if(t[e]>=184){var o=t[e]-183;e+1+o>t.length&&ue.throwError("data array too short",x.errors.BUFFER_OVERRUN,{});var s=fe(t,e+1,o);return e+1+o+s>t.length&&ue.throwError("data array too short",x.errors.BUFFER_OVERRUN,{}),{consumed:1+o+s,result:F(t.slice(e+1+o,e+1+o+s))}}if(t[e]>=128){var a=t[e]-128;return e+1+a>t.length&&ue.throwError("data too short",x.errors.BUFFER_OVERRUN,{}),{consumed:1+a,result:F(t.slice(e+1,e+1+a))}}return{consumed:1,result:F(t[e])}}function me(t){var e=R(t),r=pe(e,0);return r.consumed!==e.length&&ue.throwArgumentError("invalid rlp data","data",t),r.result}var ve=new x("address/5.7.0");function ge(t){B(t,20)||ve.throwArgumentError("invalid address","address",t);for(var e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=e[n].charCodeAt(0);for(var i=R(j(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(e[o]=e[o].toUpperCase()),(15&i[o>>1])>=8&&(e[o+1]=e[o+1].toUpperCase());return"0x"+e.join("")}for(var be={},we=0;we<10;we++)be[String(we)]=String(we);for(var ye=0;ye<26;ye++)be[String.fromCharCode(65+ye)]=String(10+ye);var Ae=Math.floor(function(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}(9007199254740991));function Ee(t){var e,r=null;if("string"!=typeof t&&ve.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),r=ge(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==t&&ve.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==function(t){for(var e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((function(t){return be[t]})).join("");e.length>=Ae;){var r=e.substring(0,Ae);e=parseInt(r,10)%97+e.substring(r.length)}for(var n=String(98-parseInt(e,10)%97);n.length<2;)n="0"+n;return n}(t)&&ve.throwArgumentError("bad icap checksum","address",t),e=t.substring(4),r=new Q(e,36).toString(16);r.length<40;)r="0"+r;r=ge("0x"+r)}else ve.throwArgumentError("invalid address","address",t);return r}var ke=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},xe=new x("properties/5.7.0");function Ne(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function _e(t,e){for(var r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||"object"!=typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function Te(t){return ke(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t).map((function(e){var r=t[e];return Promise.resolve(r).then((function(t){return{key:e,value:t}}))})),e.next=3,Promise.all(n);case 3:return i=e.sent,e.abrupt("return",i.reduce((function(t,e){return t[e.key]=e.value,t}),{}));case 5:case"end":return e.stop()}}),e)})))}function Se(t){var e={};for(var r in t)e[r]=t[r];return e}var Ie={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Ce(t){if(null==t||Ie[typeof t])return!0;if(Array.isArray(t)||"object"==typeof t){if(!Object.isFrozen(t))return!1;for(var e=Object.keys(t),r=0;r<e.length;r++){var n=null;try{n=t[e[r]]}catch(t){continue}if(!Ce(n))return!1}return!0}return xe.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Re(t){if(Ce(t))return t;if(Array.isArray(t))return Object.freeze(t.map((function(t){return Pe(t)})));if("object"==typeof t){var e={};for(var r in t){var n=t[r];void 0!==n&&Ne(e,r,Pe(n))}return e}return xe.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Pe(t){return Re(t)}var Me=function(t){for(var e in t)this[e]=Pe(t[e])},Be=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Oe=new x(Mt),Fe=new Uint8Array(32);Fe.fill(0);var De=tt.from(-1),Le=tt.from(0),Ue=tt.from(1),Ge=tt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var ze=H(Ue.toHexString(),32),He=H(Le.toHexString(),32),qe={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},je=["name","version","chainId","verifyingContract","salt"];function Ke(t){return function(e){return"string"!=typeof e&&Oe.throwArgumentError("invalid domain value for "+JSON.stringify(t),"domain."+t,e),e}}var We={name:Ke("name"),version:Ke("version"),chainId:function(t){try{return tt.from(t).toString()}catch(t){}return Oe.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Ee(t).toLowerCase()}catch(t){}return Oe.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{var e=R(t);if(32!==e.length)throw new Error("bad length");return F(e)}catch(t){}return Oe.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Ve(t){var e=t.match(/^(u?)int(\d*)$/);if(e){var r=""===e[1],n=parseInt(e[2]||"256");(n%8!=0||n>256||e[2]&&e[2]!==String(n))&&Oe.throwArgumentError("invalid numeric width","type",t);var i=Ge.mask(r?n-1:n),o=r?i.add(Ue).mul(De):Le;return function(e){var r=tt.from(e);return(r.lt(o)||r.gt(i))&&Oe.throwArgumentError("value out-of-bounds for "+t,"value",e),H(r.toTwos(256).toHexString(),32)}}var s=t.match(/^bytes(\d+)$/);if(s){var a=parseInt(s[1]);return(0===a||a>32||s[1]!==String(a))&&Oe.throwArgumentError("invalid bytes width","type",t),function(e){return R(e).length!==a&&Oe.throwArgumentError("invalid length for "+t,"value",e),function(t){var e=R(t),r=e.length%32;return r?U([e,Fe.slice(r)]):F(e)}(e)}}switch(t){case"address":return function(t){return H(Ee(t),32)};case"bool":return function(t){return t?ze:He};case"bytes":return function(t){return j(t)};case"string":return function(t){return Pt(t)}}return null}function Je(t,e){return t+"("+e.map((function(t){var e=t.name;return t.type+" "+e})).join(",")+")"}var Qe=function(){function t(t){Ne(this,"types",Object.freeze(Pe(t))),Ne(this,"_encoderCache",{}),Ne(this,"_types",{});var e={},r={},n={};Object.keys(t).forEach((function(t){e[t]={},r[t]=[],n[t]={}}));var i=function(n){var i={};t[n].forEach((function(o){i[o.name]&&Oe.throwArgumentError("duplicate variable name "+JSON.stringify(o.name)+" in "+JSON.stringify(n),"types",t),i[o.name]=!0;var s=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===n&&Oe.throwArgumentError("circular type reference to "+JSON.stringify(s),"types",t),Ve(s)||(r[s]||Oe.throwArgumentError("unknown type "+JSON.stringify(s),"types",t),r[s].push(n),e[n][s]=!0)}))};for(var o in t)i(o);var s=Object.keys(r).filter((function(t){return 0===r[t].length}));for(var a in 0===s.length?Oe.throwArgumentError("missing primary type","types",t):s.length>1&&Oe.throwArgumentError("ambiguous primary types or unused types: "+s.map((function(t){return JSON.stringify(t)})).join(", "),"types",t),Ne(this,"primaryType",s[0]),function i(o,s){s[o]&&Oe.throwArgumentError("circular type reference to "+JSON.stringify(o),"types",t),s[o]=!0,Object.keys(e[o]).forEach((function(t){r[t]&&(i(t,s),Object.keys(s).forEach((function(e){n[e][t]=!0})))})),delete s[o]}(this.primaryType,{}),n){var u=Object.keys(n[a]);u.sort(),this._types[a]=Je(a,t[a])+u.map((function(e){return Je(e,t[e])})).join("")}}var e=t.prototype;return e.getEncoder=function(t){var e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e},e._getEncoder=function(t){var e=this,r=Ve(t);if(r)return r;var n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){var i=n[1],o=this.getEncoder(i),s=parseInt(n[3]);return function(t){s>=0&&t.length!==s&&Oe.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);var r=t.map(o);return e._types[i]&&(r=r.map(j)),j(U(r))}}var a=this.types[t];if(a){var u=Pt(this._types[t]);return function(t){var r=a.map((function(r){var n=r.name,i=r.type,o=e.getEncoder(i)(t[n]);return e._types[i]?j(o):o}));return r.unshift(u),U(r)}}return Oe.throwArgumentError("unknown type: "+t,"type",t)},e.encodeType=function(t){var e=this._types[t];return e||Oe.throwArgumentError("unknown type: "+JSON.stringify(t),"name",t),e},e.encodeData=function(t,e){return this.getEncoder(t)(e)},e.hashStruct=function(t,e){return j(this.encodeData(t,e))},e.encode=function(t){return this.encodeData(this.primaryType,t)},e.hash=function(t){return this.hashStruct(this.primaryType,t)},e._visit=function(t,e,r){var n=this;if(Ve(t))return r(t,e);var i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],s=parseInt(i[3]);return s>=0&&e.length!==s&&Oe.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((function(t){return n._visit(o,t,r)}))}var a=this.types[t];return a?a.reduce((function(t,i){var o=i.name,s=i.type;return t[o]=n._visit(s,e[o],r),t}),{}):Oe.throwArgumentError("unknown type: "+t,"type",t)},e.visit=function(t,e){return this._visit(this.primaryType,t,e)},t.from=function(e){return new t(e)},t.getPrimaryType=function(e){return t.from(e).primaryType},t.hashStruct=function(e,r,n){return t.from(r).hashStruct(e,n)},t.hashDomain=function(e){var r=[];for(var n in e){var i=qe[n];i||Oe.throwArgumentError("invalid typed-data domain key: "+JSON.stringify(n),"domain",e),r.push({name:n,type:i})}return r.sort((function(t,e){return je.indexOf(t.name)-je.indexOf(e.name)})),t.hashStruct("EIP712Domain",{EIP712Domain:r},e)},t.encode=function(e,r,n){return U(["0x1901",t.hashDomain(e),t.from(r).hash(n)])},t.hash=function(e,r,n){return j(t.encode(e,r,n))},t.resolveNames=function(e,n,i,o){return Be(this,void 0,void 0,r().mark((function s(){var a,u,c;return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=Se(e),a={},e.verifyingContract&&!B(e.verifyingContract,20)&&(a[e.verifyingContract]="0x"),(u=t.from(n)).visit(i,(function(t,e){return"address"!==t||B(e,20)||(a[e]="0x"),e})),s.t0=r().keys(a);case 6:if((s.t1=s.t0()).done){s.next=13;break}return c=s.t1.value,s.next=10,o(c);case 10:a[c]=s.sent,s.next=6;break;case 13:return e.verifyingContract&&a[e.verifyingContract]&&(e.verifyingContract=a[e.verifyingContract]),i=u.visit(i,(function(t,e){return"address"===t&&a[e]?a[e]:e})),s.abrupt("return",{domain:e,value:i});case 16:case"end":return s.stop()}}),s)})))},t.getPayload=function(e,r,n){t.hashDomain(e);var i={},o=[];je.forEach((function(t){var r=e[t];null!=r&&(i[t]=We[t](r),o.push({name:t,type:qe[t]}))}));var s=t.from(r),a=Se(r);return a.EIP712Domain?Oe.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=o,s.encode(n),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(n,(function(t,e){if(t.match(/^bytes(\d*)/))return F(R(e));if(t.match(/^u?int/))return tt.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!=typeof e&&Oe.throwArgumentError("invalid string","value",e),e}return Oe.throwArgumentError("unsupported type","type",t)}))}},t}(),Ye=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Xe(t,e){if("string"==typeof e){var r=Ye.indexOf(e);-1!==r&&(e=3*r)}return lt(t,null!=e?e:18)}var Ze="abi/5.7.0",$e=new x(Ze),tr={},er={calldata:!0,memory:!0,storage:!0},rr={calldata:!0,memory:!0};function nr(t,e){if("bytes"===t||"string"===t){if(er[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&rr[e])return!0;return(er[e]||"payable"===e)&&$e.throwArgumentError("invalid modifier","name",e),!1}function ir(t,e){for(var r in e)Ne(t,r,e[r])}var or=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),sr=new RegExp(/^(.*)\[([0-9]*)\]$/),ar=function(){function t(e,r){e!==tr&&$e.throwError("use fromString",x.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),ir(this,r);var n=this.type.match(sr);ir(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:t.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}return t.prototype.format=function(t){if(t||(t=or.sighash),or[t]||$e.throwArgumentError("invalid format type","format",t),t===or.json){var e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((function(e){return JSON.parse(e.format(t))}))),JSON.stringify(e)}var r="";return"array"===this.baseType?(r+=this.arrayChildren.format(t),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==or.sighash&&(r+=this.type),r+="("+this.components.map((function(e){return e.format(t)})).join(t===or.full?", ":",")+")"):r+=this.type,t!==or.sighash&&(!0===this.indexed&&(r+=" indexed"),t===or.full&&this.name&&(r+=" "+this.name)),r},t.from=function(e,r){return"string"==typeof e?t.fromString(e,r):t.fromObject(e)},t.fromObject=function(e){return t.isParamType(e)?e:new t(tr,{name:e.name||null,type:ur(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(t.fromObject):null})},t.fromString=function(e,r){return n=function(t,e){var r=t;function n(e){$e.throwArgumentError("unexpected character at position "+e,"param",t)}function i(t){var r={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(r.indexed=!1),r}t=t.replace(/\s/g," ");for(var o={type:"",name:"",state:{allowType:!0}},s=o,a=0;a<t.length;a++){var u=t[a];switch(u){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(a),s.state.allowType=!1,s.type=ur(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(e||n(a),s.indexed=!0,s.name=""),nr(s.type,s.name)&&(s.name=""),s.type=ur(s.type);var c=s;(s=s.parent)||n(a),delete c.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(e||n(a),s.indexed=!0,s.name=""),nr(s.type,s.name)&&(s.name=""),s.type=ur(s.type);var f=i(s.parent);s.parent.components.push(f),delete s.parent,s=f;break;case" ":s.state.allowType&&""!==s.type&&(s.type=ur(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(e||n(a),s.indexed&&n(a),s.indexed=!0,s.name=""):nr(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(a),s.type+=u,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(a),s.type+=u,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=u,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=u,delete s.state.allowArray):s.state.readArray?s.type+=u:n(a)}}return s.parent&&$e.throwArgumentError("unexpected eof","param",t),delete o.state,"indexed"===s.name?(e||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):nr(s.type,s.name)&&(s.name=""),o.type=ur(o.type),o}(e,!!r),t.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n},t.isParamType=function(t){return!(null==t||!t._isParamType)},t}();function ur(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}var cr=new x(Ze),fr=function(){function t(t,e,r,n){this.name=t,this.type=e,this.localName=r,this.dynamic=n}return t.prototype._throwError=function(t,e){cr.throwArgumentError(t,this.localName,e)},t}(),hr=function(){function t(t){Ne(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}var e=t.prototype;return e._writeData=function(t){return this._data.push(t),this._dataLength+=t.length,t.length},e.appendWriter=function(t){return this._writeData(P(t._data))},e.writeBytes=function(t){var e=R(t),r=e.length%this.wordSize;return r&&(e=P([e,this._padding.slice(r)])),this._writeData(e)},e._getValue=function(t){var e=R(tt.from(t));return e.length>this.wordSize&&cr.throwError("value out-of-bounds",x.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=P([this._padding.slice(e.length%this.wordSize),e])),e},e.writeValue=function(t){return this._writeData(this._getValue(t))},e.writeUpdatableValue=function(){var t=this,e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,function(r){t._data[e]=t._getValue(r)}},i(t,[{key:"data",get:function(){return U(this._data)}},{key:"length",get:function(){return this._dataLength}}]),t}(),lr=function(){function t(t,e,r,n){Ne(this,"_data",R(t)),Ne(this,"wordSize",e||32),Ne(this,"_coerceFunc",r),Ne(this,"allowLoose",n),this._offset=0}t.coerce=function(t,e){var r=t.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(e=e.toNumber()),e};var e=t.prototype;return e.coerce=function(e,r){return this._coerceFunc?this._coerceFunc(e,r):t.coerce(e,r)},e._peekBytes=function(t,e,r){var n=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+e<=this._data.length?n=e:cr.throwError("data out-of-bounds",x.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)},e.subReader=function(e){return new t(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)},e.readBytes=function(t,e){var r=this._peekBytes(0,t,!!e);return this._offset+=r.length,r.slice(0,t)},e.readValue=function(){return tt.from(this.readBytes(this.wordSize))},i(t,[{key:"data",get:function(){return F(this._data)}},{key:"consumed",get:function(){return this._offset}}]),t}(),dr=function(t){function r(e){return t.call(this,"address","address",e,!1)||this}e(r,t);var n=r.prototype;return n.defaultValue=function(){return"0x0000000000000000000000000000000000000000"},n.encode=function(t,e){try{e=Ee(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)},n.decode=function(t){return Ee(H(t.readValue().toHexString(),20))},r}(fr),pr=function(t){function r(e){var r;return(r=t.call(this,e.name,e.type,void 0,e.dynamic)||this).coder=e,r}e(r,t);var n=r.prototype;return n.defaultValue=function(){return this.coder.defaultValue()},n.encode=function(t,e){return this.coder.encode(t,e)},n.decode=function(t){return this.coder.decode(t)},r}(fr),mr=new x(Ze);function vr(t,e,r){var n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){var i={};n=e.map((function(t){var e=t.localName;return e||mr.throwError("cannot encode object for signature with missing names",x.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),i[e]&&mr.throwError("cannot encode object for signature with duplicate names",x.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),i[e]=!0,r[e]}))}else mr.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&mr.throwArgumentError("types/value length mismatch","tuple",r);var o=new hr(t.wordSize),s=new hr(t.wordSize),a=[];e.forEach((function(t,e){var r=n[e];if(t.dynamic){var i=s.length;t.encode(s,r);var u=o.writeUpdatableValue();a.push((function(t){u(t+i)}))}else t.encode(o,r)})),a.forEach((function(t){t(o.length)}));var u=t.appendWriter(o);return u+=t.appendWriter(s)}function gr(t,e){var r=[],n=t.subReader(0);e.forEach((function(e){var i=null;if(e.dynamic){var o=t.readValue(),s=n.subReader(o.toNumber());try{i=e.decode(s)}catch(t){if(t.code===x.errors.BUFFER_OVERRUN)throw t;(i=t).baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(t.code===x.errors.BUFFER_OVERRUN)throw t;(i=t).baseType=e.name,i.name=e.localName,i.type=e.type}null!=i&&r.push(i)}));var i=e.reduce((function(t,e){var r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});e.forEach((function(t,e){var n=t.localName;if(n&&1===i[n]&&("length"===n&&(n="_length"),null==r[n])){var o=r[e];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:function(){throw o}}):r[n]=o}}));for(var o=function(){var t=r[s];t instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:function(){throw t}})},s=0;s<r.length;s++)o();return Object.freeze(r)}var br,wr,yr,Ar,Er=function(t){function r(e,r,n){var i,o=e.type+"["+(r>=0?r:"")+"]",s=-1===r||e.dynamic;return(i=t.call(this,"array",o,n,s)||this).coder=e,i.length=r,i}e(r,t);var n=r.prototype;return n.defaultValue=function(){for(var t=this.coder.defaultValue(),e=[],r=0;r<this.length;r++)e.push(t);return e},n.encode=function(t,e){Array.isArray(e)||this._throwError("expected array value",e);var r=this.length;-1===r&&(r=e.length,t.writeValue(e.length)),mr.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));for(var n=[],i=0;i<e.length;i++)n.push(this.coder);return vr(t,n,e)},n.decode=function(t){var e=this.length;-1===e&&32*(e=t.readValue().toNumber())>t._data.length&&mr.throwError("insufficient data length",x.errors.BUFFER_OVERRUN,{length:t._data.length,count:e});for(var r=[],n=0;n<e;n++)r.push(new pr(this.coder));return t.coerce(this.name,gr(t,r))},r}(fr),kr=function(t){function r(e){return t.call(this,"bool","bool",e,!1)||this}e(r,t);var n=r.prototype;return n.defaultValue=function(){return!1},n.encode=function(t,e){return t.writeValue(e?1:0)},n.decode=function(t){return t.coerce(this.type,!t.readValue().isZero())},r}(fr),xr=function(t){function r(e,r){return t.call(this,e,e,r,!0)||this}e(r,t);var n=r.prototype;return n.defaultValue=function(){return"0x"},n.encode=function(t,e){e=R(e);var r=t.writeValue(e.length);return r+=t.writeBytes(e)},n.decode=function(t){return t.readBytes(t.readValue().toNumber(),!0)},r}(fr),Nr=function(t){function r(e){return t.call(this,"bytes",e)||this}return e(r,t),r.prototype.decode=function(e){return e.coerce(this.name,F(t.prototype.decode.call(this,e)))},r}(xr),_r=function(t){function r(e,r){var n,i="bytes"+String(e);return(n=t.call(this,i,i,r,!1)||this).size=e,n}e(r,t);var n=r.prototype;return n.defaultValue=function(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)},n.encode=function(t,e){var r=R(e);return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)},n.decode=function(t){return t.coerce(this.name,F(t.readBytes(this.size)))},r}(fr),Tr=function(t){function r(e){return t.call(this,"null","",e,!1)||this}e(r,t);var n=r.prototype;return n.defaultValue=function(){return null},n.encode=function(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])},n.decode=function(t){return t.readBytes(0),t.coerce(this.name,null)},r}(fr),Sr=function(t){function r(e,r,n){var i,o=(r?"int":"uint")+8*e;return(i=t.call(this,o,o,n,!1)||this).size=e,i.signed=r,i}e(r,t);var n=r.prototype;return n.defaultValue=function(){return 0},n.encode=function(t,e){var r=tt.from(e),n=kt.mask(8*t.wordSize);if(this.signed){var i=n.mask(8*this.size-1);(r.gt(i)||r.lt(i.add(Et).mul(yt)))&&this._throwError("value out-of-bounds",e)}else(r.lt(At)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(r)},n.decode=function(t){var e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)},r}(fr),Ir=function(t){function r(e){return t.call(this,"string",e)||this}e(r,t);var n=r.prototype;return n.defaultValue=function(){return""},n.encode=function(e,r){return t.prototype.encode.call(this,e,St(r))},n.decode=function(e){return It(t.prototype.decode.call(this,e))},r}(xr),Cr=function(t){function r(e,r){var n,i=!1,o=[];e.forEach((function(t){t.dynamic&&(i=!0),o.push(t.type)}));var s="tuple("+o.join(",")+")";return(n=t.call(this,"tuple",s,r,i)||this).coders=e,n}e(r,t);var n=r.prototype;return n.defaultValue=function(){var t=[];this.coders.forEach((function(e){t.push(e.defaultValue())}));var e=this.coders.reduce((function(t,e){var r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach((function(r,n){var i=r.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[n]))})),Object.freeze(t)},n.encode=function(t,e){return vr(t,this.coders,e)},n.decode=function(t){return t.coerce(this.name,gr(t,this.coders))},r}(fr),Rr=new x(Ze),Pr=new RegExp(/^bytes([0-9]*)$/),Mr=new RegExp(/^(u?int)([0-9]*)$/);function Br(t,e){e||(e=function(t){return[parseInt(t,16)]});var r=0,n={};return t.split(",").forEach((function(t){var i=t.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])})),n}function Or(t){var e=0;return t.split(",").map((function(t){var r=t.split("-");return 1===r.length?r[1]="0":""===r[1]&&(r[1]="1"),{l:e+parseInt(r[0],16),h:e=parseInt(r[1],16)}}))}new(function(){function t(t){Ne(this,"coerceFunc",t||null)}var e=t.prototype;return e._getCoder=function(t){var e=this;switch(t.baseType){case"address":return new dr(t.name);case"bool":return new kr(t.name);case"string":return new Ir(t.name);case"bytes":return new Nr(t.name);case"array":return new Er(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new Cr((t.components||[]).map((function(t){return e._getCoder(t)})),t.name);case"":return new Tr(t.name)}var r=t.type.match(Mr);if(r){var n=parseInt(r[2]||"256");return(0===n||n>256||n%8!=0)&&Rr.throwArgumentError("invalid "+r[1]+" bit length","param",t),new Sr(n/8,"int"===r[1],t.name)}if(r=t.type.match(Pr)){var i=parseInt(r[1]);return(0===i||i>32)&&Rr.throwArgumentError("invalid bytes length","param",t),new _r(i,t.name)}return Rr.throwArgumentError("invalid type","type",t.type)},e._getWordSize=function(){return 32},e._getReader=function(t,e){return new lr(t,this._getWordSize(),this.coerceFunc,e)},e._getWriter=function(){return new hr(this._getWordSize())},e.getDefaultValue=function(t){var e=this,r=t.map((function(t){return e._getCoder(ar.from(t))}));return new Cr(r,"_").defaultValue()},e.encode=function(t,e){var r=this;t.length!==e.length&&Rr.throwError("types/values length mismatch",x.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});var n=t.map((function(t){return r._getCoder(ar.from(t))})),i=new Cr(n,"_"),o=this._getWriter();return i.encode(o,e),o.data},e.decode=function(t,e,r){var n=this,i=t.map((function(t){return n._getCoder(ar.from(t))}));return new Cr(i,"_").decode(this._getReader(R(e),r))},t}()),function(){try{var t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(e){try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}}(),function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(br||(br={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"}(wr||(wr={})),function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(yr||(yr={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(Ar||(Ar={})),Or("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Br("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Br("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Br("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!=0)throw new Error("bad data");for(var e=[],r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e})),Or("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");var Fr={exports:{}},Dr=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},Lr=Dr,Ur=Object.prototype.toString;function Gr(t){return Array.isArray(t)}function zr(t){return void 0===t}function Hr(t){return"[object ArrayBuffer]"===Ur.call(t)}function qr(t){return null!==t&&"object"==typeof t}function jr(t){if("[object Object]"!==Ur.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function Kr(t){return"[object Function]"===Ur.call(t)}function Wr(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),Gr(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var Vr={isArray:Gr,isArrayBuffer:Hr,isBuffer:function(t){return null!==t&&!zr(t)&&null!==t.constructor&&!zr(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"[object FormData]"===Ur.call(t)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Hr(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:qr,isPlainObject:jr,isUndefined:zr,isDate:function(t){return"[object Date]"===Ur.call(t)},isFile:function(t){return"[object File]"===Ur.call(t)},isBlob:function(t){return"[object Blob]"===Ur.call(t)},isFunction:Kr,isStream:function(t){return qr(t)&&Kr(t.pipe)},isURLSearchParams:function(t){return"[object URLSearchParams]"===Ur.call(t)},isStandardBrowserEnv:function(){return!CC_JSB},forEach:Wr,merge:function t(){var e={};function r(r,n){jr(e[n])&&jr(r)?e[n]=t(e[n],r):jr(r)?e[n]=t({},r):Gr(r)?e[n]=r.slice():e[n]=r}for(var n=0,i=arguments.length;n<i;n++)Wr(arguments[n],r);return e},extend:function(t,e,r){return Wr(e,(function(e,n){t[n]=r&&"function"==typeof e?Lr(e,r):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}},Jr=Vr;function Qr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Yr=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(Jr.isURLSearchParams(e))n=e.toString();else{var i=[];Jr.forEach(e,(function(t,e){null!=t&&(Jr.isArray(t)?e+="[]":t=[t],Jr.forEach(t,(function(t){Jr.isDate(t)?t=t.toISOString():Jr.isObject(t)&&(t=JSON.stringify(t)),i.push(Qr(e)+"="+Qr(t))})))})),n=i.join("&")}if(n){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t},Xr=Vr;function Zr(){this.handlers=[]}Zr.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},Zr.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Zr.prototype.forEach=function(t){Xr.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var $r,tn,en,rn,nn,on,sn,an,un,cn,fn,hn,ln,dn,pn,mn,vn,gn,bn,wn,yn=Zr,An=Vr,En=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},kn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};function xn(){if(tn)return $r;tn=1;var t=En;return $r=function(e,r,n,i,o){var s=new Error(e);return t(s,r,n,i,o)}}function Nn(){if(rn)return en;rn=1;var t=xn();return en=function(e,r,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?r(t("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}}function _n(){if(on)return nn;on=1;var t=Vr;return nn=t.isStandardBrowserEnv()?{write:function(e,r,n,i,o,s){var a=[];a.push(e+"="+encodeURIComponent(r)),t.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),t.isString(i)&&a.push("path="+i),t.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}function Tn(){return an?sn:(an=1,sn=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)})}function Sn(){return cn?un:(cn=1,un=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t})}function In(){if(hn)return fn;hn=1;var t=Tn(),e=Sn();return fn=function(r,n){return r&&!t(n)?e(r,n):n}}function Cn(){if(dn)return ln;dn=1;var t=Vr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ln=function(r){var n,i,o,s={};return r?(t.forEach(r.split("\n"),(function(r){if(o=r.indexOf(":"),n=t.trim(r.substr(0,o)).toLowerCase(),i=t.trim(r.substr(o+1)),n){if(s[n]&&e.indexOf(n)>=0)return;s[n]="set-cookie"===n?(s[n]?s[n]:[]).concat([i]):s[n]?s[n]+", "+i:i}})),s):s}}function Rn(){if(mn)return pn;mn=1;var t=Vr;return pn=t.isStandardBrowserEnv()?function(){var e,r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var e=t;return r&&(n.setAttribute("href",e),e=n.href),n.setAttribute("href",e),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(r){var n=t.isString(r)?i(r):r;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}}function Pn(){if(gn)return vn;function t(t){this.message=t}return gn=1,t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,vn=t}function Mn(){if(wn)return bn;wn=1;var t=Vr,e=Nn(),r=_n(),n=Yr,i=In(),o=Cn(),s=Rn(),a=xn(),u=kn,c=Pn();return bn=function(f){return new Promise((function(h,l){var d,p=f.data,m=f.headers,v=f.responseType;function g(){f.cancelToken&&f.cancelToken.unsubscribe(d),f.signal&&f.signal.removeEventListener("abort",d)}t.isFormData(p)&&delete m["Content-Type"];var b=new XMLHttpRequest;if(f.auth){var w=f.auth.username||"",y=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";m.Authorization="Basic "+btoa(w+":"+y)}var A=i(f.baseURL,f.url);function E(){if(b){var t="getAllResponseHeaders"in b?o(b.getAllResponseHeaders()):null,r={data:v&&"text"!==v&&"json"!==v?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:t,config:f,request:b};e((function(t){h(t),g()}),(function(t){l(t),g()}),r),b=null}}if(b.open(f.method.toUpperCase(),n(A,f.params,f.paramsSerializer),!0),b.timeout=f.timeout,"onloadend"in b?b.onloadend=E:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(E)},b.onabort=function(){b&&(l(a("Request aborted",f,"ECONNABORTED",b)),b=null)},b.onerror=function(){l(a("Network Error",f,null,b)),b=null},b.ontimeout=function(){var t=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",e=f.transitional||u;f.timeoutErrorMessage&&(t=f.timeoutErrorMessage),l(a(t,f,e.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},t.isStandardBrowserEnv()){var k=(f.withCredentials||s(A))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;k&&(m[f.xsrfHeaderName]=k)}"setRequestHeader"in b&&t.forEach(m,(function(t,e){void 0===p&&"content-type"===e.toLowerCase()?delete m[e]:b.setRequestHeader(e,t)})),t.isUndefined(f.withCredentials)||(b.withCredentials=!!f.withCredentials),v&&"json"!==v&&(b.responseType=f.responseType),"function"==typeof f.onDownloadProgress&&b.addEventListener("progress",f.onDownloadProgress),"function"==typeof f.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(d=function(t){b&&(l(!t||t&&t.type?new c("canceled"):t),b.abort(),b=null)},f.cancelToken&&f.cancelToken.subscribe(d),f.signal&&(f.signal.aborted?d():f.signal.addEventListener("abort",d))),p||(p=null),b.send(p)}))}}var Bn=Vr,On=function(t,e){An.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))},Fn=En,Dn={"Content-Type":"application/x-www-form-urlencoded"};function Ln(t,e){!Bn.isUndefined(t)&&Bn.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var Un,Gn={transitional:kn,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Un=Mn()),Un),transformRequest:[function(t,e){return On(e,"Accept"),On(e,"Content-Type"),Bn.isFormData(t)||Bn.isArrayBuffer(t)||Bn.isBuffer(t)||Bn.isStream(t)||Bn.isFile(t)||Bn.isBlob(t)?t:Bn.isArrayBufferView(t)?t.buffer:Bn.isURLSearchParams(t)?(Ln(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Bn.isObject(t)||e&&"application/json"===e["Content-Type"]?(Ln(e,"application/json"),function(t,e,r){if(Bn.isString(t))try{return(e||JSON.parse)(t),Bn.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||Gn.transitional,r=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||n&&Bn.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(i){if("SyntaxError"===t.name)throw Fn(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Bn.forEach(["delete","get","head"],(function(t){Gn.headers[t]={}})),Bn.forEach(["post","put","patch"],(function(t){Gn.headers[t]=Bn.merge(Dn)}));var zn,Hn,qn=Gn,jn=Vr,Kn=qn;function Wn(){return Hn?zn:(Hn=1,zn=function(t){return!(!t||!t.__CANCEL__)})}var Vn=Vr,Jn=function(t,e,r){var n=this||Kn;return jn.forEach(r,(function(r){t=r.call(n,t,e)})),t},Qn=Wn(),Yn=qn,Xn=Pn();function Zn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xn("canceled")}var $n,ti,ei=Vr,ri=function(t,e){e=e||{};var r={};function n(t,e){return ei.isPlainObject(t)&&ei.isPlainObject(e)?ei.merge(t,e):ei.isPlainObject(e)?ei.merge({},e):ei.isArray(e)?e.slice():e}function i(r){return ei.isUndefined(e[r])?ei.isUndefined(t[r])?void 0:n(void 0,t[r]):n(t[r],e[r])}function o(t){if(!ei.isUndefined(e[t]))return n(void 0,e[t])}function s(r){return ei.isUndefined(e[r])?ei.isUndefined(t[r])?void 0:n(void 0,t[r]):n(void 0,e[r])}function a(r){return r in e?n(t[r],e[r]):r in t?n(void 0,t[r]):void 0}var u={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return ei.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=u[t]||i,n=e(t);ei.isUndefined(n)&&e!==a||(r[t]=n)})),r};function ni(){return ti?$n:(ti=1,$n={version:"0.26.1"})}var ii=ni().version,oi={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){oi[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));var si={};oi.transitional=function(t,e,r){function n(t,e){return"[Axios v"+ii+"] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,i,o){if(!1===t)throw new Error(n(i," has been removed"+(e?" in "+e:"")));return e&&!si[i]&&(si[i]=!0,console.warn(n(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,i,o)}};var ai,ui,ci,fi,hi,li,di=Vr,pi=Yr,mi=yn,vi=function(t){return Zn(t),t.headers=t.headers||{},t.data=Jn.call(t,t.data,t.headers,t.transformRequest),t.headers=Vn.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Vn.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||Yn.adapter)(t).then((function(e){return Zn(t),e.data=Jn.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return Qn(e)||(Zn(t),e&&e.response&&(e.response.data=Jn.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},gi=ri,bi={assertOptions:function(t,e,r){if("object"!=typeof t)throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var a=t[o],u=void 0===a||s(a,o,t);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==r)throw Error("Unknown option "+o)}},validators:oi},wi=bi.validators;function yi(t){this.defaults=t,this.interceptors={request:new mi,response:new mi}}yi.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=gi(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;void 0!==r&&bi.assertOptions(r,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var o,s=[];if(this.interceptors.response.forEach((function(t){s.push(t.fulfilled,t.rejected)})),!i){var a=[vi,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var u=e;n.length;){var c=n.shift(),f=n.shift();try{u=c(u)}catch(t){f(t);break}}try{o=vi(u)}catch(t){return Promise.reject(t)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},yi.prototype.getUri=function(t){return t=gi(this.defaults,t),pi(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},di.forEach(["delete","get","head","options"],(function(t){yi.prototype[t]=function(e,r){return this.request(gi(r||{},{method:t,url:e,data:(r||{}).data}))}})),di.forEach(["post","put","patch"],(function(t){yi.prototype[t]=function(e,r,n){return this.request(gi(n||{},{method:t,url:e,data:r}))}}));var Ai=Vr,Ei=Dr,ki=yi,xi=ri;var Ni=function t(e){var r=new ki(e),n=Ei(ki.prototype.request,r);return Ai.extend(n,ki.prototype,r),Ai.extend(n,r),n.create=function(r){return t(xi(e,r))},n}(qn);Ni.Axios=ki,Ni.Cancel=Pn(),Ni.CancelToken=function(){if(ui)return ai;ui=1;var t=Pn();function e(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(t){r=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},e((function(e){n.reason||(n.reason=new t(e),r(n.reason))}))}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},e.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},e.source=function(){var t;return{token:new e((function(e){t=e})),cancel:t}},ai=e}(),Ni.isCancel=Wn(),Ni.VERSION=ni().version,Ni.all=function(t){return Promise.all(t)},Ni.spread=fi?ci:(fi=1,ci=function(t){return function(e){return t.apply(null,e)}}),Ni.isAxiosError=function(){if(li)return hi;li=1;var t=Vr;return hi=function(e){return t.isObject(e)&&!0===e.isAxiosError}}(),Fr.exports=Ni,Fr.exports.default=Ni;var _i=f(Fr.exports),Ti=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Si=new x("abstract-provider/5.7.0"),Ii=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.isForkEvent=function(t){return!(!t||!t._isForkEvent)},r}(Me),Ci=function(){function t(){Si.checkAbstract(this instanceof t?this.constructor:void 0,t),Ne(this,"_isProvider",!0)}var e=t.prototype;return e.getFeeData=function(){return Ti(this,void 0,void 0,r().mark((function t(){var e,n,i,o,s,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((function(t){return null}))});case 2:return e=t.sent,n=e.block,i=e.gasPrice,o=null,s=null,a=null,n&&n.baseFeePerGas&&(o=n.baseFeePerGas,a=tt.from("1500000000"),s=n.baseFeePerGas.mul(2).add(a)),t.abrupt("return",{lastBaseFeePerGas:o,maxFeePerGas:s,maxPriorityFeePerGas:a,gasPrice:i});case 8:case"end":return t.stop()}}),t,this)})))},e.addListener=function(t,e){return this.on(t,e)},e.removeListener=function(t,e){return this.off(t,e)},t.isProvider=function(t){return!(!t||!t._isProvider)},t}(),Ri=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Pi=new x("abstract-signer/5.7.0"),Mi=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Bi=[x.errors.INSUFFICIENT_FUNDS,x.errors.NONCE_EXPIRED,x.errors.REPLACEMENT_UNDERPRICED],Oi=function(){function t(){Pi.checkAbstract(this instanceof t?this.constructor:void 0,t),Ne(this,"_isSigner",!0)}var e=t.prototype;return e.getBalance=function(t){return Ri(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getBalance"),e.next=3,this.provider.getBalance(this.getAddress(),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))},e.getTransactionCount=function(t){return Ri(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getTransactionCount"),e.next=3,this.provider.getTransactionCount(this.getAddress(),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))},e.estimateGas=function(t){return Ri(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("estimateGas"),e.next=3,Te(this.checkTransaction(t));case 3:return n=e.sent,e.next=6,this.provider.estimateGas(n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))},e.call=function(t,e){return Ri(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this._checkProvider("call"),r.next=3,Te(this.checkTransaction(t));case 3:return i=r.sent,r.next=6,this.provider.call(i,e);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),n,this)})))},e.sendTransaction=function(t){return Ri(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("sendTransaction"),e.next=3,this.populateTransaction(t);case 3:return n=e.sent,e.next=6,this.signTransaction(n);case 6:return i=e.sent,e.next=9,this.provider.sendTransaction(i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})))},e.getChainId=function(){return Ri(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getChainId"),t.next=3,this.provider.getNetwork();case 3:return e=t.sent,t.abrupt("return",e.chainId);case 5:case"end":return t.stop()}}),t,this)})))},e.getGasPrice=function(){return Ri(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getGasPrice"),t.next=3,this.provider.getGasPrice();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))},e.getFeeData=function(){return Ri(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getFeeData"),t.next=3,this.provider.getFeeData();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))},e.resolveName=function(t){return Ri(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("resolveName"),e.next=3,this.provider.resolveName(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))},e.checkTransaction=function(t){for(var e in t)-1===Mi.indexOf(e)&&Pi.throwArgumentError("invalid transaction key: "+e,"transaction",t);var r=Se(t);return null==r.from?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then((function(e){return e[0].toLowerCase()!==e[1].toLowerCase()&&Pi.throwArgumentError("from address mismatch","transaction",t),e[0]})),r},e.populateTransaction=function(t){return Ri(this,void 0,void 0,r().mark((function e(){var n,i,o,s,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(this.checkTransaction(t));case 2:if(null!=(n=e.sent).to&&(n.to=Promise.resolve(n.to).then((function(t){return Ri(a,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.resolveName(t);case 4:return null==(n=e.sent)&&Pi.throwArgumentError("provided ENS name resolves to null","tx.to",t),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})))})),n.to.catch((function(t){}))),i=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas,null==n.gasPrice||2!==n.type&&!i?0!==n.type&&1!==n.type||!i||Pi.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):Pi.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas){e.next=10;break}n.type=2,e.next=18;break;case 10:if(0!==n.type&&1!==n.type){e.next=14;break}null==n.gasPrice&&(n.gasPrice=this.getGasPrice()),e.next=18;break;case 14:return e.next=16,this.getFeeData();case 16:o=e.sent,null==n.type?null!=o.maxFeePerGas&&null!=o.maxPriorityFeePerGas?(n.type=2,null!=n.gasPrice?(s=n.gasPrice,delete n.gasPrice,n.maxFeePerGas=s,n.maxPriorityFeePerGas=s):(null==n.maxFeePerGas&&(n.maxFeePerGas=o.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))):null!=o.gasPrice?(i&&Pi.throwError("network does not support EIP-1559",x.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=o.gasPrice),n.type=0):Pi.throwError("failed to get consistent fee data",x.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"}):2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=o.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas));case 18:return null==n.nonce&&(n.nonce=this.getTransactionCount("pending")),null==n.gasLimit&&(n.gasLimit=this.estimateGas(n).catch((function(t){if(Bi.indexOf(t.code)>=0)throw t;return Pi.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",x.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:n})}))),null==n.chainId?n.chainId=this.getChainId():n.chainId=Promise.all([Promise.resolve(n.chainId),this.getChainId()]).then((function(e){return 0!==e[1]&&e[0]!==e[1]&&Pi.throwArgumentError("chainId address mismatch","transaction",t),e[0]})),e.next=23,Te(n);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,this)})))},e._checkProvider=function(t){this.provider||Pi.throwError("missing provider",x.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})},t.isSigner=function(t){return!(!t||!t._isSigner)},t}(),Fi=function(){function t(t){Ne(this,"alphabet",t),Ne(this,"base",t.length),Ne(this,"_alphabetMap",{}),Ne(this,"_leader",t.charAt(0));for(var e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}var e=t.prototype;return e.encode=function(t){var e=R(t);if(0===e.length)return"";for(var r=[0],n=0;n<e.length;++n){for(var i=e[n],o=0;o<r.length;++o)i+=r[o]<<8,r[o]=i%this.base,i=i/this.base|0;for(;i>0;)r.push(i%this.base),i=i/this.base|0}for(var s="",a=0;0===e[a]&&a<e.length-1;++a)s+=this._leader;for(var u=r.length-1;u>=0;--u)s+=this.alphabet[r[u]];return s},e.decode=function(t){if("string"!=typeof t)throw new TypeError("Expected String");var e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(var r=0;r<t.length;r++){var n=this._alphabetMap[t[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");for(var i=n,o=0;o<e.length;++o)i+=e[o]*this.base,e[o]=255&i,i>>=8;for(;i>0;)e.push(255&i),i>>=8}for(var s=0;t[s]===this._leader&&s<t.length-1;++s)e.push(0);return R(new Uint8Array(e.reverse()))},t}();new Fi("abcdefghijklmnopqrstuvwxyz234567");var Di=new Fi("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Li={},Ui={},Gi=zi;function zi(t,e){if(!t)throw new Error(e||"Assertion failed")}zi.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var Hi={exports:{}};"function"==typeof Object.create?Hi.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Hi.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}};var qi=Hi.exports,ji=Gi,Ki=qi;function Wi(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function Vi(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function Ji(t){return 1===t.length?"0"+t:t}function Qi(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}Ui.inherits=Ki,Ui.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):Wi(t,i)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},Ui.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=Ji(t[r].toString(16));return e},Ui.htonl=Vi,Ui.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=Vi(i)),r+=Qi(i.toString(16))}return r},Ui.zero2=Ji,Ui.zero8=Qi,Ui.join32=function(t,e,r,n){var i=r-e;ji(i%4==0);for(var o=new Array(i/4),s=0,a=e;s<o.length;s++,a+=4){var u;u="big"===n?t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],o[s]=u>>>0}return o},Ui.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},Ui.rotr32=function(t,e){return t>>>e|t<<32-e},Ui.rotl32=function(t,e){return t<<e|t>>>32-e},Ui.sum32=function(t,e){return t+e>>>0},Ui.sum32_3=function(t,e,r){return t+e+r>>>0},Ui.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},Ui.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},Ui.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,s=(o<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=o},Ui.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},Ui.sum64_lo=function(t,e,r,n){return e+n>>>0},Ui.sum64_4_hi=function(t,e,r,n,i,o,s,a){var u=0,c=e;return u+=(c=c+n>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+r+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},Ui.sum64_4_lo=function(t,e,r,n,i,o,s,a){return e+n+o+a>>>0},Ui.sum64_5_hi=function(t,e,r,n,i,o,s,a,u,c){var f=0,h=e;return f+=(h=h+n>>>0)<e?1:0,f+=(h=h+o>>>0)<o?1:0,f+=(h=h+a>>>0)<a?1:0,t+r+i+s+u+(f+=(h=h+c>>>0)<c?1:0)>>>0},Ui.sum64_5_lo=function(t,e,r,n,i,o,s,a,u,c){return e+n+o+a+c>>>0},Ui.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},Ui.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},Ui.shr64_hi=function(t,e,r){return t>>>r},Ui.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0};var Yi={},Xi=Ui,Zi=Gi;function $i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Yi.BlockHash=$i,$i.prototype.update=function(t,e){if(t=Xi.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=Xi.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},$i.prototype.digest=function(t){return this.update(this._pad()),Zi(null===this.pending),this._digest(t)},$i.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var to={},eo={},ro=Ui.rotr32;function no(t,e,r){return t&e^~t&r}function io(t,e,r){return t&e^t&r^e&r}function oo(t,e,r){return t^e^r}eo.ft_1=function(t,e,r,n){return 0===t?no(e,r,n):1===t||3===t?oo(e,r,n):2===t?io(e,r,n):void 0},eo.ch32=no,eo.maj32=io,eo.p32=oo,eo.s0_256=function(t){return ro(t,2)^ro(t,13)^ro(t,22)},eo.s1_256=function(t){return ro(t,6)^ro(t,11)^ro(t,25)},eo.g0_256=function(t){return ro(t,7)^ro(t,18)^t>>>3},eo.g1_256=function(t){return ro(t,17)^ro(t,19)^t>>>10};var so=Ui,ao=Yi,uo=eo,co=so.rotl32,fo=so.sum32,ho=so.sum32_5,lo=uo.ft_1,po=ao.BlockHash,mo=[1518500249,1859775393,2400959708,3395469782];function vo(){if(!(this instanceof vo))return new vo;po.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}so.inherits(vo,po);var go=vo;vo.blockSize=512,vo.outSize=160,vo.hmacStrength=80,vo.padLength=64,vo.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=co(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),f=ho(co(i,5),lo(c,o,s,a),u,r[n],mo[c]);u=a,a=s,s=co(o,30),o=i,i=f}this.h[0]=fo(this.h[0],i),this.h[1]=fo(this.h[1],o),this.h[2]=fo(this.h[2],s),this.h[3]=fo(this.h[3],a),this.h[4]=fo(this.h[4],u)},vo.prototype._digest=function(t){return"hex"===t?so.toHex32(this.h,"big"):so.split32(this.h,"big")};var bo=Ui,wo=Yi,yo=eo,Ao=Gi,Eo=bo.sum32,ko=bo.sum32_4,xo=bo.sum32_5,No=yo.ch32,_o=yo.maj32,To=yo.s0_256,So=yo.s1_256,Io=yo.g0_256,Co=yo.g1_256,Ro=wo.BlockHash,Po=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Mo(){if(!(this instanceof Mo))return new Mo;Ro.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Po,this.W=new Array(64)}bo.inherits(Mo,Ro);var Bo=Mo;Mo.blockSize=512,Mo.outSize=256,Mo.hmacStrength=192,Mo.padLength=64,Mo.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=ko(Co(r[n-2]),r[n-7],Io(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],h=this.h[7];for(Ao(this.k.length===r.length),n=0;n<r.length;n++){var l=xo(h,So(u),No(u,c,f),this.k[n],r[n]),d=Eo(To(i),_o(i,o,s));h=f,f=c,c=u,u=Eo(a,l),a=s,s=o,o=i,i=Eo(l,d)}this.h[0]=Eo(this.h[0],i),this.h[1]=Eo(this.h[1],o),this.h[2]=Eo(this.h[2],s),this.h[3]=Eo(this.h[3],a),this.h[4]=Eo(this.h[4],u),this.h[5]=Eo(this.h[5],c),this.h[6]=Eo(this.h[6],f),this.h[7]=Eo(this.h[7],h)},Mo.prototype._digest=function(t){return"hex"===t?bo.toHex32(this.h,"big"):bo.split32(this.h,"big")};var Oo=Ui,Fo=Bo;function Do(){if(!(this instanceof Do))return new Do;Fo.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Oo.inherits(Do,Fo);var Lo=Do;Do.blockSize=512,Do.outSize=224,Do.hmacStrength=192,Do.padLength=64,Do.prototype._digest=function(t){return"hex"===t?Oo.toHex32(this.h.slice(0,7),"big"):Oo.split32(this.h.slice(0,7),"big")};var Uo=Ui,Go=Yi,zo=Gi,Ho=Uo.rotr64_hi,qo=Uo.rotr64_lo,jo=Uo.shr64_hi,Ko=Uo.shr64_lo,Wo=Uo.sum64,Vo=Uo.sum64_hi,Jo=Uo.sum64_lo,Qo=Uo.sum64_4_hi,Yo=Uo.sum64_4_lo,Xo=Uo.sum64_5_hi,Zo=Uo.sum64_5_lo,$o=Go.BlockHash,ts=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function es(){if(!(this instanceof es))return new es;$o.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=ts,this.W=new Array(160)}Uo.inherits(es,$o);var rs=es;function ns(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function is(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function os(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function ss(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function as(t,e){var r=Ho(t,e,28)^Ho(e,t,2)^Ho(e,t,7);return r<0&&(r+=4294967296),r}function us(t,e){var r=qo(t,e,28)^qo(e,t,2)^qo(e,t,7);return r<0&&(r+=4294967296),r}function cs(t,e){var r=Ho(t,e,14)^Ho(t,e,18)^Ho(e,t,9);return r<0&&(r+=4294967296),r}function fs(t,e){var r=qo(t,e,14)^qo(t,e,18)^qo(e,t,9);return r<0&&(r+=4294967296),r}function hs(t,e){var r=Ho(t,e,1)^Ho(t,e,8)^jo(t,e,7);return r<0&&(r+=4294967296),r}function ls(t,e){var r=qo(t,e,1)^qo(t,e,8)^Ko(t,e,7);return r<0&&(r+=4294967296),r}function ds(t,e){var r=Ho(t,e,19)^Ho(e,t,29)^jo(t,e,6);return r<0&&(r+=4294967296),r}function ps(t,e){var r=qo(t,e,19)^qo(e,t,29)^Ko(t,e,6);return r<0&&(r+=4294967296),r}es.blockSize=1024,es.outSize=512,es.hmacStrength=192,es.padLength=128,es.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=ds(r[n-4],r[n-3]),o=ps(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],u=hs(r[n-30],r[n-29]),c=ls(r[n-30],r[n-29]),f=r[n-32],h=r[n-31];r[n]=Qo(i,o,s,a,u,c,f,h),r[n+1]=Yo(i,o,s,a,u,c,f,h)}},es.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],u=this.h[5],c=this.h[6],f=this.h[7],h=this.h[8],l=this.h[9],d=this.h[10],p=this.h[11],m=this.h[12],v=this.h[13],g=this.h[14],b=this.h[15];zo(this.k.length===r.length);for(var w=0;w<r.length;w+=2){var y=g,A=b,E=cs(h,l),k=fs(h,l),x=ns(h,l,d,p,m),N=is(h,l,d,p,m,v),_=this.k[w],T=this.k[w+1],S=r[w],I=r[w+1],C=Xo(y,A,E,k,x,N,_,T,S,I),R=Zo(y,A,E,k,x,N,_,T,S,I);y=as(n,i),A=us(n,i),E=os(n,i,o,s,a),k=ss(n,i,o,s,a,u);var P=Vo(y,A,E,k),M=Jo(y,A,E,k);g=m,b=v,m=d,v=p,d=h,p=l,h=Vo(c,f,C,R),l=Jo(f,f,C,R),c=a,f=u,a=o,u=s,o=n,s=i,n=Vo(C,R,P,M),i=Jo(C,R,P,M)}Wo(this.h,0,n,i),Wo(this.h,2,o,s),Wo(this.h,4,a,u),Wo(this.h,6,c,f),Wo(this.h,8,h,l),Wo(this.h,10,d,p),Wo(this.h,12,m,v),Wo(this.h,14,g,b)},es.prototype._digest=function(t){return"hex"===t?Uo.toHex32(this.h,"big"):Uo.split32(this.h,"big")};var ms=Ui,vs=rs;function gs(){if(!(this instanceof gs))return new gs;vs.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}ms.inherits(gs,vs);var bs=gs;gs.blockSize=1024,gs.outSize=384,gs.hmacStrength=192,gs.padLength=128,gs.prototype._digest=function(t){return"hex"===t?ms.toHex32(this.h.slice(0,12),"big"):ms.split32(this.h.slice(0,12),"big")},to.sha1=go,to.sha224=Lo,to.sha256=Bo,to.sha384=bs,to.sha512=rs;var ws={},ys=Ui,As=Yi,Es=ys.rotl32,ks=ys.sum32,xs=ys.sum32_3,Ns=ys.sum32_4,_s=As.BlockHash;function Ts(){if(!(this instanceof Ts))return new Ts;_s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Ss(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function Is(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Cs(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}ys.inherits(Ts,_s),ws.ripemd160=Ts,Ts.blockSize=512,Ts.outSize=160,Ts.hmacStrength=192,Ts.padLength=64,Ts.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=r,u=n,c=i,f=o,h=s,l=0;l<80;l++){var d=ks(Es(Ns(r,Ss(l,n,i,o),t[Rs[l]+e],Is(l)),Ms[l]),s);r=s,s=o,o=Es(i,10),i=n,n=d,d=ks(Es(Ns(a,Ss(79-l,u,c,f),t[Ps[l]+e],Cs(l)),Bs[l]),h),a=h,h=f,f=Es(c,10),c=u,u=d}d=xs(this.h[1],i,f),this.h[1]=xs(this.h[2],o,h),this.h[2]=xs(this.h[3],s,a),this.h[3]=xs(this.h[4],r,u),this.h[4]=xs(this.h[0],n,c),this.h[0]=d},Ts.prototype._digest=function(t){return"hex"===t?ys.toHex32(this.h,"little"):ys.split32(this.h,"little")};var Rs=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ps=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ms=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Bs=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Os=Ui,Fs=Gi;function Ds(t,e,r){if(!(this instanceof Ds))return new Ds(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Os.toArray(e,r))}var Ls=Ds;Ds.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),Fs(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},Ds.prototype.update=function(t,e){return this.inner.update(t,e),this},Ds.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=t;e.utils=Ui,e.common=Yi,e.sha=to,e.ripemd=ws,e.hmac=Ls,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(Li);var Us,Gs=f(Li);function zs(t){return"0x"+Gs.sha256().update(R(t)).digest("hex")}function Hs(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}!function(t){t.sha256="sha256",t.sha512="sha512"}(Us||(Us={}));var qs=js;function js(t,e){if(!t)throw new Error(e||"Assertion failed")}js.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var Ks=Hs((function(t,e){var r=e;function n(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",r=0;r<t.length;r++)e+=n(t[r].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(t,e){return"hex"===e?i(t):t}})),Ws=Hs((function(t,e){var r=e;r.assert=qs,r.toArray=Ks.toArray,r.zero2=Ks.zero2,r.toHex=Ks.toHex,r.encode=Ks.encode,r.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},r.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var s,a,u=t.andln(3)+i&3,c=e.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=0==(1&u)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(s),a=0==(1&c)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},r.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new V(t,"hex","le")}})),Vs=Ws.getNAF,Js=Ws.getJSF,Qs=Ws.assert;function Ys(t,e){this.type=t,this.p=new V(e.p,16),this.red=e.prime?V.red(e.prime):V.mont(this.p),this.zero=new V(0).toRed(this.red),this.one=new V(1).toRed(this.red),this.two=new V(2).toRed(this.red),this.n=e.n&&new V(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Xs=Ys;function Zs(t,e){this.curve=t,this.type=e,this.precomputed=null}Ys.prototype.point=function(){throw new Error("Not implemented")},Ys.prototype.validate=function(){throw new Error("Not implemented")},Ys.prototype._fixedNafMul=function(t,e){Qs(t.precomputed);var r=t._getDoubles(),n=Vs(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var u=o+r.step-1;u>=o;u--)s=(s<<1)+n[u];a.push(s)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),h=i;h>0;h--){for(o=0;o<a.length;o++)(s=a[o])===h?f=f.mixedAdd(r.points[o]):s===-h&&(f=f.mixedAdd(r.points[o].neg()));c=c.add(f)}return c.toP()},Ys.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=Vs(e,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];Qs(0!==c),s="affine"===t.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===t.type?s.toP():s},Ys.prototype._wnafMulAdd=function(t,e,r,n,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,f=this._wnafT3,h=0;for(o=0;o<n;o++){var l=(a=e[o])._getNAFPoints(t);u[o]=l.wnd,c[o]=l.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],g=Js(r[d],r[p]);for(h=Math.max(g[0].length,h),f[d]=new Array(h),f[p]=new Array(h),s=0;s<h;s++){var b=0|g[0][s],w=0|g[1][s];f[d][s]=v[3*(b+1)+(w+1)],f[p][s]=0,c[d]=m}}else f[d]=Vs(r[d],u[d],this._bitLength),f[p]=Vs(r[p],u[p],this._bitLength),h=Math.max(f[d].length,h),h=Math.max(f[p].length,h)}var y=this.jpoint(null,null,null),A=this._wnafT4;for(o=h;o>=0;o--){for(var E=0;o>=0;){var k=!0;for(s=0;s<n;s++)A[s]=0|f[s][o],0!==A[s]&&(k=!1);if(!k)break;E++,o--}if(o>=0&&E++,y=y.dblp(E),o<0)break;for(s=0;s<n;s++){var x=A[s];0!==x&&(x>0?a=c[s][x-1>>1]:x<0&&(a=c[s][-x-1>>1].neg()),y="affine"===a.type?y.mixedAdd(a):y.add(a))}}for(o=0;o<n;o++)c[o]=null;return i?y:y.toP()},Ys.BasePoint=Zs,Zs.prototype.eq=function(){throw new Error("Not implemented")},Zs.prototype.validate=function(){return this.curve.validate(this)},Ys.prototype.decodePoint=function(t,e){t=Ws.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?Qs(t[t.length-1]%2==0):7===t[0]&&Qs(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},Zs.prototype.encodeCompressed=function(t){return this.encode(t,!0)},Zs.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},Zs.prototype.encode=function(t,e){return Ws.encode(this._encode(e),t)},Zs.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},Zs.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},Zs.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},Zs.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},Zs.prototype._getBeta=function(){return null},Zs.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var $s=Hs((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),ta=Ws.assert;function ea(t){Xs.call(this,"short",t),this.a=new V(t.a,16).toRed(this.red),this.b=new V(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}$s(ea,Xs);var ra=ea;function na(t,e,r,n){Xs.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new V(e,16),this.y=new V(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ia(t,e,r,n){Xs.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new V(0)):(this.x=new V(e,16),this.y=new V(r,16),this.z=new V(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ea.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new V(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new V(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],ta(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new V(t.a,16),b:new V(t.b,16)}})):this._getEndoBasis(r)}}},ea.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:V.mont(t),r=new V(2).toRed(e).redInvm(),n=r.redNeg(),i=new V(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},ea.prototype._getEndoBasis=function(t){for(var e,r,n,i,o,s,a,u,c,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=t,l=this.n.clone(),d=new V(1),p=new V(0),m=new V(0),v=new V(1),g=0;0!==h.cmpn(0);){var b=l.div(h);u=l.sub(b.mul(h)),c=m.sub(b.mul(d));var w=v.sub(b.mul(p));if(!n&&u.cmp(f)<0)e=a.neg(),r=d,n=u.neg(),i=c;else if(n&&2==++g)break;a=u,l=h,h=u,m=d,d=c,v=p,p=w}o=u.neg(),s=c;var y=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(y)>=0&&(o=e,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},ea.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:t.sub(s).sub(a),k2:u.add(c).neg()}},ea.prototype.pointFromX=function(t,e){(t=new V(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},ea.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},ea.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),n[2*o]=a,n[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return c},$s(na,Xs.BasePoint),ea.prototype.point=function(t,e,r){return new na(this,t,e,r)},ea.prototype.pointFromJSON=function(t,e){return na.fromJSON(this,t,e)},na.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},na.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},na.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},na.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},na.prototype.isInfinity=function(){return this.inf},na.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},na.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},na.prototype.getX=function(){return this.x.fromRed()},na.prototype.getY=function(){return this.y.fromRed()},na.prototype.mul=function(t){return t=new V(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},na.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},na.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},na.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},na.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},na.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},$s(ia,Xs.BasePoint),ea.prototype.jpoint=function(t,e,r){return new ia(this,t,e,r)},ia.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},ia.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ia.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),f=c.redMul(a),h=n.redMul(c),l=u.redSqr().redIAdd(f).redISub(h).redISub(h),d=u.redMul(h.redISub(l)).redISub(o.redMul(f)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(l,d,p)},ia.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),f=r.redMul(u),h=a.redSqr().redIAdd(c).redISub(f).redISub(f),l=a.redMul(f.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,l,d)},ia.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(e=0;e<t;e++){var f=o.redSqr(),h=c.redSqr(),l=h.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(u)),p=o.redMul(h),m=d.redSqr().redISub(p.redAdd(p)),v=p.redISub(m),g=d.redMul(v);g=g.redIAdd(g).redISub(l);var b=c.redMul(a);e+1<t&&(u=u.redMul(l)),o=m,a=b,c=g}return this.curve.jpoint(o,c.redMul(i),a)},ia.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ia.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=u,e=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),h=this.y.redSqr(),l=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(f).redISub(l);d=d.redIAdd(d);var p=f.redAdd(f).redIAdd(f),m=p.redSqr(),v=l.redIAdd(l);v=(v=v.redIAdd(v)).redIAdd(v),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(v),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},ia.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);t=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=a.redMul(s.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),h=this.y.redSqr(),l=this.x.redMul(h),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var p=l.redIAdd(l),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(f);var v=h.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),e=d.redMul(p.redISub(t)).redISub(v)}return this.curve.jpoint(t,e,r)},ia.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),c=(u=u.redIAdd(u)).redMul(s),f=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(f),l=s.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=a.redMul(h).redISub(l),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,d,p)},ia.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),f=e.redMul(c);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.x.redMul(a).redISub(f);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,l,d)},ia.prototype.mul=function(t,e){return t=new V(t,e),this.curve._wnafMul(this,t)},ia.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},ia.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},ia.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ia.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var oa=Hs((function(t,e){var r=e;r.base=Xs,r.short=ra,r.mont=null,r.edwards=null})),sa=Hs((function(t,e){var r,n=e,i=Ws.assert;function o(t){"short"===t.type?this.curve=new oa.short(t):"edwards"===t.type?this.curve=new oa.edwards(t):this.curve=new oa.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new o(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Gs.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Gs.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Gs.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Gs.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Gs.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gs.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Gs.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(t){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Gs.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function aa(t){if(!(this instanceof aa))return new aa(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ks.toArray(t.entropy,t.entropyEnc||"hex"),r=Ks.toArray(t.nonce,t.nonceEnc||"hex"),n=Ks.toArray(t.pers,t.persEnc||"hex");qs(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var ua=aa;aa.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},aa.prototype._hmac=function(){return new Gs.hmac(this.hash,this.K)},aa.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},aa.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=Ks.toArray(t,e),r=Ks.toArray(r,n),qs(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},aa.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=Ks.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(r),this._reseed++,Ks.encode(o,e)};var ca=Ws.assert;function fa(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var ha=fa;fa.fromPublic=function(t,e,r){return e instanceof fa?e:new fa(t,{pub:e,pubEnc:r})},fa.fromPrivate=function(t,e,r){return e instanceof fa?e:new fa(t,{priv:e,privEnc:r})},fa.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},fa.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},fa.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},fa.prototype._importPrivate=function(t,e){this.priv=new V(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},fa.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?ca(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||ca(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},fa.prototype.derive=function(t){return t.validate()||ca(t.validate(),"public point not validated"),t.mul(this.priv).getX()},fa.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},fa.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},fa.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var la=Ws.assert;function da(t,e){if(t instanceof da)return t;this._importDER(t,e)||(la(t.r&&t.s,"Signature without r or s"),this.r=new V(t.r,16),this.s=new V(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var pa=da;function ma(){this.place=0}function va(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function ga(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function ba(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}da.prototype._importDER=function(t,e){t=Ws.toArray(t,e);var r=new ma;if(48!==t[r.place++])return!1;var n=va(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var i=va(t,r);if(!1===i)return!1;var o=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return!1;var s=va(t,r);if(!1===s)return!1;if(t.length!==s+r.place)return!1;var a=t.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new V(o),this.s=new V(a),this.recoveryParam=null,!0},da.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=ga(e),r=ga(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];ba(n,e.length),(n=n.concat(e)).push(2),ba(n,r.length);var i=n.concat(r),o=[48];return ba(o,i.length),o=o.concat(i),Ws.encode(o,t)};var wa=function(){throw new Error("unsupported")},ya=Ws.assert;function Aa(t){if(!(this instanceof Aa))return new Aa(t);"string"==typeof t&&(ya(Object.prototype.hasOwnProperty.call(sa,t),"Unknown curve "+t),t=sa[t]),t instanceof sa.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Ea=Aa;Aa.prototype.keyPair=function(t){return new ha(this,t)},Aa.prototype.keyFromPrivate=function(t,e){return ha.fromPrivate(this,t,e)},Aa.prototype.keyFromPublic=function(t,e){return ha.fromPublic(this,t,e)},Aa.prototype.genKeyPair=function(t){t||(t={});for(var e=new ua({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||wa(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new V(2));;){var i=new V(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Aa.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Aa.prototype.sign=function(t,e,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new V(t,16));for(var i=this.n.byteLength(),o=e.getPrivate().toArray("be",i),s=t.toArray("be",i),a=new ua({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new V(1)),c=0;;c++){var f=n.k?n.k(c):new V(a.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var h=this.g.mul(f);if(!h.isInfinity()){var l=h.getX(),d=l.umod(this.n);if(0!==d.cmpn(0)){var p=f.invm(this.n).mul(d.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var m=(h.getY().isOdd()?1:0)|(0!==l.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new pa({r:d,s:p,recoveryParam:m})}}}}}},Aa.prototype.verify=function(t,e,r,n){t=this._truncateToN(new V(t,16)),r=this.keyFromPublic(r,n);var i=(e=new pa(e,"hex")).r,o=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),u=a.mul(t).umod(this.n),c=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},Aa.prototype.recoverPubKey=function(t,e,r,n){ya((3&r)===r,"The recovery param is more than two bits"),e=new pa(e,n);var i=this.n,o=new V(t),s=e.r,a=e.s,u=1&r,c=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");s=c?this.curve.pointFromX(s.add(this.curve.n),u):this.curve.pointFromX(s,u);var f=e.r.invm(i),h=i.sub(o).mul(f).umod(i),l=a.mul(f).umod(i);return this.g.mulAdd(h,s,l)},Aa.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new pa(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var ka=Hs((function(t,e){var r=e;r.version="6.5.4",r.utils=Ws,r.rand=function(){throw new Error("unsupported")},r.curve=oa,r.curves=sa,r.ec=Ea,r.eddsa=null})).ec,xa=new x("signing-key/5.7.0"),Na=null;function _a(){return Na||(Na=new ka("secp256k1")),Na}var Ta=function(){function t(t){Ne(this,"curve","secp256k1"),Ne(this,"privateKey",F(t)),32!==D(this.privateKey)&&xa.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");var e=_a().keyFromPrivate(R(this.privateKey));Ne(this,"publicKey","0x"+e.getPublic(!1,"hex")),Ne(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),Ne(this,"_isSigningKey",!0)}var e=t.prototype;return e._addPoint=function(t){var e=_a().keyFromPublic(R(this.publicKey)),r=_a().keyFromPublic(R(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")},e.signDigest=function(t){var e=_a().keyFromPrivate(R(this.privateKey)),r=R(t);32!==r.length&&xa.throwArgumentError("bad digest length","digest",t);var n=e.sign(r,{canonical:!0});return q({recoveryParam:n.recoveryParam,r:H("0x"+n.r.toString(16),32),s:H("0x"+n.s.toString(16),32)})},e.computeSharedSecret=function(t){var e=_a().keyFromPrivate(R(this.privateKey)),r=_a().keyFromPublic(R(Sa(t)));return H("0x"+e.derive(r.getPublic()).toString(16),32)},t.isSigningKey=function(t){return!(!t||!t._isSigningKey)},t}();function Sa(t,e){var r=R(t);if(32===r.length){var n=new Ta(r);return e?"0x"+_a().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}return 33===r.length?e?F(r):"0x"+_a().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+_a().keyFromPublic(r).getPublic(!0,"hex"):F(r):xa.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Ia,Ca=new x("transactions/5.7.0");function Ra(t){return"0x"===t?null:Ee(t)}function Pa(t){return"0x"===t?At:tt.from(t)}function Ma(t,e){return function(t){return Ee(L(j(L(Sa(t),1)),12))}(function(t,e){var r=q(e),n={r:R(r.r),s:R(r.s)};return"0x"+_a().recoverPubKey(R(t),n,r.recoveryParam).encode("hex",!1)}(R(t),e))}function Ba(t,e){var r=M(tt.from(t).toHexString());return r.length>32&&Ca.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Oa(t,e){return{address:Ee(t),storageKeys:(e||[]).map((function(e,r){return 32!==D(e)&&Ca.throwArgumentError("invalid access list storageKey","accessList["+t+":"+r+"]",e),e.toLowerCase()}))}}function Fa(t){if(Array.isArray(t))return t.map((function(t,e){return Array.isArray(t)?(t.length>2&&Ca.throwArgumentError("access list expected to be [ address, storageKeys[] ]","value["+e+"]",t),Oa(t[0],t[1])):Oa(t.address,t.storageKeys)}));var e=Object.keys(t).map((function(e){var r=t[e].reduce((function(t,e){return t[e]=!0,t}),{});return Oa(e,Object.keys(r).sort())}));return e.sort((function(t,e){return t.address.localeCompare(e.address)})),e}function Da(t){return Fa(t).map((function(t){return[t.address,t.storageKeys]}))}function La(t,e){if(null!=t.gasPrice){var r=tt.from(t.gasPrice),n=tt.from(t.maxFeePerGas||0);r.eq(n)||Ca.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:n})}var i=[Ba(t.chainId||0,"chainId"),Ba(t.nonce||0,"nonce"),Ba(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ba(t.maxFeePerGas||0,"maxFeePerGas"),Ba(t.gasLimit||0,"gasLimit"),null!=t.to?Ee(t.to):"0x",Ba(t.value||0,"value"),t.data||"0x",Da(t.accessList||[])];if(e){var o=q(e);i.push(Ba(o.recoveryParam,"recoveryParam")),i.push(M(o.r)),i.push(M(o.s))}return U(["0x02",le(i)])}function Ua(t,e){var r=[Ba(t.chainId||0,"chainId"),Ba(t.nonce||0,"nonce"),Ba(t.gasPrice||0,"gasPrice"),Ba(t.gasLimit||0,"gasLimit"),null!=t.to?Ee(t.to):"0x",Ba(t.value||0,"value"),t.data||"0x",Da(t.accessList||[])];if(e){var n=q(e);r.push(Ba(n.recoveryParam,"recoveryParam")),r.push(M(n.r)),r.push(M(n.s))}return U(["0x01",le(r)])}function Ga(t,e,r){try{var n=Pa(e[0]).toNumber();if(0!==n&&1!==n)throw new Error("bad recid");t.v=n}catch(t){Ca.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=H(e[1],32),t.s=H(e[2],32);try{var i=j(r(t));t.from=Ma(i,{r:t.r,s:t.s,recoveryParam:t.v})}catch(t){}}function za(t){var e=R(t);if(e[0]>127)return function(t){var e=me(t);9!==e.length&&6!==e.length&&Ca.throwArgumentError("invalid raw transaction","rawTransaction",t);var r={nonce:Pa(e[0]).toNumber(),gasPrice:Pa(e[1]),gasLimit:Pa(e[2]),to:Ra(e[3]),value:Pa(e[4]),data:e[5],chainId:0};if(6===e.length)return r;try{r.v=tt.from(e[6]).toNumber()}catch(t){return r}if(r.r=H(e[7],32),r.s=H(e[8],32),tt.from(r.r).isZero()&&tt.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);var n=r.v-27,i=e.slice(0,6);0!==r.chainId&&(i.push(F(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);var o=j(le(i));try{r.from=Ma(o,{r:F(r.r),s:F(r.s),recoveryParam:n})}catch(t){}r.hash=j(t)}return r.type=null,r}(e);switch(e[0]){case 1:return function(t){var e=me(t.slice(1));8!==e.length&&11!==e.length&&Ca.throwArgumentError("invalid component count for transaction type: 1","payload",F(t));var r={type:1,chainId:Pa(e[0]).toNumber(),nonce:Pa(e[1]).toNumber(),gasPrice:Pa(e[2]),gasLimit:Pa(e[3]),to:Ra(e[4]),value:Pa(e[5]),data:e[6],accessList:Fa(e[7])};return 8===e.length||(r.hash=j(t),Ga(r,e.slice(8),Ua)),r}(e);case 2:return function(t){var e=me(t.slice(1));9!==e.length&&12!==e.length&&Ca.throwArgumentError("invalid component count for transaction type: 2","payload",F(t));var r=Pa(e[2]),n=Pa(e[3]),i={type:2,chainId:Pa(e[0]).toNumber(),nonce:Pa(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Pa(e[4]),to:Ra(e[5]),value:Pa(e[6]),data:e[7],accessList:Fa(e[8])};return 9===e.length||(i.hash=j(t),Ga(i,e.slice(9),La)),i}(e)}return Ca.throwError("unsupported transaction type: "+e[0],x.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(Ia||(Ia={}));var Ha=new x("wordlists/5.7.0"),qa=function(){function t(e){Ha.checkAbstract(this instanceof t?this.constructor:void 0,t),Ne(this,"locale",e)}var e=t.prototype;return e.split=function(t){return t.toLowerCase().split(/ +/g)},e.join=function(t){return t.join(" ")},t.check=function(t){for(var e=[],r=0;r<2048;r++){var n=t.getWord(r);if(r!==t.getWordIndex(n))return"0x";e.push(n)}return Pt(e.join("\n")+"\n")},t.register=function(t,e){e||(e=t.locale)},t}(),ja=null;function Ka(t){if(null==ja&&(ja="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==qa.check(t)))throw ja=null,new Error("BIP39 Wordlist for en (English) FAILED")}var Wa=new(function(t){function r(){return t.call(this,"en")||this}e(r,t);var n=r.prototype;return n.getWord=function(t){return Ka(this),ja[t]},n.getWordIndex=function(t){return Ka(this),ja.indexOf(t)},r}(qa));qa.register(Wa),tt.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),St("Bitcoin seed");var Va=new x("random/5.7.0");var Ja=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),Qa=Ja.crypto||Ja.msCrypto;Qa&&Qa.getRandomValues||(Va.warn("WARNING: Missing strong random number source"),Qa={getRandomValues:function(t){return Va.throwError("no secure random source avaialble",x.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});!function(t,e){!function(e){function r(t){return parseInt(t)===t}function n(t){if(!r(t.length))return!1;for(var e=0;e<t.length;e++)if(!r(t[e])||t[e]<0||t[e]>255)return!1;return!0}function i(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(r(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function o(t){return new Uint8Array(t)}function s(t,e,r,n,i){null==n&&null==i||(t=t.slice?t.slice(n,i):Array.prototype.slice.call(t,n,i)),e.set(t,r)}var a,u={toBytes:function(t){var e=[],r=0;for(t=encodeURI(t);r<t.length;){var n=t.charCodeAt(r++);37===n?(e.push(parseInt(t.substr(r,2),16)),r+=2):e.push(n)}return i(e)},fromBytes:function(t){for(var e=[],r=0;r<t.length;){var n=t[r];n<128?(e.push(String.fromCharCode(n)),r++):n>191&&n<224?(e.push(String.fromCharCode((31&n)<<6|63&t[r+1])),r+=2):(e.push(String.fromCharCode((15&n)<<12|(63&t[r+1])<<6|63&t[r+2])),r+=3)}return e.join("")}},c=(a="0123456789abcdef",{toBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},fromBytes:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];e.push(a[(240&n)>>4]+a[15&n])}return e.join("")}}),f={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],m=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],v=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],g=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],b=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],w=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],y=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],E=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],k=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],x=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],N=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function _(t){for(var e=[],r=0;r<t.length;r+=4)e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return e}var T=function t(e){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(e,!0)}),this._prepare()};T.prototype._prepare=function(){var t=f[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(t+1),i=this.key.length/4,o=_(this.key);for(e=0;e<i;e++)r=e>>2,this._Ke[r][e%4]=o[e],this._Kd[t-r][e%4]=o[e];for(var s,a=0,u=i;u<n;){if(s=o[i-1],o[0]^=l[s>>16&255]<<24^l[s>>8&255]<<16^l[255&s]<<8^l[s>>24&255]^h[a]<<24,a+=1,8!=i)for(e=1;e<i;e++)o[e]^=o[e-1];else{for(e=1;e<i/2;e++)o[e]^=o[e-1];s=o[i/2-1],o[i/2]^=l[255&s]^l[s>>8&255]<<8^l[s>>16&255]<<16^l[s>>24&255]<<24;for(e=i/2+1;e<i;e++)o[e]^=o[e-1]}for(e=0;e<i&&u<n;)c=u>>2,d=u%4,this._Ke[c][d]=o[e],this._Kd[t-c][d]=o[e++],u++}for(var c=1;c<t;c++)for(var d=0;d<4;d++)s=this._Kd[c][d],this._Kd[c][d]=E[s>>24&255]^k[s>>16&255]^x[s>>8&255]^N[255&s]},T.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,r=[0,0,0,0],n=_(t),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)r[i]=p[n[i]>>24&255]^m[n[(i+1)%4]>>16&255]^v[n[(i+2)%4]>>8&255]^g[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,u=o(16);for(i=0;i<4;i++)a=this._Ke[e][i],u[4*i]=255&(l[n[i]>>24&255]^a>>24),u[4*i+1]=255&(l[n[(i+1)%4]>>16&255]^a>>16),u[4*i+2]=255&(l[n[(i+2)%4]>>8&255]^a>>8),u[4*i+3]=255&(l[255&n[(i+3)%4]]^a);return u},T.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,r=[0,0,0,0],n=_(t),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)r[i]=b[n[i]>>24&255]^w[n[(i+3)%4]>>16&255]^y[n[(i+2)%4]>>8&255]^A[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,u=o(16);for(i=0;i<4;i++)a=this._Kd[e][i],u[4*i]=255&(d[n[i]>>24&255]^a>>24),u[4*i+1]=255&(d[n[(i+3)%4]>>16&255]^a>>16),u[4*i+2]=255&(d[n[(i+2)%4]>>8&255]^a>>8),u[4*i+3]=255&(d[255&n[(i+1)%4]]^a);return u};var S=function t(e){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new T(e)};S.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16)s(t,r,0,n,n+16),s(r=this._aes.encrypt(r),e,n);return e},S.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16)s(t,r,0,n,n+16),s(r=this._aes.decrypt(r),e,n);return e};var I=function t(e,r){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",r){if(16!=r.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else r=o(16);this._lastCipherblock=i(r,!0),this._aes=new T(e)};I.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16){s(t,r,0,n,n+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),s(this._lastCipherblock,e,n)}return e},I.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16){s(t,r,0,n,n+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)e[n+a]=r[a]^this._lastCipherblock[a];s(t,this._lastCipherblock,0,n,n+16)}return e};var C=function t(e,r,n){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",r){if(16!=r.length)throw new Error("invalid initialation vector size (must be 16 size)")}else r=o(16);n||(n=1),this.segmentSize=n,this._shiftRegister=i(r,!0),this._aes=new T(e)};C.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},C.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var R=function t(e,r){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",r){if(16!=r.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else r=o(16);this._lastPrecipher=i(r,!0),this._lastPrecipherIndex=16,this._aes=new T(e)};R.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},R.prototype.decrypt=R.prototype.encrypt;var P=function t(e){if(!(this instanceof t))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};P.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;e>=0;--e)this._counter[e]=t%256,t>>=8},P.prototype.setBytes=function(t){if(16!=(t=i(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},P.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var M=function t(e,r){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",r instanceof P||(r=new P(r)),this._counter=r,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new T(e)};M.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[r]^=this._remainingCounter[this._remainingCounterIndex++];return e},M.prototype.decrypt=M.prototype.encrypt;var B={AES:T,Counter:P,ModeOfOperation:{ecb:S,cbc:I,cfb:C,ofb:R,ctr:M},utils:{hex:c,utf8:u},padding:{pkcs7:{pad:function(t){var e=16-(t=i(t,!0)).length%16,r=o(t.length+e);s(t,r);for(var n=t.length;n<r.length;n++)r[n]=e;return r},strip:function(t){if((t=i(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var r=t.length-e,n=0;n<e;n++)if(t[r+n]!==e)throw new Error("PKCS#7 invalid padding byte");var a=o(r);return s(t,a,0,0,r),a}}},_arrayTest:{coerceArray:i,createArray:o,copyArray:s}};t.exports=B}()}({exports:{}});var Ya,Xa,Za,$a,tu,eu,ru,nu,iu,ou,su,au,uu,cu,fu,hu,lu,du,pu,mu,vu,gu,bu,wu,yu;
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
function Au(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function Eu(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ku(t){return this instanceof ku?(this.v=t,this):new ku(t)}function xu(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{!function(t){t.value instanceof ku?Promise.resolve(t.value.v).then(u,c):f(o[0][2],t)}(i[t](e))}catch(t){f(o[0][3],t)}}function u(t){a("next",t)}function c(t){a("throw",t)}function f(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Nu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=Eu(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}!function(t,e){!function(e){var r=2147483647;function n(t){var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=1779033703,n=3144134277,i=1013904242,o=2773480762,s=1359893119,a=2600822924,u=528734635,c=1541459225,f=new Uint32Array(64);function h(t){for(var h=0,l=t.length;l>=64;){var d=r,p=n,m=i,v=o,g=s,b=a,w=u,y=c,A=void 0,E=void 0,k=void 0,x=void 0,N=void 0;for(E=0;E<16;E++)k=h+4*E,f[E]=(255&t[k])<<24|(255&t[k+1])<<16|(255&t[k+2])<<8|255&t[k+3];for(E=16;E<64;E++)x=((A=f[E-2])>>>17|A<<15)^(A>>>19|A<<13)^A>>>10,N=((A=f[E-15])>>>7|A<<25)^(A>>>18|A<<14)^A>>>3,f[E]=(x+f[E-7]|0)+(N+f[E-16]|0)|0;for(E=0;E<64;E++)x=(((g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&b^~g&w)|0)+(y+(e[E]+f[E]|0)|0)|0,N=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&p^d&m^p&m)|0,y=w,w=b,b=g,g=v+x|0,v=m,m=p,p=d,d=x+N|0;r=r+d|0,n=n+p|0,i=i+m|0,o=o+v|0,s=s+g|0,a=a+b|0,u=u+w|0,c=c+y|0,h+=64,l-=64}}h(t);var l,d=t.length%64,p=t.length/536870912|0,m=t.length<<3,v=d<56?56:120,g=t.slice(t.length-d,t.length);for(g.push(128),l=d+1;l<v;l++)g.push(0);return g.push(p>>>24&255),g.push(p>>>16&255),g.push(p>>>8&255),g.push(p>>>0&255),g.push(m>>>24&255),g.push(m>>>16&255),g.push(m>>>8&255),g.push(m>>>0&255),h(g),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(t,e,r){t=t.length<=64?t:n(t);var i,o=64+e.length+4,s=new Array(o),a=new Array(64),u=[];for(i=0;i<64;i++)s[i]=54;for(i=0;i<t.length;i++)s[i]^=t[i];for(i=0;i<e.length;i++)s[64+i]=e[i];for(i=o-4;i<o;i++)s[i]=0;for(i=0;i<64;i++)a[i]=92;for(i=0;i<t.length;i++)a[i]^=t[i];function c(){for(var t=o-1;t>=o-4;t--){if(s[t]++,s[t]<=255)return;s[t]=0}}for(;r>=32;)c(),u=u.concat(n(a.concat(n(s)))),r-=32;return r>0&&(c(),u=u.concat(n(a.concat(n(s))).slice(0,r))),u}function o(t,e,r,n,i){var o;for(c(t,16*(2*r-1),i,0,16),o=0;o<2*r;o++)u(t,16*o,i,16),a(i,n),c(i,0,t,e+16*o,16);for(o=0;o<r;o++)c(t,e+2*o*16,t,16*o,16);for(o=0;o<r;o++)c(t,e+16*(2*o+1),t,16*(o+r),16)}function s(t,e){return t<<e|t>>>32-e}function a(t,e){c(t,0,e,0,16);for(var r=8;r>0;r-=2)e[4]^=s(e[0]+e[12],7),e[8]^=s(e[4]+e[0],9),e[12]^=s(e[8]+e[4],13),e[0]^=s(e[12]+e[8],18),e[9]^=s(e[5]+e[1],7),e[13]^=s(e[9]+e[5],9),e[1]^=s(e[13]+e[9],13),e[5]^=s(e[1]+e[13],18),e[14]^=s(e[10]+e[6],7),e[2]^=s(e[14]+e[10],9),e[6]^=s(e[2]+e[14],13),e[10]^=s(e[6]+e[2],18),e[3]^=s(e[15]+e[11],7),e[7]^=s(e[3]+e[15],9),e[11]^=s(e[7]+e[3],13),e[15]^=s(e[11]+e[7],18),e[1]^=s(e[0]+e[3],7),e[2]^=s(e[1]+e[0],9),e[3]^=s(e[2]+e[1],13),e[0]^=s(e[3]+e[2],18),e[6]^=s(e[5]+e[4],7),e[7]^=s(e[6]+e[5],9),e[4]^=s(e[7]+e[6],13),e[5]^=s(e[4]+e[7],18),e[11]^=s(e[10]+e[9],7),e[8]^=s(e[11]+e[10],9),e[9]^=s(e[8]+e[11],13),e[10]^=s(e[9]+e[8],18),e[12]^=s(e[15]+e[14],7),e[13]^=s(e[12]+e[15],9),e[14]^=s(e[13]+e[12],13),e[15]^=s(e[14]+e[13],18);for(var n=0;n<16;++n)t[n]+=e[n]}function u(t,e,r,n){for(var i=0;i<n;i++)r[i]^=t[e+i]}function c(t,e,r,n,i){for(;i--;)r[n++]=t[e++]}function f(t){if(!t||"number"!=typeof t.length)return!1;for(var e=0;e<t.length;e++){var r=t[e];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function h(t,e){if("number"!=typeof t||t%1)throw new Error("invalid "+e);return t}function l(t,e,n,s,a,l,d){if(n=h(n,"N"),s=h(s,"r"),a=h(a,"p"),l=h(l,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>r/128/s)throw new Error("N too large");if(s>r/128/a)throw new Error("r too large");if(!f(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!f(e))throw new Error("salt must be an array or buffer");e=Array.prototype.slice.call(e);for(var p=i(t,e,128*a*s),m=new Uint32Array(32*a*s),v=0;v<m.length;v++){var g=4*v;m[v]=(255&p[g+3])<<24|(255&p[g+2])<<16|(255&p[g+1])<<8|(255&p[g+0])<<0}var b,w,y=new Uint32Array(64*s),A=new Uint32Array(32*s*n),E=32*s,k=new Uint32Array(16),x=new Uint32Array(16),N=a*n*2,_=0,T=null,S=!1,I=0,C=0,R=d?parseInt(1e3/s):4294967295,P="undefined"!=typeof setImmediate?setImmediate:setTimeout,M=function e(){if(S)return d(new Error("cancelled"),_/N);var r;switch(I){case 0:c(m,w=32*C*s,y,0,E),I=1,b=0;case 1:(r=n-b)>R&&(r=R);for(var f=0;f<r;f++)c(y,0,A,(b+f)*E,E),o(y,E,s,k,x);if(b+=r,_+=r,d){var h=parseInt(1e3*_/N);if(h!==T){if(S=d(null,_/N))break;T=h}}if(b<n)break;b=0,I=2;case 2:(r=n-b)>R&&(r=R);for(var v=0;v<r;v++){var g=y[16*(2*s-1)]&n-1;u(A,g*E,y,E),o(y,E,s,k,x)}if(b+=r,_+=r,d){var M=parseInt(1e3*_/N);if(M!==T){if(S=d(null,_/N))break;T=M}}if(b<n)break;if(c(y,0,m,w,E),++C<a){I=0;break}p=[];for(var B=0;B<m.length;B++)p.push(m[B]>>0&255),p.push(m[B]>>8&255),p.push(m[B]>>16&255),p.push(m[B]>>24&255);var O=i(t,p,l);return d&&d(null,1,O),O}d&&P(e)};if(!d)for(;;){var B=M();if(null!=B)return B}M()}var d={scrypt:function(t,e,r,n,i,o,s){return new Promise((function(a,u){var c=0;s&&s(0),l(t,e,r,n,i,o,(function(t,e,r){if(t)u(t);else if(r)s&&1!==c&&s(1),a(new Uint8Array(r));else if(s&&e!==c)return c=e,s(e)}))}))},syncScrypt:function(t,e,r,n,i,o){return new Uint8Array(l(t,e,r,n,i,o))}};t.exports=d}()}({exports:{}}),function(t){t.ETH_MAINNET="eth-mainnet",t.ETH_ROPSTEN="eth-ropsten",t.ETH_GOERLI="eth-goerli",t.ETH_KOVAN="eth-kovan",t.ETH_RINKEBY="eth-rinkeby",t.ETH_SEPOLIA="eth-sepolia",t.OPT_MAINNET="opt-mainnet",t.OPT_KOVAN="opt-kovan",t.OPT_GOERLI="opt-goerli",t.ARB_MAINNET="arb-mainnet",t.ARB_RINKEBY="arb-rinkeby",t.ARB_GOERLI="arb-goerli",t.MATIC_MAINNET="polygon-mainnet",t.MATIC_MUMBAI="polygon-mumbai",t.ASTAR_MAINNET="astar-mainnet",t.POLYGONZKEVM_MAINNET="polygonzkevm-mainnet",t.POLYGONZKEVM_TESTNET="polygonzkevm-testnet"}(Ya||(Ya=t("Network",{}))),function(t){t.DEFAULT_TOKENS="DEFAULT_TOKENS",t.ERC20="erc20"}(Xa||(Xa={})),function(t){t.EXTERNAL="external",t.INTERNAL="internal",t.ERC20="erc20",t.ERC721="erc721",t.ERC1155="erc1155",t.SPECIALNFT="specialnft"}(Za||(Za={})),function(t){t.ASCENDING="asc",t.DESCENDING="desc"}($a||($a={})),function(t){t.ERC721="ERC721",t.ERC1155="ERC1155",t.NO_SUPPORTED_NFT_STANDARD="NO_SUPPORTED_NFT_STANDARD",t.NOT_A_CONTRACT="NOT_A_CONTRACT",t.UNKNOWN="UNKNOWN"}(tu||(tu={})),function(t){t.Erc721TooManyOwners="Erc721TooManyOwners",t.Erc721TooManyTokens="Erc721TooManyTokens",t.Erc721DishonestTotalSupply="Erc721DishonestTotalSupply",t.MostlyHoneyPotOwners="MostlyHoneyPotOwners",t.OwnedByMostHoneyPots="OwnedByMostHoneyPots"}(eu||(eu={})),function(t){t.SPAM="SPAM",t.AIRDROPS="AIRDROPS"}(ru||(ru={})),function(t){t.SPAM="SPAM",t.AIRDROPS="AIRDROPS"}(nu||(nu={})),function(t){t.TRANSFERTIME="TRANSFERTIME"}(iu||(iu={})),function(t){t.TO="TO",t.FROM="FROM"}(ou||(ou={})),function(t){t.ASCENDING="asc",t.DESCENDING="desc"}(su||(su={})),function(t){t.SEAPORT="seaport",t.LOOKSRARE="looksrare",t.X2Y2="x2y2",t.WYVERN="wyvern",t.CRYPTOPUNKS="cryptopunks",t.BLUR="blur",t.UNKNOWN="unknown"}(au||(au={})),function(t){t.BUYER="buyer",t.SELLER="seller"}(uu||(uu={})),function(t){t.DOES_NOT_EXIST="does_not_exist",t.ALREADY_QUEUED="already_queued",t.IN_PROGRESS="in_progress",t.FINISHED="finished",t.QUEUED="queued",t.QUEUE_FAILED="queue_failed"}(cu||(cu={})),function(t){t.VERIFIED="verified",t.APPROVED="approved",t.REQUESTED="requested",t.NOT_REQUESTED="not_requested"}(fu||(fu={})),function(t){t.PENDING_TRANSACTIONS="alchemy_pendingTransactions",t.MINED_TRANSACTIONS="alchemy_minedTransactions"}(hu||(hu={})),function(t){t.NATIVE="NATIVE",t.ERC20="ERC20",t.ERC721="ERC721",t.ERC1155="ERC1155",t.SPECIAL_NFT="SPECIAL_NFT"}(lu||(lu={})),function(t){t.APPROVE="APPROVE",t.TRANSFER="TRANSFER"}(du||(du={})),function(t){t.ETHERSCAN="ETHERSCAN"}(pu||(pu={})),function(t){t.CREATE="CREATE",t.CALL="CALL",t.STATICCALL="STATICCALL",t.DELEGATECALL="DELEGATECALL"}(mu||(mu={})),function(t){t.UNSPECIFIED="TRANSACTION_JOB_STATUS_UNSPECIFIED",t.IN_PROGRESS="IN_PROGRESS",t.COMPLETE="COMPLETE",t.ABANDONED="ABANDONED"}(vu||(vu={})),function(t){t.V1="V1",t.V2="V2"}(gu||(gu={})),function(t){t.MINED_TRANSACTION="MINED_TRANSACTION",t.DROPPED_TRANSACTION="DROPPED_TRANSACTION",t.ADDRESS_ACTIVITY="ADDRESS_ACTIVITY",t.NFT_ACTIVITY="NFT_ACTIVITY",t.NFT_METADATA_UPDATE="NFT_METADATA_UPDATE",t.GRAPHQL="GRAPHQL"}(bu||(bu={})),function(t){t.PENDING="pending",t.LATEST="latest",t.SAFE="safe",t.FINALIZED="finalized",t.EARLIEST="earliest"}(wu||(wu={})),function(t){t.CALL_TRACER="callTracer",t.PRESTATE_TRACER="prestateTracer"}(yu||(yu={}));var _u,Tu="demo",Su=Ya.ETH_MAINNET;function Iu(t,e){return"https://"+t+".g.alchemy.com/v2/"+e}!function(t){t[t.BASE=0]="BASE",t[t.NFT=1]="NFT",t[t.WEBHOOK=2]="WEBHOOK"}(_u||(_u={}));var Cu=((a={})[Ya.ETH_MAINNET]="mainnet",a[Ya.ETH_ROPSTEN]="ropsten",a[Ya.ETH_GOERLI]="goerli",a[Ya.ETH_KOVAN]="kovan",a[Ya.ETH_RINKEBY]="rinkeby",a[Ya.ETH_SEPOLIA]="sepolia",a[Ya.OPT_MAINNET]="optimism",a[Ya.OPT_KOVAN]="optimism-kovan",a[Ya.OPT_GOERLI]="optimism-goerli",a[Ya.ARB_MAINNET]="arbitrum",a[Ya.ARB_RINKEBY]="arbitrum-rinkeby",a[Ya.ARB_GOERLI]="arbitrum-goerli",a[Ya.MATIC_MAINNET]="matic",a[Ya.MATIC_MUMBAI]="maticmum",a[Ya.ASTAR_MAINNET]="astar-mainnet",a[Ya.POLYGONZKEVM_MAINNET]="polygonzkevm-mainnet",a[Ya.POLYGONZKEVM_TESTNET]="polygonzkevm-testnet",a),Ru={"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"astar-mainnet":{chainId:592,name:"astar-mainnet"},sepolia:{chainId:11155111,name:"sepolia"},"polygonzkevm-mainnet":{chainId:1101,name:"polygonzkevm-mainnet"},"polygonzkevm-testnet":{chainId:1442,name:"polygonzkevm-testnet"}};function Pu(){}var Mu=function(){function t(t){this.apiKey=(null==t?void 0:t.apiKey)||Tu,this.network=(null==t?void 0:t.network)||Su,this.maxRetries=(null==t?void 0:t.maxRetries)||5,this.url=null==t?void 0:t.url,this.authToken=null==t?void 0:t.authToken,this.batchRequests=(null==t?void 0:t.batchRequests)||!1,this.requestTimeout=(null==t?void 0:t.requestTimeout)||0}var e=t.prototype;return e._getRequestUrl=function(t){return void 0!==this.url?this.url:t===_u.NFT?(e=this.network,r=this.apiKey,"https://"+e+".g.alchemy.com/nft/v2/"+r):t===_u.WEBHOOK?"https://dashboard.alchemy.com/api":Iu(this.network,this.apiKey);var e,r},e.getProvider=function(){var t=this;return this._baseAlchemyProvider||(this._baseAlchemyProvider=Au(t,void 0,void 0,r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){return Gh}));case 2:return e=t.sent,n=e.AlchemyProvider,t.abrupt("return",new n(this));case 5:case"end":return t.stop()}}),t,this)})))),this._baseAlchemyProvider},e.getWebSocketProvider=function(){var t=this;return this._baseAlchemyWssProvider||(this._baseAlchemyWssProvider=Au(t,void 0,void 0,r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then((function(){return sl}));case 2:return e=t.sent,n=e.AlchemyWebSocketProvider,t.abrupt("return",new n(this));case 5:case"end":return t.stop()}}),t,this)})))),this._baseAlchemyWssProvider},t}(),Bu=!1,Ou=!1,Fu={debug:1,default:2,info:2,warning:3,error:4,off:5},Du=Fu.default,Lu=null;var Uu,Gu,zu=function(){try{var t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(e){try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(Uu||(Uu={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"}(Gu||(Gu={}));var Hu="0123456789abcdef",qu=function(){function t(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}var e=t.prototype;return e._log=function(t,e){var r=t.toLowerCase();null==Fu[r]&&this.throwArgumentError("invalid log level name","logLevel",t),Du>Fu[r]||console.log.apply(console,e)},e.debug=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.DEBUG,r)},e.info=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.INFO,r)},e.warn=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.WARNING,r)},e.makeError=function(e,r,n){if(Ou)return this.makeError("censored error",r,{});r||(r=t.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(t){var e=n[t];try{if(e instanceof Uint8Array){for(var r="",o=0;o<e.length;o++)r+=Hu[e[o]>>4],r+=Hu[15&e[o]];i.push(t+"=Uint8Array(0x"+r+")")}else i.push(t+"="+JSON.stringify(e))}catch(e){i.push(t+"="+JSON.stringify(n[t].toString()))}})),i.push("code="+r),i.push("version="+this.version);var o=e,s="";switch(r){case Gu.NUMERIC_FAULT:s="NUMERIC_FAULT";var a=e;switch(a){case"overflow":case"underflow":case"division-by-zero":s+="-"+a;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break;case Gu.CALL_EXCEPTION:case Gu.INSUFFICIENT_FUNDS:case Gu.MISSING_NEW:case Gu.NONCE_EXPIRED:case Gu.REPLACEMENT_UNDERPRICED:case Gu.TRANSACTION_REPLACED:case Gu.UNPREDICTABLE_GAS_LIMIT:s=r}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),i.length&&(e+=" ("+i.join(", ")+")");var u=new Error(e);return u.reason=o,u.code=r,Object.keys(n).forEach((function(t){u[t]=n[t]})),u},e.throwError=function(t,e,r){throw this.makeError(t,e,r)},e.throwArgumentError=function(e,r,n){return this.throwError(e,t.errors.INVALID_ARGUMENT,{argument:r,value:n})},e.assert=function(t,e,r,n){t||this.throwError(e,r,n)},e.assertArgument=function(t,e,r,n){t||this.throwArgumentError(e,r,n)},e.checkNormalize=function(e){zu&&this.throwError("platform missing String.prototype.normalize",t.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:zu})},e.checkSafeUint53=function(e,r){"number"==typeof e&&(null==r&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))},e.checkArgumentCount=function(e,r,n){n=n?": "+n:"",e<r&&this.throwError("missing argument"+n,t.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,t.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})},e.checkNew=function(e,r){e!==Object&&null!=e||this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})},e.checkAbstract=function(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",t.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})},t.globalLogger=function(){return Lu||(Lu=new t("logger/5.7.0")),Lu},t.setCensorship=function(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Bu){if(!e)return;this.globalLogger().throwError("error censorship permanent",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ou=!!e,Bu=!!r},t.setLogLevel=function(e){var r=Fu[e.toLowerCase()];null!=r?Du=r:t.globalLogger().warn("invalid log level - "+e)},t.from=function(e){return new t(e)},t}();qu.errors=Gu,qu.levels=Uu;var ju=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Ku=new qu("properties/5.7.0");function Wu(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Vu(t){return ju(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t).map((function(e){var r=t[e];return Promise.resolve(r).then((function(t){return{key:e,value:t}}))})),e.next=3,Promise.all(n);case 3:return i=e.sent,e.abrupt("return",i.reduce((function(t,e){return t[e.key]=e.value,t}),{}));case 5:case"end":return e.stop()}}),e)})))}var Ju={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Qu(t){if(null==t||Ju[typeof t])return!0;if(Array.isArray(t)||"object"==typeof t){if(!Object.isFrozen(t))return!1;for(var e=Object.keys(t),r=0;r<e.length;r++){var n=null;try{n=t[e[r]]}catch(t){continue}if(!Qu(n))return!1}return!0}return Ku.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Yu(t){if(Qu(t))return t;if(Array.isArray(t))return Object.freeze(t.map((function(t){return Xu(t)})));if("object"==typeof t){var e={};for(var r in t){var n=t[r];void 0!==n&&Wu(e,r,Xu(n))}return e}return Ku.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Xu(t){return Yu(t)}function Zu(t){return tt.from(t).toNumber()}function $u(t){return tt.from(t).toHexString()}function tc(t){return"string"==typeof t?t:Number.isInteger(t)?$u(t):t.toString()}function ec(t,e){return Object.values(e).includes(t)?t:void 0}function rc(t){return{address:t.address,name:t.contractMetadata.name,symbol:t.contractMetadata.symbol,totalSupply:t.contractMetadata.totalSupply,tokenType:ac(t.contractMetadata.tokenType),openSea:hc(t.contractMetadata.openSea),contractDeployer:t.contractMetadata.contractDeployer,deployedBlockNumber:t.contractMetadata.deployedBlockNumber}}function nc(t,e){var r;return{contract:e?{address:e}:t.contract,tokenId:tt.from(t.id.tokenId).toString(),tokenType:ac(null===(r=t.id.tokenMetadata)||void 0===r?void 0:r.tokenType)}}function ic(t){var e,r,n,i,o,s,a,u;try{var c=ac(null===(e=t.id.tokenMetadata)||void 0===e?void 0:e.tokenType),f=function(t){if(!t)return;var e=t.isSpam,r=t.classifications;return{isSpam:"true"===e,classifications:r}}(t.spamInfo);return{contract:{address:t.contract.address,name:null===(r=t.contractMetadata)||void 0===r?void 0:r.name,symbol:null===(n=t.contractMetadata)||void 0===n?void 0:n.symbol,totalSupply:null===(i=t.contractMetadata)||void 0===i?void 0:i.totalSupply,tokenType:c,openSea:hc(null===(o=t.contractMetadata)||void 0===o?void 0:o.openSea),contractDeployer:null===(s=t.contractMetadata)||void 0===s?void 0:s.contractDeployer,deployedBlockNumber:null===(a=t.contractMetadata)||void 0===a?void 0:a.deployedBlockNumber},tokenId:(u=t.id.tokenId,tt.from(u).toString()),tokenType:c,title:t.title,description:uc(t.description),timeLastUpdated:t.timeLastUpdated,metadataError:t.error,rawMetadata:t.metadata,tokenUri:cc(t.tokenUri),media:fc(t.media),spamInfo:f,acquiredAt:t.acquiredAt}}catch(t){throw new Error("Error parsing the NFT response: "+t)}}function oc(t){switch(t){case"looksrare":return au.LOOKSRARE;case"seaport":return au.SEAPORT;case"x2y2":return au.X2Y2;case"wyvern":return au.WYVERN;case"cryptopunks":return au.CRYPTOPUNKS;case"blur":return au.BLUR;default:return au.UNKNOWN}}function sc(t){switch(t.toLowerCase()){case"buyer":return uu.BUYER;case"seller":return uu.SELLER;default:throw new Error("Unsupported NftSaleTakerType "+t)}}function ac(t){switch(t){case"erc721":case"ERC721":return tu.ERC721;case"erc1155":case"ERC1155":return tu.ERC1155;case"no_supported_nft_standard":case"NO_SUPPORTED_NFT_STANDARD":return tu.NO_SUPPORTED_NFT_STANDARD;case"not_a_contract":case"NOT_A_CONTRACT":return tu.NOT_A_CONTRACT;default:return tu.UNKNOWN}}function uc(t){return void 0===t?"":Array.isArray(t)||"object"!=typeof t?"string"==typeof t?t:t.join(" "):JSON.stringify(t)}function cc(t){if(!t||0!==t.raw.length||0!=t.gateway.length)return t}function fc(t){return void 0===t?[]:t.filter((function(t){return void 0!==cc(t)}))}function hc(t){if(void 0!==t)return{floorPrice:t.floorPrice,collectionName:t.collectionName,safelistRequestStatus:void 0!==t.safelistRequestStatus?ec(t.safelistRequestStatus,fu):void 0,imageUrl:t.imageUrl,description:t.description,externalUrl:t.externalUrl,twitterUsername:t.twitterUsername,discordUrl:t.discordUrl,lastIngestedAt:t.lastIngestedAt}}var lc="undefined"!=typeof window&&null!==window;function dc(t){if(null!==t){if("object"==typeof t)for(var e in t)t[e]=dc(t[e]);return t}}function pc(t,e,n){return void 0===n&&(n="getAssetTransfers"),Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getProvider();case 2:if(o=r.sent,!e.fromAddress){r.next=7;break}return r.next=6,o._getAddress(e.fromAddress);case 6:e.fromAddress=r.sent;case 7:if(!e.toAddress){r.next=11;break}return r.next=10,o._getAddress(e.toAddress);case 10:e.toAddress=r.sent;case 11:return r.abrupt("return",o._send("alchemy_getAssetTransfers",[Object.assign(Object.assign({},e),{fromBlock:null!=e.fromBlock?tc(e.fromBlock):void 0,toBlock:null!=e.toBlock?tc(e.toBlock):void 0,maxCount:null!=e.maxCount?$u(e.maxCount):void 0})],n));case 12:case"end":return r.stop()}}),i)})))}function mc(t,e,n){return void 0===n&&(n="getTransactionReceipts"),Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getProvider();case 2:return o=r.sent,r.abrupt("return",o._send("alchemy_getTransactionReceipts",[e],n));case 4:case"end":return r.stop()}}),i)})))}function vc(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getProvider();case 2:return i=r.sent,r.next=5,i.getNetwork();case 5:return r.next=7,Vu({filter:gc(t,e)});case 7:return o=r.sent,r.next=10,i.send("eth_getLogs",[o.filter]);case 10:return(s=r.sent).forEach((function(t){null==t.removed&&(t.removed=!1)})),r.abrupt("return",bc(i.formatter.filterLog.bind(i.formatter))(s));case 13:case"end":return r.stop()}}),n)})))}function gc(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getProvider();case 2:return i=n.sent,n.next=5,e;case 5:return o=n.sent,s={},["blockHash","topics"].forEach((function(t){null!=o[t]&&(s[t]=o[t])})),["fromBlock","toBlock"].forEach((function(t){null!=o[t]&&(s[t]=i._getBlockTag(o[t]))})),n.t0=i.formatter,n.next=12,Vu(s);case 12:if(n.t1=n.sent,s=n.t0.filter.call(n.t0,n.t1),!Array.isArray(o.address)){n.next=20;break}return n.next=17,Promise.all(o.address.map((function(t){return Au(a,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i._getAddress(t));case 1:case"end":return e.stop()}}),e)})))})));case 17:s.address=n.sent,n.next=24;break;case 20:if(null==o.address){n.next=24;break}return n.next=23,i._getAddress(o.address);case 23:s.address=n.sent;case 24:return n.abrupt("return",s);case 25:case"end":return n.stop()}}),n)})))}function bc(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");var r=[];return e.forEach((function(e){r.push(t(e))})),r}}var wc=function(){function t(t){this.config=t}var e=t.prototype;return e.getBalance=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.abrupt("return",i.getBalance(t,e));case 4:case"end":return r.stop()}}),n,this)})))},e.getCode=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.abrupt("return",i.getCode(t,e));case 4:case"end":return r.stop()}}),n,this)})))},e.getStorageAt=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return o=r.sent,r.abrupt("return",o.getStorageAt(t,e,n));case 4:case"end":return r.stop()}}),i,this)})))},e.getTransactionCount=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.abrupt("return",i.getTransactionCount(t,e));case 4:case"end":return r.stop()}}),n,this)})))},e.getBlock=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.getBlock(t));case 4:case"end":return e.stop()}}),e,this)})))},e.getBlockWithTransactions=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.getBlockWithTransactions(t));case 4:case"end":return e.stop()}}),e,this)})))},e.getNetwork=function(){return Au(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.config.getProvider();case 2:return e=t.sent,t.abrupt("return",e.getNetwork());case 4:case"end":return t.stop()}}),t,this)})))},e.getBlockNumber=function(){return Au(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.config.getProvider();case 2:return e=t.sent,t.abrupt("return",e.getBlockNumber());case 4:case"end":return t.stop()}}),t,this)})))},e.getGasPrice=function(){return Au(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.config.getProvider();case 2:return e=t.sent,t.abrupt("return",e.getGasPrice());case 4:case"end":return t.stop()}}),t,this)})))},e.getFeeData=function(){return Au(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.config.getProvider();case 2:return e=t.sent,t.abrupt("return",e.getFeeData());case 4:case"end":return t.stop()}}),t,this)})))},e.ready=function(){return Au(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.config.getProvider();case 2:return e=t.sent,t.abrupt("return",e.ready);case 4:case"end":return t.stop()}}),t,this)})))},e.call=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.abrupt("return",i.call(t,e));case 4:case"end":return r.stop()}}),n,this)})))},e.estimateGas=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.estimateGas(t));case 4:case"end":return e.stop()}}),e,this)})))},e.getTransaction=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.getTransaction(t));case 4:case"end":return e.stop()}}),e,this)})))},e.getTransactionReceipt=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.getTransactionReceipt(t));case 4:case"end":return e.stop()}}),e,this)})))},e.sendTransaction=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.sendTransaction(t));case 4:case"end":return e.stop()}}),e,this)})))},e.waitForTransaction=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return o=r.sent,r.abrupt("return",o.waitForTransaction(t,e,n));case 4:case"end":return r.stop()}}),i,this)})))},e.getLogs=function(t){return Au(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vc(this.config,t));case 1:case"end":return e.stop()}}),e,this)})))},e.send=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.abrupt("return",i.send(t,e));case 4:case"end":return r.stop()}}),n,this)})))},e.findContractDeployer=function(t){var e;return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a,u;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.next=5,i.getBlockNumber();case 5:return o=r.sent,r.next=8,i.getCode(t,o);case 8:if(r.t0=r.sent,r.t1="0x",r.t0!==r.t1){r.next=12;break}throw new Error("Contract '"+t+"' does not exist");case 12:return r.next=14,yc(0,o+1,t,this.config);case 14:return s=r.sent,r.next=17,mc(this.config,{blockNumber:$u(s)},"findContractDeployer");case 17:return a=r.sent,u=null===(e=a.receipts)||void 0===e?void 0:e.find((function(e){return e.contractAddress===t.toLowerCase()})),r.abrupt("return",{deployerAddress:null==u?void 0:u.from,blockNumber:s});case 20:case"end":return r.stop()}}),n,this)})))},e.getTokenBalances=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.next=5,i._getAddress(t);case 5:if(o=r.sent,!Array.isArray(e)){r.next=14;break}if(!(e.length>1500)){r.next=9;break}throw new Error("You cannot pass in more than 1500 contract addresses to getTokenBalances()");case 9:if(0!==e.length){r.next=11;break}throw new Error("getTokenBalances() requires at least one contractAddress when using an array");case 11:return r.abrupt("return",i._send("alchemy_getTokenBalances",[o,e],"getTokenBalances"));case 14:return s=void 0===e?Xa.ERC20:e.type,a=[o,s],(null==e?void 0:e.type)===Xa.ERC20&&e.pageKey&&a.push({pageKey:e.pageKey}),r.abrupt("return",i._send("alchemy_getTokenBalances",a,"getTokenBalances"));case 18:case"end":return r.stop()}}),n,this)})))},e.getTokensForOwner=function(t,e){var n;return Au(this,void 0,void 0,r().mark((function i(){var o,s,a,u,c,f,h,l;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return o=r.sent,r.next=5,o._getAddress(t);case 5:return s=r.sent,a=[s,null!==(n=null==e?void 0:e.contractAddresses)&&void 0!==n?n:Xa.ERC20],(null==e?void 0:e.pageKey)&&a.push({pageKey:e.pageKey}),r.next=10,o._send("alchemy_getTokenBalances",a,"getTokensForOwner");case 10:return u=r.sent,c=u.tokenBalances.map((function(t){return{contractAddress:t.contractAddress,rawBalance:tt.from(t.tokenBalance).toString()}})),r.next=14,Promise.allSettled(u.tokenBalances.map((function(t){return o._send("alchemy_getTokenMetadata",[t.contractAddress],"getTokensForOwner",!0)})));case 14:return f=r.sent,h=f.map((function(t){return"fulfilled"===t.status?t.value:{name:null,symbol:null,decimals:null,logo:null}})),l=c.map((function(t,e){return Object.assign(Object.assign(Object.assign({},t),h[e]),{balance:null!==h[e].decimals?Xe(t.rawBalance,h[e].decimals):void 0})})),r.abrupt("return",{tokens:l.map(dc),pageKey:u.pageKey});case 18:case"end":return r.stop()}}),i,this)})))},e.getTokenMetadata=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n._send("alchemy_getTokenMetadata",[t],"getTokenMetadata"));case 4:case"end":return e.stop()}}),e,this)})))},e.getAssetTransfers=function(t){return Au(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pc(this.config,t));case 1:case"end":return e.stop()}}),e,this)})))},e.getTransactionReceipts=function(t){return Au(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mc(this.config,t));case 1:case"end":return e.stop()}}),e,this)})))},e.resolveName=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.resolveName(t));case 4:case"end":return e.stop()}}),e,this)})))},e.lookupAddress=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.lookupAddress(t));case 4:case"end":return e.stop()}}),e,this)})))},t}();function yc(t,e,n,i){return Au(this,void 0,void 0,r().mark((function o(){var s,a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t>=e)){r.next=2;break}return r.abrupt("return",e);case 2:return s=Math.floor((t+e)/2),r.next=5,i.getProvider();case 5:return a=r.sent,r.next=8,a.getCode(n,s);case 8:if("0x"!==r.sent){r.next=11;break}return r.abrupt("return",yc(s+1,e,n,i));case 11:return r.abrupt("return",yc(t,s,n,i));case 12:case"end":return r.stop()}}),o)})))}var Ac,Ec=function(){function t(t){this.config=t}var e=t.prototype;return e.traceCall=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return o=r.sent,s=[t,e,kc(n)],r.abrupt("return",o._send("debug_traceCall",s,"traceCall"));case 5:case"end":return r.stop()}}),i,this)})))},e.traceTransaction=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return o=r.sent,s=[t,kc(e,n)],r.abrupt("return",o._send("debug_traceTransaction",s,"traceTransaction"));case 5:case"end":return r.stop()}}),i,this)})))},e.traceBlock=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,B(t,32)?(o="debug_traceBlockByHash",s=[t,kc(e)]):(o="debug_traceBlockByNumber",a="number"==typeof t?z(G(t)):t,s=[a,kc(e)]),r.abrupt("return",i._send(o,s,"traceBlock"));case 5:case"end":return r.stop()}}),n,this)})))},t}();function kc(t,e){return Object.assign({tracer:t.type},void 0!==t.onlyTopCall&&{tracerConfig:{onlyTopCall:t.onlyTopCall,timeout:e}})}function xc(t){if(t===tu.ERC1155||t===tu.ERC721)return t}!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.SILENT=4]="SILENT"}(Ac||(Ac={})),Ac.DEBUG,Ac.INFO,Ac.WARN,Ac.ERROR,Ac.SILENT;var Nc=((u={})[Ac.DEBUG]="log",u[Ac.INFO]="info",u[Ac.WARN]="warn",u[Ac.ERROR]="error",u),_c=Ac.INFO;function Tc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Cc.debug(t,r)}function Sc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Cc.info(t,r)}function Ic(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}var Cc=new(function(){function t(){this._logLevel=_c}var e=t.prototype;return e.debug=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._log.apply(this,[Ac.DEBUG].concat(e))},e.info=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._log.apply(this,[Ac.INFO].concat(e))},e.warn=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._log.apply(this,[Ac.WARN].concat(e))},e.error=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this._log.apply(this,[Ac.ERROR].concat(e))},e._log=function(t){if(!(t<this._logLevel)){var e=(new Date).toISOString(),r=Nc[t];if(!r)throw new Error("Logger received an invalid logLevel (value: "+t+")");for(var n,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];(n=console)[r].apply(n,["["+e+"] Alchemy:"].concat(o.map(Ic)))}},i(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(t){if(!(t in Ac))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t}}]),t}()),Rc="2.9.0";function Pc(t,e,r,n,i){var o,s=t+"/"+e,a=Object.assign(Object.assign({},i),{headers:Object.assign(Object.assign(Object.assign({},null==i?void 0:i.headers),!lc&&{"Accept-Encoding":"gzip"}),{"Alchemy-Ethers-Sdk-Version":Rc,"Alchemy-Ethers-Sdk-Method":r}),method:null!==(o=null==i?void 0:i.method)&&void 0!==o?o:"GET",url:s,params:n});return _i(a)}var Mc=function(){function t(t){void 0===t&&(t=5),this.maxAttempts=t,this.initialDelayMs=1e3,this.backoffMultiplier=1.5,this.maxDelayMs=3e4,this.numAttempts=0,this.currentDelayMs=0,this.isInBackoff=!1}var e=t.prototype;return e.backoff=function(){var t=this;if(this.numAttempts>=this.maxAttempts)return Promise.reject(new Error("Exceeded maximum number of attempts: "+this.maxAttempts));if(this.isInBackoff)return Promise.reject(new Error("A backoff operation is already in progress"));var e=this.withJitterMs(this.currentDelayMs);return e>0&&Tc("ExponentialBackoff.backoff","Backing off for "+e+"ms"),this.currentDelayMs*=this.backoffMultiplier,this.currentDelayMs=Math.max(this.currentDelayMs,this.initialDelayMs),this.currentDelayMs=Math.min(this.currentDelayMs,this.maxDelayMs),this.numAttempts+=1,new Promise((function(r){t.isInBackoff=!0,setTimeout((function(){t.isInBackoff=!1,r()}),e)}))},e.withJitterMs=function(t){return Math.min(t+(Math.random()-.5)*t,this.maxDelayMs)},t}();function Bc(t,e,n,i,o,s){return Au(this,void 0,void 0,r().mark((function a(){var u,c,f,h;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u=void 0,c=new Mc(t.maxRetries),f=0;case 3:if(!(f<t.maxRetries+1)){r.next=36;break}return r.prev=4,void 0!==u&&Sc("requestHttp","Retrying after error: "+u.message),r.prev=6,r.next=9,c.backoff();case 9:r.next=14;break;case 11:return r.prev=11,r.t0=r.catch(6),r.abrupt("break",36);case 14:return r.next=16,Pc(t._getRequestUrl(e),n,i,o,Object.assign(Object.assign({},s),{timeout:t.requestTimeout}));case 16:if(200!==(h=r.sent).status){r.next=22;break}return Tc(n,"Successful request: "+n),r.abrupt("return",h.data);case 22:Sc(n,"Request failed: "+n+", "+h.status+", "+h.data),u=new Error(h.status+": "+h.data);case 24:r.next=33;break;case 26:if(r.prev=26,r.t1=r.catch(4),_i.isAxiosError(r.t1)&&void 0!==r.t1.response){r.next=30;break}throw r.t1;case 30:if(u=new Error(r.t1.response.status+": "+r.t1.response.data),Oc(r.t1,e)){r.next=33;break}return r.abrupt("break",36);case 33:f++,r.next=3;break;case 36:return r.abrupt("return",Promise.reject(u));case 37:case"end":return r.stop()}}),a,null,[[4,26],[6,11]])})))}function Oc(t,e){var r=e===_u.WEBHOOK?[429,500]:[429];return void 0!==t.response&&r.includes(t.response.status)}function Fc(t,e,n,i,o,s,a){return xu(this,arguments,r().mark((function u(){var c,f,h;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=!0,f=Object.assign({},a);case 2:if(!c){r.next=13;break}return r.next=5,ku(Bc(t,e,n,i,f));case 5:return h=r.sent,r.next=8,ku(h);case 8:return r.next=10,r.sent;case 10:void 0!==h[s]?f[o]=h[s]:c=!1,r.next=2;break;case 13:case"end":return r.stop()}}),u)})))}function Dc(t,e,n,i,o){return void 0===o&&(o="getNftMetadata"),Au(this,void 0,void 0,r().mark((function s(){var a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"getNFTMetadata",o,{contractAddress:e,tokenId:tt.from(n).toString(),tokenType:xc(null==i?void 0:i.tokenType),tokenUriTimeoutInMs:null==i?void 0:i.tokenUriTimeoutInMs,refreshCache:null==i?void 0:i.refreshCache});case 2:return a=r.sent,r.abrupt("return",ic(a));case 4:case"end":return r.stop()}}),s)})))}function Lc(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={tokens:e,tokenUriTimeoutInMs:null==n?void 0:n.tokenUriTimeoutInMs,refreshCache:null==n?void 0:n.refreshCache},r.next=3,Bc(t,_u.NFT,"getNFTMetadataBatch","getNftMetadataBatch",{},{method:"POST",data:o});case 3:return s=r.sent,r.abrupt("return",s.map(ic));case 5:case"end":return r.stop()}}),i)})))}function Uc(t,e,n,i){return void 0===i&&(i="getNftsForOwner"),Au(this,void 0,void 0,r().mark((function o(){var s,a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=Jc(null==n?void 0:n.omitMetadata),r.next=3,Bc(t,_u.NFT,"getNFTs",i,{contractAddresses:null==n?void 0:n.contractAddresses,pageKey:null==n?void 0:n.pageKey,filters:null==n?void 0:n.excludeFilters,excludeFilters:null==n?void 0:n.excludeFilters,includeFilters:null==n?void 0:n.includeFilters,owner:e,pageSize:null==n?void 0:n.pageSize,withMetadata:s,tokenUriTimeoutInMs:null==n?void 0:n.tokenUriTimeoutInMs,orderBy:null==n?void 0:n.orderBy});case 3:return a=r.sent,r.abrupt("return",{ownedNfts:a.ownedNfts.map((function(t){return Object.assign(Object.assign({},qc(t)),{balance:parseInt(t.balance)})})),pageKey:a.pageKey,totalCount:a.totalCount,blockHash:a.blockHash});case 5:case"end":return r.stop()}}),o)})))}function Gc(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s,a,u,c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getProvider();case 2:return o=r.sent,r.next=5,o._getAddress(e);case 5:return s=r.sent,a=zc(null==n?void 0:n.tokenType),u={fromBlock:"0x0",fromAddress:"0x0000000000000000000000000000000000000000",toAddress:s,excludeZeroValue:!0,contractAddresses:null==n?void 0:n.contractAddresses,category:a,maxCount:100,pageKey:null==n?void 0:n.pageKey},r.next=10,pc(t,u,"getMintedNfts");case 10:return c=r.sent,r.abrupt("return",Wc(t,c));case 12:case"end":return r.stop()}}),i)})))}function zc(t){switch(t){case tu.ERC721:return[Za.ERC721];case tu.ERC1155:return[Za.ERC1155];default:return[Za.ERC721,Za.ERC1155,Za.SPECIALNFT]}}function Hc(t,e,n,i){return Au(this,void 0,void 0,r().mark((function o(){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"getNFTMetadata",i,{contractAddress:e,tokenId:tt.from(n).toString(),refreshCache:!0});case 2:return s=r.sent,r.abrupt("return",ic(s));case 4:case"end":return r.stop()}}),o)})))}function qc(t){return Kc(t)?ic(t):nc(t)}function jc(t,e){return Kc(t)?ic(t):nc(t,e)}function Kc(t){return void 0!==t.title}function Wc(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a,u,c,f;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==(i=e.transfers.filter((function(t){return null!==t.rawContract.address})).flatMap((function(t){var e,r=Vc(t),n={from:t.from,to:null!==(e=t.to)&&void 0!==e?e:void 0,transactionHash:t.hash,blockNumber:t.blockNum};return r.map((function(t){return{metadata:n,token:t}}))}))).length){r.next=3;break}return r.abrupt("return",{nfts:[]});case 3:for(100,o=[],s=0;s<i.length;s+=100)o.push(i.slice(s,s+100));return r.next=8,Promise.all(o.map((function(e){return Lc(t,e.map((function(t){return t.token})))})));case 8:return a=r.sent,u=a.flat(),c=new Map,u.forEach((function(t){var e=t.contract.address+"-"+tt.from(t.tokenId).toString();c.set(e,t)})),f=i.map((function(t){var e=t.token.contractAddress+"-"+tt.from(t.token.tokenId).toString();return Object.assign(Object.assign({},c.get(e)),t.metadata)})),r.abrupt("return",{nfts:f,pageKey:e.pageKey});case 14:case"end":return r.stop()}}),n)})))}function Vc(t){return t.category===Za.ERC1155?function(t){return t.erc1155Metadata.map((function(e){return{contractAddress:t.rawContract.address,tokenId:e.tokenId,tokenType:tu.ERC1155}}))}(t):[{contractAddress:t.rawContract.address,tokenId:t.tokenId,tokenType:t.category===Za.ERC721?tu.ERC721:void 0}]}function Jc(t){return void 0===t||!t}function Qc(t){switch(t){case"does_not_exist":return cu.DOES_NOT_EXIST;case"already_queued":return cu.ALREADY_QUEUED;case"in_progress":return cu.IN_PROGRESS;case"finished":return cu.FINISHED;case"queued":return cu.QUEUED;case"queue_failed":return cu.QUEUE_FAILED;default:throw new Error("Unknown reingestion state: "+t)}}var Yc=function(){function t(t){this.config=t}var e=t.prototype;return e.getNftMetadata=function(t,e,r,n){var i;return i="object"==typeof r?{tokenType:r.tokenType,tokenUriTimeoutInMs:r.tokenUriTimeoutInMs,refreshCache:r.refreshCache}:{tokenType:r,tokenUriTimeoutInMs:n},Dc(this.config,t,e,i)},e.getNftMetadataBatch=function(t,e){return Lc(this.config,t,e)},e.getContractMetadata=function(t){return function(t,e,n){return void 0===n&&(n="getContractMetadata"),Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"getContractMetadata",n,{contractAddress:e});case 2:return o=r.sent,r.abrupt("return",rc(o));case 4:case"end":return r.stop()}}),i)})))}(this.config,t)},e.getContractMetadataBatch=function(t){return function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"getContractMetadataBatch","getContractMetadataBatch",{},{method:"POST",data:{contractAddresses:e}});case 2:return i=r.sent,r.abrupt("return",i.map(rc));case 4:case"end":return r.stop()}}),n)})))}(this.config,t)},e.getNftsForOwnerIterator=function(t,e){return function(t,e,i,o){return void 0===o&&(o="getNftsForOwnerIterator"),xu(this,arguments,r().mark((function s(){var a,u,c,f,h,l,d,p,m;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=Jc(null==i?void 0:i.omitMetadata),r.prev=1,f=Nu(Fc(t,_u.NFT,"getNFTs",o,"pageKey","pageKey",{contractAddresses:null==i?void 0:i.contractAddresses,pageKey:null==i?void 0:i.pageKey,filters:null==i?void 0:i.excludeFilters,owner:e,withMetadata:c}));case 3:return r.next=5,ku(f.next());case 5:if((h=r.sent).done){r.next=19;break}l=h.value,d=n(l.ownedNfts);case 9:if((p=d()).done){r.next=17;break}return m=p.value,r.next=13,ku(Object.assign(Object.assign({},qc(m)),{balance:parseInt(m.balance)}));case 13:return r.next=15,r.sent;case 15:r.next=9;break;case 17:r.next=3;break;case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(1),a={error:r.t0};case 24:if(r.prev=24,r.prev=25,!h||h.done||!(u=f.return)){r.next=29;break}return r.next=29,ku(u.call(f));case 29:if(r.prev=29,!a){r.next=32;break}throw a.error;case 32:return r.finish(29);case 33:return r.finish(24);case 34:case"end":return r.stop()}}),s,null,[[1,21,24,34],[25,,29,33]])})))}(this.config,t,e)},e.getNftsForOwner=function(t,e){return Uc(this.config,t,e)},e.getNftsForContract=function(t,e){return function(t,e,n,i){var o;return void 0===i&&(i="getNftsForContract"),Au(this,void 0,void 0,r().mark((function s(){var a,u;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=Jc(null==n?void 0:n.omitMetadata),r.next=3,Bc(t,_u.NFT,"getNFTsForCollection",i,{contractAddress:e,startToken:null==n?void 0:n.pageKey,withMetadata:a,limit:null!==(o=null==n?void 0:n.pageSize)&&void 0!==o?o:void 0,tokenUriTimeoutInMs:null==n?void 0:n.tokenUriTimeoutInMs});case 3:return u=r.sent,r.abrupt("return",{nfts:u.nfts.map((function(t){return jc(t,e)})),pageKey:u.nextToken});case 5:case"end":return r.stop()}}),s)})))}(this.config,t,e)},e.getNftsForContractIterator=function(t,e){return function(t,e,i,o){return void 0===o&&(o="getNftsForContractIterator"),xu(this,arguments,r().mark((function s(){var a,u,c,f,h,l,d,p,m;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:c=Jc(null==i?void 0:i.omitMetadata),r.prev=1,f=Nu(Fc(t,_u.NFT,"getNFTsForCollection",o,"startToken","nextToken",{contractAddress:e,startToken:null==i?void 0:i.pageKey,withMetadata:c}));case 3:return r.next=5,ku(f.next());case 5:if((h=r.sent).done){r.next=19;break}l=h.value,d=n(l.nfts);case 9:if((p=d()).done){r.next=17;break}return m=p.value,r.next=13,ku(jc(m,e));case 13:return r.next=15,r.sent;case 15:r.next=9;break;case 17:r.next=3;break;case 19:r.next=24;break;case 21:r.prev=21,r.t0=r.catch(1),a={error:r.t0};case 24:if(r.prev=24,r.prev=25,!h||h.done||!(u=f.return)){r.next=29;break}return r.next=29,ku(u.call(f));case 29:if(r.prev=29,!a){r.next=32;break}throw a.error;case 32:return r.finish(29);case 33:return r.finish(24);case 34:case"end":return r.stop()}}),s,null,[[1,21,24,34],[25,,29,33]])})))}(this.config,t,e)},e.getOwnersForContract=function(t,e){return function(t,e,n,i){return void 0===i&&(i="getOwnersForContract"),Au(this,void 0,void 0,r().mark((function o(){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"getOwnersForCollection",i,Object.assign(Object.assign({},n),{contractAddress:e}));case 2:return s=r.sent,r.abrupt("return",Object.assign({owners:s.ownerAddresses},void 0!==s.pageKey&&{pageKey:s.pageKey}));case 4:case"end":return r.stop()}}),o)})))}(this.config,t,e)},e.getOwnersForNft=function(t,e,n){return function(t,e,n,i,o){return void 0===o&&(o="getOwnersForNft"),Au(this,void 0,void 0,r().mark((function s(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Bc(t,_u.NFT,"getOwnersForToken",o,Object.assign({contractAddress:e,tokenId:tt.from(n).toString()},i)));case 1:case"end":return r.stop()}}),s)})))}(this.config,t,e,n)},e.getContractsForOwner=function(t,e){return function(t,e,n,i){return void 0===i&&(i="getContractsForOwner"),Au(this,void 0,void 0,r().mark((function o(){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"getContractsForOwner",i,{owner:e,excludeFilters:null==n?void 0:n.excludeFilters,includeFilters:null==n?void 0:n.includeFilters,pageKey:null==n?void 0:n.pageKey,pageSize:null==n?void 0:n.pageSize,orderBy:null==n?void 0:n.orderBy});case 2:return s=r.sent,r.abrupt("return",{pageKey:null==(o=s)?void 0:o.pageKey,totalCount:o.totalCount,contracts:o.contracts.map((function(t){return{address:t.address,totalSupply:t.totalSupply,isSpam:t.isSpam,media:t.media,numDistinctTokensOwned:t.numDistinctTokensOwned,tokenId:t.tokenId,totalBalance:t.totalBalance,name:t.name,title:t.title,openSea:hc(null==t?void 0:t.opensea),symbol:null==t?void 0:t.symbol,tokenType:ac(null==t?void 0:t.tokenType),contractDeployer:t.contractDeployer,deployedBlockNumber:t.deployedBlockNumber}}))});case 4:case"end":return r.stop()}var o}),o)})))}(this.config,t,e)},e.getTransfersForOwner=function(t,e,n){return function(t,e,n,i){return Au(this,void 0,void 0,r().mark((function o(){var s,a,u,c,f;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getProvider();case 2:return s=r.sent,r.next=5,s._getAddress(e);case 5:return a=r.sent,u=zc(null==i?void 0:i.tokenType),c={fromBlock:"0x0",excludeZeroValue:!0,contractAddresses:null==i?void 0:i.contractAddresses,category:u,maxCount:100,pageKey:null==i?void 0:i.pageKey},n===ou.TO?c.toAddress=a:c.fromAddress=a,r.next=11,pc(t,c,"getTransfersForOwner");case 11:return f=r.sent,r.abrupt("return",Wc(t,f));case 13:case"end":return r.stop()}}),o)})))}(this.config,t,e,n)},e.getTransfersForContract=function(t,e){return function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s,a,u,c,f;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=[Za.ERC721,Za.ERC1155,Za.SPECIALNFT],r.next=3,t.getProvider();case 3:if(s=r.sent,!(null==n?void 0:n.fromBlock)){r.next=12;break}return r.t1=s.formatter,r.next=8,s._getBlockTag(n.fromBlock);case 8:r.t2=r.sent,r.t0=r.t1.blockTag.call(r.t1,r.t2),r.next=13;break;case 12:r.t0="0x0";case 13:if(a=r.t0,!(null==n?void 0:n.toBlock)){r.next=22;break}return r.t4=s.formatter,r.next=18,s._getBlockTag(n.toBlock);case 18:r.t5=r.sent,r.t3=r.t4.blockTag.call(r.t4,r.t5),r.next=23;break;case 22:r.t3=void 0;case 23:return u=r.t3,c={fromBlock:a,toBlock:u,excludeZeroValue:!0,contractAddresses:[e],order:null==n?void 0:n.order,category:o,maxCount:100,pageKey:null==n?void 0:n.pageKey},r.next=27,pc(t,c,"getTransfersForContract");case 27:return f=r.sent,r.abrupt("return",Wc(t,f));case 29:case"end":return r.stop()}}),i)})))}(this.config,t,e)},e.getMintedNfts=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Gc(this.config,t,e));case 1:case"end":return r.stop()}}),n,this)})))},e.checkNftOwnership=function(t,e){return function(t,e,n,i){return void 0===i&&(i="checkNftOwnership"),Au(this,void 0,void 0,r().mark((function o(){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==n.length){r.next=2;break}throw new Error("Must provide at least one contract address");case 2:return r.next=4,Uc(t,e,{contractAddresses:n,omitMetadata:!0},i);case 4:return s=r.sent,r.abrupt("return",s.ownedNfts.length>0);case 6:case"end":return r.stop()}}),o)})))}(this.config,t,e)},e.verifyNftOwnership=function(t,e){return function(t,e,i,o){return void 0===o&&(o="verifyNftOwnership"),Au(this,void 0,void 0,r().mark((function s(){var a,u,c,f,h,l;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("string"!=typeof i){r.next=7;break}return r.next=3,Uc(t,e,{contractAddresses:[i],omitMetadata:!0},o);case 3:return a=r.sent,r.abrupt("return",a.ownedNfts.length>0);case 7:if(0!==i.length){r.next=9;break}throw new Error("Must provide at least one contract address");case 9:return r.next=11,Uc(t,e,{contractAddresses:i,omitMetadata:!0},o);case 11:for(u=r.sent,c=i.reduce((function(t,e){return t[e]=!1,t}),{}),f=n(u.ownedNfts);!(h=f()).done;)l=h.value,c[l.contract.address]=!0;return r.abrupt("return",c);case 15:case"end":return r.stop()}}),s)})))}(this.config,t,e)},e.isSpamContract=function(t){return function(t,e,n){return void 0===n&&(n="isSpamContract"),Au(this,void 0,void 0,r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Bc(t,_u.NFT,"isSpamContract",n,{contractAddress:e}));case 1:case"end":return r.stop()}}),i)})))}(this.config,t)},e.getSpamContracts=function(){return function(t,e){return void 0===e&&(e="getSpamContracts"),Au(this,void 0,void 0,r().mark((function n(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Bc(t,_u.NFT,"getSpamContracts",e,void 0));case 1:case"end":return r.stop()}}),n)})))}(this.config)},e.getFloorPrice=function(t){return function(t,e,n){return void 0===n&&(n="getFloorPrice"),Au(this,void 0,void 0,r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Bc(t,_u.NFT,"getFloorPrice",n,{contractAddress:e}));case 1:case"end":return r.stop()}}),i)})))}(this.config,t)},e.getNftSales=function(t){return function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n="getNftSales"),Au(this,void 0,void 0,r().mark((function i(){var o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=Object.assign({},e),r.next=3,Bc(t,_u.NFT,"getNFTSales",n,{fromBlock:null==o?void 0:o.fromBlock,toBlock:null==o?void 0:o.toBlock,order:null==o?void 0:o.order,marketplace:null==o?void 0:o.marketplace,contractAddress:null==o?void 0:o.contractAddress,tokenId:(null==o?void 0:o.tokenId)?tt.from(null==o?void 0:o.tokenId).toString():void 0,sellerAddress:null==o?void 0:o.sellerAddress,buyerAddress:null==o?void 0:o.buyerAddress,taker:null==o?void 0:o.taker,limit:null==o?void 0:o.limit,pageKey:null==o?void 0:o.pageKey});case 3:return s=r.sent,r.abrupt("return",(a=void 0,u=void 0,{nftSales:(i=s).nftSales.map((function(t){return{marketplace:oc(t.marketplace),contractAddress:t.contractAddress,tokenId:t.tokenId,quantity:t.quantity,buyerAddress:t.buyerAddress,sellerAddress:t.sellerAddress,taker:sc(t.taker),sellerFee:null==t?void 0:t.sellerFee,marketplaceFee:null==t?void 0:t.protocolFee,protocolFee:null==t?void 0:t.protocolFee,royaltyFee:null==t?void 0:t.royaltyFee,blockNumber:null==t?void 0:t.blockNumber,logIndex:t.logIndex,bundleIndex:t.bundleIndex,transactionHash:t.transactionHash}})),validAt:{blockNumber:i.validAt.blockNumber,blockHash:null!==(a=i.validAt.blockHash)&&void 0!==a?a:void 0,blockTimestamp:null!==(u=i.validAt.blockTimestamp)&&void 0!==u?u:void 0},pageKey:null==i?void 0:i.pageKey}));case 5:case"end":return r.stop()}var i,a,u}),i)})))}(this.config,t)},e.computeRarity=function(t,e){return function(t,e,n,i){return void 0===i&&(i="computeRarity"),Au(this,void 0,void 0,r().mark((function o(){var s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"computeRarity",i,{contractAddress:e,tokenId:tt.from(n).toString()});case 2:return s=r.sent,r.abrupt("return",s.map((function(t){return{prevalence:t.prevalence,traitType:t.trait_type,value:t.value}})));case 4:case"end":return r.stop()}}),o)})))}(this.config,t,e)},e.searchContractMetadata=function(t){return function(t,e,n){return void 0===n&&(n="searchContractMetadata"),Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"searchContractMetadata",n,{query:e});case 2:return o=r.sent,r.abrupt("return",o.map(rc));case 4:case"end":return r.stop()}}),i)})))}(this.config,t)},e.summarizeNftAttributes=function(t){return function(t,e,n){return void 0===n&&(n="summarizeNftAttributes"),Au(this,void 0,void 0,r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Bc(t,_u.NFT,"summarizeNftAttributes",n,{contractAddress:e}));case 1:case"end":return r.stop()}}),i)})))}(this.config,t)},e.refreshNftMetadata=function(t,e){return function(t,e,n,i){return void 0===i&&(i="refreshNftMetadata"),Au(this,void 0,void 0,r().mark((function o(){var s,a,u;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=tt.from(n).toString(),r.next=3,Dc(t,e,s,void 0,i);case 3:return a=r.sent,r.next=6,Hc(t,e,s,i);case 6:return u=r.sent,r.abrupt("return",a.timeLastUpdated!==u.timeLastUpdated);case 8:case"end":return r.stop()}}),o)})))}(this.config,t,e)},e.refreshContract=function(t){return function(t,e,n){return void 0===n&&(n="refreshContract"),Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bc(t,_u.NFT,"reingestContract",n,{contractAddress:e});case 2:return o=r.sent,r.abrupt("return",{contractAddress:o.contractAddress,refreshState:Qc(o.reingestionState),progress:o.progress});case 4:case"end":return r.stop()}}),i)})))}(this.config,t)},t}(),Xc=function(){function t(t){this.config=t}var e=t.prototype;return e.getAllWebhooks=function(){return Au(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.verifyConfig(),t.next=3,this.sendWebhookRequest("team-webhooks","getAllWebhooks",{});case 3:return e=t.sent,t.abrupt("return",{webhooks:tf(e),totalCount:e.data.length});case 5:case"end":return t.stop()}}),t,this)})))},e.getAddresses=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.verifyConfig(),i="string"==typeof t?t:t.id,r.next=4,this.sendWebhookRequest("webhook-addresses","getAddresses",{webhook_id:i,limit:null==e?void 0:e.limit,after:null==e?void 0:e.pageKey});case 4:return o=r.sent,r.abrupt("return",rf(o));case 6:case"end":return r.stop()}}),n,this)})))},e.getGraphqlQuery=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.verifyConfig(),n="string"==typeof t?t:t.id,e.next=4,this.sendWebhookRequest("dashboard-webhook-graphql-query","getGraphqlQuery",{webhook_id:n});case 4:return i=e.sent,e.abrupt("return",nf(i));case 6:case"end":return e.stop()}}),e,this)})))},e.getNftFilters=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.verifyConfig(),i="string"==typeof t?t:t.id,r.next=4,this.sendWebhookRequest("webhook-nft-filters","getNftFilters",{webhook_id:i,limit:null==e?void 0:e.limit,after:null==e?void 0:e.pageKey});case 4:return o=r.sent,r.abrupt("return",of(o));case 6:case"end":return r.stop()}}),n,this)})))},e.updateWebhook=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a,u;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i="string"==typeof t?t:t.id,!("isActive"in e)){r.next=8;break}o="update-webhook",s="updateWebhook",a="PUT",u={webhook_id:i,is_active:e.isActive},r.next=48;break;case 8:if(!("addFilters"in e)&&!("removeFilters"in e)){r.next=15;break}o="update-webhook-nft-filters",s="updateWebhookNftFilters",a="PATCH",u={webhook_id:i,nft_filters_to_add:e.addFilters?e.addFilters.map(sf):[],nft_filters_to_remove:e.removeFilters?e.removeFilters.map(sf):[]},r.next=48;break;case 15:if(!("addMetadataFilters"in e)&&!("removeMetadataFilters"in e)){r.next=22;break}o="update-webhook-nft-metadata-filters",s="updateWebhookNftMetadataFilters",a="PATCH",u={webhook_id:i,nft_metadata_filters_to_add:e.addMetadataFilters?e.addMetadataFilters.map(sf):[],nft_metadata_filters_to_remove:e.removeMetadataFilters?e.removeMetadataFilters.map(sf):[]},r.next=48;break;case 22:if(!("addAddresses"in e)&&!("removeAddresses"in e)){r.next=36;break}return o="update-webhook-addresses",s="webhook:updateWebhookAddresses",a="PATCH",r.t0=i,r.next=29,this.resolveAddresses(e.addAddresses);case 29:return r.t1=r.sent,r.next=32,this.resolveAddresses(e.removeAddresses);case 32:r.t2=r.sent,u={webhook_id:r.t0,addresses_to_add:r.t1,addresses_to_remove:r.t2},r.next=48;break;case 36:if(!("newAddresses"in e)){r.next=47;break}return o="update-webhook-addresses",s="webhook:updateWebhookAddress",a="PUT",r.t3=i,r.next=43,this.resolveAddresses(e.newAddresses);case 43:r.t4=r.sent,u={webhook_id:r.t3,addresses:r.t4},r.next=48;break;case 47:throw new Error("Invalid `update` param passed into `updateWebhook`");case 48:return r.next=50,this.sendWebhookRequest(o,s,{},{method:a,data:u});case 50:case"end":return r.stop()}}),n,this)})))},e.createWebhook=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s,a,u,c,f,h,l;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e!==bu.MINED_TRANSACTION&&e!==bu.DROPPED_TRANSACTION){r.next=4;break}if("appId"in n){r.next=3;break}throw new Error("Transaction Webhooks require an app id.");case 3:o=n.appId;case 4:if(s=$c.get(this.config.network),e!==bu.NFT_ACTIVITY&&e!==bu.NFT_METADATA_UPDATE){r.next=13;break}if("filters"in n&&0!==n.filters.length){r.next=8;break}throw new Error("Nft Activity Webhooks require a non-empty array input.");case 8:s=n.network?$c.get(n.network):s,f=n.filters.map((function(t){return t.tokenId?{contract_address:t.contractAddress,token_id:tt.from(t.tokenId).toString()}:{contract_address:t.contractAddress}})),a=e===bu.NFT_ACTIVITY?{nft_filters:f}:{nft_metadata_filters:f},r.next=27;break;case 13:if(e!==bu.ADDRESS_ACTIVITY){r.next=22;break}if(void 0!==n&&"addresses"in n&&0!==n.addresses.length){r.next=16;break}throw new Error("Address Activity Webhooks require a non-empty array input.");case 16:return s=n.network?$c.get(n.network):s,r.next=19,this.resolveAddresses(n.addresses);case 19:u=r.sent,r.next=27;break;case 22:if(e!=bu.GRAPHQL){r.next=27;break}if(void 0!==n&&"graphqlQuery"in n&&0!==n.graphqlQuery.length){r.next=25;break}throw new Error("Custom Webhooks require a non-empty graphql query.");case 25:s=n.network?$c.get(n.network):s,c=n.graphqlQuery;case 27:return h=Object.assign(Object.assign(Object.assign(Object.assign({network:s,webhook_type:e,webhook_url:t},o&&{app_id:o}),a),u&&{addresses:u}),c&&{graphql_query:c}),r.next=30,this.sendWebhookRequest("create-webhook","createWebhook",{},{method:"POST",data:h});case 30:return l=r.sent,r.abrupt("return",ef(l.data));case 32:case"end":return r.stop()}}),i,this)})))},e.deleteWebhook=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.verifyConfig(),n="string"==typeof t?t:t.id,e.next=4,this.sendWebhookRequest("delete-webhook","deleteWebhook",{webhook_id:n},{method:"DELETE"});case 4:if(!("message"in e.sent)){e.next=7;break}throw new Error("Webhook not found. Failed to delete webhook: "+n);case 7:case"end":return e.stop()}}),e,this)})))},e.verifyConfig=function(){if(void 0===this.config.authToken)throw new Error("Using the Notify API requires setting the Alchemy Auth Token in the settings object when initializing Alchemy.")},e.sendWebhookRequest=function(t,e,r,n){return Bc(this.config,_u.WEBHOOK,t,e,r,Object.assign(Object.assign({},n),{headers:Object.assign({"X-Alchemy-Token":this.config.authToken},null==n?void 0:n.headers)}))},e.resolveAddresses=function(t){return Au(this,void 0,void 0,r().mark((function e(){var i,o,s,a,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",[]);case 2:return i=[],e.next=5,this.config.getProvider();case 5:o=e.sent,s=n(t);case 7:if((a=s()).done){e.next=17;break}return u=a.value,e.next=11,o.resolveName(u);case 11:if(null!==(c=e.sent)){e.next=14;break}throw new Error("Unable to resolve the ENS address: "+u);case 14:i.push(c);case 15:e.next=7;break;case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})))},t}(),Zc={ETH_MAINNET:Ya.ETH_MAINNET,ETH_GOERLI:Ya.ETH_GOERLI,ETH_SEPOLIA:Ya.ETH_SEPOLIA,ETH_ROPSTEN:Ya.ETH_ROPSTEN,ETH_RINKEBY:Ya.ETH_RINKEBY,ETH_KOVAN:Ya.ETH_KOVAN,MATIC_MAINNET:Ya.MATIC_MAINNET,MATIC_MUMBAI:Ya.MATIC_MUMBAI,ARB_MAINNET:Ya.ARB_MAINNET,ARB_GOERLI:Ya.ARB_GOERLI,ARB_RINKEBY:Ya.ARB_RINKEBY,OPT_MAINNET:Ya.OPT_MAINNET,OPT_GOERLI:Ya.OPT_GOERLI,OPT_KOVAN:Ya.OPT_KOVAN},$c=Object.keys(Ya).reduce((function(t,e){return e in Zc&&t.set(Zc[e],e),t}),new Map);function tf(t){return t.data.map(ef)}function ef(t){return Object.assign({id:t.id,network:Zc[t.network],type:t.webhook_type,url:t.webhook_url,isActive:t.is_active,timeCreated:new Date(t.time_created).toISOString(),signingKey:t.signing_key,version:t.version},void 0!==t.app_id&&{appId:t.app_id})}function rf(t){return{addresses:t.data,totalCount:t.pagination.total_count,pageKey:t.pagination.cursors.after}}function nf(t){return{graphqlQuery:t.data.graphql_query}}function of(t){return{filters:t.data.map((function(t){return t.token_id?{contractAddress:t.contract_address,tokenId:tt.from(t.token_id).toString()}:{contractAddress:t.contract_address}})),totalCount:t.pagination.total_count,pageKey:t.pagination.cursors.after}}function sf(t){return t.tokenId?{contract_address:t.contractAddress,token_id:tt.from(t.tokenId).toString()}:{contract_address:t.contractAddress}}var af=[.9,1,1.1,1.2,1.3],uf=function(){function t(t){this.config=t}var e=t.prototype;return e.sendPrivateTransaction=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return o=r.sent,s=e?$u(e):void 0,r.abrupt("return",o._send("eth_sendPrivateTransaction",[{tx:t,maxBlockNumber:s,preferences:n}],"sendPrivateTransaction"));case 5:case"end":return r.stop()}}),i,this)})))},e.cancelPrivateTransaction=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n._send("eth_cancelPrivateTransaction",[{txHash:t}],"cancelPrivateTransaction"));case 4:case"end":return e.stop()}}),e,this)})))},e.simulateAssetChangesBundle=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,o=void 0!==e?[t,e]:[t],r.next=6,i._send("alchemy_simulateAssetChangesBundle",o,"simulateAssetChangesBundle");case 6:return s=r.sent,r.abrupt("return",dc(s));case 8:case"end":return r.stop()}}),n,this)})))},e.simulateAssetChanges=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,o=void 0!==e?[t,e]:[t],r.next=6,i._send("alchemy_simulateAssetChanges",o,"simulateAssetChanges");case 6:return s=r.sent,r.abrupt("return",dc(s));case 8:case"end":return r.stop()}}),n,this)})))},e.simulateExecutionBundle=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,o=void 0!==e?[t,e]:[t],s=i._send("alchemy_simulateExecutionBundle",o,"simulateExecutionBundle"),r.abrupt("return",dc(s));case 6:case"end":return r.stop()}}),n,this)})))},e.simulateExecution=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,o=void 0!==e?[t,e]:[t],s=i._send("alchemy_simulateExecution",o,"simulateExecution"),r.abrupt("return",dc(s));case 6:case"end":return r.stop()}}),n,this)})))},e.getTransaction=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.getTransaction(t));case 4:case"end":return e.stop()}}),e,this)})))},e.sendTransaction=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.sendTransaction(t));case 4:case"end":return e.stop()}}),e,this)})))},e.estimateGas=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n.estimateGas(t));case 4:case"end":return e.stop()}}),e,this)})))},e.getMaxPriorityFeePerGas=function(){return Au(this,void 0,void 0,r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.config.getProvider();case 2:return e=t.sent,t.next=5,e._send("eth_maxPriorityFeePerGas",[],"getMaxPriorityFeePerGas");case 5:return n=t.sent,t.abrupt("return",Zu(n));case 7:case"end":return t.stop()}}),t,this)})))},e.waitForTransaction=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return o=r.sent,r.abrupt("return",o.waitForTransaction(t,e,n));case 4:case"end":return r.stop()}}),i,this)})))},e.sendGasOptimizedTransaction=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a,u,c,f;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Array.isArray(t)){r.next=2;break}return r.abrupt("return",this._sendGasOptimizedTransaction(t,"sendGasOptimizedTransactionPreSigned"));case 2:return r.next=4,this.config.getProvider();case 4:return a=r.sent,r.prev=5,r.next=8,this.estimateGas(t);case 8:return i=r.sent,r.next=11,this.getMaxPriorityFeePerGas();case 11:return o=r.sent,r.next=14,a.getBlock("latest");case 14:u=r.sent,s=u.baseFeePerGas.toNumber(),r.next=21;break;case 18:throw r.prev=18,r.t0=r.catch(5),new Error("Failed to estimate gas for transaction: "+r.t0);case 21:return c=cf(t,i.toNumber(),s,o),r.next=24,Promise.all(c.map((function(t){return e.signTransaction(t)})));case 24:return f=r.sent,r.abrupt("return",this._sendGasOptimizedTransaction(f,"sendGasOptimizedTransactionGenerated"));case 26:case"end":return r.stop()}}),n,this,[[5,18]])})))},e.getGasOptimizedTransactionStatus=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.abrupt("return",n._send("alchemy_getGasOptimizedTransactionStatus",[t],"getGasOptimizedTransactionStatus"));case 4:case"end":return e.stop()}}),e,this)})))},e._sendGasOptimizedTransaction=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getProvider();case 2:return i=r.sent,r.abrupt("return",i._send("alchemy_sendGasOptimizedTransaction",[{rawTransactions:t}],e));case 4:case"end":return r.stop()}}),n,this)})))},t}();function cf(t,e,r,n){return af.map((function(i){return Object.assign(Object.assign({},t),{gasLimit:e,maxFeePerGas:Math.round(r*i+n*i),maxPriorityFeePerGas:Math.round(i*n)})}))}var ff="alchemy-pending-transactions",hf="alchemy-mined-transactions",lf=[ff,hf],df=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),i(r,[{key:"fromAddress",get:function(){var t=this.tag.split(":");if(t[0]===ff)return t[1]&&"*"!==t[1]?bf(t[1]):void 0}},{key:"toAddress",get:function(){var t=this.tag.split(":");if(t[0]===ff)return t[2]&&"*"!==t[2]?bf(t[2]):void 0}},{key:"hashesOnly",get:function(){var t=this.tag.split(":");if(lf.includes(t[0]))return t[3]&&"*"!==t[3]?"true"===t[3]:void 0}},{key:"includeRemoved",get:function(){var t=this.tag.split(":");if(t[0]===hf)return t[2]&&"*"!==t[2]?"true"===t[2]:void 0}},{key:"addresses",get:function(){var t=this.tag.split(":");if(t[0]===hf)return t[1]&&"*"!==t[1]?function(t){if(""===t)return;return t.split("|").map((function(t){return t.split(",")})).map((function(t){return Object.assign(Object.assign({},"*"!==t[0]&&{to:t[0]}),"*"!==t[1]&&{from:t[1]})}))}(t[1]):void 0}}]),r}(function(){function t(t,e,r){this.listener=e,this.tag=t,this.once=r,this._lastBlockNumber=-2,this._inflight=!1}return t.prototype.pollable=function(){return this.tag.indexOf(":")>=0||["block","network","pending","poll"].indexOf(this.tag)>=0},i(t,[{key:"event",get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter;default:return this.tag}}},{key:"type",get:function(){return this.tag.split(":")[0]}},{key:"hash",get:function(){var t=this.tag.split(":");if("tx"!==t[0])throw new Error("Not a transaction event");return t[1]}},{key:"filter",get:function(){var t=this.tag.split(":");if("filter"!==t[0])throw new Error("Not a transaction event");var e=t[1],r=function(t){if(""===t)return[];return t.split(/&/g).map((function(t){if(""===t)return[];var e=t.split("|").map((function(t){return"null"===t?null:t}));return 1===e.length?e[0]:e}))}(t[2]),n={};return r.length>0&&(n.topics=r),e&&"*"!==e&&(n.address=e),n}}]),t}());function pf(t){return"object"==typeof t&&"method"in t}function mf(t){if(!pf(t))throw new Error("Event tag requires AlchemyEventType");if(t.method===hu.PENDING_TRANSACTIONS)return function(t){var e=vf(t.fromAddress),r=vf(t.toAddress),n=gf(t.hashesOnly);return"alchemy-pending-transactions:"+e+":"+r+":"+n}(t);if(t.method===hu.MINED_TRANSACTIONS)return function(t){var e=function(t){if(void 0===t)return"*";return t.map((function(t){return vf(t.to)+","+vf(t.from)})).join("|")}(t.addresses),r=gf(t.includeRemoved),n=gf(t.hashesOnly);return"alchemy-mined-transactions:"+e+":"+r+":"+n}(t);throw new Error("Unrecognized AlchemyFilterEvent: "+t)}function vf(t){return void 0===t?"*":Array.isArray(t)?t.join("|"):t}function gf(t){return void 0===t?"*":t.toString()}function bf(t){if(""!==t){var e=t.split("|");return 1===e.length?e[0]:e}}var wf=function(){function t(t){this.config=t}var e=t.prototype;return e.on=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getWebSocketProvider();case 2:return i=r.sent,r.next=5,this._resolveEnsAlchemyEvent(t);case 5:o=r.sent,i.on(o,e);case 7:case"end":return r.stop()}}),n,this)}))),this},e.once=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getWebSocketProvider();case 2:return i=r.sent,r.next=5,this._resolveEnsAlchemyEvent(t);case 5:o=r.sent,i.once(o,e);case 7:case"end":return r.stop()}}),n,this)}))),this},e.off=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.config.getWebSocketProvider();case 2:return i=r.sent,r.next=5,this._resolveEnsAlchemyEvent(t);case 5:return o=r.sent,r.abrupt("return",i.off(o,e));case 7:case"end":return r.stop()}}),n,this)}))),this},e.removeAllListeners=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getWebSocketProvider();case 2:if(n=e.sent,!t){e.next=9;break}return e.next=6,this._resolveEnsAlchemyEvent(t);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=void 0;case 10:i=e.t0,n.removeAllListeners(i);case 12:case"end":return e.stop()}}),e,this)}))),this},e.listenerCount=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getWebSocketProvider();case 2:if(n=e.sent,!t){e.next=9;break}return e.next=6,this._resolveEnsAlchemyEvent(t);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=void 0;case 10:return i=e.t0,e.abrupt("return",n.listenerCount(i));case 12:case"end":return e.stop()}}),e,this)})))},e.listeners=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getWebSocketProvider();case 2:if(n=e.sent,!t){e.next=9;break}return e.next=6,this._resolveEnsAlchemyEvent(t);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=void 0;case 10:return i=e.t0,e.abrupt("return",n.listeners(i));case 12:case"end":return e.stop()}}),e,this)})))},e._resolveEnsAlchemyEvent=function(t){return Au(this,void 0,void 0,r().mark((function e(){var i,o,s,a,u=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pf(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(t.method!==hu.MINED_TRANSACTIONS||!t.addresses){e.next=21;break}i=[],o=n(t.addresses);case 5:if((s=o()).done){e.next=18;break}if(!(a=s.value).to){e.next=11;break}return e.next=10,this._resolveNameOrError(a.to);case 10:a.to=e.sent;case 11:if(!a.from){e.next=15;break}return e.next=14,this._resolveNameOrError(a.from);case 14:a.from=e.sent;case 15:i.push(a);case 16:e.next=5;break;case 18:t.addresses=i,e.next=42;break;case 21:if(t.method!==hu.PENDING_TRANSACTIONS){e.next=42;break}if(!t.fromAddress){e.next=32;break}if("string"!=typeof t.fromAddress){e.next=29;break}return e.next=26,this._resolveNameOrError(t.fromAddress);case 26:t.fromAddress=e.sent,e.next=32;break;case 29:return e.next=31,Promise.all(t.fromAddress.map((function(t){return u._resolveNameOrError(t)})));case 31:t.fromAddress=e.sent;case 32:if(!t.toAddress){e.next=42;break}if("string"!=typeof t.toAddress){e.next=39;break}return e.next=36,this._resolveNameOrError(t.toAddress);case 36:t.toAddress=e.sent,e.next=42;break;case 39:return e.next=41,Promise.all(t.toAddress.map((function(t){return u._resolveNameOrError(t)})));case 41:t.toAddress=e.sent;case 42:return e.abrupt("return",t);case 43:case"end":return e.stop()}}),e,this)})))},e._resolveNameOrError=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.config.getProvider();case 2:return n=e.sent,e.next=5,n.resolveName(t);case 5:if(null!==(i=e.sent)){e.next=8;break}throw new Error("Unable to resolve the ENS address: "+t);case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})))},t}(),yf=(t("Alchemy",(function(t){this.config=new Mu(t),this.core=new wc(this.config),this.nft=new Yc(this.config),this.ws=new wf(this.config),this.transact=new uf(this.config),this.notify=new Xc(this.config),this.debug=new Ec(this.config)})),new x("networks/5.7.1"));function Af(t){var e=function(e,r){null==r&&(r={});var n=[];if(e.InfuraProvider&&"-"!==r.infura)try{n.push(new e.InfuraProvider(t,r.infura))}catch(t){}if(e.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new e.EtherscanProvider(t,r.etherscan))}catch(t){}if(e.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new e.AlchemyProvider(t,r.alchemy))}catch(t){}if(e.PocketProvider&&"-"!==r.pocket){try{var i=new e.PocketProvider(t,r.pocket);i.network&&-1===["goerli","ropsten","rinkeby","sepolia"].indexOf(i.network.name)&&n.push(i)}catch(t){}}if(e.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new e.CloudflareProvider(t))}catch(t){}if(e.AnkrProvider&&"-"!==r.ankr)try{var o=new e.AnkrProvider(t,r.ankr);o.network&&-1===["ropsten"].indexOf(o.network.name)&&n.push(o)}catch(t){}if(0===n.length)return null;if(e.FallbackProvider){var s=1;return null!=r.quorum?s=r.quorum:"homestead"===t&&(s=2),new e.FallbackProvider(n,s)}return n[0]};return e.renetwork=function(t){return Af(t)},e}function Ef(t,e){var r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(t,e):null};return r.renetwork=function(e){return Ef(t,e)},r}var kf={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Af("homestead")},xf={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Af("ropsten")},Nf={chainId:63,name:"classicMordor",_defaultProvider:Ef("https://www.ethercluster.com/mordor","classicMordor")},_f={unspecified:{chainId:0,name:"unspecified"},homestead:kf,mainnet:kf,morden:{chainId:2,name:"morden"},ropsten:xf,testnet:xf,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Af("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Af("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Af("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Af("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Ef("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Nf,classicTestnet:Nf,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Ef("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Af("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Af("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Tf(t){if(null==t)return null;if("number"==typeof t){for(var e in _f){var r=_f[e];if(r.chainId===t)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){var n=_f[t];return null==n?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}var i=_f[t.name];if(!i)return"number"!=typeof t.chainId&&yf.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==i.chainId&&yf.throwArgumentError("network chainId mismatch","network",t);var o,s=t._defaultProvider||null;return null==s&&i._defaultProvider&&(s=(o=i._defaultProvider)&&"function"==typeof o.renetwork?i._defaultProvider.renetwork(t):i._defaultProvider),{name:t.name,chainId:i.chainId,ensAddress:t.ensAddress||i.ensAddress||null,_defaultProvider:s}}var Sf=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};function If(t,e){return Sf(this,void 0,void 0,r().mark((function n(){var i,o,s,a,u;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==e&&(e={}),i={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0},!0!==e.skipFetchSetup&&(i.mode="cors",i.cache="no-cache",i.credentials="same-origin",i.redirect="follow",i.referrer="client"),null!=e.fetchOptions&&((o=e.fetchOptions).mode&&(i.mode=o.mode),o.cache&&(i.cache=o.cache),o.credentials&&(i.credentials=o.credentials),o.redirect&&(i.redirect=o.redirect),o.referrer&&(i.referrer=o.referrer)),r.next=6,fetch(t,i);case 6:return s=r.sent,r.next=9,s.arrayBuffer();case 9:return a=r.sent,u={},s.headers.forEach?s.headers.forEach((function(t,e){u[e.toLowerCase()]=t})):s.headers.keys().forEach((function(t){u[t.toLowerCase()]=s.headers.get(t)})),r.abrupt("return",{headers:u,statusCode:s.status,statusMessage:s.statusText,body:R(new Uint8Array(a))});case 13:case"end":return r.stop()}}),n)})))}var Cf=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Rf=new x("web/5.7.1");function Pf(t){return new Promise((function(e){setTimeout(e,t)}))}function Mf(t,e){if(null==t)return null;if("string"==typeof t)return t;if(S(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return It(t)}catch(t){}return F(t)}return t}function Bf(t,e,n){var i=null;if(null!=e){i=St(e);var o="string"==typeof t?{url:t}:Se(t);if(o.headers)0!==Object.keys(o.headers).filter((function(t){return"content-type"===t.toLowerCase()})).length||(o.headers=Se(o.headers),o.headers["content-type"]="application/json");else o.headers={"content-type":"application/json"};t=o}return function(t,e,n){var i="object"==typeof t&&null!=t.throttleLimit?t.throttleLimit:12;Rf.assertArgument(i>0&&i%1==0,"invalid connection throttle limit","connection.throttleLimit",i);var o="object"==typeof t?t.throttleCallback:null,s="object"==typeof t&&"number"==typeof t.throttleSlotInterval?t.throttleSlotInterval:100;Rf.assertArgument(s>0&&s%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);var a="object"==typeof t&&!!t.errorPassThrough,u={},c=null,f={method:"GET"},h=!1,l=12e4;if("string"==typeof t)c=t;else if("object"==typeof t){if(null!=t&&null!=t.url||Rf.throwArgumentError("missing URL","connection.url",t),c=t.url,"number"==typeof t.timeout&&t.timeout>0&&(l=t.timeout),t.headers)for(var d in t.headers)u[d.toLowerCase()]={key:d,value:String(t.headers[d])},["if-none-match","if-modified-since"].indexOf(d.toLowerCase())>=0&&(h=!0);if(f.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==c.substring(0,6)&&!0!==t.allowInsecureAuthentication&&Rf.throwError("basic authentication requires a secure https url",x.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});var p=t.user+":"+t.password;u.authorization={key:"Authorization",value:"Basic "+Ot(St(p))}}null!=t.skipFetchSetup&&(f.skipFetchSetup=!!t.skipFetchSetup),null!=t.fetchOptions&&(f.fetchOptions=Se(t.fetchOptions))}var m,v=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),g=c?c.match(v):null;if(g)try{var b={statusCode:200,statusMessage:"OK",headers:{"content-type":g[1]||"text/plain"},body:g[2]?Bt(g[3]):(m=g[3],St(m.replace(/%([0-9a-f][0-9a-f])/gi,(function(t,e){return String.fromCharCode(parseInt(e,16))}))))},w=b.body;return n&&(w=n(b.body,b)),Promise.resolve(w)}catch(t){Rf.throwError("processing response error",x.errors.SERVER_ERROR,{body:Mf(g[1],g[2]),error:t,requestBody:null,requestMethod:"GET",url:c})}e&&(f.method="POST",f.body=e,null==u["content-type"]&&(u["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==u["content-length"]&&(u["content-length"]={key:"Content-Length",value:String(e.length)}));var y={};Object.keys(u).forEach((function(t){var e=u[t];y[e.key]=e.value})),f.headers=y;var A=function(){var t=null;return{promise:new Promise((function(e,r){l&&(t=setTimeout((function(){null!=t&&(t=null,r(Rf.makeError("timeout",x.errors.TIMEOUT,{requestBody:Mf(f.body,y["content-type"]),requestMethod:f.method,timeout:l,url:c})))}),l))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),E=function(){return Cf(this,void 0,void 0,r().mark((function t(){var e,u,l,d,p,m,v,g,b,w;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<i)){t.next=65;break}return u=null,t.prev=3,t.next=6,If(c,f);case 6:if(u=t.sent,!(e<i)){t.next=28;break}if(301!==u.statusCode&&302!==u.statusCode){t.next=15;break}if(l=u.headers.location||"","GET"!==f.method||!l.match(/^https:/)){t.next=13;break}return c=u.headers.location,t.abrupt("continue",62);case 13:t.next=28;break;case 15:if(429!==u.statusCode){t.next=28;break}if(d=!0,!o){t.next=21;break}return t.next=20,o(e,c);case 20:d=t.sent;case 21:if(!d){t.next=28;break}return p=0,m=u.headers["retry-after"],p="string"==typeof m&&m.match(/^[1-9][0-9]*$/)?1e3*parseInt(m):s*parseInt(String(Math.random()*Math.pow(2,e))),t.next=27,Pf(p);case 27:return t.abrupt("continue",62);case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(3),null==(u=t.t0.response)&&(A.cancel(),Rf.throwError("missing response",x.errors.SERVER_ERROR,{requestBody:Mf(f.body,y["content-type"]),requestMethod:f.method,serverError:t.t0,url:c}));case 34:if(v=u.body,h&&304===u.statusCode?v=null:!a&&(u.statusCode<200||u.statusCode>=300)&&(A.cancel(),Rf.throwError("bad response",x.errors.SERVER_ERROR,{status:u.statusCode,headers:u.headers,body:Mf(v,u.headers?u.headers["content-type"]:null),requestBody:Mf(f.body,y["content-type"]),requestMethod:f.method,url:c})),!n){t.next=60;break}return t.prev=37,t.next=40,n(v,u);case 40:return g=t.sent,A.cancel(),t.abrupt("return",g);case 45:if(t.prev=45,t.t1=t.catch(37),!(t.t1.throttleRetry&&e<i)){t.next=58;break}if(b=!0,!o){t.next=53;break}return t.next=52,o(e,c);case 52:b=t.sent;case 53:if(!b){t.next=58;break}return w=s*parseInt(String(Math.random()*Math.pow(2,e))),t.next=57,Pf(w);case 57:return t.abrupt("continue",62);case 58:A.cancel(),Rf.throwError("processing response error",x.errors.SERVER_ERROR,{body:Mf(v,u.headers?u.headers["content-type"]:null),error:t.t1,requestBody:Mf(f.body,y["content-type"]),requestMethod:f.method,url:c});case 60:return A.cancel(),t.abrupt("return",v);case 62:e++,t.next=1;break;case 65:return t.abrupt("return",Rf.throwError("failed response",x.errors.SERVER_ERROR,{requestBody:Mf(f.body,y["content-type"]),requestMethod:f.method,url:c}));case 66:case"end":return t.stop()}}),t,null,[[3,30],[37,45]])})))}();return Promise.race([A.promise,E])}(t,i,(function(t,e){var r=null;if(null!=t)try{r=JSON.parse(It(t))}catch(e){Rf.throwError("invalid JSON",x.errors.SERVER_ERROR,{body:t,error:e})}return n&&(r=n(r,e)),r}))}function Of(t,e){return e||(e={}),null==(e=Se(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(r,n){var i=null,o=!1,s=function(){return!o&&(o=!0,i&&clearTimeout(i),!0)};e.timeout&&(i=setTimeout((function(){s()&&n(new Error("timeout"))}),e.timeout));var a=e.retryLimit,u=0;!function i(){return t().then((function(t){if(void 0!==t)s()&&r(t);else if(e.oncePoll)e.oncePoll.once("poll",i);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!o){if(++u>a)return void(s()&&n(new Error("retry limit reached")));var c=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));c<e.floor&&(c=e.floor),c>e.ceiling&&(c=e.ceiling),setTimeout(i,c)}return null}),(function(t){s()&&n(t)}))}()}))}for(var Ff="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Df={},Lf=0;Lf<Ff.length;Lf++){var Uf=Ff.charAt(Lf);if(void 0!==Df[Uf])throw new TypeError(Uf+" is ambiguous");Df[Uf]=Lf}function Gf(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function zf(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Gf(e)^n>>5}for(e=Gf(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Gf(e)^31&i}return e}function Hf(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;var i=(t=r).lastIndexOf("1");if(-1===i)return"No separator character for "+t;if(0===i)return"Missing prefix for "+t;var o=t.slice(0,i),s=t.slice(i+1);if(s.length<6)return"Data too short";var a=zf(o);if("string"==typeof a)return a;for(var u=[],c=0;c<s.length;++c){var f=s.charAt(c),h=Df[f];if(void 0===h)return"Unknown character "+f;a=Gf(a)^h,c+6>=s.length||u.push(h)}return 1!==a?"Invalid checksum for "+t:{prefix:o,words:u}}function qf(t,e,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],u=0;u<t.length;++u)for(i=i<<e|t[u],o+=e;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=e)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}var jf=f({decodeUnsafe:function(){var t=Hf.apply(null,arguments);if("object"==typeof t)return t},decode:function(t){var e=Hf.apply(null,arguments);if("object"==typeof e)return e;throw new Error(e)},encode:function(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");var n=zf(t=t.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=t+"1",o=0;o<e.length;++o){var s=e[o];if(s>>5!=0)throw new Error("Non 5-bit word");n=Gf(n)^s,i+=Ff.charAt(s)}for(o=0;o<6;++o)n=Gf(n);for(n^=1,o=0;o<6;++o){i+=Ff.charAt(n>>5*(5-o)&31)}return i},toWordsUnsafe:function(t){var e=qf(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=qf(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=qf(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=qf(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}}),Kf="providers/5.7.2",Wf=new x(Kf),Vf=function(){function t(){this.formats=this.getDefaultFormats()}var e=t.prototype;return e.getDefaultFormats=function(){var e=this,r={},n=this.address.bind(this),i=this.bigNumber.bind(this),o=this.blockTag.bind(this),s=this.data.bind(this),a=this.hash.bind(this),u=this.hex.bind(this),c=this.number.bind(this),f=this.type.bind(this);return r.transaction={hash:a,type:f,accessList:t.allowNull(this.accessList.bind(this),null),blockHash:t.allowNull(a,null),blockNumber:t.allowNull(c,null),transactionIndex:t.allowNull(c,null),confirmations:t.allowNull(c,null),from:n,gasPrice:t.allowNull(i),maxPriorityFeePerGas:t.allowNull(i),maxFeePerGas:t.allowNull(i),gasLimit:i,to:t.allowNull(n,null),value:i,nonce:c,data:s,r:t.allowNull(this.uint256),s:t.allowNull(this.uint256),v:t.allowNull(c),creates:t.allowNull(n,null),raw:t.allowNull(s)},r.transactionRequest={from:t.allowNull(n),nonce:t.allowNull(c),gasLimit:t.allowNull(i),gasPrice:t.allowNull(i),maxPriorityFeePerGas:t.allowNull(i),maxFeePerGas:t.allowNull(i),to:t.allowNull(n),value:t.allowNull(i),data:t.allowNull((function(t){return e.data(t,!0)})),type:t.allowNull(c),accessList:t.allowNull(this.accessList.bind(this),null)},r.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:a,address:n,topics:t.arrayOf(a),data:s,logIndex:c,blockHash:a},r.receipt={to:t.allowNull(this.address,null),from:t.allowNull(this.address,null),contractAddress:t.allowNull(n,null),transactionIndex:c,root:t.allowNull(u),gasUsed:i,logsBloom:t.allowNull(s),blockHash:a,transactionHash:a,logs:t.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:t.allowNull(c,null),cumulativeGasUsed:i,effectiveGasPrice:t.allowNull(i),status:t.allowNull(c),type:f},r.block={hash:t.allowNull(a),parentHash:a,number:c,timestamp:c,nonce:t.allowNull(u),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:t.allowNull(n),extraData:s,transactions:t.allowNull(t.arrayOf(a)),baseFeePerGas:t.allowNull(i)},r.blockWithTransactions=Se(r.block),r.blockWithTransactions.transactions=t.allowNull(t.arrayOf(this.transactionResponse.bind(this))),r.filter={fromBlock:t.allowNull(o,void 0),toBlock:t.allowNull(o,void 0),blockHash:t.allowNull(a,void 0),address:t.allowNull(n,void 0),topics:t.allowNull(this.topics.bind(this),void 0)},r.filterLog={blockNumber:t.allowNull(c),blockHash:t.allowNull(a),transactionIndex:c,removed:t.allowNull(this.boolean.bind(this)),address:n,data:t.allowFalsish(s,"0x"),topics:t.arrayOf(a),transactionHash:a,logIndex:c},r},e.accessList=function(t){return Fa(t||[])},e.number=function(t){return"0x"===t?0:tt.from(t).toNumber()},e.type=function(t){return"0x"===t||null==t?0:tt.from(t).toNumber()},e.bigNumber=function(t){return tt.from(t)},e.boolean=function(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===(t=t.toLowerCase()))return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)},e.hex=function(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),B(t))?t.toLowerCase():Wf.throwArgumentError("invalid hash","value",t)},e.data=function(t,e){var r=this.hex(t,e);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+t);return r},e.address=function(t){return Ee(t)},e.callAddress=function(t){if(!B(t,32))return null;var e=Ee(L(t,12));return"0x0000000000000000000000000000000000000000"===e?null:e},e.contractAddress=function(t){return function(t){var e=null;try{e=Ee(t.from)}catch(e){ve.throwArgumentError("missing from address","transaction",t)}return Ee(L(j(le([e,M(R(tt.from(t.nonce).toHexString()))])),12))}(t)},e.blockTag=function(t){if(null==t)return"latest";if("earliest"===t)return"0x0";switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}if("number"==typeof t||B(t))return G(t);throw new Error("invalid blockTag")},e.hash=function(t,e){var r=this.hex(t,e);return 32!==D(r)?Wf.throwArgumentError("invalid hash","value",t):r},e.difficulty=function(t){if(null==t)return null;var e=tt.from(t);try{return e.toNumber()}catch(t){}return null},e.uint256=function(t){if(!B(t))throw new Error("invalid uint256");return H(t,32)},e._block=function(e,r){null!=e.author&&null==e.miner&&(e.miner=e.author);var n=null!=e._difficulty?e._difficulty:e.difficulty,i=t.check(r,e);return i._difficulty=null==n?null:tt.from(n),i},e.block=function(t){return this._block(t,this.formats.block)},e.blockWithTransactions=function(t){return this._block(t,this.formats.blockWithTransactions)},e.transactionRequest=function(e){return t.check(this.formats.transactionRequest,e)},e.transactionResponse=function(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&tt.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);var r=t.check(this.formats.transaction,e);if(null!=e.chainId){var n=e.chainId;B(n)&&(n=tt.from(n).toNumber()),r.chainId=n}else{var i=e.networkId;null==i&&null==r.v&&(i=e.chainId),B(i)&&(i=tt.from(i).toNumber()),"number"!=typeof i&&null!=r.v&&((i=(r.v-35)/2)<0&&(i=0),i=parseInt(i)),"number"!=typeof i&&(i=0),r.chainId=i}return r.blockHash&&"x"===r.blockHash.replace(/0/g,"")&&(r.blockHash=null),r},e.transaction=function(t){return za(t)},e.receiptLog=function(e){return t.check(this.formats.receiptLog,e)},e.receipt=function(e){var r=t.check(this.formats.receipt,e);if(null!=r.root)if(r.root.length<=4){var n=tt.from(r.root).toNumber();0===n||1===n?(null!=r.status&&r.status!==n&&Wf.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Wf.throwArgumentError("invalid alt-root-status","value.root",r.root)}else 66!==r.root.length&&Wf.throwArgumentError("invalid root hash","value.root",r.root);return null!=r.status&&(r.byzantium=!0),r},e.topics=function(t){var e=this;return Array.isArray(t)?t.map((function(t){return e.topics(t)})):null!=t?this.hash(t,!0):null},e.filter=function(e){return t.check(this.formats.filter,e)},e.filterLog=function(e){return t.check(this.formats.filterLog,e)},t.check=function(t,e){var r={};for(var n in t)try{var i=t[n](e[n]);void 0!==i&&(r[n]=i)}catch(t){throw t.checkKey=n,t.checkValue=e[n],t}return r},t.allowNull=function(t,e){return function(r){return null==r?e:t(r)}},t.allowFalsish=function(t,e){return function(r){return r?t(r):e}},t.arrayOf=function(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");var r=[];return e.forEach((function(e){r.push(t(e))})),r}},t}(),Jf=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Qf=new x(Kf);function Yf(t){return null==t?"null":(32!==D(t)&&Qf.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function Xf(t){for(t=t.slice();t.length>0&&null==t[t.length-1];)t.pop();return t.map((function(t){if(Array.isArray(t)){var e={};t.forEach((function(t){e[Yf(t)]=!0}));var r=Object.keys(e);return r.sort(),r.join("|")}return Yf(t)})).join("&")}function Zf(t){if("string"==typeof t){if(32===D(t=t.toLowerCase()))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+Xf(t);if(Ii.isForkEvent(t))throw Qf.warn("not implemented"),new Error("not implemented");if(t&&"object"==typeof t)return"filter:"+(t.address||"*")+":"+Xf(t.topics||[])}throw new Error("invalid event - "+t)}function $f(){return(new Date).getTime()}function th(t){return new Promise((function(e){setTimeout(e,t)}))}var eh=["block","network","pending","poll"],rh=function(){function t(t,e,r){Ne(this,"tag",t),Ne(this,"listener",e),Ne(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}return t.prototype.pollable=function(){return this.tag.indexOf(":")>=0||eh.indexOf(this.tag)>=0},i(t,[{key:"event",get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}},{key:"type",get:function(){return this.tag.split(":")[0]}},{key:"hash",get:function(){var t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}},{key:"filter",get:function(){var t=this.tag.split(":");if("filter"!==t[0])return null;var e=t[1],r=function(t){return""===t?[]:t.split(/&/g).map((function(t){if(""===t)return[];var e=t.split("|").map((function(t){return"null"===t?null:t}));return 1===e.length?e[0]:e}))}(t[2]),n={};return r.length>0&&(n.topics=r),e&&"*"!==e&&(n.address=e),n}}]),t}(),nh={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function ih(t){return H(tt.from(t).toHexString(),32)}function oh(t){return Di.encode(P([t,L(zs(zs(t)),0,4)]))}var sh=new RegExp("^(ipfs)://(.*)$","i"),ah=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),sh,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function uh(t,e){try{return It(ch(t,e))}catch(t){}return null}function ch(t,e){if("0x"===t)return null;var r=tt.from(L(t,e,e+32)).toNumber(),n=tt.from(L(t,r,r+32)).toNumber();return L(t,r+32,r+32+n)}function fh(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Qf.throwArgumentError("unsupported IPFS format","link",t),"https://gateway.ipfs.io/ipfs/"+t}function hh(t){var e=R(t);if(e.length>32)throw new Error("internal; should not happen");var r=new Uint8Array(32);return r.set(e,32-e.length),r}function lh(t){if(t.length%32==0)return t;var e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}function dh(t){for(var e=[],r=0,n=0;n<t.length;n++)e.push(null),r+=32;for(var i=0;i<t.length;i++){var o=R(t[i]);e[i]=hh(r),e.push(hh(o.length)),e.push(lh(o)),r+=32+32*Math.ceil(o.length/32)}return U(e)}var ph=function(){function t(t,e,r,n){Ne(this,"provider",t),Ne(this,"name",r),Ne(this,"address",t.formatter.address(e)),Ne(this,"_resolvedAddress",n)}var e=t.prototype;return e.supportsWildcard=function(){var t=this;return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((function(t){return tt.from(t).eq(1)})).catch((function(e){if(e.code===x.errors.CALL_EXCEPTION)return!1;throw t._supportsEip2544=null,e}))),this._supportsEip2544},e._fetch=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={to:this.address,ccipReadEnabled:!0,data:U([t,ae(this.name),e||"0x"])},o=!1,r.next=4,this.supportsWildcard();case 4:if(!r.sent){r.next=7;break}o=!0,i.data=U(["0x9061b923",dh([(n=this.name,F(P(se(n).map((function(t){if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");var e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e}))))+"00"),i.data])]);case 7:return r.prev=7,r.next=10,this.provider.call(i);case 10:return R(s=r.sent).length%32==4&&Qf.throwError("resolver threw error",x.errors.CALL_EXCEPTION,{transaction:i,data:s}),o&&(s=ch(s,0)),r.abrupt("return",s);case 16:if(r.prev=16,r.t0=r.catch(7),r.t0.code!==x.errors.CALL_EXCEPTION){r.next=20;break}return r.abrupt("return",null);case 20:throw r.t0;case 21:case"end":return r.stop()}var n}),n,this,[[7,16]])})))},e._fetchBytes=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._fetch(t,e);case 2:if(null==(i=r.sent)){r.next=5;break}return r.abrupt("return",ch(i,0));case 5:return r.abrupt("return",null);case 6:case"end":return r.stop()}}),n,this)})))},e._getAddress=function(t,e){var r=nh[String(t)];if(null==r&&Qf.throwError("unsupported coin type: "+t,x.errors.UNSUPPORTED_OPERATION,{operation:"getAddress("+t+")"}),"eth"===r.ilk)return this.provider.formatter.address(e);var n=R(e);if(null!=r.p2pkh){var i=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(i){var o=parseInt(i[1],16);if(i[2].length===2*o&&o>=1&&o<=75)return oh(P([[r.p2pkh],"0x"+i[2]]))}}if(null!=r.p2sh){var s=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){var a=parseInt(s[1],16);if(s[2].length===2*a&&a>=1&&a<=75)return oh(P([[r.p2sh],"0x"+s[2]]))}}if(null!=r.prefix){var u=n[1],c=n[0];if(0===c?20!==u&&32!==u&&(c=-1):c=-1,c>=0&&n.length===2+u&&u>=1&&u<=75){var f=jf.toWords(n.slice(2));return f.unshift(c),jf.encode(r.prefix,f)}}return null},e.getAddress=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t&&(t=60),60!==t){e.next=16;break}return e.prev=2,e.next=5,this._fetch("0x3b3b57de");case 5:if("0x"!==(n=e.sent)&&"0x0000000000000000000000000000000000000000000000000000000000000000"!==n){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",this.provider.formatter.callAddress(n));case 11:if(e.prev=11,e.t0=e.catch(2),e.t0.code!==x.errors.CALL_EXCEPTION){e.next=15;break}return e.abrupt("return",null);case 15:throw e.t0;case 16:return e.next=18,this._fetchBytes("0xf1cb7e06",ih(t));case 18:if(null!=(i=e.sent)&&"0x"!==i){e.next=21;break}return e.abrupt("return",null);case 21:return null==(o=this._getAddress(t,i))&&Qf.throwError("invalid or unsupported coin data",x.errors.UNSUPPORTED_OPERATION,{operation:"getAddress("+t+")",coinType:t,data:i}),e.abrupt("return",o);case 24:case"end":return e.stop()}}),e,this,[[2,11]])})))},e.getAvatar=function(){return Jf(this,void 0,void 0,r().mark((function t(){var e,n,i,o,s,a,u,c,f,h,l,d,p,m,v,g;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[{type:"name",content:this.name}],t.prev=1,t.next=4,this.getText("avatar");case 4:if(null!=(n=t.sent)){t.next=7;break}return t.abrupt("return",null);case 7:i=0;case 8:if(!(i<ah.length)){t.next=91;break}if(null!=(o=n.match(ah[i]))){t.next=12;break}return t.abrupt("continue",88);case 12:s=o[1].toLowerCase(),t.t0=s,t.next="https"===t.t0?16:"data"===t.t0?18:"ipfs"===t.t0?20:"erc721"===t.t0||"erc1155"===t.t0?22:88;break;case 16:return e.push({type:"url",content:n}),t.abrupt("return",{linkage:e,url:n});case 18:return e.push({type:"data",content:n}),t.abrupt("return",{linkage:e,url:n});case 20:return e.push({type:"ipfs",content:n}),t.abrupt("return",{linkage:e,url:fh(n)});case 22:if(a="erc721"===s?"0xc87b56dd":"0x0e89341c",e.push({type:s,content:n}),t.t1=this._resolvedAddress,t.t1){t.next=29;break}return t.next=28,this.getAddress();case 28:t.t1=t.sent;case 29:if(u=t.t1,2===(c=(o[2]||"").split("/")).length){t.next=33;break}return t.abrupt("return",null);case 33:return t.next=35,this.provider.formatter.address(c[0]);case 35:if(f=t.sent,h=H(tt.from(c[1]).toHexString(),32),"erc721"!==s){t.next=48;break}return t.t2=this.provider.formatter,t.next=41,this.provider.call({to:f,data:U(["0x6352211e",h])});case 41:if(t.t3=t.sent,l=t.t2.callAddress.call(t.t2,t.t3),u===l){t.next=45;break}return t.abrupt("return",null);case 45:e.push({type:"owner",content:l}),t.next=57;break;case 48:if("erc1155"!==s){t.next=57;break}return t.t4=tt,t.next=52,this.provider.call({to:f,data:U(["0x00fdd58e",H(u,32),h])});case 52:if(t.t5=t.sent,!(d=t.t4.from.call(t.t4,t.t5)).isZero()){t.next=56;break}return t.abrupt("return",null);case 56:e.push({type:"balance",content:d.toString()});case 57:return p={to:this.provider.formatter.address(c[0]),data:U([a,h])},t.t6=uh,t.next=61,this.provider.call(p);case 61:if(t.t7=t.sent,null!=(m=(0,t.t6)(t.t7,0))){t.next=65;break}return t.abrupt("return",null);case 65:return e.push({type:"metadata-url-base",content:m}),"erc1155"===s&&(m=m.replace("{id}",h.substring(2)),e.push({type:"metadata-url-expanded",content:m})),m.match(/^ipfs:/i)&&(m=fh(m)),e.push({type:"metadata-url",content:m}),t.next=71,Bf(m);case 71:if(v=t.sent){t.next=74;break}return t.abrupt("return",null);case 74:if(e.push({type:"metadata",content:JSON.stringify(v)}),"string"==typeof(g=v.image)){t.next=78;break}return t.abrupt("return",null);case 78:if(!g.match(/^(https:\/\/|data:)/i)){t.next=81;break}t.next=86;break;case 81:if(null!=g.match(sh)){t.next=84;break}return t.abrupt("return",null);case 84:e.push({type:"url-ipfs",content:g}),g=fh(g);case 86:return e.push({type:"url",content:g}),t.abrupt("return",{linkage:e,url:g});case 88:i++,t.next=8;break;case 91:t.next=95;break;case 93:t.prev=93,t.t8=t.catch(1);case 95:return t.abrupt("return",null);case 96:case"end":return t.stop()}}),t,this,[[1,93]])})))},e.getContentHash=function(){return Jf(this,void 0,void 0,r().mark((function t(){var e,n,i,o,s,a,u,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetchBytes("0xbc1c58d1");case 2:if(null!=(e=t.sent)&&"0x"!==e){t.next=5;break}return t.abrupt("return",null);case 5:if(!(n=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){t.next=10;break}if(i=parseInt(n[3],16),n[4].length!==2*i){t.next=10;break}return t.abrupt("return","ipfs://"+Di.encode("0x"+n[1]));case 10:if(!(o=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){t.next=15;break}if(s=parseInt(o[3],16),o[4].length!==2*s){t.next=15;break}return t.abrupt("return","ipns://"+Di.encode("0x"+o[1]));case 15:if(!(a=e.match(/^0xe40101fa011b20([0-9a-f]*)$/))){t.next=19;break}if(64!==a[1].length){t.next=19;break}return t.abrupt("return","bzz://"+a[1]);case 19:if(!(u=e.match(/^0x90b2c605([0-9a-f]*)$/))){t.next=25;break}if(68!==u[1].length){t.next=25;break}return c={"=":"","+":"-","/":"_"},f=Ot("0x"+u[1]).replace(/[=+\/]/g,(function(t){return c[t]})),t.abrupt("return","sia://"+f);case 25:return t.abrupt("return",Qf.throwError("invalid or unsupported content hash data",x.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e}));case 26:case"end":return t.stop()}}),t,this)})))},e.getText=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=St(t),(n=P([ih(64),ih(n.length),n])).length%32!=0&&(n=P([n,H("0x",32-t.length%32)])),e.next=5,this._fetchBytes("0x59d1d43c",F(n));case 5:if(null!=(i=e.sent)&&"0x"!==i){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",It(i));case 9:case"end":return e.stop()}}),e,this)})))},t}(),mh=null,vh=1,gh=function(t){function n(e){var r;if((r=t.call(this)||this)._events=[],r._emitted={block:-2},r.disableCcipRead=!1,r.formatter=(this instanceof n?this.constructor:void 0).getFormatter(),Ne(o(r),"anyNetwork","any"===e),r.anyNetwork&&(e=r.detectNetwork()),e instanceof Promise)r._networkPromise=e,e.catch((function(t){})),r._ready().catch((function(t){}));else{var i=_e(this instanceof n?this.constructor:void 0,"getNetwork")(e);i?(Ne(o(r),"_network",i),r.emit("network",i,null)):Qf.throwArgumentError("invalid network","network",e)}return r._maxInternalBlockNumber=-1024,r._lastBlockNumber=-2,r._maxFilterBlockRange=10,r._pollingInterval=4e3,r._fastQueryDate=0,r}e(n,t);var s=n.prototype;return s._ready=function(){return Jf(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this._network){t.next=17;break}if(e=null,!this._networkPromise){t.next=11;break}return t.prev=3,t.next=6,this._networkPromise;case 6:e=t.sent,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(3);case 11:if(null!=e){t.next=15;break}return t.next=14,this.detectNetwork();case 14:e=t.sent;case 15:e||Qf.throwError("no network detected",x.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:Ne(this,"_network",e),this.emit("network",e,null));case 17:return t.abrupt("return",this._network);case 18:case"end":return t.stop()}}),t,this,[[3,9]])})))},n.getFormatter=function(){return null==mh&&(mh=new Vf),mh},n.getNetwork=function(t){return Tf(null==t?"homestead":t)},s.ccipReadFetch=function(t,e,n){return Jf(this,void 0,void 0,r().mark((function i(){var o,s,a,u,c,f,h,l,d;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.disableCcipRead&&0!==n.length){r.next=2;break}return r.abrupt("return",null);case 2:o=t.to.toLowerCase(),s=e.toLowerCase(),a=[],u=0;case 6:if(!(u<n.length)){r.next=22;break}return c=n[u],f=c.replace("{sender}",o).replace("{data}",s),h=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:o}),r.next=12,Bf({url:f,errorPassThrough:!0},h,(function(t,e){return t.status=e.statusCode,t}));case 12:if(!(l=r.sent).data){r.next=15;break}return r.abrupt("return",l.data);case 15:if(d=l.message||"unknown error",!(l.status>=400&&l.status<500)){r.next=18;break}return r.abrupt("return",Qf.throwError("response not found during CCIP fetch: "+d,x.errors.SERVER_ERROR,{url:c,errorMessage:d}));case 18:a.push(d);case 19:u++,r.next=6;break;case 22:return r.abrupt("return",Qf.throwError("error encountered during CCIP fetch: "+a.map((function(t){return JSON.stringify(t)})).join(", "),x.errors.SERVER_ERROR,{urls:n,errorMessages:a}));case 23:case"end":return r.stop()}}),i,this)})))},s._getInternalBlockNumber=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i,o,s,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready();case 2:if(!(t>0)){e.next=20;break}case 3:if(!this._internalBlockNumber){e.next=20;break}return n=this._internalBlockNumber,e.prev=5,e.next=8,n;case 8:if(i=e.sent,!($f()-i.respTime<=t)){e.next=11;break}return e.abrupt("return",i.blockNumber);case 11:return e.abrupt("break",20);case 14:if(e.prev=14,e.t0=e.catch(5),this._internalBlockNumber!==n){e.next=18;break}return e.abrupt("break",20);case 18:e.next=3;break;case 20:return o=$f(),s=Te({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((function(t){return null}),(function(t){return t}))}).then((function(t){var e=t.blockNumber,r=t.networkError;if(r)throw a._internalBlockNumber===s&&(a._internalBlockNumber=null),r;var n=$f();return(e=tt.from(e).toNumber())<a._maxInternalBlockNumber&&(e=a._maxInternalBlockNumber),a._maxInternalBlockNumber=e,a._setFastBlockNumber(e),{blockNumber:e,reqTime:o,respTime:n}})),this._internalBlockNumber=s,s.catch((function(t){a._internalBlockNumber===s&&(a._internalBlockNumber=null)})),e.next=26,s;case 26:return e.abrupt("return",e.sent.blockNumber);case 27:case"end":return e.stop()}}),e,this,[[5,14]])})))},s.poll=function(){return Jf(this,void 0,void 0,r().mark((function t(){var e,n,i,o,s=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=vh++,n=[],i=null,t.prev=3,t.next=6,this._getInternalBlockNumber(100+this.pollingInterval/2);case 6:i=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),this.emit("error",t.t0),t.abrupt("return");case 13:if(this._setFastBlockNumber(i),this.emit("poll",e,i),i!==this._lastBlockNumber){t.next=18;break}return this.emit("didPoll",e),t.abrupt("return");case 18:if(-2===this._emitted.block&&(this._emitted.block=i-1),Math.abs(this._emitted.block-i)>1e3)Qf.warn("network block skew detected; skipping block events (emitted="+this._emitted.block+" blockNumber"+i+")"),this.emit("error",Qf.makeError("network block skew detected",x.errors.NETWORK_ERROR,{blockNumber:i,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",i);else for(o=this._emitted.block+1;o<=i;o++)this.emit("block",o);return this._emitted.block!==i&&(this._emitted.block=i,Object.keys(this._emitted).forEach((function(t){if("block"!==t){var e=s._emitted[t];"pending"!==e&&i-e>12&&delete s._emitted[t]}}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=i-1),this._events.forEach((function(t){switch(t.type){case"tx":var e=t.hash,r=s.getTransactionReceipt(e).then((function(t){return t&&null!=t.blockNumber?(s._emitted["t:"+e]=t.blockNumber,s.emit(e,t),null):null})).catch((function(t){s.emit("error",t)}));n.push(r);break;case"filter":if(!t._inflight){t._inflight=!0,-2===t._lastBlockNumber&&(t._lastBlockNumber=i-1);var o=t.filter;o.fromBlock=t._lastBlockNumber+1,o.toBlock=i;var a=o.toBlock-s._maxFilterBlockRange;a>o.fromBlock&&(o.fromBlock=a),o.fromBlock<0&&(o.fromBlock=0);var u=s.getLogs(o).then((function(e){t._inflight=!1,0!==e.length&&e.forEach((function(e){e.blockNumber>t._lastBlockNumber&&(t._lastBlockNumber=e.blockNumber),s._emitted["b:"+e.blockHash]=e.blockNumber,s._emitted["t:"+e.transactionHash]=e.blockNumber,s.emit(o,e)}))})).catch((function(e){s.emit("error",e),t._inflight=!1}));n.push(u)}}})),this._lastBlockNumber=i,Promise.all(n).then((function(){s.emit("didPoll",e)})).catch((function(t){s.emit("error",t)})),t.abrupt("return");case 26:case"end":return t.stop()}}),t,this,[[3,9]])})))},s.resetEventsBlock=function(t){this._lastBlockNumber=t-1,this.polling&&this.poll()},s.detectNetwork=function(){return Jf(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Qf.throwError("provider does not support network detection",x.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"}));case 1:case"end":return t.stop()}}),t)})))},s.getNetwork=function(){return Jf(this,void 0,void 0,r().mark((function t(){var e,n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready();case 2:return e=t.sent,t.next=5,this.detectNetwork();case 5:if(n=t.sent,e.chainId===n.chainId){t.next=23;break}if(!this.anyNetwork){t.next=20;break}return this._network=n,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",n,e),t.next=19,th(0);case 19:return t.abrupt("return",this._network);case 20:throw i=Qf.makeError("underlying network changed",x.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:n}),this.emit("error",i),i;case 23:return t.abrupt("return",e);case 24:case"end":return t.stop()}}),t,this)})))},s._getFastBlockNumber=function(){var t=this,e=$f();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((function(e){return(null==t._fastBlockNumber||e>t._fastBlockNumber)&&(t._fastBlockNumber=e),t._fastBlockNumber}))),this._fastBlockNumberPromise},s._setFastBlockNumber=function(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=$f(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))},s.waitForTransaction=function(t,e,n){return Jf(this,void 0,void 0,r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this._waitForTransaction(t,null==e?1:e,n||0,null));case 1:case"end":return r.stop()}}),i,this)})))},s._waitForTransaction=function(t,e,n,i){return Jf(this,void 0,void 0,r().mark((function o(){var s,a=this;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getTransactionReceipt(t);case 2:if(!(((s=o.sent)?s.confirmations:0)>=e)){o.next=5;break}return o.abrupt("return",s);case 5:return o.abrupt("return",new Promise((function(o,s){var u=[],c=!1,f=function(){return!!c||(c=!0,u.forEach((function(t){t()})),!1)},h=function(t){t.confirmations<e||f()||o(t)};if(a.on(t,h),u.push((function(){a.removeListener(t,h)})),i){var l=i.startBlock,d=null,p=function n(o){return Jf(a,void 0,void 0,r().mark((function a(){var u=this;return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!c){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,th(1e3);case 4:this.getTransactionCount(i.from).then((function(a){return Jf(u,void 0,void 0,r().mark((function u(){var h,p,m,v,g,b;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!c){r.next=2;break}return r.abrupt("return");case 2:if(!(a<=i.nonce)){r.next=6;break}l=o,r.next=41;break;case 6:return r.next=8,this.getTransaction(t);case 8:if(!(h=r.sent)||null==h.blockNumber){r.next=11;break}return r.abrupt("return");case 11:null==d&&(d=l-3)<i.startBlock&&(d=i.startBlock);case 12:if(!(d<=o)){r.next=41;break}if(!c){r.next=15;break}return r.abrupt("return");case 15:return r.next=17,this.getBlockWithTransactions(d);case 17:p=r.sent,m=0;case 19:if(!(m<p.transactions.length)){r.next=38;break}if((v=p.transactions[m]).hash!==t){r.next=23;break}return r.abrupt("return");case 23:if(v.from!==i.from||v.nonce!==i.nonce){r.next=35;break}if(!c){r.next=26;break}return r.abrupt("return");case 26:return r.next=28,this.waitForTransaction(v.hash,e);case 28:if(g=r.sent,!f()){r.next=31;break}return r.abrupt("return");case 31:return b="replaced",v.data===i.data&&v.to===i.to&&v.value.eq(i.value)?b="repriced":"0x"===v.data&&v.from===v.to&&v.value.isZero()&&(b="cancelled"),s(Qf.makeError("transaction was replaced",x.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===b||"cancelled"===b,reason:b,replacement:this._wrapTransaction(v),hash:t,receipt:g})),r.abrupt("return");case 35:m++,r.next=19;break;case 38:d++,r.next=12;break;case 41:if(!c){r.next=43;break}return r.abrupt("return");case 43:this.once("block",n);case 44:case"end":return r.stop()}}),u,this)})))}),(function(t){c||u.once("block",n)}));case 5:case"end":return a.stop()}}),a,this)})))};if(c)return;a.once("block",p),u.push((function(){a.removeListener("block",p)}))}if("number"==typeof n&&n>0){var m=setTimeout((function(){f()||s(Qf.makeError("timeout exceeded",x.errors.TIMEOUT,{timeout:n}))}),n);m.unref&&m.unref(),u.push((function(){clearTimeout(m)}))}})));case 6:case"end":return o.stop()}}),o,this)})))},s.getBlockNumber=function(){return Jf(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._getInternalBlockNumber(0));case 1:case"end":return t.stop()}}),t,this)})))},s.getGasPrice=function(){return Jf(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,this.perform("getGasPrice",{});case 4:return e=t.sent,t.prev=5,t.abrupt("return",tt.from(e));case 9:return t.prev=9,t.t0=t.catch(5),t.abrupt("return",Qf.throwError("bad result from backend",x.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t.t0}));case 12:case"end":return t.stop()}}),t,this,[[5,9]])})))},s.getBalance=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,Te({address:this._getAddress(t),blockTag:this._getBlockTag(e)});case 4:return i=r.sent,r.next=7,this.perform("getBalance",i);case 7:return o=r.sent,r.prev=8,r.abrupt("return",tt.from(o));case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",Qf.throwError("bad result from backend",x.errors.SERVER_ERROR,{method:"getBalance",params:i,result:o,error:r.t0}));case 15:case"end":return r.stop()}}),n,this,[[8,12]])})))},s.getTransactionCount=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,Te({address:this._getAddress(t),blockTag:this._getBlockTag(e)});case 4:return i=r.sent,r.next=7,this.perform("getTransactionCount",i);case 7:return o=r.sent,r.prev=8,r.abrupt("return",tt.from(o).toNumber());case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",Qf.throwError("bad result from backend",x.errors.SERVER_ERROR,{method:"getTransactionCount",params:i,result:o,error:r.t0}));case 15:case"end":return r.stop()}}),n,this,[[8,12]])})))},s.getCode=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,Te({address:this._getAddress(t),blockTag:this._getBlockTag(e)});case 4:return i=r.sent,r.next=7,this.perform("getCode",i);case 7:return o=r.sent,r.prev=8,r.abrupt("return",F(o));case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",Qf.throwError("bad result from backend",x.errors.SERVER_ERROR,{method:"getCode",params:i,result:o,error:r.t0}));case 15:case"end":return r.stop()}}),n,this,[[8,12]])})))},s.getStorageAt=function(t,e,n){return Jf(this,void 0,void 0,r().mark((function i(){var o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,Te({address:this._getAddress(t),blockTag:this._getBlockTag(n),position:Promise.resolve(e).then((function(t){return G(t)}))});case 4:return o=r.sent,r.next=7,this.perform("getStorageAt",o);case 7:return s=r.sent,r.prev=8,r.abrupt("return",F(s));case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",Qf.throwError("bad result from backend",x.errors.SERVER_ERROR,{method:"getStorageAt",params:o,result:s,error:r.t0}));case 15:case"end":return r.stop()}}),i,this,[[8,12]])})))},s._wrapTransaction=function(t,e,n){var i=this;if(null!=e&&32!==D(e))throw new Error("invalid response - sendTransaction");var o=t;return null!=e&&t.hash!==e&&Qf.throwError("Transaction hash mismatch from Provider.sendTransaction.",x.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),o.wait=function(e,o){return Jf(i,void 0,void 0,r().mark((function i(){var s,a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==e&&(e=1),null==o&&(o=0),s=void 0,0!==e&&null!=n&&(s={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:n}),r.next=6,this._waitForTransaction(t.hash,e,o,s);case 6:if(null!=(a=r.sent)||0!==e){r.next=9;break}return r.abrupt("return",null);case 9:return this._emitted["t:"+t.hash]=a.blockNumber,0===a.status&&Qf.throwError("transaction failed",x.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:a}),r.abrupt("return",a);case 12:case"end":return r.stop()}}),i,this)})))},o},s.sendTransaction=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i,o,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,Promise.resolve(t).then((function(t){return F(t)}));case 4:return n=e.sent,null==(i=this.formatter.transaction(t)).confirmations&&(i.confirmations=0),e.next=9,this._getInternalBlockNumber(100+2*this.pollingInterval);case 9:return o=e.sent,e.prev=10,e.next=13,this.perform("sendTransaction",{signedTransaction:n});case 13:return s=e.sent,e.abrupt("return",this._wrapTransaction(i,s,o));case 17:throw e.prev=17,e.t0=e.catch(10),e.t0.transaction=i,e.t0.transactionHash=i.hash,e.t0;case 22:case"end":return e.stop()}}),e,this,[[10,17]])})))},s._getTransactionRequest=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,i={},["from","to"].forEach((function(t){null!=n[t]&&(i[t]=Promise.resolve(n[t]).then((function(t){return t?o._getAddress(t):null})))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((function(t){null!=n[t]&&(i[t]=Promise.resolve(n[t]).then((function(t){return t?tt.from(t):null})))})),["type"].forEach((function(t){null!=n[t]&&(i[t]=Promise.resolve(n[t]).then((function(t){return null!=t?t:null})))})),n.accessList&&(i.accessList=this.formatter.accessList(n.accessList)),["data"].forEach((function(t){null!=n[t]&&(i[t]=Promise.resolve(n[t]).then((function(t){return t?F(t):null})))})),e.t0=this.formatter,e.next=12,Te(i);case 12:return e.t1=e.sent,e.abrupt("return",e.t0.transactionRequest.call(e.t0,e.t1));case 14:case"end":return e.stop()}}),e,this)})))},s._getFilter=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,n={},null!=t.address&&(n.address=this._getAddress(t.address)),["blockHash","topics"].forEach((function(e){null!=t[e]&&(n[e]=t[e])})),["fromBlock","toBlock"].forEach((function(e){null!=t[e]&&(n[e]=i._getBlockTag(t[e]))})),e.t0=this.formatter,e.next=10,Te(n);case 10:return e.t1=e.sent,e.abrupt("return",e.t0.filter.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e,this)})))},s._call=function(t,e,n){return Jf(this,void 0,void 0,r().mark((function i(){var o,s,a,u,c,f,h,l,d,p,m,v,g,b,w;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n>=10&&Qf.throwError("CCIP read exceeded maximum redirections",x.errors.SERVER_ERROR,{redirects:n,transaction:t}),o=t.to,r.next=4,this.perform("call",{transaction:t,blockTag:e});case 4:if(s=r.sent,!(n>=0&&"latest"===e&&null!=o&&"0x556f1830"===s.substring(0,10)&&D(s)%32==4)){r.next=31;break}for(r.prev=6,a=L(s,4),u=L(a,0,32),tt.from(u).eq(o)||Qf.throwError("CCIP Read sender did not match",x.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:s}),c=[],f=tt.from(L(a,32,64)).toNumber(),h=tt.from(L(a,f,f+32)).toNumber(),l=L(a,f+32),d=0;d<h;d++)null==(p=uh(l,32*d))&&Qf.throwError("CCIP Read contained corrupt URL string",x.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:s}),c.push(p);return m=ch(a,64),tt.from(L(a,100,128)).isZero()||Qf.throwError("CCIP Read callback selector included junk",x.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:s}),v=L(a,96,100),g=ch(a,128),r.next=21,this.ccipReadFetch(t,m,c);case 21:return null==(b=r.sent)&&Qf.throwError("CCIP Read disabled or provided no URLs",x.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:t,data:s}),w={to:o,data:U([v,dh([b,g])])},r.abrupt("return",this._call(w,e,n+1));case 27:if(r.prev=27,r.t0=r.catch(6),r.t0.code!==x.errors.SERVER_ERROR){r.next=31;break}throw r.t0;case 31:return r.prev=31,r.abrupt("return",F(s));case 35:return r.prev=35,r.t1=r.catch(31),r.abrupt("return",Qf.throwError("bad result from backend",x.errors.SERVER_ERROR,{method:"call",params:{transaction:t,blockTag:e},result:s,error:r.t1}));case 38:case"end":return r.stop()}}),i,this,[[6,27],[31,35]])})))},s.call=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,Te({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e),ccipReadEnabled:Promise.resolve(t.ccipReadEnabled)});case 4:return i=r.sent,r.abrupt("return",this._call(i.transaction,i.blockTag,i.ccipReadEnabled?0:-1));case 6:case"end":return r.stop()}}),n,this)})))},s.estimateGas=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,Te({transaction:this._getTransactionRequest(t)});case 4:return n=e.sent,e.next=7,this.perform("estimateGas",n);case 7:return i=e.sent,e.prev=8,e.abrupt("return",tt.from(i));case 12:return e.prev=12,e.t0=e.catch(8),e.abrupt("return",Qf.throwError("bad result from backend",x.errors.SERVER_ERROR,{method:"estimateGas",params:n,result:i,error:e.t0}));case 15:case"end":return e.stop()}}),e,this,[[8,12]])})))},s._getAddress=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return"string"!=typeof(t=e.sent)&&Qf.throwArgumentError("invalid address or ENS name","name",t),e.next=6,this.resolveName(t);case 6:return null==(n=e.sent)&&Qf.throwError("ENS name not configured",x.errors.UNSUPPORTED_OPERATION,{operation:"resolveName("+JSON.stringify(t)+")"}),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})))},s._getBlock=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i,o,s=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,t;case 4:if(t=n.sent,i=-128,o={includeTransactions:!!e},!B(t,32)){n.next=11;break}o.blockHash=t,n.next=21;break;case 11:return n.prev=11,n.next=14,this._getBlockTag(t);case 14:o.blockTag=n.sent,B(o.blockTag)&&(i=parseInt(o.blockTag.substring(2),16)),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(11),Qf.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t);case 21:return n.abrupt("return",Of((function(){return Jf(s,void 0,void 0,r().mark((function t(){var n,s,a,u,c,f,h=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perform("getBlock",o);case 2:if(null!=(n=t.sent)){t.next=11;break}if(null==o.blockHash){t.next=7;break}if(null!=this._emitted["b:"+o.blockHash]){t.next=7;break}return t.abrupt("return",null);case 7:if(null==o.blockTag){t.next=10;break}if(!(i>this._emitted.block)){t.next=10;break}return t.abrupt("return",null);case 10:return t.abrupt("return",void 0);case 11:if(!e){t.next=34;break}s=null,a=0;case 14:if(!(a<n.transactions.length)){t.next=31;break}if(null!=(u=n.transactions[a]).blockNumber){t.next=20;break}u.confirmations=0,t.next=28;break;case 20:if(null!=u.confirmations){t.next=28;break}if(null!=s){t.next=25;break}return t.next=24,this._getInternalBlockNumber(100+2*this.pollingInterval);case 24:s=t.sent;case 25:(c=s-u.blockNumber+1)<=0&&(c=1),u.confirmations=c;case 28:a++,t.next=14;break;case 31:return(f=this.formatter.blockWithTransactions(n)).transactions=f.transactions.map((function(t){return h._wrapTransaction(t)})),t.abrupt("return",f);case 34:return t.abrupt("return",this.formatter.block(n));case 35:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this}));case 22:case"end":return n.stop()}}),n,this,[[11,18]])})))},s.getBlock=function(t){return this._getBlock(t,!1)},s.getBlockWithTransactions=function(t){return this._getBlock(t,!0)},s.getTransaction=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,t;case 4:return t=e.sent,n={transactionHash:this.formatter.hash(t,!0)},e.abrupt("return",Of((function(){return Jf(i,void 0,void 0,r().mark((function e(){var i,o,s,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform("getTransaction",n);case 2:if(null!=(i=e.sent)){e.next=7;break}if(null!=this._emitted["t:"+t]){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",void 0);case 7:if(null!=(o=this.formatter.transactionResponse(i)).blockNumber){e.next=12;break}o.confirmations=0,e.next=19;break;case 12:if(null!=o.confirmations){e.next=19;break}return e.next=15,this._getInternalBlockNumber(100+2*this.pollingInterval);case 15:s=e.sent,(a=s-o.blockNumber+1)<=0&&(a=1),o.confirmations=a;case 19:return e.abrupt("return",this._wrapTransaction(o));case 20:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this}));case 7:case"end":return e.stop()}}),e,this)})))},s.getTransactionReceipt=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,t;case 4:return t=e.sent,n={transactionHash:this.formatter.hash(t,!0)},e.abrupt("return",Of((function(){return Jf(i,void 0,void 0,r().mark((function e(){var i,o,s,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform("getTransactionReceipt",n);case 2:if(null!=(i=e.sent)){e.next=7;break}if(null!=this._emitted["t:"+t]){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",void 0);case 7:if(null!=i.blockHash){e.next=9;break}return e.abrupt("return",void 0);case 9:if(null!=(o=this.formatter.receipt(i)).blockNumber){e.next=14;break}o.confirmations=0,e.next=21;break;case 14:if(null!=o.confirmations){e.next=21;break}return e.next=17,this._getInternalBlockNumber(100+2*this.pollingInterval);case 17:s=e.sent,(a=s-o.blockNumber+1)<=0&&(a=1),o.confirmations=a;case 21:return e.abrupt("return",o);case 22:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this}));case 7:case"end":return e.stop()}}),e,this)})))},s.getLogs=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,Te({filter:this._getFilter(t)});case 4:return n=e.sent,e.next=7,this.perform("getLogs",n);case 7:return(i=e.sent).forEach((function(t){null==t.removed&&(t.removed=!1)})),e.abrupt("return",Vf.arrayOf(this.formatter.filterLog.bind(this.formatter))(i));case 10:case"end":return e.stop()}}),e,this)})))},s.getEtherPrice=function(){return Jf(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.abrupt("return",this.perform("getEtherPrice",{}));case 3:case"end":return t.stop()}}),t,this)})))},s._getBlockTag=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!("number"==typeof(t=e.sent)&&t<0)){e.next=11;break}return t%1&&Qf.throwArgumentError("invalid BlockTag","blockTag",t),e.next=7,this._getInternalBlockNumber(100+2*this.pollingInterval);case 7:return n=e.sent,(n+=t)<0&&(n=0),e.abrupt("return",this.formatter.blockTag(n));case 11:return e.abrupt("return",this.formatter.blockTag(t));case 12:case"end":return e.stop()}}),e,this)})))},s.getResolver=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t;case 1:if(""!==n&&"."!==n){e.next=4;break}return e.abrupt("return",null);case 4:if("eth"===t||"eth"!==n){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,this._getResolver(n,"getResolver");case 8:if(null==(i=e.sent)){e.next=19;break}if(o=new ph(this,i,t),e.t0=n!==t,!e.t0){e.next=16;break}return e.next=15,o.supportsWildcard();case 15:e.t0=!e.sent;case 16:if(!e.t0){e.next=18;break}return e.abrupt("return",null);case 18:return e.abrupt("return",o);case 19:n=n.split(".").slice(1).join("."),e.next=1;break;case 22:case"end":return e.stop()}}),e,this)})))},s._getResolver=function(t,e){return Jf(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==e&&(e="ENS"),r.next=3,this.getNetwork();case 3:return(i=r.sent).ensAddress||Qf.throwError("network does not support ENS",x.errors.UNSUPPORTED_OPERATION,{operation:e,network:i.name}),r.prev=5,r.next=8,this.call({to:i.ensAddress,data:"0x0178b8bf"+ae(t).substring(2)});case 8:return o=r.sent,r.abrupt("return",this.formatter.callAddress(o));case 12:r.prev=12,r.t0=r.catch(5);case 14:return r.abrupt("return",null);case 15:case"end":return r.stop()}}),n,this,[[5,12]])})))},s.resolveName=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,e.prev=3,e.abrupt("return",Promise.resolve(this.formatter.address(t)));case 7:if(e.prev=7,e.t0=e.catch(3),!B(t)){e.next=11;break}throw e.t0;case 11:return"string"!=typeof t&&Qf.throwArgumentError("invalid ENS name","name",t),e.next=14,this.getResolver(t);case 14:if(n=e.sent){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,n.getAddress();case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,this,[[3,7]])})))},s.lookupAddress=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,t=this.formatter.address(t),n=t.substring(2).toLowerCase()+".addr.reverse",e.next=7,this._getResolver(n,"lookupAddress");case 7:if(null!=(i=e.sent)){e.next=10;break}return e.abrupt("return",null);case 10:return e.t0=uh,e.next=13,this.call({to:i,data:"0x691f3431"+ae(n).substring(2)});case 13:return e.t1=e.sent,o=(0,e.t0)(e.t1,0),e.next=17,this.resolveName(o);case 17:if(e.sent==t){e.next=20;break}return e.abrupt("return",null);case 20:return e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,this)})))},s.getAvatar=function(t){return Jf(this,void 0,void 0,r().mark((function e(){var n,i,o,s,a,u,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!B(t)){e.next=40;break}return i=this.formatter.address(t),o=i.substring(2).toLowerCase()+".addr.reverse",e.next=6,this._getResolver(o,"getAvatar");case 6:if(s=e.sent){e.next=9;break}return e.abrupt("return",null);case 9:return n=new ph(this,s,o),e.prev=10,e.next=13,n.getAvatar();case 13:if(!(a=e.sent)){e.next=16;break}return e.abrupt("return",a.url);case 16:e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(10),e.t0.code===x.errors.CALL_EXCEPTION){e.next=22;break}throw e.t0;case 22:return e.prev=22,e.t1=uh,e.next=26,this.call({to:s,data:"0x691f3431"+ae(o).substring(2)});case 26:return e.t2=e.sent,u=(0,e.t1)(e.t2,0),e.next=30,this.getResolver(u);case 30:n=e.sent,e.next=38;break;case 33:if(e.prev=33,e.t3=e.catch(22),e.t3.code===x.errors.CALL_EXCEPTION){e.next=37;break}throw e.t3;case 37:return e.abrupt("return",null);case 38:e.next=45;break;case 40:return e.next=42,this.getResolver(t);case 42:if(n=e.sent){e.next=45;break}return e.abrupt("return",null);case 45:return e.next=47,n.getAvatar();case 47:if(null!=(c=e.sent)){e.next=50;break}return e.abrupt("return",null);case 50:return e.abrupt("return",c.url);case 51:case"end":return e.stop()}}),e,this,[[10,18],[22,33]])})))},s.perform=function(t,e){return Qf.throwError(t+" not implemented",x.errors.NOT_IMPLEMENTED,{operation:t})},s._startEvent=function(t){this.polling=this._events.filter((function(t){return t.pollable()})).length>0},s._stopEvent=function(t){this.polling=this._events.filter((function(t){return t.pollable()})).length>0},s._addEventListener=function(t,e,r){var n=new rh(Zf(t),e,r);return this._events.push(n),this._startEvent(n),this},s.on=function(t,e){return this._addEventListener(t,e,!1)},s.once=function(t,e){return this._addEventListener(t,e,!0)},s.emit=function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=!1,s=[],a=Zf(t);return this._events=this._events.filter((function(t){return t.tag!==a||(setTimeout((function(){t.listener.apply(e,n)}),0),o=!0,!t.once||(s.push(t),!1))})),s.forEach((function(t){e._stopEvent(t)})),o},s.listenerCount=function(t){if(!t)return this._events.length;var e=Zf(t);return this._events.filter((function(t){return t.tag===e})).length},s.listeners=function(t){if(null==t)return this._events.map((function(t){return t.listener}));var e=Zf(t);return this._events.filter((function(t){return t.tag===e})).map((function(t){return t.listener}))},s.off=function(t,e){var r=this;if(null==e)return this.removeAllListeners(t);var n=[],i=!1,o=Zf(t);return this._events=this._events.filter((function(t){return t.tag!==o||t.listener!=e||(!!i||(i=!0,n.push(t),!1))})),n.forEach((function(t){r._stopEvent(t)})),this},s.removeAllListeners=function(t){var e=this,r=[];if(null==t)r=this._events,this._events=[];else{var n=Zf(t);this._events=this._events.filter((function(t){return t.tag!==n||(r.push(t),!1)}))}return r.forEach((function(t){e._stopEvent(t)})),this},i(n,[{key:"ready",get:function(){var t=this;return Of((function(){return t._ready().then((function(t){return t}),(function(t){if(t.code!==x.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))}))}},{key:"network",get:function(){return this._network}},{key:"blockNumber",get:function(){var t=this;return this._getInternalBlockNumber(100+this.pollingInterval/2).then((function(e){t._setFastBlockNumber(e)}),(function(t){})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}},{key:"polling",get:function(){return null!=this._poller},set:function(t){var e=this;t&&!this._poller?(this._poller=setInterval((function(){e.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((function(){e.poll(),e._bootstrapPoll=setTimeout((function(){e._poller||e.poll(),e._bootstrapPoll=null}),e.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}},{key:"pollingInterval",get:function(){return this._pollingInterval},set:function(t){var e=this;if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){e.poll()}),this._pollingInterval))}}]),n}(Ci),bh=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},wh=new x(Kf),yh=["call","estimateGas"];function Ah(t,e){if(null==t)return null;if("string"==typeof t.message&&t.message.match("reverted")){var r=B(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if("object"==typeof t){for(var n in t){var i=Ah(t[n],e);if(i)return i}return null}if("string"==typeof t)try{return Ah(JSON.parse(t),e)}catch(t){}return null}function Eh(t,e,r){var n=r.transaction||r.signedTransaction;if("call"===t){var i=Ah(e,!0);if(i)return i.data;wh.throwError("missing revert data in call exception; Transaction reverted without a reason string",x.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if("estimateGas"===t){var o=Ah(e.body,!1);null==o&&(o=Ah(e,!1)),o&&wh.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",x.errors.UNPREDICTABLE_GAS_LIMIT,{reason:o.message,method:t,transaction:n,error:e})}var s=e.message;throw e.code===x.errors.SERVER_ERROR&&e.error&&"string"==typeof e.error.message?s=e.error.message:"string"==typeof e.body?s=e.body:"string"==typeof e.responseText&&(s=e.responseText),(s=(s||"").toLowerCase()).match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&wh.throwError("insufficient funds for intrinsic transaction cost",x.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),s.match(/nonce (is )?too low/i)&&wh.throwError("nonce has already been used",x.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&wh.throwError("replacement fee too low",x.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),s.match(/only replay-protected/i)&&wh.throwError("legacy pre-eip-155 transactions not supported",x.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),yh.indexOf(t)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&wh.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",x.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function kh(t){return new Promise((function(e){setTimeout(e,t)}))}function xh(t){if(t.error){var e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Nh(t){return t?t.toLowerCase():t}var _h={},Th=function(t){function n(e,r,n){var i;if(i=t.call(this)||this,e!==_h)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return Ne(o(i),"provider",r),null==n&&(n=0),"string"==typeof n?(Ne(o(i),"_address",i.provider.formatter.address(n)),Ne(o(i),"_index",null)):"number"==typeof n?(Ne(o(i),"_index",n),Ne(o(i),"_address",null)):wh.throwArgumentError("invalid address or index","addressOrIndex",n),i}e(n,t);var i=n.prototype;return i.connect=function(t){return wh.throwError("cannot alter JSON-RPC Signer connection",x.errors.UNSUPPORTED_OPERATION,{operation:"connect"})},i.connectUnchecked=function(){return new Sh(_h,this.provider,this._address||this._index)},i.getAddress=function(){var t=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(e){return e.length<=t._index&&wh.throwError("unknown account #"+t._index,x.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),t.provider.formatter.address(e[t._index])}))},i.sendUncheckedTransaction=function(t){var e=this;t=Se(t);var n=this.getAddress().then((function(t){return t&&(t=t.toLowerCase()),t}));if(null==t.gasLimit){var i=Se(t);i.from=n,t.gasLimit=this.provider.estimateGas(i)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((function(t){return bh(e,void 0,void 0,r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.provider.resolveName(t);case 4:return null==(n=e.sent)&&wh.throwArgumentError("provided ENS name resolves to null","tx.to",t),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})))}))),Te({tx:Te(t),sender:n}).then((function(r){var n=r.tx,i=r.sender;null!=n.from?n.from.toLowerCase()!==i&&wh.throwArgumentError("from address mismatch","transaction",t):n.from=i;var o=e.provider.constructor.hexlifyTransaction(n,{from:!0});return e.provider.send("eth_sendTransaction",[o]).then((function(t){return t}),(function(t){return"string"==typeof t.message&&t.message.match(/user denied/i)&&wh.throwError("user rejected transaction",x.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Eh("sendTransaction",t,o)}))}))},i.signTransaction=function(t){return wh.throwError("signing transactions is unsupported",x.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})},i.sendTransaction=function(t){return bh(this,void 0,void 0,r().mark((function e(){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);case 2:return n=e.sent,e.next=5,this.sendUncheckedTransaction(t);case 5:return i=e.sent,e.prev=6,e.next=9,Of((function(){return bh(o,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.provider.getTransaction(i);case 2:if(null!==(e=t.sent)){t.next=5;break}return t.abrupt("return",void 0);case 5:return t.abrupt("return",this.provider._wrapTransaction(e,i,n));case 6:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this.provider});case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(6),e.t0.transactionHash=i,e.t0;case 16:case"end":return e.stop()}}),e,this,[[6,12]])})))},i.signMessage=function(t){return bh(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?St(t):t,e.next=3,this.getAddress();case 3:return i=e.sent,e.prev=4,e.next=7,this.provider.send("personal_sign",[F(n),i.toLowerCase()]);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),"string"==typeof e.t0.message&&e.t0.message.match(/user denied/i)&&wh.throwError("user rejected signing",x.errors.ACTION_REJECTED,{action:"signMessage",from:i,messageData:t}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])})))},i._legacySignMessage=function(t){return bh(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?St(t):t,e.next=3,this.getAddress();case 3:return i=e.sent,e.prev=4,e.next=7,this.provider.send("eth_sign",[i.toLowerCase(),F(n)]);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),"string"==typeof e.t0.message&&e.t0.message.match(/user denied/i)&&wh.throwError("user rejected signing",x.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:i,messageData:t}),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])})))},i._signTypedData=function(t,e,n){return bh(this,void 0,void 0,r().mark((function i(){var o,s,a=this;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Qe.resolveNames(t,e,n,(function(t){return a.provider.resolveName(t)}));case 2:return o=r.sent,r.next=5,this.getAddress();case 5:return s=r.sent,r.prev=6,r.next=9,this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Qe.getPayload(o.domain,e,o.value))]);case 9:return r.abrupt("return",r.sent);case 12:throw r.prev=12,r.t0=r.catch(6),"string"==typeof r.t0.message&&r.t0.message.match(/user denied/i)&&wh.throwError("user rejected signing",x.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:o.domain,types:e,value:o.value}}),r.t0;case 16:case"end":return r.stop()}}),i,this,[[6,12]])})))},i.unlock=function(t){return bh(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.provider,e.next=3,this.getAddress();case 3:return i=e.sent,e.abrupt("return",n.send("personal_unlockAccount",[i.toLowerCase(),t,null]));case 5:case"end":return e.stop()}}),e,this)})))},n}(Oi),Sh=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.sendTransaction=function(t){var e=this;return this.sendUncheckedTransaction(t).then((function(t){return{hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:function(r){return e.provider.waitForTransaction(t,r)}}}))},r}(Th),Ih={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0},Ch=function(t){function n(e,r){var n,i=r;return null==i&&(i=new Promise((function(t,e){setTimeout((function(){n.detectNetwork().then((function(e){t(e)}),(function(t){e(t)}))}),0)}))),n=t.call(this,i)||this,e||(e=_e(n.constructor,"defaultUrl")()),Ne(o(n),"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(Se(e))),n._nextId=42,n}e(n,t),n.defaultUrl=function(){return"http://localhost:8545"};var s=n.prototype;return s.detectNetwork=function(){var t=this;return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((function(){t._cache.detectNetwork=null}),0)),this._cache.detectNetwork},s._uncachedDetectNetwork=function(){return bh(this,void 0,void 0,r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kh(0);case 2:return e=null,t.prev=3,t.next=6,this.send("eth_chainId",[]);case 6:e=t.sent,t.next=19;break;case 9:return t.prev=9,t.t0=t.catch(3),t.prev=11,t.next=14,this.send("net_version",[]);case 14:e=t.sent,t.next=19;break;case 17:t.prev=17,t.t1=t.catch(11);case 19:if(null==e){t.next=28;break}return n=_e(this.constructor,"getNetwork"),t.prev=21,t.abrupt("return",n(tt.from(e).toNumber()));case 25:return t.prev=25,t.t2=t.catch(21),t.abrupt("return",wh.throwError("could not detect network",x.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t.t2}));case 28:return t.abrupt("return",wh.throwError("could not detect network",x.errors.NETWORK_ERROR,{event:"noNetwork"}));case 29:case"end":return t.stop()}}),t,this,[[3,9],[11,17],[21,25]])})))},s.getSigner=function(t){return new Th(_h,this,t)},s.getUncheckedSigner=function(t){return this.getSigner(t).connectUnchecked()},s.listAccounts=function(){var t=this;return this.send("eth_accounts",[]).then((function(e){return e.map((function(e){return t.formatter.address(e)}))}))},s.send=function(t,e){var r=this,n={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Pe(n),provider:this});var i=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(i&&this._cache[t])return this._cache[t];var o=Bf(this.connection,JSON.stringify(n),xh).then((function(t){return r.emit("debug",{action:"response",request:n,response:t,provider:r}),t}),(function(t){throw r.emit("debug",{action:"response",error:t,request:n,provider:r}),t}));return i&&(this._cache[t]=o,setTimeout((function(){r._cache[t]=null}),0)),o},s.prepareRequest=function(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Nh(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Nh(e.address),e.blockTag]];case"getCode":return["eth_getCode",[Nh(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Nh(e.address),H(e.position,32),e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":return["eth_call",[_e(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0}),e.blockTag]];case"estimateGas":return["eth_estimateGas",[_e(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0})]];case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=Nh(e.filter.address)),["eth_getLogs",[e.filter]]}return null},s.perform=function(t,e){return bh(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("call"!==t&&"estimateGas"!==t){r.next=8;break}if(!(i=e.transaction)||null==i.type||!tt.from(i.type).isZero()){r.next=8;break}if(null!=i.maxFeePerGas||null!=i.maxPriorityFeePerGas){r.next=8;break}return r.next=6,this.getFeeData();case 6:null==(o=r.sent).maxFeePerGas&&null==o.maxPriorityFeePerGas&&((e=Se(e)).transaction=Se(i),delete e.transaction.type);case 8:return null==(s=this.prepareRequest(t,e))&&wh.throwError(t+" not implemented",x.errors.NOT_IMPLEMENTED,{operation:t}),r.prev=10,r.next=13,this.send(s[0],s[1]);case 13:return r.abrupt("return",r.sent);case 16:return r.prev=16,r.t0=r.catch(10),r.abrupt("return",Eh(t,r.t0,e));case 19:case"end":return r.stop()}}),n,this,[[10,16]])})))},s._startEvent=function(e){"pending"===e.tag&&this._startPending(),t.prototype._startEvent.call(this,e)},s._startPending=function(){if(null==this._pendingFilter){var t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(r){return function n(){t.send("eth_getFilterChanges",[r]).then((function(r){if(t._pendingFilter!=e)return null;var n=Promise.resolve();return r.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",n=n.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),n.then((function(){return kh(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){n()}),0),null;t.send("eth_uninstallFilter",[r])})).catch((function(t){}))}(),r})).catch((function(t){}))}},s._stopEvent=function(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),t.prototype._stopEvent.call(this,e)},n.hexlifyTransaction=function(t,e){var r,n,i=Se(Ih);if(e)for(var o in e)e[o]&&(i[o]=!0);n=i,(r=t)&&"object"==typeof r||xe.throwArgumentError("invalid object","object",r),Object.keys(r).forEach((function(t){n[t]||xe.throwArgumentError("invalid object key - "+t,"transaction:"+t,r)}));var s={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null!=t[e]){var r=G(tt.from(t[e]));"gasLimit"===e&&(e="gas"),s[e]=r}})),["from","to","data"].forEach((function(e){null!=t[e]&&(s[e]=F(t[e]))})),t.accessList&&(s.accessList=Fa(t.accessList)),s},i(n,[{key:"_cache",get:function(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}}]),n}(gh),Rh=null;try{if(null==(Rh=WebSocket))throw new Error("inject please")}catch(t){var Ph=new x(Kf);Rh=function(){Ph.throwError("WebSockets not supported in this environment",x.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Mh=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Bh=new x(Kf),Oh=1,Fh=function(t){function n(e,r){var n;"any"===r&&Bh.throwError("WebSocketProvider does not support 'any' network yet",x.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),(n="string"==typeof e?t.call(this,e,r)||this:t.call(this,"_websocket",r)||this)._pollingInterval=-1,n._wsReady=!1,Ne(o(n),"_websocket","string"==typeof e?new Rh(n.connection.url):e),Ne(o(n),"_requests",{}),Ne(o(n),"_subs",{}),Ne(o(n),"_subIds",{}),Ne(o(n),"_detectNetwork",t.prototype.detectNetwork.call(o(n))),n.websocket.onopen=function(){n._wsReady=!0,Object.keys(n._requests).forEach((function(t){n.websocket.send(n._requests[t].payload)}))},n.websocket.onmessage=function(t){var e=t.data,r=JSON.parse(e);if(null!=r.id){var i=String(r.id),s=n._requests[i];if(delete n._requests[i],void 0!==r.result)s.callback(null,r.result),n.emit("debug",{action:"response",request:JSON.parse(s.payload),response:r.result,provider:o(n)});else{var a=null;r.error?(Ne(a=new Error(r.error.message||"unknown error"),"code",r.error.code||null),Ne(a,"response",e)):a=new Error("unknown error"),s.callback(a,void 0),n.emit("debug",{action:"response",error:a,request:JSON.parse(s.payload),provider:o(n)})}}else if("eth_subscription"===r.method){var u=n._subs[r.params.subscription];u&&u.processFunc(r.params.result)}else console.warn("this should not happen")};var i=setInterval((function(){n.emit("poll")}),1e3);return i.unref&&i.unref(),o(n)}e(n,t);var s=n.prototype;return s.detectNetwork=function(){return this._detectNetwork},s.resetEventsBlock=function(t){Bh.throwError("cannot reset events block on WebSocketProvider",x.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})},s.poll=function(){return Mh(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})))},s.send=function(t,e){var r=this,n=Oh++;return new Promise((function(i,o){var s=JSON.stringify({method:t,params:e,id:n,jsonrpc:"2.0"});r.emit("debug",{action:"request",request:JSON.parse(s),provider:r}),r._requests[String(n)]={callback:function(t,e){return t?o(t):i(e)},payload:s},r._wsReady&&r.websocket.send(s)}))},n.defaultUrl=function(){return"ws://localhost:8546"},s._subscribe=function(t,e,n){return Mh(this,void 0,void 0,r().mark((function i(){var o,s,a=this;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==(o=this._subIds[t])&&(o=Promise.all(e).then((function(t){return a.send("eth_subscribe",t)})),this._subIds[t]=o),r.next=4,o;case 4:s=r.sent,this._subs[s]={tag:t,processFunc:n};case 6:case"end":return r.stop()}}),i,this)})))},s._startEvent=function(t){var e=this;switch(t.type){case"block":this._subscribe("block",["newHeads"],(function(t){var r=tt.from(t.number).toNumber();e._emitted.block=r,e.emit("block",r)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(function(t){e.emit("pending",t)}));break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],(function(r){null==r.removed&&(r.removed=!1),e.emit(t.filter,e.formatter.filterLog(r))}));break;case"tx":var r=function(t){var r=t.hash;e.getTransactionReceipt(r).then((function(t){t&&e.emit(r,t)}))};r(t),this._subscribe("tx",["newHeads"],(function(t){e._events.filter((function(t){return"tx"===t.type})).forEach(r)}));break;case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t)}},s._stopEvent=function(t){var e=this,r=t.tag;if("tx"===t.type){if(this._events.filter((function(t){return"tx"===t.type})).length)return;r="tx"}else if(this.listenerCount(t.event))return;var n=this._subIds[r];n&&(delete this._subIds[r],n.then((function(t){e._subs[t]&&(delete e._subs[t],e.send("eth_unsubscribe",[t]))})))},s.destroy=function(){return Mh(this,void 0,void 0,r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.websocket.readyState!==Rh.CONNECTING){t.next=3;break}return t.next=3,new Promise((function(t){e.websocket.onopen=function(){t(!0)},e.websocket.onerror=function(){t(!1)}}));case 3:this.websocket.close(1e3);case 4:case"end":return t.stop()}}),t,this)})))},i(n,[{key:"websocket",get:function(){return this._websocket}},{key:"pollingInterval",get:function(){return 0},set:function(t){Bh.throwError("cannot set polling interval on WebSocketProvider",x.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}},{key:"polling",set:function(t){t&&Bh.throwError("cannot set polling on WebSocketProvider",x.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}}]),n}(Ch);x.errors.CALL_EXCEPTION,x.errors.INSUFFICIENT_FUNDS,x.errors.NONCE_EXPIRED,x.errors.REPLACEMENT_UNDERPRICED,x.errors.UNPREDICTABLE_GAS_LIMIT;var Dh=function(){function t(t,e){void 0===e&&(e=100),this.sendBatchFn=t,this.maxBatchSize=e,this.pendingBatch=[]}var e=t.prototype;return e.enqueueRequest=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n,i,o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={request:t,resolve:void 0,reject:void 0},i=new Promise((function(t,e){n.resolve=t,n.reject=e})),this.pendingBatch.push(n),this.pendingBatch.length===this.maxBatchSize?this.sendBatchRequest():this.pendingBatchTimer||(this.pendingBatchTimer=setTimeout((function(){return o.sendBatchRequest()}),10)),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})))},e.sendBatchRequest=function(){return Au(this,void 0,void 0,r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.pendingBatch,this.pendingBatch=[],this.pendingBatchTimer&&(clearTimeout(this.pendingBatchTimer),this.pendingBatchTimer=void 0),n=e.map((function(t){return t.request})),t.abrupt("return",this.sendBatchFn(n).then((function(t){e.forEach((function(e,r){var n=t[r];if(n.error){var i=new Error(n.error.message);i.code=n.error.code,i.data=n.error.data,e.reject(i)}else e.resolve(n.result)}))}),(function(t){e.forEach((function(e){e.reject(t)}))})));case 5:case"end":return t.stop()}}),t,this)})))},t}(),Lh=function(t){function n(e){var r,i=n.getApiKey(e.apiKey),o=n.getAlchemyNetwork(e.network),s=n.getAlchemyConnectionInfo(o,i,"http");void 0!==e.url&&(s.url=e.url),s.throttleLimit=e.maxRetries;var a=Cu[o];(r=t.call(this,s,a)||this).apiKey=e.apiKey,r.maxRetries=e.maxRetries,r.batchRequests=e.batchRequests;var u=Object.assign(Object.assign({},r.connection),{headers:Object.assign(Object.assign({},r.connection.headers),{"Alchemy-Ethers-Sdk-Method":"batchSend"})});return r.batcher=new Dh((function(t){return Bf(u,JSON.stringify(t))})),r}e(n,t),n.getApiKey=function(t){if(null==t)return Tu;if(t&&"string"!=typeof t)throw new Error("Invalid apiKey '"+t+"' provided. apiKey must be a string.");return t},n.getNetwork=function(t){return"string"==typeof t&&t in Ru?Ru[t]:Tf(t)},n.getAlchemyNetwork=function(t){if(void 0===t)return Su;if("number"==typeof t)throw new Error("Invalid network '"+t+"' provided. Network must be a string.");if(!Object.values(Ya).includes(t))throw new Error("Invalid network '"+t+"' provided. Network must be one of: "+Object.values(Ya).join(", ")+".");return t},n.getAlchemyConnectionInfo=function(t,e,r){var n="http"===r?Iu(t,e):function(t,e){return"wss://"+t+".g.alchemy.com/v2/"+e}(t,e);return{headers:lc?{"Alchemy-Ethers-Sdk-Version":Rc}:{"Alchemy-Ethers-Sdk-Version":Rc,"Accept-Encoding":"gzip"},allowGzip:!0,url:n}};var i=n.prototype;return i.detectNetwork=function(){var e=Object.create(null,{detectNetwork:{get:function(){return t.prototype.detectNetwork}}});return Au(this,void 0,void 0,r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=this.network)){t.next=7;break}return t.next=4,e.detectNetwork.call(this);case 4:if(n=t.sent){t.next=7;break}throw new Error("No network detected");case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})))},i._startPending=function(){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Cc.warn(t,r)}("WARNING: Alchemy Provider does not support pending filters")},i.isCommunityResource=function(){return this.apiKey===Tu},i.send=function(t,e){return this._send(t,e,"send")},i._send=function(t,e,r,n){var i=this;void 0===n&&(n=!1);var o={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};if(Object.assign({},this.connection).headers["Alchemy-Ethers-Sdk-Method"]=r,this.batchRequests||n)return this.batcher.enqueueRequest(o);this.emit("debug",{action:"request",request:Xu(o),provider:this});var s=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(s&&this._cache[t])return this._cache[t];var a=Bf(this.connection,JSON.stringify(o),Uh).then((function(t){return i.emit("debug",{action:"response",request:o,response:t,provider:i}),t}),(function(t){throw i.emit("debug",{action:"response",error:t,request:o,provider:i}),t}));return s&&(this._cache[t]=a,setTimeout((function(){i._cache[t]=null}),0)),a},n}(Ch);function Uh(t){if(t.error){var e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}var Gh=Object.freeze({__proto__:null,AlchemyProvider:Lh}),zh={};Object.defineProperty(zh,"__esModule",{value:!0});var Hh=function(){function t(e,r,n){if(void 0===n&&(n={}),this.url=e,this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.ondown=null,this.onreopen=null,this.CONNECTING=t.CONNECTING,this.OPEN=t.OPEN,this.CLOSING=t.CLOSING,this.CLOSED=t.CLOSED,this.hasBeenOpened=!1,this.isClosed=!1,this.messageBuffer=[],this.nextRetryTime=0,this.reconnectCount=0,this.lastKnownExtensions="",this.lastKnownProtocol="",this.listeners={},null==r||"string"==typeof r||Array.isArray(r)?this.protocols=r:n=r,this.options=jh(n),!this.options.wsConstructor){if("undefined"==typeof WebSocket)throw new Error("WebSocket not present in global scope and no wsConstructor option was provided.");this.options.wsConstructor=WebSocket}this.openNewWebSocket()}return Object.defineProperty(t.prototype,"binaryType",{get:function(){return this.binaryTypeInternal||"blob"},set:function(t){this.binaryTypeInternal=t,this.ws&&(this.ws.binaryType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){var t=this.ws?this.ws.bufferedAmount:0,e=!1;return this.messageBuffer.forEach((function(r){var n=function(t){return"string"==typeof t?2*t.length:t instanceof ArrayBuffer?t.byteLength:t instanceof Blob?t.size:void 0}(r);null!=n?t+=n:e=!0})),e&&this.debugLog("Some buffered data had unknown length. bufferedAmount() return value may be below the correct amount."),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return this.ws?this.ws.extensions:this.lastKnownExtensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this.ws?this.ws.protocol:this.lastKnownProtocol},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this.isClosed?t.CLOSED:t.OPEN},enumerable:!0,configurable:!0}),t.prototype.close=function(t,e){this.disposeSocket(t,e),this.shutdown(),this.debugLog("WebSocket permanently closed by client.")},t.prototype.send=function(t){if(this.isClosed)throw new Error("WebSocket is already in CLOSING or CLOSED state.");this.ws&&this.ws.readyState===this.OPEN?this.ws.send(t):this.messageBuffer.push(t)},t.prototype.reconnect=function(){if(this.isClosed)throw new Error("Cannot call reconnect() on socket which is permanently closed.");this.disposeSocket(1e3,"Client requested reconnect."),this.handleClose(void 0)},t.prototype.addEventListener=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.dispatchEvent=function(t){return this.dispatchEventOfType(t.type,t)},t.prototype.removeEventListener=function(t,e){this.listeners[t]&&(this.listeners[t]=this.listeners[t].filter((function(t){return t!==e})))},t.prototype.openNewWebSocket=function(){var t=this;if(!this.isClosed){var e=this.options,r=e.connectTimeout,n=e.wsConstructor;this.debugLog("Opening new WebSocket to "+this.url+".");var i=new n(this.url,this.protocols);i.onclose=function(e){return t.handleClose(e)},i.onerror=function(e){return t.handleError(e)},i.onmessage=function(e){return t.handleMessage(e)},i.onopen=function(e){return t.handleOpen(e)},this.connectTimeoutId=setTimeout((function(){t.clearConnectTimeout(),t.disposeSocket(),t.handleClose(void 0)}),r),this.ws=i}},t.prototype.handleOpen=function(t){var e=this;if(this.ws&&!this.isClosed){var r=this.options.allClearResetTime;this.debugLog("WebSocket opened."),null!=this.binaryTypeInternal?this.ws.binaryType=this.binaryTypeInternal:this.binaryTypeInternal=this.ws.binaryType,this.clearConnectTimeout(),this.hasBeenOpened?this.dispatchEventOfType("reopen",t):(this.dispatchEventOfType("open",t),this.hasBeenOpened=!0),this.messageBuffer.forEach((function(t){return e.send(t)})),this.messageBuffer=[],this.allClearTimeoutId=setTimeout((function(){e.clearAllClearTimeout(),e.nextRetryTime=0,e.reconnectCount=0;var t=r/1e3|0;e.debugLog("WebSocket remained open for "+t+" seconds. Resetting retry time and count.")}),r)}},t.prototype.handleMessage=function(t){this.isClosed||this.dispatchEventOfType("message",t)},t.prototype.handleClose=function(t){var e=this;if(!this.isClosed){var r=this.options,n=r.maxReconnectAttempts,i=r.shouldReconnect;if(this.clearConnectTimeout(),this.clearAllClearTimeout(),this.ws&&(this.lastKnownExtensions=this.ws.extensions,this.lastKnownProtocol=this.ws.protocol,this.disposeSocket()),this.dispatchEventOfType("down",t),this.reconnectCount>=n)this.stopReconnecting(t,this.getTooManyFailedReconnectsMessage());else{var o=!t||i(t);"boolean"==typeof o?this.handleWillReconnect(o,t,"Provided shouldReconnect() returned false. Closing permanently."):o.then((function(r){e.isClosed||e.handleWillReconnect(r,t,"Provided shouldReconnect() resolved to false. Closing permanently.")}))}}},t.prototype.handleError=function(t){this.dispatchEventOfType("error",t),this.debugLog("WebSocket encountered an error.")},t.prototype.handleWillReconnect=function(t,e,r){t?this.reestablishConnection():this.stopReconnecting(e,r)},t.prototype.reestablishConnection=function(){var t=this,e=this.options,r=e.minReconnectDelay,n=e.maxReconnectDelay,i=e.reconnectBackoffFactor;this.reconnectCount++;var o=this.nextRetryTime;this.nextRetryTime=Math.max(r,Math.min(this.nextRetryTime*i,n)),setTimeout((function(){return t.openNewWebSocket()}),o);var s=o/1e3|0;this.debugLog("WebSocket was closed. Re-opening in "+s+" seconds.")},t.prototype.stopReconnecting=function(t,e){this.debugLog(e),this.shutdown(),t&&this.dispatchEventOfType("close",t)},t.prototype.shutdown=function(){this.isClosed=!0,this.clearAllTimeouts(),this.messageBuffer=[],this.disposeSocket()},t.prototype.disposeSocket=function(t,e){this.ws&&(this.ws.onerror=Kh,this.ws.onclose=Kh,this.ws.onmessage=Kh,this.ws.onopen=Kh,this.ws.close(t,e),this.ws=void 0)},t.prototype.clearAllTimeouts=function(){this.clearConnectTimeout(),this.clearAllClearTimeout()},t.prototype.clearConnectTimeout=function(){null!=this.connectTimeoutId&&(clearTimeout(this.connectTimeoutId),this.connectTimeoutId=void 0)},t.prototype.clearAllClearTimeout=function(){null!=this.allClearTimeoutId&&(clearTimeout(this.allClearTimeoutId),this.allClearTimeoutId=void 0)},t.prototype.dispatchEventOfType=function(t,e){var r=this;switch(t){case"close":this.onclose&&this.onclose(e);break;case"error":this.onerror&&this.onerror(e);break;case"message":this.onmessage&&this.onmessage(e);break;case"open":this.onopen&&this.onopen(e);break;case"down":this.ondown&&this.ondown(e);break;case"reopen":this.onreopen&&this.onreopen(e)}return t in this.listeners&&this.listeners[t].slice().forEach((function(t){return r.callListener(t,e)})),!e||!e.defaultPrevented},t.prototype.callListener=function(t,e){"function"==typeof t?t.call(this,e):t.handleEvent.call(this,e)},t.prototype.debugLog=function(t){this.options.debug&&console.log(t)},t.prototype.getTooManyFailedReconnectsMessage=function(){var t=this.options.maxReconnectAttempts;return"Failed to reconnect after "+t+" "+function(t,e){return 1===e?t:t+"s"}("attempt",t)+". Closing permanently."},t.DEFAULT_OPTIONS={allClearResetTime:5e3,connectTimeout:5e3,debug:!1,minReconnectDelay:1e3,maxReconnectDelay:3e4,maxReconnectAttempts:Number.POSITIVE_INFINITY,reconnectBackoffFactor:1.5,shouldReconnect:function(){return!0},wsConstructor:void 0},t.CONNECTING=0,t.OPEN=1,t.CLOSING=2,t.CLOSED=3,t}(),qh=zh.default=Hh;function jh(t){var e={};return Object.keys(Hh.DEFAULT_OPTIONS).forEach((function(r){var n=t[r];e[r]=void 0===n?Hh.DEFAULT_OPTIONS[r]:n})),e}function Kh(){}var Wh=function(){function t(t){this.provider=t,this.maxBackfillBlocks=120}var e=t.prototype;return e.getNewHeadsBackfill=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o,s,a,u,c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Zh(t),r.next=3,this.getBlockNumber();case 3:if(o=r.sent,Zh(t),0!==e.length){r.next=7;break}return r.abrupt("return",this.getHeadEventsInRange(Math.max(n,o-this.maxBackfillBlocks)+1,o+1));case 7:if(s=Zu(e[e.length-1].number),a=o-this.maxBackfillBlocks+1,!(s<=a)){r.next=11;break}return r.abrupt("return",this.getHeadEventsInRange(a,o+1));case 11:return r.next=13,this.getReorgHeads(t,e);case 13:return u=r.sent,Zh(t),r.next=17,this.getHeadEventsInRange(s+1,o+1);case 17:return c=r.sent,Zh(t),r.abrupt("return",[].concat(u,c));case 20:case"end":return r.stop()}}),i,this)})))},e.getLogsBackfill=function(t,e,n,i){return Au(this,void 0,void 0,r().mark((function o(){var s,a,u,c,f,h,l;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Zh(t),r.next=3,this.getBlockNumber();case 3:if(s=r.sent,Zh(t),0!==n.length){r.next=7;break}return r.abrupt("return",this.getLogsInRange(e,Math.max(i,s-this.maxBackfillBlocks)+1,s+1));case 7:if(a=Zu(n[n.length-1].blockNumber),u=s-this.maxBackfillBlocks+1,!(a<u)){r.next=11;break}return r.abrupt("return",this.getLogsInRange(e,u,s+1));case 11:return r.next=13,this.getCommonAncestor(t,n);case 13:return c=r.sent,Zh(t),f=n.filter((function(t){return Zu(t.blockNumber)>c.blockNumber})).map((function(t){return Object.assign(Object.assign({},t),{removed:!0})})),h=c.blockNumber===Number.NEGATIVE_INFINITY?Zu(n[0].blockNumber):c.blockNumber,r.next=19,this.getLogsInRange(e,h,s+1);case 19:return l=(l=r.sent).filter((function(t){return t&&(Zu(t.blockNumber)>c.blockNumber||Zu(t.logIndex)>c.logIndex)})),Zh(t),r.abrupt("return",[].concat(f,l));case 23:case"end":return r.stop()}}),o,this)})))},e.setMaxBackfillBlock=function(t){this.maxBackfillBlocks=t},e.getBlockNumber=function(){return Au(this,void 0,void 0,r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.provider.send("eth_blockNumber");case 2:return e=t.sent,t.abrupt("return",Zu(e));case 4:case"end":return t.stop()}}),t,this)})))},e.getHeadEventsInRange=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t>=e)){r.next=2;break}return r.abrupt("return",[]);case 2:for(i=[],o=t;o<e;o++)i.push({method:"eth_getBlockByNumber",params:[$u(o),!1]});return r.next=6,this.provider.sendBatch(i);case 6:return s=r.sent,r.abrupt("return",s.map(Vh));case 8:case"end":return r.stop()}}),n,this)})))},e.getReorgHeads=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=[],o=e.length-1;case 2:if(!(o>=0)){r.next=14;break}return s=e[o],r.next=6,this.getBlockByNumber(Zu(s.number));case 6:if(a=r.sent,Zh(t),s.hash!==a.hash){r.next=10;break}return r.abrupt("break",14);case 10:i.push(Vh(a));case 11:o--,r.next=2;break;case 14:return r.abrupt("return",i.reverse());case 15:case"end":return r.stop()}}),n,this)})))},e.getBlockByNumber=function(t){return Au(this,void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.provider.send("eth_getBlockByNumber",[$u(t),!1]));case 1:case"end":return e.stop()}}),e,this)})))},e.getCommonAncestor=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getBlockByNumber(Zu(e[e.length-1].blockNumber));case 2:i=r.sent,Zh(t),o=e.length-1;case 5:if(!(o>=0)){r.next=16;break}if((s=e[o]).blockNumber===i.number){r.next=11;break}return r.next=10,this.getBlockByNumber(Zu(s.blockNumber));case 10:i=r.sent;case 11:if(s.blockHash!==i.hash){r.next=13;break}return r.abrupt("return",{blockNumber:Zu(s.blockNumber),logIndex:Zu(s.logIndex)});case 13:o--,r.next=5;break;case 16:return r.abrupt("return",{blockNumber:Number.NEGATIVE_INFINITY,logIndex:Number.NEGATIVE_INFINITY});case 17:case"end":return r.stop()}}),n,this)})))},e.getLogsInRange=function(t,e,n){return Au(this,void 0,void 0,r().mark((function i(){var o;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e>=n)){r.next=2;break}return r.abrupt("return",[]);case 2:return o=Object.assign(Object.assign({},t),{fromBlock:$u(e),toBlock:$u(n-1)}),r.abrupt("return",this.provider.send("eth_getLogs",[o]));case 4:case"end":return r.stop()}}),i,this)})))},t}();function Vh(t){var e=Object.assign({},t);return delete e.totalDifficulty,delete e.transactions,delete e.uncles,e}function Jh(t){return Yh(t,(function(t){return t.hash}))}function Qh(t){return Yh(t,(function(t){return t.blockHash+"/"+t.logIndex}))}function Yh(t,e){var r=new Set,n=[];return t.forEach((function(t){var i=e(t);r.has(i)||(r.add(i),n.push(t))})),n}var Xh=new Error("Cancelled");function Zh(t){if(t())throw Xh}var $h=function(t){function i(e,i){var s,a,u=Lh.getApiKey(e.apiKey),c=Lh.getAlchemyNetwork(e.network),f=Lh.getAlchemyConnectionInfo(c,u,"wss"),h=new qh(null!==(a=e.url)&&void 0!==a?a:f.url,"alchemy-sdk-2.9.0",{wsConstructor:null!=i?i:"undefined"!=typeof process&&null!=process&&null!=process.versions&&null!=process.versions.node?require("websocket").w3cwebsocket:WebSocket}),l=Cu[c];return(s=t.call(this,h,l)||this)._events=[],s.virtualSubscriptionsById=new Map,s.virtualIdsByPhysicalId=new Map,s.handleMessage=function(t){var e=JSON.parse(t.data);if(function(t){return!function(t){return Array.isArray(t)||"2.0"===t.jsonrpc&&void 0!==t.id}(t)}(e)){var r=e.params.subscription,n=s.virtualIdsByPhysicalId.get(r);if(n){var i=s.virtualSubscriptionsById.get(n);if("eth_subscribe"===i.method)switch(i.params[0]){case"newHeads":var o=i,a=e,u=o.isBackfilling,c=o.backfillBuffer,f=a.params.result;u?function(t,e){ol(t,e,nl)}(c,f):r!==n?s.emitAndRememberEvent(n,f,nl):s.rememberEvent(n,f,nl);break;case"logs":var h=i,l=e,d=h.isBackfilling,p=h.backfillBuffer,m=l.params.result;d?function(t,e){ol(t,e,il)}(p,m):n!==r?s.emitAndRememberEvent(n,m,il):s.rememberEvent(n,m,il);break;default:if(r!==n){var v=e.params.result;s.emitEvent(n,v)}}}}},s.handleReopen=function(){s.virtualIdsByPhysicalId.clear();var t,e=(t=!1,{cancel:function(){return t=!0},isCancelled:function(){return t}}),i=e.cancel,a=e.isCancelled;s.cancelBackfill=i;for(var u,c=function(){var t=u.value;Au(o(s),void 0,void 0,r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.resubscribeAndBackfill(a,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),a()||console.error('Error while backfilling "'+t.params[0]+'" subscription. Some events may be missing.',e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))},f=n(s.virtualSubscriptionsById.values());!(u=f()).done;)c();s.startHeartbeat()},s.stopHeartbeatAndBackfill=function(){null!=s.heartbeatIntervalId&&(clearInterval(s.heartbeatIntervalId),s.heartbeatIntervalId=void 0),s.cancelBackfill()},s.apiKey=u,s.backfiller=new Wh(o(s)),s.addSocketListeners(),s.startHeartbeat(),s.cancelBackfill=Pu,s}e(i,t),i.getNetwork=function(t){return"string"==typeof t&&t in Ru?Ru[t]:Tf(t)};var s=i.prototype;return s.on=function(t,e){return this._addEventListener(t,e,!1)},s.once=function(t,e){return this._addEventListener(t,e,!0)},s.off=function(e,r){return pf(e)?this._off(e,r):t.prototype.off.call(this,e,r)},s.removeAllListeners=function(e){return void 0!==e&&pf(e)?this._removeAllListeners(e):t.prototype.removeAllListeners.call(this,e)},s.listenerCount=function(e){return void 0!==e&&pf(e)?this._listenerCount(e):t.prototype.listenerCount.call(this,e)},s.listeners=function(e){return void 0!==e&&pf(e)?this._listeners(e):t.prototype.listeners.call(this,e)},s._addEventListener=function(e,r,n){if(pf(e)){!function(t){if(!Object.values(hu).includes(t.method))throw new Error("Invalid method name "+t.method+". Accepted method names: "+Object.values(hu))}(e);var i=new df(mf(e),r,n);return this._events.push(i),this._startEvent(i),this}return t.prototype._addEventListener.call(this,e,r,n)},s._startEvent=function(e){[].concat(lf,["block","filter"]).includes(e.type)?this.customStartEvent(e):t.prototype._startEvent.call(this,e)},s._subscribe=function(t,e,n,i){return Au(this,void 0,void 0,r().mark((function o(){var s,a,u,c,f=this;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=this._subIds[t],r.next=3,this.getBlockNumber();case 3:return a=r.sent,null==s&&(s=Promise.all(e).then((function(t){return f.send("eth_subscribe",t)})),this._subIds[t]=s),r.next=7,s;case 7:return u=r.sent,r.next=10,Promise.all(e);case 10:c=r.sent,this.virtualSubscriptionsById.set(u,{event:i,method:"eth_subscribe",params:c,startingBlockNumber:a,virtualId:u,physicalId:u,sentEvents:[],isBackfilling:!1,backfillBuffer:[]}),this.virtualIdsByPhysicalId.set(u,u),this._subs[u]={tag:t,processFunc:n};case 14:case"end":return r.stop()}}),o,this)})))},s.emit=function(e){for(var r,n=this,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(pf(e)){var a=!1,u=[],c=mf(e);return this._events=this._events.filter((function(t){return t.tag!==c||(setTimeout((function(){t.listener.apply(n,o)}),0),a=!0,!t.once||(u.push(t),!1))})),u.forEach((function(t){n._stopEvent(t)})),a}return(r=t.prototype.emit).call.apply(r,[this,e].concat(o))},s.sendBatch=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,i=t.map((function(t){return{method:t.method,params:t.params,jsonrpc:"2.0",id:"alchemy-sdk:"+n++}})),e.abrupt("return",this.sendBatchConcurrently(i));case 3:case"end":return e.stop()}}),e,this)})))},s.destroy=function(){return this.removeSocketListeners(),this.stopHeartbeatAndBackfill(),t.prototype.destroy.call(this)},s.isCommunityResource=function(){return this.apiKey===Tu},s._stopEvent=function(t){var e=this,r=t.tag;if(lf.includes(t.type)){if(this._events.filter((function(t){return lf.includes(t.type)})).length)return}else if("tx"===t.type){if(this._events.filter((function(t){return"tx"===t.type})).length)return;r="tx"}else if(this.listenerCount(t.event))return;var n=this._subIds[r];n&&(delete this._subIds[r],n.then((function(t){e._subs[t]&&(delete e._subs[t],e.send("eth_unsubscribe",[t]))})))},s.addSocketListeners=function(){this._websocket.addEventListener("message",this.handleMessage),this._websocket.addEventListener("reopen",this.handleReopen),this._websocket.addEventListener("down",this.stopHeartbeatAndBackfill)},s.removeSocketListeners=function(){this._websocket.removeEventListener("message",this.handleMessage),this._websocket.removeEventListener("reopen",this.handleReopen),this._websocket.removeEventListener("down",this.stopHeartbeatAndBackfill)},s.resubscribeAndBackfill=function(t,e){return Au(this,void 0,void 0,r().mark((function n(){var i,o,s,a,u,c,f,h,l,d,p=this;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.virtualId,o=e.method,s=e.params,a=e.sentEvents,u=e.backfillBuffer,c=e.startingBlockNumber,e.isBackfilling=!0,u.length=0,r.prev=3,r.next=6,this.send(o,s);case 6:f=r.sent,Zh(t),e.physicalId=f,this.virtualIdsByPhysicalId.set(f,i),r.t0=s[0],r.next="newHeads"===r.t0?13:"logs"===r.t0?20:28;break;case 13:return r.next=15,tl((function(){return rl(p.backfiller.getNewHeadsBackfill(t,a,c),6e4)}),5,(function(){return!t()}));case 15:return h=r.sent,Zh(t),Jh([].concat(h,u)).forEach((function(t){return p.emitNewHeadsEvent(i,t)})),r.abrupt("break",29);case 20:return l=s[1]||{},r.next=23,tl((function(){return rl(p.backfiller.getLogsBackfill(t,l,a,c),6e4)}),5,(function(){return!t()}));case 23:return d=r.sent,Zh(t),Qh([].concat(d,u)).forEach((function(t){return p.emitLogsEvent(i,t)})),r.abrupt("break",29);case 28:return r.abrupt("break",29);case 29:return r.prev=29,e.isBackfilling=!1,u.length=0,r.finish(29);case 33:case"end":return r.stop()}}),n,this,[[3,,29,33]])})))},s.emitNewHeadsEvent=function(t,e){this.emitAndRememberEvent(t,e,nl)},s.emitLogsEvent=function(t,e){this.emitAndRememberEvent(t,e,il)},s.emitAndRememberEvent=function(t,e,r){this.rememberEvent(t,e,r),this.emitEvent(t,e)},s.emitEvent=function(t,e){var r=this.virtualSubscriptionsById.get(t);r&&this.emitGenericEvent(r,e)},s.rememberEvent=function(t,e,r){var n=this.virtualSubscriptionsById.get(t);n&&ol(n.sentEvents,Object.assign({},e),r)},s.emitGenericEvent=function(t,e){this.emitProcessFn(t.event)(e)},s.startHeartbeat=function(){var t=this;null==this.heartbeatIntervalId&&(this.heartbeatIntervalId=setInterval((function(){return Au(t,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,rl(this.send("net_version"),1e4);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),this._websocket.reconnect();case 8:case"end":return t.stop()}}),t,this,[[0,5]])})))}),3e4))},s.sendBatchConcurrently=function(t){return Au(this,void 0,void 0,r().mark((function e(){var n=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(t){return n.send(t.method,t.params)}))));case 1:case"end":return e.stop()}}),e)})))},s.customStartEvent=function(t){if(t.type===ff){var e=t.fromAddress,r=t.toAddress,n=t.hashesOnly;this._subscribe(t.tag,[hu.PENDING_TRANSACTIONS,{fromAddress:e,toAddress:r,hashesOnly:n}],this.emitProcessFn(t),t)}else if(t.type===hf){var i=t.addresses,o=t.includeRemoved,s=t.hashesOnly;this._subscribe(t.tag,[hu.MINED_TRANSACTIONS,{addresses:i,includeRemoved:o,hashesOnly:s}],this.emitProcessFn(t),t)}else"block"===t.type?this._subscribe("block",["newHeads"],this.emitProcessFn(t),t):"filter"===t.type&&this._subscribe(t.tag,["logs",this._getFilter(t.filter)],this.emitProcessFn(t),t)},s.emitProcessFn=function(t){var e=this;switch(t.type){case ff:return function(r){return e.emit({method:hu.PENDING_TRANSACTIONS,fromAddress:t.fromAddress,toAddress:t.toAddress,hashesOnly:t.hashesOnly},r)};case hf:return function(r){return e.emit({method:hu.MINED_TRANSACTIONS,addresses:t.addresses,includeRemoved:t.includeRemoved,hashesOnly:t.hashesOnly},r)};case"block":return function(t){var r=tt.from(t.number).toNumber();e._emitted.block=r,e.emit("block",r)};case"filter":return function(r){null==r.removed&&(r.removed=!1),e.emit(t.filter,e.formatter.filterLog(r))};default:throw new Error("Invalid event type to `emitProcessFn()`")}},s._off=function(t,e){var r=this;if(null==e)return this.removeAllListeners(t);var n=[],i=!1,o=mf(t);return this._events=this._events.filter((function(t){return t.tag!==o||t.listener!=e||(!!i||(i=!0,n.push(t),!1))})),n.forEach((function(t){r._stopEvent(t)})),this},s._removeAllListeners=function(t){var e=this,r=[];if(null==t)r=this._events,this._events=[];else{var n=mf(t);this._events=this._events.filter((function(t){return t.tag!==n||(r.push(t),!1)}))}return r.forEach((function(t){e._stopEvent(t)})),this},s._listenerCount=function(t){if(!t)return this._events.length;var e=mf(t);return this._events.filter((function(t){return t.tag===e})).length},s._listeners=function(t){if(null==t)return this._events.map((function(t){return t.listener}));var e=mf(t);return this._events.filter((function(t){return t.tag===e})).map((function(t){return t.listener}))},i}(Fh);function tl(t,e,n){return void 0===n&&(n=function(){return!0}),Au(this,void 0,void 0,r().mark((function i(){var o,s;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=0,s=0;case 2:return r.prev=3,r.next=6,t();case 6:return r.abrupt("return",r.sent);case 9:if(r.prev=9,r.t0=r.catch(3),!(++s>=e)&&n(r.t0)){r.next=14;break}throw r.t0;case 14:return r.next=16,el(o);case 16:if(n(r.t0)){r.next=18;break}throw r.t0;case 18:o=0===o?1e3:Math.min(3e4,2*o);case 19:r.next=2;break;case 21:case"end":return r.stop()}}),i,null,[[3,9]])})))}function el(t){return new Promise((function(e){return setTimeout(e,t)}))}function rl(t,e){return Promise.race([t,new Promise((function(t,r){return setTimeout((function(){return r(new Error("Timeout"))}),e)}))])}function nl(t){return Zu(t.number)}function il(t){return Zu(t.blockNumber)}function ol(t,e,r){var n=r(e),i=t.findIndex((function(t){return r(t)>n-10}));-1===i?t.length=0:t.splice(0,i),t.push(e)}var sl=Object.freeze({__proto__:null,AlchemyWebSocketProvider:$h});s._RF.pop()}}}));

System.register("chunks:///_virtual/AlchemyUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./alchemy.mjs","./GameConfig.ts","./PromiseUtils.ts"],(function(e){var t,r,n,a,c,s;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy},function(e){a=e.Alchemy},function(e){c=e.default},function(e){s=e.delay}],execute:function(){n._RF.push({},"9cff4QzfwtK37Qj2q4h+g02","AlchemyUtils",void 0),e("AlchemyUtils",function(){function e(){}return e.getAlchemy=function(t){return e._alchemyMap[t]||(e._alchemyMap[t]=new a({apiKey:c.instance.AlchemyConfig.apiKey,network:t})),e._alchemyMap[t]},e.getNftListWithMoreContracts=function(){var n=t(r().mark((function t(n,a,c){var s,u,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===c&&(c=[]),s=Array.from(c),u=[];case 3:if(!(s.length<=20)){t.next=9;break}return u.push(s),t.abrupt("break",12);case 9:u.push(s.splice(0,20));case 10:t.next=3;break;case 12:return t.next=14,Promise.all(u.map((function(t){return e.getNftList(n,a,t)})));case 14:return o=t.sent,t.abrupt("return",o.flat());case 16:case"end":return t.stop()}}),t)})));return function(e,t,r){return n.apply(this,arguments)}}(),e.getNftList=function(){var n=t(r().mark((function t(n,a,c){var u,o,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===c&&(c=[]),u=100,o=[];case 3:return t.prev=4,t.next=7,e.getAlchemy(n).nft.getNftsForOwner(a,{pageSize:u,contractAddresses:c,pageKey:i&&i.pageKey});case 7:if(i=t.sent,o.push.apply(o,i.ownedNfts),i.pageKey){t.next=11;break}return t.abrupt("break",20);case 11:t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(4),t.next=17,s(1e3);case 17:t.t0.toString().includes("429")||console.error("alchemy getNftList error!",t.t0);case 18:t.next=3;break;case 20:return t.abrupt("return",o);case 21:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,t,r){return n.apply(this,arguments)}}(),e.getOneNft=function(){var n=t(r().mark((function t(n,a){var c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,e.getAlchemy(n).nft.getNftsForOwner(a,{pageSize:1});case 4:return c=t.sent,t.abrupt("return",c.ownedNfts);case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,s(1e3);case 12:t.t0.toString().includes("429")||console.error("alchemy getOneNft error!",t.t0);case 13:t.next=0;break;case 15:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,t){return n.apply(this,arguments)}}(),e}())._alchemyMap=Object.create(null),n._RF.pop()}}}));

System.register("chunks:///_virtual/AssetsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Res.ts"],(function(n){var e,t,r,i,a,o;return{setters:[function(n){e=n.createClass,t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){i=n.cclegacy,a=n.assetManager},function(n){o=n.GameBundle}],execute:function(){i._RF.push({},"018dcJLSM1EOrOlVF8ddCiw","AssetsManager",void 0);var s=n("AssetsManager",function(){function n(e,t){this.nameOrUrl=e,this.bundle=t,n._instances[e]=this}n.newInstance=function(){var e=t(r().mark((function e(t,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._instances[t]){e.next=2;break}return e.abrupt("return",this._instances[t]);case 2:return e.t0=n,e.t1=t,e.next=6,n.loadBundle(t,i);case 6:return e.t2=e.sent,e.abrupt("return",new e.t0(e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)})));return function(n,t){return e.apply(this,arguments)}}(),n.getInstance=function(n){return this._instances[n]},n.loadBundle=function(n,e){return new Promise((function(t,r){a.loadBundle(n,e,(function(n,e){n?r(n):t(e)}))}))},n.loadAny=function(){var n=arguments;return new Promise((function(e,t){a.loadAny.apply(a,Array.from(n).concat([function(n,r){n?t(n):e(r)}]))}))},n.loadRemote=function(){var n=arguments;return new Promise((function(e,t){a.loadRemote.apply(a,Array.from(n).concat([function(n,r){n?t(n):e(r)}]))}))};var i=n.prototype;return i.destroy=function(){delete n._instances[this.nameOrUrl]},i._promisify=function(n,e){var t=this;return new Promise((function(r,i){var a;(a=t.bundle)[n].apply(a,Array.from(e).concat([function(n,e){n?i(n):r(e)}]))}))},i._call=function(n,e){var t;return(t=this.bundle)[n].apply(t,e)},i.load=function(){return this._promisify("load",arguments)},i.loadDir=function(){return this._promisify("loadDir",arguments)},i.loadScene=function(){return this._promisify("loadScene",arguments)},i.preload=function(){return this._promisify("preload",arguments)},i.preloadDir=function(){return this._promisify("preloadDir",arguments)},i.preloadScene=function(){return this._promisify("preloadScene",arguments)},i.get=function(n,e){return this._call("get",arguments)},i.getAssetInfo=function(n){return this._call("getAssetInfo",arguments)},i.getDirWithPath=function(n,e,t){return this._call("getDirWithPath",arguments)},i.getInfoWithPath=function(n,e){return this._call("getInfoWithPath",arguments)},i.getSceneInfo=function(n){return this._call("getSceneInfo",arguments)},i.release=function(n,e){return this._call("release",arguments)},i.releaseAll=function(){return this._call("releaseAll",arguments)},e(n,null,[{key:"resources",get:function(){var e;return null!=(e=this.getInstance(this.defaultBundleName))?e:new n(n.defaultBundleName,a.resources)}}]),n}());s.defaultBundleName=o.Resources,s._instances=Object.create(null),i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetsManager.ts","./ModelUtils.ts"],(function(e){var t,n,o,r,a,u,i,s,c,l,d,h,p,m,f;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,u=e.director,i=e.isValid,s=e.Node,c=e.AudioSource,l=e.Tween,d=e.tween,h=e.Component,p=e.AudioClip},function(e){m=e.AssetsManager},function(e){f=e.ModelUtils}],execute:function(){var g;r._RF.push({},"574730alBlAcb/mmCKSdrUm","AudioManager",void 0);var v=a.ccclass;e("AudioManager",v("AudioManager")(g=function(e){function r(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).tags=Object.create(null),t._model=f.createStorageModel({param:{name:"audio-config",initData:function(){return{volume:{common:.5,effect:.5}}}},mix:[{key:"volume"}]}),t}t(r,e);var a=r.prototype;return a.onLoad=function(){r.instance=this,u.addPersistRootNode(this.node)},a.onDestroy=function(){r.instance=null},a.getTag=function(e){return this.tags[e]},a.changeTag=function(e){return this.tags[e]=Date.now(),this.tags[e]},a._getAudioSource=function(e){var t=this.node.getChildByName(e);return t&&i(t)||((t=new s(e)).addComponent(c),t.setParent(this.node)),t.getComponent(c)},a.getVolume=function(e){return this._model.volume[e]},a.setVolume=function(e,t){this._model.volume[e]=t,this._model.save();var n=e+"#";this.node.children.forEach((function(e){if(e.name.startsWith(n)){var o=e.getComponent(c);l.stopAllByTarget(o),d(o).to(.3,{volume:t}).start()}}))},a.play=function(){var e=n(o().mark((function e(t,n,r){var a,u,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!0),void 0===r&&(r=2.5),a="common#"+t.bundle+"#"+t.path,u=this.changeTag(a),(i=this._getAudioSource(a)).loop=n,i.clip){e.next=12;break}return e.next=9,m.newInstance(t.bundle);case 9:return e.next=11,e.sent.load(t.path,p);case 11:i.clip=e.sent;case 12:if(u===this.getTag(a)){e.next=14;break}return e.abrupt("return",i);case 14:return i.volume=0,i.play(),l.stopAllByTarget(i),d(i).to(r,{volume:this._model.volume.common}).start(),e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n,o){return e.apply(this,arguments)}}(),a.stop=function(e,t){void 0===t&&(t=2.5);var n="common#"+e.bundle+"#"+e.path;this.changeTag(n);var o=this._getAudioSource(n);o&&(l.stopAllByTarget(o),d(o).to(t,{volume:0}).call((function(){return o.stop()})).start())},a.pause=function(e){var t="common#"+e.bundle+"#"+e.path;this.changeTag(t);var n=this._getAudioSource(t);n&&n.pause()},a.playEffect=function(){var e=n(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._getAudioSource("__AudioManager#Effect"),e.next=3,m.newInstance(t.bundle);case 3:return e.next=5,e.sent.load(t.path,p);case 5:r=e.sent,n.volume=this._model.volume.effect,n.playOneShot(r,1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r}(h))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/baseHandlers.ts",["cc","./reactive.ts","./operations.ts","./effect.ts","./shared.ts","./ref.ts","./warning.ts","./makeMap.ts"],(function(e){var t,r,n,a,i,o,s,u,f,l,c,p,y,h,v,d,g,R,w,E,S,_,T,A,m,O,b,k;return{setters:[function(e){t=e.cclegacy},function(e){r=e.ReactiveFlags,n=e.shallowReadonlyMap,a=e.readonlyMap,i=e.shallowReactiveMap,o=e.reactiveMap,s=e.readonly,u=e.reactive,f=e.toRaw,l=e.isReadonly,c=e.isShallow},function(e){p=e.TrackOpTypes,y=e.TriggerOpTypes},function(e){h=e.track,v=e.pauseTracking,d=e.resetTracking,g=e.trigger,R=e.ITERATE_KEY},function(e){w=e.extend,E=e.hasOwn,S=e.isSymbol,_=e.isIntegerKey,T=e.isObject,A=e.isArray,m=e.hasChanged},function(e){O=e.isRef},function(e){b=e.warn},function(e){k=e.makeMap}],execute:function(){t._RF.push({},"b065bMe9JZAZYGzALqrGyPV","baseHandlers",void 0);var H=k("__proto__,__v_isRef,__isVue"),I=new Set(Object.getOwnPropertyNames(Symbol).filter((function(e){return"arguments"!==e&&"caller"!==e})).map((function(e){return Symbol[e]})).filter(S)),M=F(),P=F(!1,!0),D=F(!0),L=F(!0,!0),x=G();function G(){var e={};return["includes","indexOf","lastIndexOf"].forEach((function(t){e[t]=function(){for(var e=f(this),r=0,n=this.length;r<n;r++)h(e,p.GET,r+"");for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=e[t].apply(e,i);return-1===s||!1===s?e[t].apply(e,i.map(f)):s}})),["push","pop","shift","unshift","splice"].forEach((function(t){e[t]=function(){v();for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=f(this)[t].apply(this,r);return d(),a}})),e}function K(e){var t=f(this);return h(t,p.HAS,e),t.hasOwnProperty(e)}function F(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!1),function(f,l,c){if(l===r.IS_REACTIVE)return!e;if(l===r.IS_READONLY)return e;if(l===r.IS_SHALLOW)return t;if(l===r.RAW&&c===(e?t?n:a:t?i:o).get(f))return f;var y=A(f);if(!e){if(y&&E(x,l))return Reflect.get(x,l,c);if("hasOwnProperty"===l)return K}var v=Reflect.get(f,l,c);return(S(l)?I.has(l):H(l))?v:(e||h(f,p.GET,l),t?v:O(v)?y&&_(l)?v:v.value:T(v)?e?s(v):u(v):v)}}var N=Y(),V=Y(!0);function Y(e){return void 0===e&&(e=!1),function(t,r,n,a){var i=t[r];if(l(i)&&O(i)&&!O(n))return!1;if(!e&&(c(n)||l(n)||(i=f(i),n=f(n)),!A(t)&&O(i)&&!O(n)))return i.value=n,!0;var o=A(t)&&_(r)?Number(r)<t.length:E(t,r),s=Reflect.set(t,r,n,a);return t===f(a)&&(o?m(n,i)&&g(t,y.SET,r,n,i):g(t,y.ADD,r,n)),s}}var j=e("mutableHandlers",{get:M,set:N,deleteProperty:function(e,t){var r=E(e,t),n=e[t],a=Reflect.deleteProperty(e,t);return a&&r&&g(e,y.DELETE,t,void 0,n),a},has:function(e,t){var r=Reflect.has(e,t);return S(t)&&I.has(t)||h(e,p.HAS,t),r},ownKeys:function(e){return h(e,p.ITERATE,A(e)?"length":R),Reflect.ownKeys(e)}}),C=e("readonlyHandlers",{get:D,set:function(e,t){return b('Set operation on key "'+String(t)+'" failed: target is readonly.',e),!0},deleteProperty:function(e,t){return b('Delete operation on key "'+String(t)+'" failed: target is readonly.',e),!0}});e("shallowReactiveHandlers",w({},j,{get:P,set:V})),e("shallowReadonlyHandlers",w({},C,{get:L}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BlindsInEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts","./Res.ts"],(function(t){var e,n,r,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){s=t.EffectBase},function(t){a=t.Res}],execute:function(){var c;n._RF.push({},"de611IkC3lD5Ze4OcNuDL6r","BlindsInEffect",void 0);var i=r.ccclass;r.property,t("BlindsInEffect",i("BlindsInEffect")(c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).endClearMaterial=!0,e.startValue=1,e.endValue=0,e}return e(n,t),n.prototype.onInit=function(){return this._commonInitTemplate1({path:a.material.blinds.path,startValue:this.startValue,endValue:this.endValue,key:"uProgress"})},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BlindsOutEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlindsInEffect.ts"],(function(t){var e,n,c,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator},function(t){r=t.BlindsInEffect}],execute:function(){var s;n._RF.push({},"02fd5seCAVC1qW87dz1Zeu7","BlindsOutEffect",void 0);var u=c.ccclass;c.property,t("BlindsOutEffect",u("BlindsOutEffect")(s=function(t){function n(){for(var e,n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))||this).endClearMaterial=!1,e.startValue=0,e.endValue=1,e}return e(n,t),n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Buffer.ts",["cc","./index.mjs_cjs=&original=.js","./ethers.umd.mjs_cjs=&original=.js","./ethers.umd.js","./index.js"],(function(e){var r,s,t;return{setters:[function(e){r=e.cclegacy},null,null,function(e){s=e.default},function(e){t=e.default}],execute:function(){e("base64ToAddress",(function(e){var r=u.from(e,"base64");return s.utils.getAddress("0x"+r.toString("hex"))})),r._RF.push({},"f1265t/rLFIjbYUCKr8q4gl","Buffer",void 0);var u=e("Buffer",t.Buffer);r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonExpand.ts",["cc","./Hover.ts"],(function(){var t,o,n;return{setters:[function(n){t=n.cclegacy,o=n.Button},function(t){n=t.Hover}],execute:function(){t._RF.push({},"9bea2/gVRJFk6dumOrOpqaM","ButtonExpand",void 0);var e=o.prototype.onLoad;o.prototype.onLoad=function(){e&&e.call(this),this.addComponent(n)},t._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonPositionAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,i,e,s,h,c,u,r,_,l,a;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,h=t._decorator,c=t.CCFloat,u=t.tween,r=t.v3,_=t.Node,l=t.Component,a=t.v2}],execute:function(){var f,d,T,E,p,v;s._RF.push({},"91676SwQLVD04qTVSzDoBw0","ButtonPositionAnimation",void 0);var A=h.ccclass,y=h.property;t("ButtonPositionAnimation",(f=A("ButtonPositionAnimation"),d=y({type:c}),f((p=o((E=function(t){function o(){for(var o,n=arguments.length,s=new Array(n),h=0;h<n;h++)s[h]=arguments[h];return o=t.call.apply(t,[this].concat(s))||this,i(o,"offset",p,e(o)),i(o,"time",v,e(o)),o._toActionRunning=!1,o}n(o,t);var s=o.prototype;return s.onEnable=function(){this._registerNodeEvent(),this._oldPosition&&this.node.setPosition(this._oldPosition)},s.onDisable=function(){this._unregisterNodeEvent()},s._runAction=function(t){var o;null==(o=this._action)||o.stop(),t.start()},s._toAction=function(){var t=this;if(this._toActionRunning){if(!this._oldPosition)return this._toActionRunning=!1,this._toAction()}else this._oldPosition&&this.node.setPosition(this._oldPosition),this._oldPosition=this.node.getPosition().clone();this._toActionRunning=!0,this._runAction(u(this.node).to(this.time,{position:this._oldPosition.clone().add(r(this.offset.x,this.offset.y,0))}).call((function(){t._toActionRunning=!1})))},s._rollbackAction=function(){this._oldPosition&&this._runAction(u(this.node).to(this.time,{position:this._oldPosition}))},s._onTouchBegan=function(t){this._toAction()},s._onTouchMove=function(t){},s._onTouchEnded=function(t){this._rollbackAction()},s._onTouchCancel=function(t){this._rollbackAction()},s._onMouseMoveIn=function(t){this._toAction()},s._onMouseMoveOut=function(t){this._rollbackAction()},s._registerNodeEvent=function(){this.node.on(_.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(_.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(_.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(_.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(_.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(_.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},s._unregisterNodeEvent=function(){this.node.off(_.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(_.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(_.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(_.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(_.EventType.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(_.EventType.MOUSE_LEAVE,this._onMouseMoveOut,this)},o}(l)).prototype,"offset",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a()}}),v=o(E.prototype,"time",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),T=E))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonUtils.ts",["cc"],(function(t){var e,n,o,a;return{setters:[function(t){e=t.cclegacy,n=t.Node,o=t.Button,a=t.Sprite}],execute:function(){t({disableButton:function(t){var e=t instanceof n?t:t.node,c=e.getComponent(o),i=e.getComponent(a);c&&(c.interactable=!1);i&&(i.grayscale=!0)},enabledButton:function(t){var e=t instanceof n?t:t.node,c=e.getComponent(o),i=e.getComponent(a);c&&(c.interactable=!0);i&&(i.grayscale=!1)}}),e._RF.push({},"5ae7aROkYVELar/SJ+EebF7","ButtonUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/CallbackType.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"b428bBgOJhHtKXuXCjJhKtH","CallbackType",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ChatItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EthereumUtils.ts"],(function(t){var e,n,o,c,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,c=t.RichText,r=t.Component},function(t){i=t.scanTx}],execute:function(){var u;n._RF.push({},"c8ebc0/VJdHwZINbTDKurqC","ChatItem",void 0);var s=o.ccclass,a=(o.property,o.requireComponent);t("ChatItem",s("ChatItem")(u=a(c)(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.update=function(t){},o.clickLink=function(t,e){console.log("txHash ",e),i(e)},n}(r))||u)||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ChatManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./sendbird.mjs","./GameConst.ts","./ZKHoldemSDKManager.ts","./WalletManager.ts","./Tips.ts","./GameHelper.ts"],(function(e){var n,t,r,a,s,c,i,u,o,h,l,p;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){a=e.OpenChannelHandler,s=e.default,c=e.OpenChannelModule},function(e){i=e.sendBird_appId},function(e){u=e.ZKHoldemSDKManager},function(e){o=e.WalletManager},function(e){h=e.showErrorToast},function(e){l=e.generateUUIDv4,p=e.getENSName}],execute:function(){r._RF.push({},"608a9LxqjFPypx76lxMp69r","ChatManager",void 0);e("ChatManager",function(){function e(){this.messageRecived=null}var r=e.prototype;return r.startChat=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initChatSDK();case 2:return e.next=4,this.getChannel();case 4:if(e.sent){e.next=7;break}return e.next=7,this.createChannel();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.initChatSDK=function(){var e=n(t().mark((function e(){var n,r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("initChatSDK"),this.sendBirdSDK=s.init({appId:i,localCacheEnabled:!0,modules:[new c]}),e.next=4,o.instance.getAccount();case 4:return n=e.sent,r=n.value&&n.value[0],e.next=8,p(r);case 8:return this.sendNickName=e.sent,e.prev=9,e.next=12,this.sendBirdSDK.connect(r);case 12:this.chatPlayer=e.sent,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.error(e.t0);case 18:return e.next=20,this.sendBirdSDK.setChannelInvitationPreference(!0);case 20:return a={nickname:r},e.next=23,this.sendBirdSDK.updateCurrentUserInfo(a);case 23:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(){return e.apply(this,arguments)}}(),r.createChannel=function(){var e=n(t().mark((function e(){var n,r,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.instance.game){e.next=2;break}return e.abrupt("return");case 2:return n=u.instance.game.gameId,r="zk_game_channel"+n,e.prev=4,(a={}).invitedUserIds=[],a.name=r,a.operatorUserIds=[],e.next=11,this.sendBirdSDK.openChannel.createChannel(a);case 11:this.channel=e.sent,this.channel.enter(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(){return e.apply(this,arguments)}}(),r.getChannel=function(){var e=this;return new Promise(n(t().mark((function n(r,a){var s,c,i,o,h,l;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u.instance.game){n.next=2;break}return n.abrupt("return",r(null));case 2:return s=u.instance.game.gameId,c="zk_game_channel"+s,n.prev=4,i=e.sendBirdSDK.openChannel.createOpenChannelListQuery({nameKeyword:c,limit:30}),n.next=8,i.next();case 8:o=n.sent,h=0;case 10:if(!(h<o.length)){n.next=20;break}if((l=o[h]).name!=c){n.next=17;break}return e.channel=l,e.channel.enter(),r(l),n.abrupt("break",20);case 17:h++,n.next=10;break;case 20:n.next=25;break;case 22:n.prev=22,n.t0=n.catch(4),console.error(n.t0);case 25:r(null);case 26:case"end":return n.stop()}}),n,null,[[4,22]])}))))},r.exitChannel=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.channel){e.next=4;break}return e.next=3,this.channel.exit();case 3:this.channel=null;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.deleteAndExitChannel=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.channel){e.next=4;break}return e.next=3,this.channel.delete();case 3:this.channel=null;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.listenMessage=function(e){var n=this;if(this.messageRecived=e,this.channel){var t=new a;t.onMessageReceived=function(e,t){n.messageRecived(t.message)},this.sendBirdSDK.openChannel.addOpenChannelHandler(l(),t)}},r.sendMessage=function(){var e=n(t().mark((function e(n){var r,a,s=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.channel?(r={name:this.sendNickName,message:n},a=JSON.stringify(r),this.channel.sendUserMessage({message:a}).onPending((function(e){})).onFailed((function(e,n){console.error(e),h(e.message)})).onSucceeded((function(e){s.messageRecived(e.message)}))):console.error("channel is null");case 1:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ChatView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./ChatManager.ts","./GameHelper.ts","./TweenUtils.ts","./I18n.ts","./GameConst.ts"],(function(t){var e,n,o,s,a,i,r,c,h,l,u,g,p,d,f,m,v,C,I,B,y;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,a=t._decorator,i=t.instantiate,r=t.RichText,c=t.ScrollView,h=t.EditBox,l=t.Button,u=t.NodeEventType},function(t){g=t.UIBase},function(t){p=t.ChatManager},function(t){d=t.shortName},function(t){f=t.TweenUtils},function(t){m=t.I18n},function(t){v=t.chatBotFontColor,C=t.chatBotMessageFontColor,I=t.linkFontColor,B=t.chatUserFontColor,y=t.chatMessageFontColor}],execute:function(){var w;s._RF.push({},"41eeew75PpE27dzvfIt3NK2","ChatView",void 0);var M=a.ccclass;a.property,t("ChatView",M("ChatView")(w=function(t){function s(){return t.apply(this,arguments)||this}e(s,t);var a=s.prototype;return a.start=function(){this.chatManager=new p,this.startChat()},a.startChat=function(){var t=n(o().mark((function t(){var e=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.editBox.node.active=!1,t.next=3,this.chatManager.startChat();case 3:f.fadeIn(this.editBox.node,{startOpacity:0,endOpacity:255}).start(),this.chatManager.listenMessage((function(t){var n=JSON.parse(t),o=n.name,s=n.message;e.addChatMessage(o,s,!1)}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.showSystemMessageInfo=function(t){this.addChatMessage(null,t,!0)},a.showTxStageAction=function(t,e,n){var o=d(e),s="<img src='type2' offset=4/><color=#"+v+"> "+m.get("System")+": </color><color=#"+C+"> YOU "+t+" "+n+' </color><on click="clickLink" param="'+e+'"><u><color=#'+I+">"+o+"</color><u></on>";console.log("messageItem",s);var a=i(this.chatItem.node);a.active=!0,a.parent=this.chatItem.node.parent,a.getComponent(r).string=s,this.scrollview.scrollToBottom(.01)},a.addChatMessage=function(){var t=n(o().mark((function t(e,n,s){var a,c,h,l,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s?("type2",a="<img src='type2' offset=4/><color=#"+v+"> "+m.get("System")+": </color><color=#"+C+">"+n+"</color>",(c=i(this.chatItem.node)).active=!0,c.parent=this.chatItem.node.parent,c.getComponent(r).string=a):(h="",this.chatManager.sendNickName==e?(h="type1",e=m.get("YOU")):(h="type0",e=d(e)),l="<img src='"+h+"' offset=4 /><color=#"+B+">"+e+": </color><color=#"+y+">"+n+"</color>",console.log("messageItem",l),(u=i(this.chatItem.node)).active=!0,u.parent=this.chatItem.node.parent,u.getComponent(r).string=l),this.scrollview.scrollToBottom(.01);case 2:case"end":return t.stop()}}),t,this)})));return function(e,n,o){return t.apply(this,arguments)}}(),a.onUILoad=function(){var t=this;this.scrollview=this.getUIComponent("chatList",c),this.chatItem=this.getUIComponent("chatItem",r),this.editBox=this.getUIComponent("chatInput",h),this.sendButton=this.getUIComponent("sendButton",l),this.editBox.node.on("editing-return",(function(){t.editBox.string.length>0&&(t.chatManager.sendMessage(t.editBox.string),t.editBox.string="")})),this.chatItem.node.active=!1,this.sendButton.node.on(u.TOUCH_END,(function(){t.editBox.string.length>0&&(t.chatManager.sendMessage(t.editBox.string),t.editBox.string="")}))},a.update=function(t){},s}(g))||w);s._RF.pop()}}}));

System.register("chunks:///_virtual/ChipsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts","./I18n.ts"],(function(e){var t,i,o,n,a,r,l,s,p,u,c,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Sprite,s=e.Label,p=e.Node,u=e.log,c=e.Component},function(e){h=e.formatNumberValue},function(e){g=e.I18n}],execute:function(){var d,f,v,C,b,m,y,N,B,V,P,z;a._RF.push({},"7ea883sc0BErZ4AliJR/am7","ChipsManager",void 0);var A=r.ccclass,M=r.property;e("ChipsManager",(d=A("ChipsManager"),f=M({tooltip:"pool background"}),v=M(l),C=M({tooltip:"pool value label"}),b=M(s),m=M({tooltip:"chips node"}),y=M(p),d((V=t((B=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"poolBg",V,n(t)),o(t,"poolValue",P,n(t)),o(t,"chipsNode",z,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.poolBg.node.active=!1,this.hiddenAllChips()},a.hiddenAllChips=function(){for(var e=0;e<6;e++){this.getChipsNode(e).active=!1}},a.getChipsNode=function(e){return this.chipsNode.getChildByName(e.toString())},a.setChipsValue=function(e,t){var i=this.getChipsNode(e);u("setChipsValue",e,t),i.active||(i.active=!0);var o=i.getChildByName("value");t>0?(o.active=!0,o.getComponent(s).string=h(t)):o.active=!1},a.updateChipsValue=function(e){for(var t=0;t<e.length;t++){var i=e[t];"number"==typeof i&&(u(" chips value",i),this.setChipsValue(t,i))}},a.updateChipsActions=function(e,t){var i=this.getChipsNode(e);i.active=!0;var o=i.getChildByName("status");o.active="None"!=t,o.getComponent(s).string=t},a.setPoolValue=function(e){this.poolBg.node.active||(this.poolBg.node.active=!0),this.poolValue.string=g.get("POT: ")+h(e)},a.hidePool=function(){this.poolBg.node.active=!1},a.getChipsPos=function(e){return this.getChipsNode(e).getPosition()},a.update=function(e){},t}(c)).prototype,"poolBg",[f,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(B.prototype,"poolValue",[C,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"chipsNode",[m,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=B))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/codeframe.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("generateCodeFrame",(function(e,t,r){void 0===t&&(t=0);void 0===r&&(r=e.length);var n=e.split(/(\r?\n)/),a=n.filter((function(e,t){return t%2==1}));n=n.filter((function(e,t){return t%2==0}));for(var i=0,f=[],h=0;h<n.length;h++)if((i+=n[h].length+(a[h]&&a[h].length||0))>=t){for(var o=h-2;o<=h+2||r>i;o++)if(!(o<0||o>=n.length)){var u=o+1;f.push(""+u+" ".repeat(Math.max(3-String(u).length,0))+"|  "+n[o]);var c=n[o].length,l=a[o]&&a[o].length||0;if(o===h){var g=t-(i-(c+l)),s=Math.max(1,r>i?c-g:r-t);f.push("   |  "+" ".repeat(g)+"^".repeat(s))}else if(o>h){if(r>i){var v=Math.max(Math.min(r-i,c),1);f.push("   |  "+"^".repeat(v))}i+=c+l}}break}return f.join("\n")})),t._RF.push({},"097aaejH89LOYTnLIAnygWo","codeframe",void 0);t._RF.pop()}}}));

System.register("chunks:///_virtual/collectionHandlers.ts",["cc","./reactive.ts","./effect.ts","./operations.ts","./shared.ts"],(function(e){var t,n,r,a,i,o,c,s,l,u,h,f,d,v,E,g;return{setters:[function(e){t=e.cclegacy},function(e){n=e.ReactiveFlags,r=e.toRaw,a=e.toReadonly,i=e.toReactive},function(e){o=e.track,c=e.ITERATE_KEY,s=e.MAP_KEY_ITERATE_KEY,l=e.trigger},function(e){u=e.TrackOpTypes,h=e.TriggerOpTypes},function(e){f=e.hasOwn,d=e.capitalize,v=e.isMap,E=e.hasChanged,g=e.toRawType}],execute:function(){t._RF.push({},"1de61MtAzpJ/6lKMGNvLdzU","collectionHandlers",void 0);var R=function(e){return e},A=function(e){return Reflect.getPrototypeOf(e)};function T(e,t,c,s){void 0===c&&(c=!1),void 0===s&&(s=!1),e=e[n.RAW];var l=r(e),h=r(t);c||(t!==h&&o(l,u.GET,t),o(l,u.GET,h));var f=A(l).has,d=s?R:c?a:i;return f.call(l,t)?d(e.get(t)):f.call(l,h)?d(e.get(h)):void(e!==l&&e.get(t))}function p(e,t){void 0===t&&(t=!1);var a=this[n.RAW],i=r(a),c=r(e);return t||(e!==c&&o(i,u.HAS,e),o(i,u.HAS,c)),e===c?a.has(e):a.has(e)||a.has(c)}function y(e,t){return void 0===t&&(t=!1),e=e[n.RAW],!t&&o(r(e),u.ITERATE,c),Reflect.get(e,"size",e)}function w(e){e=r(e);var t=r(this);return A(t).has.call(t,e)||(t.add(e),l(t,h.ADD,e,e)),this}function D(e,t){t=r(t);var n=r(this),a=A(n),i=a.has,o=a.get,c=i.call(n,e);c?O(n,i,e):(e=r(e),c=i.call(n,e));var s=o.call(n,e);return n.set(e,t),c?E(t,s)&&l(n,h.SET,e,t,s):l(n,h.ADD,e,t),this}function S(e){var t=r(this),n=A(t),a=n.has,i=n.get,o=a.call(t,e);o?O(t,a,e):(e=r(e),o=a.call(t,e));var c=i?i.call(t,e):void 0,s=t.delete(e);return o&&l(t,h.DELETE,e,void 0,c),s}function b(){var e=r(this),t=0!==e.size,n=v(e)?new Map(e):new Set(e),a=e.clear();return t&&l(e,h.CLEAR,void 0,void 0,n),a}function z(e,t){return function(s,l){var h=this,f=h[n.RAW],d=r(f),v=t?R:e?a:i;return!e&&o(d,u.ITERATE,c),f.forEach((function(e,t){return s.call(l,v(e),v(t),h)}))}}function C(e,t,l){return function(){var h,f=this[n.RAW],d=r(f),E=v(d),g="entries"===e||e===Symbol.iterator&&E,A="keys"===e&&E,T=f[e].apply(f,arguments),p=l?R:t?a:i;return!t&&o(d,u.ITERATE,A?s:c),(h={next:function(){var e=T.next(),t=e.value,n=e.done;return n?{value:t,done:n}:{value:g?[p(t[0]),p(t[1])]:p(t),done:n}}})[Symbol.iterator]=function(){return this},h}}function L(e){return function(){var t=(arguments.length<=0?void 0:arguments[0])?'on key "'+(arguments.length<=0?void 0:arguments[0])+'" ':"";return console.warn(d(e)+" operation "+t+"failed: target is readonly.",r(this)),e!==h.DELETE&&this}}function _(){var e={get:function(e){return T(this,e)},get size(){return y(this)},has:p,add:w,set:D,delete:S,clear:b,forEach:z(!1,!1)},t={get:function(e){return T(this,e,!1,!0)},get size(){return y(this)},has:p,add:w,set:D,delete:S,clear:b,forEach:z(!1,!0)},n={get:function(e){return T(this,e,!0)},get size(){return y(this,!0)},has:function(e){return p.call(this,e,!0)},add:L(h.ADD),set:L(h.SET),delete:L(h.DELETE),clear:L(h.CLEAR),forEach:z(!0,!1)},r={get:function(e){return T(this,e,!0,!0)},get size(){return y(this,!0)},has:function(e){return p.call(this,e,!0)},add:L(h.ADD),set:L(h.SET),delete:L(h.DELETE),clear:L(h.CLEAR),forEach:z(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((function(a){e[a]=C(a,!1,!1),n[a]=C(a,!0,!1),t[a]=C(a,!1,!0),r[a]=C(a,!0,!0)})),[e,n,t,r]}var H=_(),I=H[0],k=H[1],m=H[2],M=H[3];function W(e,t){var r=t?e?M:m:e?k:I;return function(t,a,i){return a===n.IS_REACTIVE?!e:a===n.IS_READONLY?e:a===n.RAW?t:Reflect.get(f(r,a)&&a in t?r:t,a,i)}}e("mutableCollectionHandlers",{get:W(!1,!1)}),e("shallowCollectionHandlers",{get:W(!1,!0)}),e("readonlyCollectionHandlers",{get:W(!0,!1)}),e("shallowReadonlyCollectionHandlers",{get:W(!0,!0)});function O(e,t,n){var a=r(n);if(a!==n&&t.call(e,a)){var i=g(e);console.warn("Reactive "+i+" contains both the raw and reactive versions of the same object"+("Map"===i?" as keys":"")+", which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.")}}t._RF.pop()}}}));

System.register("chunks:///_virtual/ColorUtils.ts",["cc"],(function(o){var t,e;return{setters:[function(o){t=o.cclegacy,e=o.Color}],execute:function(){o("hex2Color",(function(o){return(new e).fromHEX(o)})),t._RF.push({},"898165CUoVFXbMbCeM5m2zF","ColorUtils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/colyseus.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0);var o=t("__cjsMetaURL",e.meta.url);n.define(o,(function(e,n,o,r,i){!function(t,n){"object"==typeof e&&void 0!==o?n(e):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).Colyseus={})}(this,(function(t){function e(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(n){if("default"!==n&&!(n in t)){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}}))})),Object.freeze(t)}ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window);var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var r,i=function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function a(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))}function a(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)}function f(t,e,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(t,n):r?r.value=n:e.set(t,n),n}!function(t){t[t.CONSENTED=4e3]="CONSENTED",t[t.DEVMODE_RESTART=4010]="DEVMODE_RESTART"}(r||(r={}));var h=function(t){function e(e,n){var o=t.call(this,n)||this;return o.name="ServerError",o.code=e,o}return o(e,t),e}(Error);function u(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}u.prototype._array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this._parse();return e},u.prototype._map=function(t){for(var e={},n=0;n<t;n++)e[this._parse()]=this._parse();return e},u.prototype._str=function(t){var e=function(t,e,n){for(var o="",r=0,i=e,s=e+n;i<s;i++){var a=t.getUint8(i);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&t.getUint8(++i))<<12|(63&t.getUint8(++i))<<6|(63&t.getUint8(++i))<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&t.getUint8(++i))<<6|(63&t.getUint8(++i))<<0);else o+=String.fromCharCode((31&a)<<6|63&t.getUint8(++i));else o+=String.fromCharCode(a)}return o}(this._view,this._offset,t);return this._offset+=t,e},u.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},u.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),n=0,o=0,r=0,i=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:if(n=this._view.getUint8(this._offset),o=this._view.getInt8(this._offset+1),this._offset+=2,-1===o){var s=this._view.getUint32(this._offset);return r=this._view.getInt32(this._offset+4),i=this._view.getUint32(this._offset+8),this._offset+=12,new Date(1e3*(4294967296*r+i)+s/1e6)}return[o,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),o=this._view.getInt8(this._offset+2),this._offset+=3,[o,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),o=this._view.getInt8(this._offset+4),this._offset+=5,[o,this._bin(n)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return r=this._view.getUint32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 212:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?void(this._offset+=1):[o,this._bin(1)];case 213:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(2)];case 214:return o=this._view.getInt8(this._offset),this._offset+=1,-1===o?(t=this._view.getUint32(this._offset),this._offset+=4,new Date(1e3*t)):[o,this._bin(4)];case 215:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?(r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(r+i)):-1===o?(r=this._view.getUint32(this._offset),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(1e3*(4294967296*(3&r)+i)+(r>>>2)/1e6)):[o,this._bin(8)];case 216:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};function d(t,e,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?t.setUint8(e++,o):o<2048?(t.setUint8(e++,192|o>>6),t.setUint8(e++,128|63&o)):o<55296||o>=57344?(t.setUint8(e++,224|o>>12),t.setUint8(e++,128|o>>6&63),t.setUint8(e++,128|63&o)):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),t.setUint8(e++,240|o>>18),t.setUint8(e++,128|o>>12&63),t.setUint8(e++,128|o>>6&63),t.setUint8(e++,128|63&o))}function p(t,e,n){var o=typeof n,r=0,i=0,s=0,a=0,c=0,f=0;if("string"===o){if((c=function(t){for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n}(n))<32)t.push(160|c),f=1;else if(c<256)t.push(217,c),f=2;else if(c<65536)t.push(218,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("String too long");t.push(219,c>>24,c>>16,c>>8,c),f=5}return e.push({_str:n,_length:c,_offset:t.length}),f+c}if("number"===o)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(t.push(n),1):n<256?(t.push(204,n),2):n<65536?(t.push(205,n>>8,n),3):n<4294967296?(t.push(206,n>>24,n>>16,n>>8,n),5):(s=n/Math.pow(2,32)>>0,a=n>>>0,t.push(207,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):n>=-32?(t.push(n),1):n>=-128?(t.push(208,n),2):n>=-32768?(t.push(209,n>>8,n),3):n>=-2147483648?(t.push(210,n>>24,n>>16,n>>8,n),5):(s=Math.floor(n/Math.pow(2,32)),a=n>>>0,t.push(211,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):(t.push(203),e.push({_float:n,_length:8,_offset:t.length}),9);if("object"===o){if(null===n)return t.push(192),1;if(Array.isArray(n)){if((c=n.length)<16)t.push(144|c),f=1;else if(c<65536)t.push(220,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Array too large");t.push(221,c>>24,c>>16,c>>8,c),f=5}for(r=0;r<c;r++)f+=p(t,e,n[r]);return f}if(n instanceof Date){var h=n.getTime(),u=Math.floor(h/1e3),d=1e6*(h-1e3*u);return u>=0&&d>=0&&u<=17179869183?0===d&&u<=4294967295?(t.push(214,255,u>>24,u>>16,u>>8,u),6):(s=u/4294967296,a=4294967295&u,t.push(215,255,d>>22,d>>14,d>>6,s,a>>24,a>>16,a>>8,a),10):(s=Math.floor(u/4294967296),a=u>>>0,t.push(199,12,255,d>>24,d>>16,d>>8,d,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),15)}if(n instanceof ArrayBuffer){if((c=n.byteLength)<256)t.push(196,c),f=2;else if(c<65536)t.push(197,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Buffer too large");t.push(198,c>>24,c>>16,c>>8,c),f=5}return e.push({_bin:n,_length:c,_offset:t.length}),f+c}if("function"==typeof n.toJSON)return p(t,e,n.toJSON());var l=[],v="",y=Object.keys(n);for(r=0,i=y.length;r<i;r++)void 0!==n[v=y[r]]&&"function"!=typeof n[v]&&l.push(v);if((c=l.length)<16)t.push(128|c),f=1;else if(c<65536)t.push(222,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Object too large");t.push(223,c>>24,c>>16,c>>8,c),f=5}for(r=0;r<c;r++)f+=p(t,e,v=l[r]),f+=p(t,e,n[v]);return f}if("boolean"===o)return t.push(n?195:194),1;if("undefined"===o)return t.push(192),1;if("function"==typeof n.toJSON)return p(t,e,n.toJSON());throw new Error("Could not encode")}function l(t){var e=[],n=[],o=p(e,n,t),r=new ArrayBuffer(o),i=new DataView(r),s=0,a=0,c=-1;n.length>0&&(c=n[0]._offset);for(var f,h=0,u=0,l=0,v=e.length;l<v;l++)if(i.setUint8(a+l,e[l]),l+1===c){if(h=(f=n[s])._length,u=a+c,f._bin)for(var y=new Uint8Array(f._bin),g=0;g<h;g++)i.setUint8(u+g,y[g]);else f._str?d(i,u,f._str):void 0!==f._float&&i.setFloat64(u,f._float);a+=h,n[++s]&&(c=n[s]._offset)}return r}var v,y,g=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},m=function(){function t(t){this.events=t}return t.prototype.send=function(t){t instanceof ArrayBuffer?this.ws.send(t):Array.isArray(t)&&this.ws.send(new Uint8Array(t).buffer)},t.prototype.connect=function(t){this.ws=new g(t,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},t.prototype.close=function(t,e){this.ws.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.ws.readyState===g.OPEN},enumerable:!1,configurable:!0}),t}(),w=function(){function t(){this.events={},this.transport=new m(this.events)}return t.prototype.send=function(t){this.transport.send(t)},t.prototype.connect=function(t){this.transport.connect(t)},t.prototype.close=function(t,e){this.transport.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.transport.isOpen},enumerable:!1,configurable:!0}),t}();function E(t,e){for(var n=t[e++],o="",r=0,i=e,s=e+n;i<s;i++){var a=t[i];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&t[++i])<<12|(63&t[++i])<<6|(63&t[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&t[++i])<<6|(63&t[++i])<<0);else o+=String.fromCharCode((31&a)<<6|63&t[++i]);else o+=String.fromCharCode(a)}return o}function A(t){void 0===t&&(t="");for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n+1}t.Protocol=void 0,(v=t.Protocol||(t.Protocol={}))[v.HANDSHAKE=9]="HANDSHAKE",v[v.JOIN_ROOM=10]="JOIN_ROOM",v[v.ERROR=11]="ERROR",v[v.LEAVE_ROOM=12]="LEAVE_ROOM",v[v.ROOM_DATA=13]="ROOM_DATA",v[v.ROOM_STATE=14]="ROOM_STATE",v[v.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",v[v.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",v[v.ROOM_DATA_BYTES=17]="ROOM_DATA_BYTES",t.ErrorCode=void 0,(y=t.ErrorCode||(t.ErrorCode={}))[y.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",y[y.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",y[y.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",y[y.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",y[y.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",y[y.AUTH_FAILED=4215]="AUTH_FAILED",y[y.APPLICATION_ERROR=4216]="APPLICATION_ERROR";var _={};function O(t,e){_[t]=e}function $(t){var e=_[t];if(!e)throw new Error("missing serializer: "+t);return e}var b=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.handlers.forEach((function(n){return n.apply(t,e)}))},t.prototype.invokeAsync=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Promise.all(this.handlers.map((function(n){return n.apply(t,e)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}();function I(){var t=new b;function e(e){return t.register(e,null===this)}return e.once=function(e){t.register((function n(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];e.apply(this,o),t.remove(n)}))},e.remove=function(e){return t.remove(e)},e.invoke=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invoke.apply(t,e)},e.invokeAsync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invokeAsync.apply(t,e)},e.clear=function(){return t.clear()},e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var x=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}function o(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function r(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var i,s=255,a=213;t.OPERATION=void 0,(i=t.OPERATION||(t.OPERATION={}))[i.ADD=128]="ADD",i[i.REPLACE=0]="REPLACE",i[i.DELETE=64]="DELETE",i[i.DELETE_AND_ADD=192]="DELETE_AND_ADD",i[i.TOUCH=1]="TOUCH",i[i.CLEAR=10]="CLEAR";var c=function(){function e(t,e,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=t,this.setParent(e,n)}return e.prototype.setParent=function(t,e,n){var o=this;if(this.indexes||(this.indexes=this.ref instanceof Rt?this.ref._definition.indexes:{}),this.parent=t,this.parentIndex=n,e)if(this.root=e,this.ref instanceof Rt){var r=this.ref._definition;for(var i in r.schema){var s=this.ref[i];if(s&&s.$changes){var a=r.indexes[i];s.$changes.setParent(this.ref,e,a)}}}else"object"==typeof this.ref&&this.ref.forEach((function(t,e){if(t instanceof Rt){var n=t.$changes,r=o.ref.$changes.indexes[e];n.setParent(o.ref,o.root,r)}}))},e.prototype.operation=function(t){this.changes.set(--this.currentCustomOperation,t)},e.prototype.change=function(e,n){void 0===n&&(n=t.OPERATION.ADD);var o="number"==typeof e?e:this.indexes[e];this.assertValidIndex(o,e);var r=this.changes.get(o);r&&r.op!==t.OPERATION.DELETE&&r.op!==t.OPERATION.TOUCH||this.changes.set(o,{op:r&&r.op===t.OPERATION.DELETE?t.OPERATION.DELETE_AND_ADD:n,index:o}),this.allChanges.add(o),this.changed=!0,this.touchParents()},e.prototype.touch=function(e){var n="number"==typeof e?e:this.indexes[e];this.assertValidIndex(n,e),this.changes.has(n)||this.changes.set(n,{op:t.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},e.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},e.prototype.getType=function(t){if(this.ref._definition)return(e=this.ref._definition).schema[e.fieldsByIndex[t]];var e,n=(e=this.parent._definition).schema[e.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},e.prototype.getChildrenFilter=function(){var t=this.parent._definition.childFilters;return t&&t[this.parentIndex]},e.prototype.getValue=function(t){return this.ref.getByIndex(t)},e.prototype.delete=function(e){var n="number"==typeof e?e:this.indexes[e];if(void 0!==n){var o=this.getValue(n);this.changes.set(n,{op:t.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],o&&o.$changes&&(o.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema ".concat(this.ref.constructor.name,": trying to delete non-existing index: ").concat(e," (").concat(n,")"))},e.prototype.discard=function(e,n){var o=this;void 0===e&&(e=!1),void 0===n&&(n=!1),this.ref instanceof Rt||this.changes.forEach((function(e){if(e.op===t.OPERATION.DELETE){var n=o.ref.getIndex(e.index);delete o.indexes[n]}})),this.changes.clear(),this.changed=e,n&&this.allChanges.clear(),this.currentCustomOperation=0},e.prototype.discardAll=function(){var t=this;this.changes.forEach((function(e){var n=t.getValue(e.index);n&&n.$changes&&n.$changes.discardAll()})),this.discard()},e.prototype.cache=function(t,e){this.caches[t]=e},e.prototype.clone=function(){return new e(this.ref,this.parent,this.root)},e.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},e.prototype.assertValidIndex=function(t,e){if(void 0===t)throw new Error('ChangeTree: missing index for field "'.concat(e,'"'))},e}();function f(t,e,n,o){return t[e]||(t[e]=[]),t[e].push(n),null==o||o.forEach((function(t,e){return n(t,e)})),function(){return u(t[e],t[e].indexOf(n))}}function h(e){var n=this,o="string"!=typeof this.$changes.getType();this.$items.forEach((function(r,i){e.push({refId:n.$changes.refId,op:t.OPERATION.DELETE,field:i,value:void 0,previousValue:r}),o&&n.$changes.root.removeRef(r.$changes.refId)}))}function u(t,e){if(-1===e||e>=t.length)return!1;for(var n=t.length-1,o=e;o<n;o++)t[o]=t[o+1];return t.length=n,!0}var d=function(t,e){var n=t.toString(),o=e.toString();return n<o?-1:n>o?1:0};function p(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"==typeof e||isNaN(e)?t[e]:t.at(e)},set:function(t,e,n){if("symbol"==typeof e||isNaN(e))t[e]=n;else{var o=Array.from(t.$items.keys()),r=parseInt(o[e]||e);null==n?t.deleteAt(r):t.setAt(r,n)}return!0},deleteProperty:function(t,e){return"number"==typeof e?t.deleteAt(e):delete t[e],!0}})}var l=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,t)}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return Array.isArray(t)||void 0!==t.array},Object.defineProperty(e.prototype,"length",{get:function(){return this.$items.size},set:function(t){0===t?this.clear():this.splice(t,this.length-t)},enumerable:!1,configurable:!0}),e.prototype.push=function(){for(var t,e=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach((function(n){t=e.$refId++,e.setAt(t,n)})),t},e.prototype.pop=function(){var t=Array.from(this.$indexes.values()).pop();if(void 0!==t){this.$changes.delete(t),this.$indexes.delete(t);var e=this.$items.get(t);return this.$items.delete(t),e}},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.setAt=function(e,n){var o,r;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,e);var i=null!==(r=null===(o=this.$changes.indexes[e])||void 0===o?void 0:o.op)&&void 0!==r?r:t.OPERATION.ADD;this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,n),this.$changes.change(e,i)},e.prototype.deleteAt=function(t){var e=Array.from(this.$items.keys())[t];return void 0!==e&&this.$deleteAt(e)},e.prototype.$deleteAt=function(t){return this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.concat=function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return new(e.bind.apply(e,r([void 0],(t=Array.from(this.$items.values())).concat.apply(t,n),!1)))},e.prototype.join=function(t){return Array.from(this.$items.values()).join(t)},e.prototype.reverse=function(){var t=this,e=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(n,o){t.setAt(e[o],n)})),this},e.prototype.shift=function(){var t=Array.from(this.$items.keys()).shift();if(void 0!==t){var e=this.$items.get(t);return this.$deleteAt(t),e}},e.prototype.slice=function(t,n){var o=new e;return o.push.apply(o,Array.from(this.$items.values()).slice(t,n)),o},e.prototype.sort=function(t){var e=this;void 0===t&&(t=d);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(t).forEach((function(t,o){e.setAt(n[o],t)})),this},e.prototype.splice=function(t,e){void 0===e&&(e=this.length-t);for(var n=Array.from(this.$items.keys()),o=[],r=t;r<t+e;r++)o.push(this.$items.get(n[r])),this.$deleteAt(n[r]);return o},e.prototype.unshift=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this.length,r=e.length,i=Array.from(this.$items.values());return e.forEach((function(e,n){t.setAt(n,e)})),i.forEach((function(e,n){t.setAt(r+n,e)})),o+r},e.prototype.indexOf=function(t,e){return Array.from(this.$items.values()).indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=this.length-1),Array.from(this.$items.values()).lastIndexOf(t,e)},e.prototype.every=function(t,e){return Array.from(this.$items.values()).every(t,e)},e.prototype.some=function(t,e){return Array.from(this.$items.values()).some(t,e)},e.prototype.forEach=function(t,e){Array.from(this.$items.values()).forEach(t,e)},e.prototype.map=function(t,e){return Array.from(this.$items.values()).map(t,e)},e.prototype.filter=function(t,e){return Array.from(this.$items.values()).filter(t,e)},e.prototype.reduce=function(t,e){return Array.prototype.reduce.apply(Array.from(this.$items.values()),arguments)},e.prototype.reduceRight=function(t,e){return Array.prototype.reduceRight.apply(Array.from(this.$items.values()),arguments)},e.prototype.find=function(t,e){return Array.from(this.$items.values()).find(t,e)},e.prototype.findIndex=function(t,e){return Array.from(this.$items.values()).findIndex(t,e)},e.prototype.fill=function(t,e,n){throw new Error("ArraySchema#fill() not implemented")},e.prototype.copyWithin=function(t,e,n){throw new Error("ArraySchema#copyWithin() not implemented")},e.prototype.toString=function(){return this.$items.toString()},e.prototype.toLocaleString=function(){return this.$items.toLocaleString()},e.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},e.prototype.includes=function(t,e){return Array.from(this.$items.values()).includes(t,e)},e.prototype.flatMap=function(t,e){throw new Error("ArraySchema#flatMap() is not supported.")},e.prototype.flat=function(t){throw new Error("ArraySchema#flat() is not supported.")},e.prototype.findLast=function(){var t=Array.from(this.$items.values());return t.findLast.apply(t,arguments)},e.prototype.findLastIndex=function(){var t=Array.from(this.$items.values());return t.findLastIndex.apply(t,arguments)},e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){return this.toArray().map((function(t){return"function"==typeof t.toJSON?t.toJSON():t}))},e.prototype.clone=function(t){return t?new(e.bind.apply(e,r([void 0],Array.from(this.$items.values()),!1))):new(e.bind.apply(e,r([void 0],this.map((function(t){return t.$changes?t.clone():t})),!1)))},e}();function v(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"!=typeof e&&void 0===t[e]?t.get(e):t[e]},set:function(t,e,n){return"symbol"!=typeof e&&-1===e.indexOf("$")&&"onAdd"!==e&&"onRemove"!==e&&"onChange"!==e?t.set(e,n):t[e]=n,!0},deleteProperty:function(t,e){return t.delete(e),!0}})}var y=function(){function e(t){var n=this;if(this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t)if(t instanceof Map||t instanceof e)t.forEach((function(t,e){return n.set(e,t)}));else for(var o in t)this.set(o,t[o])}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.map},e.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){if(null==n)throw new Error("MapSchema#set('".concat(e,"', ").concat(n,"): trying to set ").concat(n," value on '").concat(e,"'."));var o=void 0!==this.$changes.indexes[e],r=o?this.$changes.indexes[e]:this.$refId++,i=o?t.OPERATION.REPLACE:t.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,r),o?s&&this.$items.get(e)!==n&&(i=t.OPERATION.ADD):(this.$changes.indexes[e]=r,this.$indexes.set(r,e)),this.$items.set(e,n),this.$changes.change(e,i),this},e.prototype.get=function(t){return this.$items.get(t)},e.prototype.delete=function(t){return this.$changes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return this.$items.has(t)},e.prototype.forEach=function(t){this.$items.forEach(t)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toJSON=function(){var t={};return this.forEach((function(e,n){t[n]="function"==typeof e.toJSON?e.toJSON():e})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t,e){t.$changes?n.set(e,t.clone()):n.set(e,t)}))),n},e}(),g={};function m(t,e){g[t]=e}function w(t){return g[t]}var E=function(){function t(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return t.create=function(e){var n=new t;return n.schema=Object.assign({},e&&e.schema||{}),n.indexes=Object.assign({},e&&e.indexes||{}),n.fieldsByIndex=Object.assign({},e&&e.fieldsByIndex||{}),n.descriptors=Object.assign({},e&&e.descriptors||{}),n.deprecated=Object.assign({},e&&e.deprecated||{}),n},t.prototype.addField=function(t,e){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=t,this.indexes[t]=n,this.schema[t]=Array.isArray(e)?{array:e[0]}:e},t.prototype.hasField=function(t){return void 0!==this.indexes[t]},t.prototype.addFilter=function(t,e){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[t]]=e,this.indexesWithFilters.push(this.indexes[t]),!0},t.prototype.addChildrenFilter=function(t,e){var n=this.indexes[t],o=this.schema[t];if(w(Object.keys(o)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=e,!0;console.warn("@filterChildren: field '".concat(t,"' can't have children. Ignoring filter."))},t.prototype.getChildrenFilter=function(t){return this.childFilters&&this.childFilters[this.indexes[t]]},t.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},t}();function A(t){return t._context&&t._context.useFilters}var _=function(){function t(){this.types={},this.schemas=new Map,this.useFilters=!1}return t.prototype.has=function(t){return this.schemas.has(t)},t.prototype.get=function(t){return this.types[t]},t.prototype.add=function(t,e){void 0===e&&(e=this.schemas.size),t._definition=E.create(t._definition),t._typeid=e,this.types[e]=t,this.schemas.set(t,e)},t.create=function(e){return void 0===e&&(e={}),function(n){return e.context||(e.context=new t),$(n,e)}},t}(),O=new _;function $(t,e){return void 0===e&&(e={}),function(n,o){var i=e.context||O,s=n.constructor;if(s._context=i,!t)throw new Error("".concat(s.name,': @type() reference provided for "').concat(o,"\" is undefined. Make sure you don't have any circular dependencies."));i.has(s)||i.add(s);var a=s._definition;if(a.addField(o,t),a.descriptors[o]){if(a.deprecated[o])return;try{throw new Error("@colyseus/schema: Duplicate '".concat(o,"' definition on '").concat(s.name,"'.\nCheck @type() annotation"))}catch(t){var c=t.stack.split("\n")[4].trim();throw new Error("".concat(t.message," ").concat(c))}}var f=l.is(t),h=!f&&y.is(t);if("string"!=typeof t&&!Rt.is(t)){var u=Object.values(t)[0];"string"==typeof u||i.has(u)||i.add(u)}if(e.manual)a.descriptors[o]={enumerable:!0,configurable:!0,writable:!0};else{var d="_".concat(o);a.descriptors[d]={enumerable:!1,configurable:!1,writable:!0},a.descriptors[o]={get:function(){return this[d]},set:function(t){t!==this[d]&&(null!=t?(!f||t instanceof l||(t=new(l.bind.apply(l,r([void 0],t,!1)))),!h||t instanceof y||(t=new y(t)),void 0===t.$proxy&&(h?t=v(t):f&&(t=p(t))),this.$changes.change(o),t.$changes&&t.$changes.setParent(this,this.$changes.root,this._definition.indexes[o])):this[d]&&this.$changes.delete(o),this[d]=t)},enumerable:!0,configurable:!0}}}}function b(t){return function(e,n){var o=e.constructor;o._definition.addFilter(n,t)&&(o._context.useFilters=!0)}}function I(t){return function(e,n){var o=e.constructor;o._definition.addChildrenFilter(n,t)&&(o._context.useFilters=!0)}}function x(t){return void 0===t&&(t=!0),function(e,n){var o=e.constructor._definition;o.deprecated[n]=!0,t&&(o.descriptors[n]={get:function(){throw new Error("".concat(n," is deprecated."))},set:function(t){},enumerable:!1,configurable:!0})}}function T(t,e,n){for(var o in void 0===n&&(n={}),n.context||(n.context=t._context||n.context||O),e)$(e[o],n)(t.prototype,o);return t}function R(t){for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n}function C(t,e,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?t[e++]=o:o<2048?(t[e++]=192|o>>6,t[e++]=128|63&o):o<55296||o>=57344?(t[e++]=224|o>>12,t[e++]=128|o>>6&63,t[e++]=128|63&o):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),t[e++]=240|o>>18,t[e++]=128|o>>12&63,t[e++]=128|o>>6&63,t[e++]=128|63&o)}function P(t,e){t.push(255&e)}function k(t,e){t.push(255&e)}function D(t,e){t.push(255&e),t.push(e>>8&255)}function S(t,e){t.push(255&e),t.push(e>>8&255)}function N(t,e){t.push(255&e),t.push(e>>8&255),t.push(e>>16&255),t.push(e>>24&255)}function M(t,e){var n=e>>24,o=e>>16,r=e>>8,i=e;t.push(255&i),t.push(255&r),t.push(255&o),t.push(255&n)}function L(t,e){var n=Math.floor(e/Math.pow(2,32));M(t,e>>>0),M(t,n)}function j(t,e){var n=e/Math.pow(2,32)>>0;M(t,e>>>0),M(t,n)}function U(t,e){z(t,e)}function F(t,e){J(t,e)}var H=new Int32Array(2),B=new Float32Array(H.buffer),V=new Float64Array(H.buffer);function z(t,e){B[0]=e,N(t,H[0])}function J(t,e){V[0]=e,N(t,H[0]),N(t,H[1])}function W(t,e){return k(t,e?1:0)}function q(t,e){e||(e="");var n=R(e),o=0;if(n<32)t.push(160|n),o=1;else if(n<256)t.push(217),k(t,n),o=2;else if(n<65536)t.push(218),S(t,n),o=3;else{if(!(n<4294967296))throw new Error("String too long");t.push(219),M(t,n),o=5}return C(t,t.length,e),o+n}function K(t,e){return isNaN(e)?K(t,0):isFinite(e)?e!==(0|e)?(t.push(203),J(t,e),9):e>=0?e<128?(k(t,e),1):e<256?(t.push(204),k(t,e),2):e<65536?(t.push(205),S(t,e),3):e<4294967296?(t.push(206),M(t,e),5):(t.push(207),j(t,e),9):e>=-32?(t.push(224|e+32),1):e>=-128?(t.push(208),P(t,e),2):e>=-32768?(t.push(209),D(t,e),3):e>=-2147483648?(t.push(210),N(t,e),5):(t.push(211),L(t,e),9):K(t,e>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var X=Object.freeze({__proto__:null,utf8Write:C,int8:P,uint8:k,int16:D,uint16:S,int32:N,uint32:M,int64:L,uint64:j,float32:U,float64:F,writeFloat32:z,writeFloat64:J,boolean:W,string:q,number:K});function Y(t,e,n){for(var o="",r=0,i=e,s=e+n;i<s;i++){var a=t[i];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(r=(7&a)<<18|(63&t[++i])<<12|(63&t[++i])<<6|(63&t[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r):o+=String.fromCharCode((15&a)<<12|(63&t[++i])<<6|(63&t[++i])<<0):o+=String.fromCharCode((31&a)<<6|63&t[++i]):o+=String.fromCharCode(a)}return o}function G(t,e){return Q(t,e)<<24>>24}function Q(t,e){return t[e.offset++]}function Z(t,e){return tt(t,e)<<16>>16}function tt(t,e){return t[e.offset++]|t[e.offset++]<<8}function et(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24}function nt(t,e){return et(t,e)>>>0}function ot(t,e){return ht(t,e)}function rt(t,e){return ut(t,e)}function it(t,e){var n=nt(t,e);return et(t,e)*Math.pow(2,32)+n}function st(t,e){var n=nt(t,e);return nt(t,e)*Math.pow(2,32)+n}var at=new Int32Array(2),ct=new Float32Array(at.buffer),ft=new Float64Array(at.buffer);function ht(t,e){return at[0]=et(t,e),ct[0]}function ut(t,e){return at[0]=et(t,e),at[1]=et(t,e),ft[0]}function dt(t,e){return Q(t,e)>0}function pt(t,e){var n,o=t[e.offset++];o<192?n=31&o:217===o?n=Q(t,e):218===o?n=tt(t,e):219===o&&(n=nt(t,e));var r=Y(t,e.offset,n);return e.offset+=n,r}function lt(t,e){var n=t[e.offset];return n<192&&n>160||217===n||218===n||219===n}function vt(t,e){var n=t[e.offset++];return n<128?n:202===n?ht(t,e):203===n?ut(t,e):204===n?Q(t,e):205===n?tt(t,e):206===n?nt(t,e):207===n?st(t,e):208===n?G(t,e):209===n?Z(t,e):210===n?et(t,e):211===n?it(t,e):n>223?-1*(255-n+1):void 0}function yt(t,e){var n=t[e.offset];return n<128||n>=202&&n<=211}function gt(t,e){return t[e.offset]<160}function mt(t,e){return t[e.offset-1]===s&&(t[e.offset]<128||t[e.offset]>=202&&t[e.offset]<=211)}var wt=Object.freeze({__proto__:null,int8:G,uint8:Q,int16:Z,uint16:tt,int32:et,uint32:nt,float32:ot,float64:rt,int64:it,uint64:st,readFloat32:ht,readFloat64:ut,boolean:dt,string:pt,stringCheck:lt,number:vt,numberCheck:yt,arrayCheck:gt,switchStructureCheck:mt}),Et=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.collection},e.prototype.add=function(t){var e=this.$refId++;return void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,e),this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,t),this.$changes.change(e),e},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return Array.from(this.$items.values()).some((function(e){return e===t}))},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,o,r){return t(n,o,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),At=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.set},e.prototype.add=function(e){var n,o;if(this.has(e))return!1;var r=this.$refId++;void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,r);var i=null!==(o=null===(n=this.$changes.indexes[r])||void 0===n?void 0:n.op)&&void 0!==o?o:t.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,e),this.$changes.change(r,i),r},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){for(var e,n=this.$items.values(),o=!1;(e=n.next())&&!e.done;)if(t===e.value){o=!0;break}return o},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,o,r){return t(n,o,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),_t=function(){function t(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return t.prototype.addRefId=function(t){this.refIds.has(t)||(this.refIds.add(t),this.containerIndexes.set(t,new Set))},t.get=function(e){return void 0===e.$filterState&&(e.$filterState=new t),e.$filterState},t}(),Ot=function(){function t(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return t.prototype.getNextUniqueId=function(){return this.nextUniqueId++},t.prototype.addRef=function(t,e,n){void 0===n&&(n=!0),this.refs.set(t,e),n&&(this.refCounts[t]=(this.refCounts[t]||0)+1)},t.prototype.removeRef=function(t){this.refCounts[t]=this.refCounts[t]-1,this.deletedRefs.add(t)},t.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},t.prototype.garbageCollectDeletedRefs=function(){var t=this;this.deletedRefs.forEach((function(e){if(!(t.refCounts[e]>0)){var n=t.refs.get(e);if(n instanceof Rt)for(var o in n._definition.schema)"string"!=typeof n._definition.schema[o]&&n[o]&&n[o].$changes&&t.removeRef(n[o].$changes.refId);else{var r=n.$changes.parent._definition,i=r.schema[r.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(i)[0]&&Array.from(n.values()).forEach((function(e){return t.removeRef(e.$changes.refId)}))}t.refs.delete(e),delete t.refCounts[e]}})),this.deletedRefs.clear()},t}(),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Error);function bt(t,e,n,o){var r,i=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(t)&&console.log('trying to encode "NaN" in '.concat(n.constructor.name,"#").concat(o));break;case"string":r="string",i=!0;break;case"boolean":return}if(typeof t!==r&&(!i||i&&null!==t)){var s="'".concat(JSON.stringify(t),"'").concat(t&&t.constructor&&" (".concat(t.constructor.name,")")||"");throw new $t("a '".concat(r,"' was expected, but ").concat(s," was provided in ").concat(n.constructor.name,"#").concat(o))}}function It(t,e,n,o){if(!(t instanceof e))throw new $t("a '".concat(e.name,"' was expected, but '").concat(t.constructor.name,"' was provided in ").concat(n.constructor.name,"#").concat(o))}function xt(t,e,n,o,r){bt(n,t,o,r);var i=X[t];if(!i)throw new $t("a '".concat(t,"' was expected, but ").concat(n," was provided in ").concat(o.constructor.name,"#").concat(r));i(e,n)}function Tt(t,e,n){return wt[t](e,n)}var Rt=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object.defineProperties(this,{$changes:{value:new c(this,void 0,new Ot),enumerable:!1,writable:!0},$callbacks:{value:void 0,enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),t[0]&&this.assign(t[0])}return e.onError=function(t){console.error(t)},e.is=function(t){return t._definition&&void 0!==t._definition.schema},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.assign=function(t){return Object.assign(this,t),this},Object.defineProperty(e.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),e.prototype.setDirty=function(t,e){this.$changes.change(t,e)},e.prototype.listen=function(t,e,n){var o=this;return void 0===n&&(n=!0),this.$callbacks||(this.$callbacks={}),this.$callbacks[t]||(this.$callbacks[t]=[]),this.$callbacks[t].push(e),n&&void 0!==this[t]&&e(this[t],void 0),function(){return u(o.$callbacks[t],o.$callbacks[t].indexOf(e))}},e.prototype.decode=function(n,o,r){var i;void 0===o&&(o={offset:0}),void 0===r&&(r=this);var a=[],c=this.$changes.root,f=n.length,h=0;for(c.refs.set(h,this);o.offset<f;){var u=n[o.offset++];if(u!=s){var d=r.$changes,p=void 0!==r._definition,v=p?u>>6<<6:u;if(v!==t.OPERATION.CLEAR){var g=p?u%(v||255):vt(n,o),m=p?r._definition.fieldsByIndex[g]:"",E=d.getType(g),A=void 0,_=void 0,O=void 0;if(p?_=r["_".concat(m)]:(_=r.getByIndex(g),(v&t.OPERATION.ADD)===t.OPERATION.ADD?(O=r instanceof y?pt(n,o):g,r.setIndex(g,O)):O=r.getIndex(g)),(v&t.OPERATION.DELETE)===t.OPERATION.DELETE&&(v!==t.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(g),_&&_.$changes&&c.removeRef(_.$changes.refId),A=null),void 0!==m){if(v===t.OPERATION.DELETE);else if(e.is(E)){var $=vt(n,o);if(A=c.refs.get($),v!==t.OPERATION.REPLACE){var b=this.getSchemaType(n,o,E);A||((A=this.createTypeInstance(b)).$changes.refId=$,_&&(A.$callbacks=_.$callbacks,_.$changes.refId&&$!==_.$changes.refId&&c.removeRef(_.$changes.refId))),c.addRef($,A,A!==_)}}else if("string"==typeof E)A=Tt(E,n,o);else{var I=w(Object.keys(E)[0]),x=vt(n,o),T=c.refs.has(x)?_||c.refs.get(x):new I.constructor;if((A=T.clone(!0)).$changes.refId=x,_&&(A.$callbacks=_.$callbacks,_.$changes.refId&&x!==_.$changes.refId)){c.removeRef(_.$changes.refId);for(var R=_.entries(),C=void 0;(C=R.next())&&!C.done;){var P=(i=C.value)[0],k=i[1];a.push({refId:x,op:t.OPERATION.DELETE,field:P,value:void 0,previousValue:k})}}c.addRef(x,A,T!==_)}if(null!=A)if(A.$changes&&A.$changes.setParent(d.ref,d.root,g),r instanceof e)r[m]=A;else if(r instanceof y)P=O,r.$items.set(P,A),r.$changes.allChanges.add(g);else if(r instanceof l)r.setAt(g,A);else if(r instanceof Et){var D=r.add(A);r.setIndex(g,D)}else r instanceof At&&!1!==(D=r.add(A))&&r.setIndex(g,D);_!==A&&a.push({refId:h,op:v,field:m,dynamicIndex:O,value:A,previousValue:_})}else{console.warn("@colyseus/schema: definition mismatch");for(var S={offset:o.offset};o.offset<f&&(!mt(n,o)||(S.offset=o.offset+1,!c.refs.has(vt(n,S))));)o.offset++}}else r.clear(a)}else{h=vt(n,o);var N=c.refs.get(h);if(!N)throw new Error('"refId" not found: '.concat(h));r=N}}return this._triggerChanges(a),c.garbageCollectDeletedRefs(),a},e.prototype.encode=function(n,o,r){void 0===n&&(n=!1),void 0===o&&(o=[]),void 0===r&&(r=!1);for(var i=this.$changes,a=new WeakSet,c=[i],f=1,h=0;h<f;h++){var u=c[h],d=u.ref,p=d instanceof e;u.ensureRefId(),a.add(u),u!==i&&(u.changed||n)&&(k(o,s),K(o,u.refId));for(var l=n?Array.from(u.allChanges):Array.from(u.changes.values()),v=0,g=l.length;v<g;v++){var m=n?{op:t.OPERATION.ADD,index:l[v]}:l[v],E=m.index,A=p?d._definition.fieldsByIndex&&d._definition.fieldsByIndex[E]:E,_=o.length;if(m.op!==t.OPERATION.TOUCH)if(p)k(o,E|m.op);else{if(k(o,m.op),m.op===t.OPERATION.CLEAR)continue;K(o,E)}if(p||(m.op&t.OPERATION.ADD)!=t.OPERATION.ADD||d instanceof y&&q(o,u.ref.$indexes.get(E)),m.op!==t.OPERATION.DELETE){var O=u.getType(E),$=u.getValue(E);if($&&$.$changes&&!a.has($.$changes)&&(c.push($.$changes),$.$changes.ensureRefId(),f++),m.op!==t.OPERATION.TOUCH){if(e.is(O))It($,O,d,A),K(o,$.$changes.refId),(m.op&t.OPERATION.ADD)===t.OPERATION.ADD&&this.tryEncodeTypeId(o,O,$.constructor);else if("string"==typeof O)xt(O,o,$,d,A);else{var b=w(Object.keys(O)[0]);It(d["_".concat(A)],b.constructor,d,A),K(o,$.$changes.refId)}r&&u.cache(E,o.slice(_))}}}n||r||u.discard()}return o},e.prototype.encodeAll=function(t){return this.encode(!0,[],t)},e.prototype.applyFilters=function(n,o){var r,i;void 0===o&&(o=!1);for(var a=this,c=new Set,f=_t.get(n),h=[this.$changes],u=1,d=[],p=function(p){var l=h[p];if(c.has(l.refId))return"continue";var v=l.ref,g=v instanceof e;k(d,s),K(d,l.refId);var m=f.refIds.has(l),w=o||!m;f.addRefId(l);var E=f.containerIndexes.get(l),A=w?Array.from(l.allChanges):Array.from(l.changes.values());!o&&g&&v._definition.indexesWithFilters&&v._definition.indexesWithFilters.forEach((function(e){!E.has(e)&&l.allChanges.has(e)&&(w?A.push(e):A.push({op:t.OPERATION.ADD,index:e}))}));for(var _=0,O=A.length;_<O;_++){var $=w?{op:t.OPERATION.ADD,index:A[_]}:A[_];if($.op!==t.OPERATION.CLEAR){var b=$.index;if($.op!==t.OPERATION.DELETE){var I=l.getValue(b),x=l.getType(b);if(g){if((T=v._definition.filters&&v._definition.filters[b])&&!T.call(v,n,I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}else{var T,R=l.parent;if((T=l.getChildrenFilter())&&!T.call(R,n,v.$indexes.get(b),I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}if(I.$changes&&(h.push(I.$changes),u++),$.op!==t.OPERATION.TOUCH)if($.op===t.OPERATION.ADD||g)d.push.apply(d,null!==(r=l.caches[b])&&void 0!==r?r:[]),E.add(b);else if(E.has(b))d.push.apply(d,null!==(i=l.caches[b])&&void 0!==i?i:[]);else{if(E.add(b),k(d,t.OPERATION.ADD),K(d,b),v instanceof y){var C=l.ref.$indexes.get(b);q(d,C)}I.$changes?K(d,I.$changes.refId):X[x](d,I)}else I.$changes&&!g&&(k(d,t.OPERATION.ADD),K(d,b),v instanceof y&&(C=l.ref.$indexes.get(b),q(d,C)),K(d,I.$changes.refId))}else g?k(d,$.op|b):(k(d,$.op),K(d,b))}else k(d,$.op)}},l=0;l<u;l++)p(l);return d},e.prototype.clone=function(){var t,e=new this.constructor,n=this._definition.schema;for(var o in n)"object"==typeof this[o]&&"function"==typeof(null===(t=this[o])||void 0===t?void 0:t.clone)?e[o]=this[o].clone():e[o]=this[o];return e},e.prototype.toJSON=function(){var t=this._definition.schema,e=this._definition.deprecated,n={};for(var o in t)e[o]||null===this[o]||void 0===this[o]||(n[o]="function"==typeof this[o].toJSON?this[o].toJSON():this["_".concat(o)]);return n},e.prototype.discardAllChanges=function(){this.$changes.discardAll()},e.prototype.getByIndex=function(t){return this[this._definition.fieldsByIndex[t]]},e.prototype.deleteByIndex=function(t){this[this._definition.fieldsByIndex[t]]=void 0},e.prototype.tryEncodeTypeId=function(t,e,n){e._typeid!==n._typeid&&(k(t,a),K(t,n._typeid))},e.prototype.getSchemaType=function(t,e,n){var o;return t[e.offset]===a&&(e.offset++,o=this.constructor._context.get(vt(t,e))),o||n},e.prototype.createTypeInstance=function(t){var e=new t;return e.$changes.root=this.$changes.root,e},e.prototype._triggerChanges=function(n){for(var o,r,i,s,a,c,f,h,u,d=new Set,p=this.$changes.root.refs,l=function(l){var v=n[l],y=v.refId,g=p.get(y),m=g.$callbacks;if((v.op&t.OPERATION.DELETE)===t.OPERATION.DELETE&&v.previousValue instanceof e&&(null===(r=null===(o=v.previousValue.$callbacks)||void 0===o?void 0:o[t.OPERATION.DELETE])||void 0===r||r.forEach((function(t){return t()}))),!m)return"continue";if(g instanceof e){if(!d.has(y))try{null===(i=null==m?void 0:m[t.OPERATION.REPLACE])||void 0===i||i.forEach((function(t){return t(n)}))}catch(t){e.onError(t)}try{m.hasOwnProperty(v.field)&&(null===(s=m[v.field])||void 0===s||s.forEach((function(t){return t(v.value,v.previousValue)})))}catch(t){e.onError(t)}}else v.op===t.OPERATION.ADD&&void 0===v.previousValue?null===(a=m[t.OPERATION.ADD])||void 0===a||a.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})):v.op===t.OPERATION.DELETE?void 0!==v.previousValue&&(null===(c=m[t.OPERATION.DELETE])||void 0===c||c.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))):v.op===t.OPERATION.DELETE_AND_ADD&&(void 0!==v.previousValue&&(null===(f=m[t.OPERATION.DELETE])||void 0===f||f.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),null===(h=m[t.OPERATION.ADD])||void 0===h||h.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),v.value!==v.previousValue&&(null===(u=m[t.OPERATION.REPLACE])||void 0===u||u.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})));d.add(y)},v=0;v<n.length;v++)l(v)},e._definition=E.create(),e}();function Ct(t){for(var e=[t.$changes],n=1,o={},r=o,i=function(t){var n=e[t];n.changes.forEach((function(t){var e=n.ref,o=t.index,i=e._definition?e._definition.fieldsByIndex[o]:e.$indexes.get(o);r[i]=n.getValue(o)}))},s=0;s<n;s++)i(s);return o}var Pt={context:new _},kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([$("string",Pt)],e.prototype,"name",void 0),o([$("string",Pt)],e.prototype,"type",void 0),o([$("number",Pt)],e.prototype,"referencedType",void 0),e}(Rt),Dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new l,e}return n(e,t),o([$("number",Pt)],e.prototype,"id",void 0),o([$([kt],Pt)],e.prototype,"fields",void 0),e}(Rt),St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.types=new l,e}return n(e,t),e.encode=function(t){var n=t.constructor,o=new e;o.rootType=n._typeid;var r=function(t,e){for(var n in e){var r=new kt;r.name=n;var i=void 0;if("string"==typeof e[n])i=e[n];else{var s=e[n],a=void 0;Rt.is(s)?(i="ref",a=e[n]):"string"==typeof s[i=Object.keys(s)[0]]?i+=":"+s[i]:a=s[i],r.referencedType=a?a._typeid:-1}r.type=i,t.fields.push(r)}o.types.push(t)},i=n._context.types;for(var s in i){var a=new Dt;a.id=Number(s),r(a,i[s]._definition.schema)}return o.encodeAll()},e.decode=function(t,o){var r=new _,i=new e;i.decode(t,o);var s=i.types.reduce((function(t,e){var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Rt),i=e.id;return t[i]=o,r.add(o,i),t}),{});i.types.forEach((function(t){var e=s[t.id];t.fields.forEach((function(t){var n;if(void 0!==t.referencedType){var o=t.type,i=s[t.referencedType];if(!i){var a=t.type.split(":");o=a[0],i=a[1]}"ref"===o?$(i,{context:r})(e.prototype,t.name):$(((n={})[o]=i,n),{context:r})(e.prototype,t.name)}else $(t.type,{context:r})(e.prototype,t.name)}))}));var a=s[i.rootType],c=new a;for(var f in a._definition.schema){var h=a._definition.schema[f];"string"!=typeof h&&(c[f]="function"==typeof h?new h:new(w(Object.keys(h)[0]).constructor))}return c},o([$([Dt],Pt)],e.prototype,"types",void 0),o([$("number",Pt)],e.prototype,"rootType",void 0),e}(Rt);m("map",{constructor:y}),m("array",{constructor:l}),m("set",{constructor:At}),m("collection",{constructor:Et}),t.ArraySchema=l,t.CollectionSchema=Et,t.Context=_,t.MapSchema=y,t.Reflection=St,t.ReflectionField=kt,t.ReflectionType=Dt,t.Schema=Rt,t.SchemaDefinition=E,t.SetSchema=At,t.decode=wt,t.defineTypes=T,t.deprecated=x,t.dumpChanges=Ct,t.encode=X,t.filter=b,t.filterChildren=I,t.hasFilter=A,t.registerType=m,t.type=$,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),T=function(){function e(t,e){var n=this;this.onStateChange=I(),this.onError=I(),this.onLeave=I(),this.onJoin=I(),this.hasJoined=!1,this.onMessageHandlers={emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=this.events[t]||[],r=0,i=o.length;r<i;r++)o[r].apply(o,e)},events:{},on:function(t,e){var n,o=this;return(null===(n=this.events[t])||void 0===n?void 0:n.push(e))||(this.events[t]=[e]),function(){var n;o.events[t]=null===(n=o.events[t])||void 0===n?void 0:n.filter((function(t){return e!==t}))}}},this.roomId=null,this.name=t,e&&(this.serializer=new($("schema")),this.rootSchema=e,this.serializer.state=new e),this.onError((function(t,e){var n;return null===(n=console.warn)||void 0===n?void 0:n.call(console,"colyseus.js - onError => (".concat(t,") ").concat(e))})),this.onLeave((function(){return n.removeAllListeners()}))}return Object.defineProperty(e.prototype,"id",{get:function(){return this.roomId},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,n,o){void 0===o&&(o=this);var i=new w;o.connection=i,i.events.onmessage=e.prototype.onMessageCallback.bind(o),i.events.onclose=function(t){var e;if(!o.hasJoined)return null===(e=console.warn)||void 0===e||e.call(console,"Room connection was closed unexpectedly (".concat(t.code,"): ").concat(t.reason)),void o.onError.invoke(t.code,t.reason);t.code===r.DEVMODE_RESTART&&n?n():(o.onLeave.invoke(t.code),o.destroy())},i.events.onerror=function(t){var e;null===(e=console.warn)||void 0===e||e.call(console,"Room, onError (".concat(t.code,"): ").concat(t.reason)),o.onError.invoke(t.code,t.reason)},i.connect(t)},e.prototype.leave=function(e){var n=this;return void 0===e&&(e=!0),new Promise((function(o){n.onLeave((function(t){return o(t)})),n.connection?e?n.connection.send([t.Protocol.LEAVE_ROOM]):n.connection.close():n.onLeave.invoke(r.CONSENTED)}))},e.prototype.onMessage=function(t,e){return this.onMessageHandlers.on(this.getMessageHandlerKey(t),e)},e.prototype.send=function(e,n){var o,r=[t.Protocol.ROOM_DATA];if("string"==typeof e?x.encode.string(r,e):x.encode.number(r,e),void 0!==n){var i=l(n);(o=new Uint8Array(r.length+i.byteLength)).set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.length)}else o=new Uint8Array(r);this.connection.send(o.buffer)},e.prototype.sendBytes=function(e,n){var o,r=[t.Protocol.ROOM_DATA_BYTES];"string"==typeof e?x.encode.string(r,e):x.encode.number(r,e),(o=new Uint8Array(r.length+(n.byteLength||n.length))).set(new Uint8Array(r),0),o.set(new Uint8Array(n),r.length),this.connection.send(o.buffer)},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),e.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},e.prototype.onMessageCallback=function(e){var n=Array.from(new Uint8Array(e.data)),o=n[0];if(o===t.Protocol.JOIN_ROOM){var r=1,i=E(n,r);if(r+=A(i),this.serializerId=E(n,r),r+=A(this.serializerId),!this.serializer){var s=$(this.serializerId);this.serializer=new s}n.length>r&&this.serializer.handshake&&this.serializer.handshake(n,{offset:r}),this.reconnectionToken="".concat(this.roomId,":").concat(i),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([t.Protocol.JOIN_ROOM])}else if(o===t.Protocol.ERROR){var a={offset:1},c=x.decode.number(n,a),f=x.decode.string(n,a);this.onError.invoke(c,f)}else if(o===t.Protocol.LEAVE_ROOM)this.leave();else if(o===t.Protocol.ROOM_DATA_SCHEMA){var h={offset:1};(f=new(p=this.serializer.getState().constructor._context.get(x.decode.number(n,h)))).decode(n,h),this.dispatchMessage(p,f)}else if(o===t.Protocol.ROOM_STATE)n.shift(),this.setState(n);else if(o===t.Protocol.ROOM_STATE_PATCH)n.shift(),this.patch(n);else if(o===t.Protocol.ROOM_DATA){var d={offset:1},p=x.decode.stringCheck(n,d)?x.decode.string(n,d):x.decode.number(n,d);f=n.length>d.offset?function(t,e){void 0===e&&(e=0);var n=new u(t,e),o=n._parse();if(n._offset!==t.byteLength)throw new Error(t.byteLength-n._offset+" trailing bytes");return o}(e.data,d.offset):void 0;this.dispatchMessage(p,f)}else if(o===t.Protocol.ROOM_DATA_BYTES){var l={offset:1};p=x.decode.stringCheck(n,l)?x.decode.string(n,l):x.decode.number(n,l);this.dispatchMessage(p,new Uint8Array(n.slice(l.offset)))}},e.prototype.setState=function(t){this.serializer.setState(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.patch=function(t){this.serializer.patch(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.dispatchMessage=function(t,e){var n,o=this.getMessageHandlerKey(t);this.onMessageHandlers.events[o]?this.onMessageHandlers.emit(o,e):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",t,e):null===(n=console.warn)||void 0===n||n.call(console,"colyseus.js: onMessage() not registered for type '".concat(t,"'."))},e.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},e.prototype.getMessageHandlerKey=function(t){switch(typeof t){case"function":return"$".concat(t._typeid);case"string":return t;case"number":return"i".concat(t);default:throw new Error("invalid message type.")}},e}();function R(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function C(t,e,n){return new Promise((function(o,r){n=n||{};var i,s,a,c=new XMLHttpRequest,f=n.body,h=n.headers||{};for(i in n.timeout&&(c.timeout=n.timeout),c.ontimeout=c.onerror=function(t){t.timeout="timeout"==t.type,r(t)},c.open(t,e.href||e),c.onload=function(){for(a=c.getAllResponseHeaders().trim().split(/[\r\n]+/),R(c,c);s=a.shift();)s=s.split(": "),c.headers[s.shift().toLowerCase()]=s.join(": ");if((s=c.headers["content-type"])&&~s.indexOf("application/json"))try{c.data=JSON.parse(c.data,n.reviver)}catch(t){return R(c,t),r(t)}(c.status>=400?r:o)(c)},typeof FormData<"u"&&f instanceof FormData||f&&"object"==typeof f&&(h["content-type"]="application/json",f=JSON.stringify(f)),c.withCredentials=!!n.withCredentials,h)c.setRequestHeader(i,h[i]);c.send(f)}))}var P,k,D,S,N,M=C.bind(C,"GET"),L=C.bind(C,"POST"),j=C.bind(C,"PATCH"),U=C.bind(C,"DELETE"),F=C.bind(C,"PUT"),H={del:U,get:M,patch:j,post:L,put:F,send:C},B=e({__proto__:null,default:H,del:U,get:M,patch:j,post:L,put:F,send:C},[H]),V=function(){function t(t){this.client=t}return t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("get",t,e)},t.prototype.post=function(t,e){return void 0===e&&(e={}),this.request("post",t,e)},t.prototype.del=function(t,e){return void 0===e&&(e={}),this.request("del",t,e)},t.prototype.put=function(t,e){return void 0===e&&(e={}),this.request("put",t,e)},t.prototype.request=function(t,e,n){return void 0===n&&(n={}),B[t](this.client.getHttpEndpoint(e),this.getOptions(n)).catch((function(t){var e;throw new h(t.statusCode||-1,(null===(e=t.data)||void 0===e?void 0:e.error)||t.statusMessage||t.message||"offline")}))},t.prototype.getOptions=function(t){return this.authToken&&(t.headers||(t.headers={}),t.headers.Authorization="Bearer ".concat(this.authToken),t.withCredentials=!0),t},t}();function z(){return P||(P="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(t,e){this.cache[t]=e},getItem:function(t){this.cache[t]},removeItem:function(t){delete this.cache[t]}}),P}var J,W=function(){function t(t){var e,n,o,r=this;this.http=t,this.settings={path:"/auth",key:"colyseus-auth-token"},k.set(this,!1),D.set(this,void 0),S.set(this,void 0),N.set(this,{emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=this.events[t]||[],r=0,i=o.length;r<i;r++)o[r].apply(o,e)},events:{},on:function(t,e){var n,o=this;return(null===(n=this.events[t])||void 0===n?void 0:n.push(e))||(this.events[t]=[e]),function(){var n;o.events[t]=null===(n=o.events[t])||void 0===n?void 0:n.filter((function(t){return e!==t}))}}}),e=this.settings.key,n=function(t){return r.token=t},o=z().getItem(e),"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return n(t)})):n(o)}return Object.defineProperty(t.prototype,"token",{get:function(){return this.http.authToken},set:function(t){this.http.authToken=t},enumerable:!1,configurable:!0}),t.prototype.onChange=function(t){var e=this,n=c(this,N,"f").on("change",t);return c(this,k,"f")||f(this,D,new Promise((function(t,n){e.getUserData().then((function(t){e.emitChange(i(i({},t),{token:e.token}))})).catch((function(t){e.emitChange({user:null,token:void 0})})).finally((function(){t()}))})),"f"),f(this,k,!0,"f"),n},t.prototype.getUserData=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.token?[4,this.http.get("".concat(this.settings.path,"/userdata"))]:[3,2];case 1:return[2,t.sent().data];case 2:throw new Error("missing auth.token")}}))}))},t.prototype.registerWithEmailAndPassword=function(t,e,n){return s(this,void 0,void 0,(function(){var o;return a(this,(function(r){switch(r.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/register"),{body:{email:t,password:e,options:n}})];case 1:return o=r.sent().data,this.emitChange(o),[2,o]}}))}))},t.prototype.signInWithEmailAndPassword=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/login"),{body:{email:t,password:e}})];case 1:return n=o.sent().data,this.emitChange(n),[2,n]}}))}))},t.prototype.signInAnonymously=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/anonymous"),{body:{options:t}})];case 1:return e=n.sent().data,this.emitChange(e),[2,e]}}))}))},t.prototype.sendPasswordResetEmail=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/forgot-password"),{body:{email:t}})];case 1:return[2,e.sent().data]}}))}))},t.prototype.signInWithProvider=function(t,e){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){var n=this;return a(this,(function(o){return[2,new Promise((function(o,r){var i=e.width||480,s=e.height||768,a=n.token?"?token=".concat(n.token):"",h="Login with ".concat(t[0].toUpperCase()+t.substring(1)),u=n.http.client.getHttpEndpoint("".concat(e.prefix||"".concat(n.settings.path,"/provider"),"/").concat(t).concat(a)),d=screen.width/2-i/2,p=screen.height/2-s/2;f(n,S,window.open(u,h,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+i+", height="+s+", top="+p+", left="+d),"f");var l=function t(e){void 0===e.data.user&&void 0===e.data.token||(clearInterval(v),c(n,S,"f").close(),f(n,S,void 0,"f"),window.removeEventListener("message",t),void 0!==e.data.error?r(e.data.error):(o(e.data),n.emitChange(e.data)))},v=setInterval((function(){c(n,S,"f")&&!c(n,S,"f").closed||(f(n,S,void 0,"f"),r("cancelled"),window.removeEventListener("message",l))}),200);window.addEventListener("message",l)}))]}))}))},t.prototype.signOut=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.emitChange({user:null,token:null}),[2]}))}))},t.prototype.emitChange=function(t){var e;void 0!==t.token&&(this.token=t.token,null===t.token?(e=this.settings.key,z().removeItem(e)):function(t,e){z().setItem(t,e)}(this.settings.key,t.token)),c(this,N,"f").emit("change",t)},t}();k=new WeakMap,D=new WeakMap,S=new WeakMap,N=new WeakMap;var q=function(t){function e(n,o){var r=t.call(this,n)||this;return r.code=o,Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(Error),K="undefined"!=typeof window&&void 0!==(null===(J=null===window||void 0===window?void 0:window.location)||void 0===J?void 0:J.hostname)?"".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.hostname).concat(window.location.port&&":".concat(window.location.port)):"ws://127.0.0.1:2567",X=function(){function t(t){if(void 0===t&&(t=K),"string"==typeof t){var e=new URL(t),n="https:"===e.protocol||"wss:"===e.protocol,o=Number(e.port||(n?443:80));this.settings={hostname:e.hostname,pathname:e.pathname,port:o,secure:n}}else void 0===t.port&&(t.port=t.secure?443:80),void 0===t.pathname&&(t.pathname=""),this.settings=t;this.settings.pathname.endsWith("/")&&(this.settings.pathname=this.settings.pathname.slice(0,-1)),this.http=new V(this),this.auth=new W(this.http)}return t.prototype.joinOrCreate=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.create=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("create",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.join=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("join",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.joinById=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.reconnect=function(t,e){return s(this,void 0,void 0,(function(){var n,o,r;return a(this,(function(i){switch(i.label){case 0:if("string"==typeof t&&"string"==typeof e)throw new Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");if(n=t.split(":"),o=n[0],r=n[1],!o||!r)throw new Error("Invalid reconnection token format.\nThe format should be roomId:reconnectionToken");return[4,this.createMatchMakeRequest("reconnect",o,{reconnectionToken:r},e)];case 1:return[2,i.sent()]}}))}))},t.prototype.getAvailableRooms=function(t){return void 0===t&&(t=""),s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.http.get("matchmake/".concat(t),{headers:{Accept:"application/json"}})];case 1:return[2,e.sent().data]}}))}))},t.prototype.consumeSeatReservation=function(t,e,n){return s(this,void 0,void 0,(function(){var o,r,i,c=this;return a(this,(function(f){return(o=this.createRoom(t.room.name,e)).roomId=t.room.roomId,o.sessionId=t.sessionId,r={sessionId:o.sessionId},t.reconnectionToken&&(r.reconnectionToken=t.reconnectionToken),i=n||o,o.connect(this.buildEndpoint(t.room,r),t.devMode&&function(){return s(c,void 0,void 0,(function(){var n,r,c=this;return a(this,(function(f){return console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," Re-establishing connection with room id '").concat(o.roomId,"'...")),n=0,8,r=function(){return s(c,void 0,void 0,(function(){return a(this,(function(s){switch(s.label){case 0:n++,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.consumeSeatReservation(t,e,i)];case 2:return s.sent(),console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(9989)," Successfully re-established connection with room '").concat(o.roomId,"'")),[3,4];case 3:return s.sent(),n<8?(console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," retrying... (").concat(n," out of ").concat(8,")")),setTimeout(r,2e3)):console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(10060)," Failed to reconnect. Is your server running? Please check server logs.")),[3,4];case 4:return[2]}}))}))},setTimeout(r,2e3),[2]}))}))},i),[2,new Promise((function(t,e){var n=function(t,n){return e(new h(t,n))};i.onError.once(n),i.onJoin.once((function(){i.onError.remove(n),t(i)}))}))]}))}))},t.prototype.createMatchMakeRequest=function(t,e,n,o,r){return void 0===n&&(n={}),s(this,void 0,void 0,(function(){var i;return a(this,(function(s){switch(s.label){case 0:return[4,this.http.post("matchmake/".concat(t,"/").concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((i=s.sent().data).error)throw new q(i.error,i.code);return"reconnect"===t&&(i.reconnectionToken=n.reconnectionToken),[4,this.consumeSeatReservation(i,o,r)];case 2:return[2,s.sent()]}}))}))},t.prototype.createRoom=function(t,e){return new T(t,e)},t.prototype.buildEndpoint=function(t,e){void 0===e&&(e={});var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push("".concat(o,"=").concat(e[o]));var r=this.settings.secure?"wss://":"ws://";return t.publicAddress?r+="".concat(t.publicAddress):r+="".concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname),"".concat(r,"/").concat(t.processId,"/").concat(t.roomId,"?").concat(n.join("&"))},t.prototype.getHttpEndpoint=function(t){void 0===t&&(t="");var e=t.startsWith("/")?t:"/".concat(t);return"".concat(this.settings.secure?"https":"http","://").concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname).concat(e)},t.prototype.getEndpointPort=function(){return 80!==this.settings.port&&443!==this.settings.port?":".concat(this.settings.port):""},t}(),Y=function(){function t(){}return t.prototype.setState=function(t){return this.state.decode(t)},t.prototype.getState=function(){return this.state},t.prototype.patch=function(t){return this.state.decode(t)},t.prototype.teardown=function(){var t,e;null===(e=null===(t=this.state)||void 0===t?void 0:t.$changes)||void 0===e||e.root.clearRefs()},t.prototype.handshake=function(t,e){this.state?(new x.Reflection).decode(t,e):this.state=x.Reflection.decode(t,e)},t}(),G=function(){function t(){}return t.prototype.setState=function(t){},t.prototype.getState=function(){return null},t.prototype.patch=function(t){},t.prototype.teardown=function(){},t.prototype.handshake=function(t){},t}();O("schema",Y),O("none",G),t.Auth=W,t.Client=X,t.Room=T,t.SchemaSerializer=Y,t.registerSerializer=O,Object.defineProperty(t,"__esModule",{value:!0})})),t("default",o.exports),o.exports.Protocol,o.exports.ErrorCode,o.exports.OPERATION,o.exports.ArraySchema,o.exports.CollectionSchema,o.exports.Context,o.exports.MapSchema,o.exports.Reflection,o.exports.ReflectionField,o.exports.ReflectionType,o.exports.Schema,o.exports.SchemaDefinition,o.exports.SetSchema,o.exports.decode,o.exports.defineTypes,o.exports.deprecated,o.exports.dumpChanges,o.exports.encode,o.exports.filter,o.exports.filterChildren,o.exports.hasFilter,o.exports.registerType,o.exports.type,o.exports.__esModule,o.exports.Auth,o.exports.Client,o.exports.Room,o.exports.SchemaSerializer,o.exports.registerSerializer}),{})}}}));

System.register("chunks:///_virtual/colyseus.mjs_cjs=&original=.js",["./colyseus.js","./cjs-loader.mjs"],(function(e,s){var t,r;return{setters:[function(s){t=s.__cjsMetaURL;var r={};r.__cjsMetaURL=s.__cjsMetaURL,r.default=s.default,e(r)},function(e){r=e.default}],execute:function(){t||r.throwInvalidWrapper("./colyseus.js",s.meta.url),r.require(t)}}}));

System.register("chunks:///_virtual/ComponentExpand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts","./EventTarget.ts","./TweenUtils.ts"],(function(t){var n,e,o,i,r,s,u,c,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.UIOpacity,r=t.find,s=t.Component},function(t){u=t.getNodeTreeToMap},function(t){c=t.EventTarget},function(t){a=t.TweenUtils}],execute:function(){var p;e._RF.push({},"b157dOM2qtCopq6x6ap7s7t","ComponentExpand",void 0);var f=o.ccclass;o.property,t("ComponentExpand",f("ComponentExpand")(p=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._eventList=[],n}n(e,t);var o=e.prototype;return o.fadeIn=function(t){return void 0===t&&(t=.5),a.createPromise(this.getComponent(i)||this.addComponent(i)).set({opacity:0}).to(t,{opacity:255}).start()},o.delay=function(t){var n=this;return new Promise((function(e){n.scheduleOnce(e,t)}))},o.getUI=function(t){return this._ui||this.refreshUI(),this._ui[t]||null},o.getUIComponent=function(t,n){return this._ui||this.refreshUI(),this._ui[t]?this._ui[t].getComponent(n):null},o.refreshUI=function(){this._ui=u(this.node)},o.find=function(t){return r(t,this.node)},o.on=function(){var t,n=(t=c.eventManager).on.apply(t,arguments);return this._eventList.push(n),n},o.once=function(){var t,n=(t=c.eventManager).once.apply(t,arguments);return this._eventList.push(n),n},o.off=function(){var t,n=this,e=(t=c.eventManager).off.apply(t,arguments);return e.forEach((function(t){n._eventList.splice(n._eventList.indexOf(t),1)})),e},o.onDestroy=function(){this._eventList.forEach((function(t){return t.off()}))},e}(s))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/computed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./effect.ts","./ref.ts","./shared.ts","./reactive.ts"],(function(e){var t,i,c,n,r,o,s,u;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){c=e.ReactiveEffect},function(e){n=e.triggerRefValue,r=e.trackRefValue},function(e){o=e.isFunction},function(e){s=e.ReactiveFlags,u=e.toRaw}],execute:function(){var a;e("computed",(function(e,t,i){void 0===i&&(i=!1);var c,n,r=o(e);r?(c=e,n=function(){console.warn("Write operation failed: computed value is readonly")}):(c=e.get,n=e.set);var s=new f(c,n,r||!n,i);t&&!i&&(s.effect.onTrack=t.onTrack,s.effect.onTrigger=t.onTrigger);return s})),i._RF.push({},"448acYwvEJOmLOnGGMb+LzU","computed",void 0),a=s.IS_READONLY;var f=e("ComputedRefImpl",function(){function e(e,t,i,r){var o=this;this.dep=void 0,this.__v_isRef=!0,this[a]=!1,this._dirty=!0,this._setter=t,this.effect=new c(e,(function(){o._dirty||(o._dirty=!0,n(o))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this[s.IS_READONLY]=i}return t(e,[{key:"value",get:function(){var e=u(this);return r(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value},set:function(e){this._setter(e)}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/Constant.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){var c;s._RF.push({},"b642dM6uY9Ac586mQmYOy72","Constant",void 0);var e=t("Constant",(function(){this.isDevelop=!0,this.CPM_URL=this.isDevelop?"http://localhost:3001/v1":"https://zk-cpm.sotatek.works/v1",this.SOCKET_URL=this.isDevelop?"ws://localhost:3001":"ws://zk-cpm.sotatek.works",this.GAME_SERVER_URL="https://cpm.ontropy.io:3638",this.ADDRESS_CONTRACT="0x460B737698afA26Aea04A4c2f0c5706056695c0d",this.TOKEN_ADDRESS="0xF9cB0077f0B85BEe457E9b7EBF12B75e66A107bc",this.ROLLUP_ID=10}));c=e,e.instance=new c,s._RF.pop()}}}));

System.register("chunks:///_virtual/ContractManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./web3.min.mjs_cjs=&original=.js","./ABIContract.ts","./TokenAbi.ts","./Constant.ts","./web3.min.js"],(function(e){var t,r,n,s,a,c,o;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy},null,function(e){s=e.default},function(e){a=e.default},function(e){c=e.Constant},function(e){o=e.default}],execute:function(){var i;n._RF.push({},"72553UOkyNPl5c7jwV5gRs2","ContractManager",void 0);var u=e("ContractManager",function(){function e(){this.addressContract=c.instance.ADDRESS_CONTRACT,this.tokenAddress=c.instance.TOKEN_ADDRESS}var n=e.prototype;return n._connect=function(){var e=t(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.ethereum){e.next=5;break}return console.log("no ethereum"),this.address="no ethereum",this.addressContract="no ethereum",e.abrupt("return");case 5:return e.prev=5,e.next=8,window.ethereum.request({method:"eth_requestAccounts"});case 8:return t=e.sent,this.web3=new o(window.ethereum),n="0x61",e.next=13,this.web3.eth.getChainId();case 13:if(e.sent===parseInt(n,16)){e.next=31;break}return e.prev=15,e.next=18,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]});case 18:e.next=31;break;case 20:if(e.prev=20,e.t0=e.catch(15),4902!==e.t0.code){e.next=31;break}return e.prev=23,e.next=26,window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:n,chainName:"Binance Smart Chain Testnet",rpcUrls:["https://endpoints.omniatech.io/v1/bsc/testnet/public"],nativeCurrency:{name:"Binance Coin Testnet",symbol:"tBNB",decimals:18},blockExplorerUrls:["https://testnet.bscscan.com"]}]});case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(23),console.error(e.t1);case 31:return this.address=t[0],this.addressLower=t[0],this.address=this.web3.utils.toChecksumAddress(this.address),e.abrupt("return",this.abbreviateString(this.address,7,5));case 37:return e.prev=37,e.t2=e.catch(5),console.log(e.t2),this.address="no ethereum",e.abrupt("return",null);case 42:case"end":return e.stop()}}),e,this,[[5,37],[15,20],[23,28]])})));return function(){return e.apply(this,arguments)}}(),n.getSignMessage=function(){var e=t(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getChainId();case 2:return t=e.sent,n="zkHoldem wants you to sign in with your Ethereum account:\n"+this.address+"\n\nPlease ensure that the domain above matches the URL of the current website.\n)}\nVersion: 1\nChain ID: "+t+"\nNonce: 'siweMsg.Nonce'\nIssued At: "+Date(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.signMessage=function(){var e=t(r().mark((function e(t){var n,s,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.web3.eth.getAccounts();case 3:return n=e.sent,s=n[0],e.next=7,this.web3.eth.personal.sign(t,s,"");case 7:return a=e.sent,console.log("Signature:",a),e.abrupt("return",a);case 12:return e.prev=12,e.t0=e.catch(0),console.error("Error signing message:",e.t0),e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),n.getAccount=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.web3.eth.getAccounts();case 3:(t=e.sent)&&t.length>0?console.log("user is connected ",t):console.log("user not connected"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.getBalance=function(){var e=t(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.balance();case 3:return t=e.sent,n=this.web3.utils.fromWei(t,"ether"),console.log(n),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n.balance=function(){var e=t(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new this.web3.eth.Contract(a,this.tokenAddress),e.next=4,t.methods.balanceOf(this.address).call({from:this.address});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),n.disconnect=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum||!this.web3){e.next=14;break}return e.prev=1,window.ethereum.removeAllListeners(),this.web3=null,console.log("Disconnected from MetaMask"),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(1),console.error("Error disconnecting from MetaMask",e.t0),e.abrupt("return",!1);case 12:e.next=16;break;case 14:return console.log("MetaMask is not connected"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),n.abbreviateString=function(e,t,r){return e.length<=t+r?e:e.substring(0,t)+"..."+e.substring(e.length-r)},n.toWei=function(e,t){return void 0===t&&(t=18),BigInt(e.toString())*BigInt(Math.pow(10,t))},n.checkApprove=function(){var e=t(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new this.web3.eth.Contract(a,this.tokenAddress),e.next=4,t.methods.allowance(this.address,this.addressContract).call();case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Error calling contract function allowance:",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),n.approve=function(){var e=t(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new this.web3.eth.Contract(a,this.tokenAddress),e.next=4,this.balance();case 4:return e.sent,e.next=7,t.methods.approve(this.addressContract,this.toWei(1e3)).send({from:this.addressLower});case 7:return n=e.sent,e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),console.error("Error calling contract function approve:",e.t0),e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),n.createSession=function(){var e=t(r().mark((function e(t,n){var a,c,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new this.web3.eth.Contract(s,this.addressContract),c=this.toWei(t),e.next=5,a.methods.createSession(this.tokenAddress,c,n).send({from:this.addressLower});case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(0),console.error("Error calling contract function createSession:",e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),n.finishSession=function(){var e=t(r().mark((function e(t,n,a,c){var o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=new this.web3.eth.Contract(s,this.addressContract),e.next=4,o.methods.finishSession(t,n,a,c).send({from:this.addressLower});case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Error calling contract function createSession:",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r,n,s){return e.apply(this,arguments)}}(),n.joinSession=function(){var e=t(r().mark((function e(t,n,a,c){var o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=new this.web3.eth.Contract(s,this.addressContract),e.next=4,o.methods.joinSession(t,n,a,c).send({from:this.addressLower});case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Error calling contract function createSession:",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r,n,s){return e.apply(this,arguments)}}(),n.leaveSession=function(){var e=t(r().mark((function e(t,n,a,c){var o,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=new this.web3.eth.Contract(s,this.addressContract),e.next=4,o.methods.leaveSession(t,n,a,c).send({from:this.addressLower});case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(0),console.error("Error calling contract function createSession:",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,r,n,s){return e.apply(this,arguments)}}(),e}());i=u,u.instance=new i,n._RF.pop()}}}));

System.register("chunks:///_virtual/CPMManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ContractManager.ts","./Constant.ts"],(function(e){var t,n,r,s,o,a;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,s=e._decorator},function(e){o=e.ContractManager},function(e){a=e.Constant}],execute:function(){var i,c;r._RF.push({},"e8b4aP6ai1NkqzqpX2H7+/S","CPMManager",void 0);var u=s.ccclass;s.property,e("CPMManager",u("CPMManager")(((c=function(){function e(){this.API_URL=a.instance.CPM_URL}var r=e.prototype;return r.setGameManager=function(e){this.gameplayManager=e},r.login=function(){var e=t(n().mark((function e(){var t,r,s,a,i,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,o.instance.getSignMessage();case 3:return r=e.sent,e.next=6,o.instance.signMessage(r);case 6:if(null!=(s=e.sent)){e.next=9;break}return e.abrupt("return",!1);case 9:return(a=new Headers).set("Content-Type","application/json"),a.set("Accept","application/json"),a.set("X-Custom-Header","CustomValue"),i={wallet:o.instance.address,message:r,signature:s},c=new Request(this.API_URL+"/auth/login",{method:"POST",headers:a,body:JSON.stringify(i)}),e.next=17,fetch(c).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return console.log("promise",e),e.json()})).then((function(e){console.log("then data",e.accessToken),localStorage.setItem("accessToken",e.accessToken),t=!0})).catch((function(e){console.log("error ",e)}));case 17:return e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.setHerder=function(){var e=new Headers;e.set("Content-Type","application/json"),e.set("Accept","application/json"),e.set("X-Custom-Header","CustomValue");var t=localStorage.getItem("accessToken");return t&&e.set("Authorization","Bearer "+t),e},r.getPlayerByAddress=function(){var e=t(n().mark((function e(r){var s,o=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new Request(this.API_URL+"/player/getPlayerByAddress/"+a.instance.ROLLUP_ID+"/"+a.instance.TOKEN_ADDRESS,{method:"GET",headers:this.setHerder()}),fetch(s).then(t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=9;break}if("Unauthorized"!=t.statusText){e.next=8;break}return e.next=4,o.login();case 4:if(0!=e.sent){e.next=7;break}return e.abrupt("return");case 7:o.getPlayerByAddress(r);case 8:throw new Error("Network response was not ok");case 9:return console.log("promise",t),e.abrupt("return",t.json());case 11:case"end":return e.stop()}}),e)})))).then((function(e){console.log("then value",e),r.getPlayerResult(e)})).catch((function(e){console.log("error ",e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getSession=function(){var e=t(n().mark((function e(r){var s,o=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new Request(this.API_URL+"/session/getSessions?status=Created",{method:"GET",headers:this.setHerder()}),fetch(s).then(t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=11;break}if(console.error("promise err",t),"Unauthorized"!=t.statusText&&"Forbidden"!=t.statusText){e.next=9;break}return e.next=5,o.login();case 5:if(0!=e.sent){e.next=8;break}return e.abrupt("return");case 8:o.getSession(r);case 9:e.next=13;break;case 11:return console.log("promise",t),e.abrupt("return",t.json());case 13:case"end":return e.stop()}}),e)})))).then((function(e){console.log("res",e),e.sessions.length>0?r.getSessionResult(e.sessions[0]):r.getSessionResult(null)})).catch((function(e){console.log("error ",e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.getParticipantion=function(){var e=t(n().mark((function e(r,s,o){var a,i=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Request(this.API_URL+"/participant/getParticipant/"+s,{method:"GET",headers:this.setHerder()}),fetch(a).then(t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=11;break}if(console.error("promise err",t),"Unauthorized"!=t.statusText&&"Forbidden"!=t.statusText){e.next=9;break}return e.next=5,i.login();case 5:if(0!=e.sent){e.next=8;break}return e.abrupt("return");case 8:i.getParticipantion(r,s,o);case 9:e.next=13;break;case 11:return console.log("promise",t),e.abrupt("return",t.json());case 13:case"end":return e.stop()}}),e)})))).then((function(e){})).catch((function(e){console.log("error ",e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.joinSession=function(){var e=t(n().mark((function e(r,s,i){var c,u,p=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={rollupId:a.instance.ROLLUP_ID,sessionId:s,buyIn:o.instance.toWei(i)},u=new Request(this.API_URL+"/session/joinSession",{method:"POST",headers:this.setHerder(),body:JSON.stringify(c)}),fetch(u).then(t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=11;break}if(console.error("promise err",t),"Unauthorized"!=t.statusText&&"Forbidden"!=t.statusText){e.next=9;break}return e.next=5,p.login();case 5:if(0!=e.sent){e.next=8;break}return e.abrupt("return");case 8:p.joinSession(r,s,i);case 9:e.next=13;break;case 11:return console.log("promise",t),e.abrupt("return",t.json());case 13:case"end":return e.stop()}}),e)})))).then((function(e){r.joinSessionCPM(e)})).catch((function(e){console.log("error ",e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.leaveSession=function(){var e=t(n().mark((function e(r,s,o){var a,i=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Request(this.API_URL+"/participant/getParticipant/"+s,{method:"POST",headers:this.setHerder()}),fetch(a).then(t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=11;break}if(console.error("promise err",t),"Unauthorized"!=t.statusText&&"Forbidden"!=t.statusText){e.next=9;break}return e.next=5,i.login();case 5:if(0!=e.sent){e.next=8;break}return e.abrupt("return");case 8:i.leaveSession(r,s,o);case 9:e.next=13;break;case 11:return console.log("promise",t),e.abrupt("return",t.json());case 13:case"end":return e.stop()}}),e)})))).then((function(e){r.joinSessionCPM(e)})).catch((function(e){console.log("error ",e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.finishSession=function(){var e=t(n().mark((function e(r,s){var o,i,c=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={rollupId:a.instance.ROLLUP_ID,sessionId:s},i=new Request(this.API_URL+"/session/finishSession",{method:"POST",headers:this.setHerder(),body:JSON.stringify(o)}),fetch(i).then(t(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=11;break}if(console.error("promise err",t),"Unauthorized"!=t.statusText&&"Forbidden"!=t.statusText){e.next=9;break}return e.next=5,c.login();case 5:if(0!=e.sent){e.next=8;break}return e.abrupt("return");case 8:c.finishSession(r,s);case 9:e.next=13;break;case 11:return console.log("promise",t),e.abrupt("return",t.json());case 13:case"end":return e.stop()}}),e)})))).then((function(e){r.joinSessionCPM(e)})).catch((function(e){console.log("error ",e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e}()).instance=new c,i=c))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/Cursor.ts",["cc"],(function(r){var n,t;return{setters:[function(r){n=r.cclegacy,t=r.game}],execute:function(){r({hideCursorPointer:function(){e--,o()},showCursorPointer:function(){e++,o()}}),n._RF.push({},"4e5f6czTlRIQYvGb5j1HvGd","Cursor",void 0);var e=0;function o(){t.canvas.style.cursor=e>0?"pointer":""}n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomSpacingLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts"],(function(t){var e,r,n,i,o,a,s,c,u,p,l,h,f,y,g,b,m,d,_,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,o=t.createClass,a=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator,p=t.CCString,l=t.CCBoolean,h=t.CCFloat,f=t.Node,y=t.UIOpacity,g=t.UITransform,b=t.Layout,m=t.Label,d=t.instantiate,_=t.tween},function(t){v=t.ComponentExpand}],execute:function(){var w,C,x,k,O,F,L,I,N,z,D,S,P,E,j,R,T,M,X,A,B,U;c._RF.push({},"b13b98S3wpIvZgvVg0YCN5w","CustomSpacingLabel",void 0);var q=u.ccclass,G=u.property,H=(u.requireComponent,u.executeInEditMode);t("CustomSpacingLabel",(w=q("CustomSpacingLabel"),C=G(p),x=G(p),k=G(l),O=G({displayName:""}),F=G(l),L=G({tooltip:"",displayName:" ",visible:function(){return this._typewriter}}),I=G(h),N=G({displayName:"",visible:function(){return this._typewriter}}),z=G(l),D=G({displayName:"()",type:f}),S=G({type:f,displayName:"Item()"}),P=G({displayName:""}),w(E=H((R=e((j=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"_text",R,i(e)),n(e,"_typewriter",T,i(e)),n(e,"_instantaneousFill",M,i(e)),n(e,"_interval",X,i(e)),n(e,"cursor",A,i(e)),n(e,"item",B,i(e)),n(e,"fadeInOnLoad",U,i(e)),e._labels=[],e._tag=0,e}r(e,t);var c=e.prototype;return c.onLoad=function(){var t=this;this.cursor&&((this.cursor.getComponent(y)||this.cursor.addComponent(y)).opacity=0),0===this._labels.length&&(this.node.children.forEach((function(e,r){t._labels.push(e)})),this.refresh()),this.fadeInOnLoad&&this.fadeIn()},c.setText=function(t,e){return this._text=t,this._inputCallback=e,this.refresh()},c.calcSpacingX=function(){var t=this.getComponent(g).width,e=this.item.getComponent(g).width,r=this.getComponent(b).constraintNum;this.getComponent(b).spacingX=(t-e*r)/(r+1)},c.refresh=function(){var t=a(s().mark((function t(){var e,r,n,i,o,c,u,p,l,h,f,g,v,w,C=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this._tag=Date.now()+Math.random(),r=this._tag,this.calcSpacingX(),n=this._text.replace(/\t/g,"  ").split(""),i=this._labels,o=this.item,c=this.getComponent(b).constraintNum,u=this._instantaneousFill,i.forEach((function(t,e){t.active=!1})),this.cursor&&(this.cursor.active=!0),l=function(){var t=a(s().mark((function t(e){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(r=p)||r.stop(),C.cursor&&(C.cursor.active=!0,p=_(C.cursor.getComponent(y)).set({opacity:255}).delay(.2).set({opacity:0}).delay(.2).union().repeatForever().start()),t.next=4,C.delay(e);case 4:null==(n=p)||n.stop(),p=null;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~@#&*|{}']"),f=function(){var t=d(o);return t.getComponent(m).string="",i.push(t),t.active=!0,C.node.addChild(t),t},g=0;g<n.length;g++)!i[g]&&u&&f(),"\n"===n[g]&&n.splice.apply(n,[g,1].concat(new Array(c-g%c).fill(" "))),g%c!=0&&g%c==c-1&&n[g+1]&&h.test(n[g+1])&&n.splice(g,0," ");v=0;case 15:if(!(v<n.length)){t.next=37;break}if(r===this._tag){t.next=18;break}return t.abrupt("return");case 18:if(i[v]||f(),w=n[v],!this._typewriter){t.next=28;break}if(this.cursor&&(this.cursor.removeFromParent(),""!==w.trim()&&v%c!=0?(this.cursor.getComponent(m).string="_",this.node.insertChild(this.cursor,v+1)):(this.cursor.getComponent(m).string="",this.node.insertChild(this.cursor,n.length))),"\n"!==w){t.next=25;break}return t.next=25,l(.5);case 25:if("."!==w){t.next=28;break}return t.next=28,l(.5);case 28:if(i[v].active=!0,i[v].getComponent(m).string=n[v],this._inputCallback&&this._inputCallback(n[v]),!this._typewriter){t.next=34;break}return t.next=34,l(this.interval);case 34:v++,t.next=15;break;case 37:null==(e=p)||e.stop(),this.cursor&&this.scheduleOnce((function(){C.cursor.active=!1}),1),this._inputCallback=null;case 40:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o(e,[{key:"text",get:function(){return this._text},set:function(t){this._text=t,this.refresh()}},{key:"typewriter",get:function(){return this._typewriter},set:function(t){this._typewriter=t,this.refresh()}},{key:"instantaneousFill",get:function(){return this._instantaneousFill},set:function(t){this._instantaneousFill=t,this.refresh()}},{key:"interval",get:function(){return this._interval},set:function(t){this._interval=t,this.refresh()}},{key:"clean",get:function(){return!1},set:function(t){this._labels.forEach((function(t,e,r){e!==r.length-1&&t.destroy()})),this._labels=[],this.refresh()}}]),e}(v)).prototype,"_text",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(j.prototype,"text",[x],Object.getOwnPropertyDescriptor(j.prototype,"text"),j.prototype),T=e(j.prototype,"_typewriter",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(j.prototype,"typewriter",[O],Object.getOwnPropertyDescriptor(j.prototype,"typewriter"),j.prototype),M=e(j.prototype,"_instantaneousFill",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(j.prototype,"instantaneousFill",[L],Object.getOwnPropertyDescriptor(j.prototype,"instantaneousFill"),j.prototype),X=e(j.prototype,"_interval",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),e(j.prototype,"interval",[N],Object.getOwnPropertyDescriptor(j.prototype,"interval"),j.prototype),e(j.prototype,"clean",[z],Object.getOwnPropertyDescriptor(j.prototype,"clean"),j.prototype),A=e(j.prototype,"cursor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(j.prototype,"item",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(j.prototype,"fadeInOnLoad",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=j))||E)||E));c._RF.pop()}}}));

System.register("chunks:///_virtual/DateUtils.ts",["cc"],(function(e){var t,s;return{setters:[function(e){t=e.cclegacy,s=e._decorator}],execute:function(){e({formatDate:function(e,t){e instanceof Date||(e=new Date(e));t||(t="yyyy-MM-dd hh:mm:ss");var s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in s)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?s[n]:("00"+s[n]).substr((""+s[n]).length)));return t},formatUTCDate:function(e,t){e instanceof Date||(e=new Date(e));t||(t="yyyy-MM-dd hh:mm:ss");var s={"M+":e.getUTCMonth()+1,"d+":e.getUTCDate(),"h+":e.getUTCHours(),"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getUTCMonth()+3)/3),S:e.getUTCMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(var n in s)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?s[n]:("00"+s[n]).substr((""+s[n]).length)));return t}}),t._RF.push({},"ea1edxI7XZM4K4l4UZ/0bGk","DateUtils",void 0);s.ccclass,s.property;t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,f=t.Component}],execute:function(){var L,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),L((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var f=p(this.EnableAllCompositeModeButton.getChildByName("Label"));f.setPosition(i+(u>0?450:150),n,0),f.setScale(.75,.75,.75),f.parent=r;var L=f.getComponent(c);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(f)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DebugUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts"],(function(e){var o,t,n,r;return{setters:[function(e){o=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,n=e.find},function(e){r=e.getNodePath}],execute:function(){function i(e,t){void 0===t&&(t=0),e||(e=n("Canvas")),console.group(" ".repeat(2*t)+"Node: "+e.name+" active:"+e.active+" path:"+r(e));for(var c,u=o(e.children);!(c=u()).done;){i(c.value,t+1)}console.groupEnd()}e("printNode",i),t._RF.push({},"6ecd7AnJ/1H36yQy+eWrUt0","DebugUtils",void 0),window.debug={printNode:i},t._RF.pop()}}}));

System.register("chunks:///_virtual/Decorator.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){t("Static",(function(t,c,e){t[c]=e.value})),c._RF.push({},"b60eemBQVFA1rIWH4cLfhZ8","Decorator",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/deferredComputed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./effect.ts","./reactive.ts","./ref.ts"],(function(e){var t,r,i,n,f,u,c,o;return{setters:[function(e){t=e.createClass,r=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},function(e){n=e.ReactiveEffect},function(e){f=e.toRaw,u=e.ReactiveFlags},function(e){c=e.trackRefValue,o=e.triggerRefValue}],execute:function(){var s;e("deferredComputed",(function(e){return new h(e)})),i._RF.push({},"3d7f3IFsjpNa5NQLiGJB43b","deferredComputed",void 0);var a=Promise.resolve(),v=[],d=!1,l=function(){for(var e=0;e<v.length;e++)v[e]();v.length=0,d=!1};s=u.IS_READONLY;var h=function(){function e(t){var i,f=this;this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this[s]=!0;var u=!1,c=!1;this.effect=new n(t,(function(t){if(f.dep){if(t)i=f._value,u=!0;else if(!c){var n=u?i:f._value;c=!0,u=!1,_=function(){f.effect.active&&f._get()!==n&&o(f),c=!1},v.push(_),d||(d=!0,a.then(l))}for(var s,h=r(f.dep);!(s=h()).done;){var p=s.value;p.computed instanceof e&&p.scheduler(!0)}}var _;f._dirty=!0})),this.effect.computed=this}return e.prototype._get=function(){return this._dirty?(this._dirty=!1,this._value=this.effect.run()):this._value},t(e,[{key:"value",get:function(){return c(this),f(this)._get()}}]),e}();i._RF.pop()}}}));

System.register("chunks:///_virtual/dep.ts",["cc","./effect.ts"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy},function(e){t=e.trackOpBit}],execute:function(){n._RF.push({},"11759jza7JDprfP+m6KhdkN","dep",void 0);e("createDep",(function(e){var n=new Set(e);return n.w=0,n.n=0,n}));var r=e("wasTracked",(function(e){return(e.w&t)>0})),c=e("newTracked",(function(e){return(e.n&t)>0}));e("initDepMarkers",(function(e){var n=e.deps;if(n.length)for(var r=0;r<n.length;r++)n[r].w|=t})),e("finalizeDepMarkers",(function(e){var n=e.deps;if(n.length){for(var a=0,i=0;i<n.length;i++){var f=n[i];r(f)&&!c(f)?f.delete(e):n[a++]=f,f.w&=~t,f.n&=~t}n.length=a}}));n._RF.pop()}}}));

System.register("chunks:///_virtual/Directory.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var t,e,c,o;return{setters:[function(r){t=r.inheritsLoose},function(r){e=r.cclegacy,c=r._decorator,o=r.Asset}],execute:function(){var i;e._RF.push({},"54c9d3fxp5Ds6hhr0SWAShF","Directory",void 0);var n=c.ccclass;c.property,r("Directory",n("Directory")(i=function(r){function e(){return r.apply(this,arguments)||this}return t(e,r),e}(o))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/DissolutionInEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts","./Res.ts"],(function(t){var e,n,s,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t._decorator},function(t){o=t.EffectBase},function(t){r=t.Res}],execute:function(){var i;n._RF.push({},"54edft36NpBPpTDlwOtYZAu","DissolutionInEffect",void 0);var a=s.ccclass;s.property,t("DissolutionInEffect",a("DissolutionInEffect")(i=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))||this).endClearMaterial=!0,e.startValue=1,e.endValue=0,e}return e(n,t),n.prototype.onInit=function(){return this._commonInitTemplate1({path:r.material.dissolution.path,startValue:this.startValue,endValue:this.endValue,key:"uProgress"})},n}(o))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/DissolutionOutEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DissolutionInEffect.ts"],(function(t){var n,e,o,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){s=t.DissolutionInEffect}],execute:function(){var i;e._RF.push({},"8f435/VNnlIYbj1CXgjDysf","DissolutionOutEffect",void 0);var u=o.ccclass;o.property,t("DissolutionOutEffect",u("DissolutionOutEffect")(i=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(n=t.call.apply(t,[this].concat(o))||this).endClearMaterial=!1,n.startValue=0,n.endValue=1,n}return n(e,t),e}(s))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/domAttrConfig.ts",["cc","./makeMap.ts"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.makeMap}],execute:function(){e({includeBooleanAttr:function(e){return!!e||""===e},isSSRSafeAttrName:function(e){if(a.hasOwnProperty(e))return a[e];var t=n.test(e);t&&console.error("unsafe attribute name: "+e);return a[e]=!t}}),t._RF.push({},"c0af3Tz4fFODoHLpKirw7S4","domAttrConfig",void 0);var i="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";e("isSpecialBooleanAttr",r(i)),e("isBooleanAttr",r(i+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"));var n=/[>/="'\u0009\u000a\u000c\u0020]/,a={};e("propsToAttrMap",{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"}),e("isKnownHtmlAttr",r("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap")),e("isKnownSvgAttr",r("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"));t._RF.pop()}}}));

System.register("chunks:///_virtual/domTagConfig.ts",["cc","./makeMap.ts"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy},function(e){a=e.makeMap}],execute:function(){t._RF.push({},"a9bc6W9kbpLqpfAV2Tgjb75","domTagConfig",void 0);e("isHTMLTag",a("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot")),e("isSVGTag",a("svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view")),e("isVoidTag",a("area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr"));t._RF.pop()}}}));

System.register("chunks:///_virtual/EditBoxExpand.ts",["cc","./Hover.ts"],(function(){var t,o,n;return{setters:[function(n){t=n.cclegacy,o=n.EditBox},function(t){n=t.Hover}],execute:function(){t._RF.push({},"e558eZfhFtCsb6r3qiymb27","EditBoxExpand",void 0);var e=o.prototype.onLoad;o.prototype.onLoad=function(){e&&e.call(this),this.addComponent(n)},t._RF.pop()}}}));

System.register("chunks:///_virtual/EditorUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,s,u,a,c,o;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,i=e.Texture2D,s=e.ImageAsset,u=e.SpriteFrame,a=e.rect,c=e.v2,o=e.size}],execute:function(){var d,f;n._RF.push({},"f9197oV0WtKcJO0iVgOlDFO","EditorUtils",void 0);e("EditorUtils",function(){function e(){}return e.join=function(){var e;return(e=f).join.apply(e,arguments)},e.isDirectory=function(e){try{return d.statSync(e).isDirectory()}catch(e){return!1}},e.readdirSync=function(e){return d.readdirSync(e)},e.getFile=function(e){return d.readFileSync(e)},e.saveFile=function(e,t){return d.writeFileSync(e,t)},e.queryPath=function(e,t){return void 0===t&&(t=!1),t&&(e="db://assets/"+e),Editor.Message.request("asset-db","query-path",e)},e.queryAssets=function(e,t){return void 0===t&&(t=!1),t&&(e="db://assets/"+e),Editor.Message.request("asset-db","query-assets",{pattern:e+"*"})},e.queryUuid=function(e,t){return void 0===t&&(t=!1),t&&(e="db://assets/"+e),Editor.Message.request("asset-db","query-uuid",e)},e.getFileName=function(e){var t=e.replace(/\\/g,"/").split("/").pop().split(".");return 1===t.length?t[0]:(t.pop(),t.join("."))},e.getDirAllFilePath=function(t){var r=[];return d.readdirSync(t).forEach((function(n){var i=f.join(t,n),s=d.lstatSync(i);r.push(i),s.isDirectory()&&(r=r.concat(e.getDirAllFilePath(i)))})),r},e.getTexture2DByUuid=function(e){return new Promise(t(r().mark((function t(n,u){var a,c,o,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Editor.Message.request("asset-db","query-path",e);case 2:a=t.sent,c=d.readFileSync(a),o=new Blob([new Uint8Array(c.buffer)]),f=URL.createObjectURL(o),(l=document.createElement("img")).onload=function(){var e=new i;e.image=new s(l),n(e)},l.src=f;case 9:case"end":return t.stop()}}),t)}))))},e.getSpriteFrameByUuid=function(){var e=t(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new u,e.next=3,this.getTexture2DByUuid(t);case 3:i.texture=e.sent,n(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),e.getSpriteAtlasFrameByUuid=function(){var e=t(r().mark((function e(t,n){var i,s,d,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Editor.Message.request("asset-db","query-asset-meta",t);case 2:return i=e.sent,s=JSON.parse(i.json),e.next=6,this.getTexture2DByUuid(s.rawTextureUuid);case 6:d=e.sent,(f=new u).rect=a(s.trimX,s.trimY,s.width,s.height),f.rotated=s.rotated,f.offset=c(s.offsetX,s.offsetY),f.originalSize=o(s.rawWidth,s.rawHeight),f.texture=d,n(f);case 14:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/effect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./operations.ts","./shared.ts","./effectScope.ts","./dep.ts"],(function(e){var t,r,n,i,a,c,s,o,f,u,p,h,l;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy},function(e){n=e.TriggerOpTypes},function(e){i=e.extend,a=e.isArray,c=e.isMap,s=e.isIntegerKey},function(e){o=e.recordEffectScope},function(e){f=e.initDepMarkers,u=e.finalizeDepMarkers,p=e.createDep,h=e.newTracked,l=e.wasTracked}],execute:function(){e({activeEffect:void 0,effect:function(e,t){e.effect&&(e=e.effect.fn);var r=new y(e);t&&(i(r,t),t.scope&&o(r,t.scope));t&&t.lazy||r.run();var n=r.run.bind(r);return n.effect=r,n},enableTracking:function(){M.push(b),b=e("shouldTrack",!0)},getDepFromReactive:function(e,t){var r;return null==(r=d.get(e))?void 0:r.get(t)},pauseTracking:function(){M.push(b),b=e("shouldTrack",!1)},resetTracking:function(){var t=M.pop();b=e("shouldTrack",void 0===t||t)},stop:function(e){e.effect.stop()},track:function(e,t,r){if(b&&v){var n=d.get(e);n||d.set(e,n=new Map);var i=n.get(r);i||n.set(r,i=p()),R(i,{effect:v,target:e,type:t,key:r})}},trackEffects:R,trigger:function(e,r,i,o,f,u){var h=d.get(e);if(!h)return;var l=[];if(r===n.CLEAR)l=[].concat(h.values());else if("length"===i&&a(e)){var v=Number(o);h.forEach((function(e,t){("length"===t||t>=v)&&l.push(e)}))}else switch(void 0!==i&&l.push(h.get(i)),r){case n.ADD:a(e)?s(i)&&l.push(h.get("length")):(l.push(h.get(T)),c(e)&&l.push(h.get(E)));break;case n.DELETE:a(e)||(l.push(h.get(T)),c(e)&&l.push(h.get(E)));break;case n.SET:c(e)&&l.push(h.get(T))}var g={target:e,type:r,key:i,newValue:o,oldValue:f,oldTarget:u};if(1===l.length)l[0]&&m(l[0],g);else{for(var k,y=[],S=t(l);!(k=S()).done;){var b=k.value;b&&y.push.apply(y,b)}m(p(y),g)}},triggerEffects:m}),r._RF.push({},"e3a3bGYMtBPr45F6FriRG3E","effect",void 0);var v,d=new WeakMap,g=0,k=e("trackOpBit",1),T=e("ITERATE_KEY",Symbol("iterate")),E=e("MAP_KEY_ITERATE_KEY",Symbol("Map key iterate")),y=e("ReactiveEffect",function(){function t(e,t,r){void 0===t&&(t=null),this.active=!0,this.deps=[],this.parent=void 0,this.fn=e,this.scheduler=t,o(this,r)}var r=t.prototype;return r.run=function(){if(!this.active)return this.fn();for(var t=v,r=b;t;){if(t===this)return;t=t.parent}try{return this.parent=v,v=e("activeEffect",this),b=e("shouldTrack",!0),k=e("trackOpBit",1<<++g),g<=30?f(this):S(this),this.fn()}finally{g<=30&&u(this),k=e("trackOpBit",1<<--g),v=e("activeEffect",this.parent),b=e("shouldTrack",r),this.parent=void 0,this.deferStop&&this.stop()}},r.stop=function(){v===this?this.deferStop=!0:this.active&&(S(this),this.onStop&&this.onStop(),this.active=!1)},t}());function S(e){var t=e.deps;if(t.length){for(var r=0;r<t.length;r++)t[r].delete(e);t.length=0}}var b=e("shouldTrack",!0),M=[];function R(e,t){var r=!1;g<=30?h(e)||(e.n|=k,r=!l(e)):r=!e.has(v),r&&(e.add(v),v.deps.push(e),v.onTrack&&v.onTrack(i({effect:v},t)))}function m(e,r){for(var n,i=a(e)?e:Array.from(e),c=t(i);!(n=c()).done;){var s=n.value;s.computed&&w(s,r)}for(var o,f=t(i);!(o=f()).done;){var u=o.value;u.computed||w(u,r)}}function w(e,t){(e!==v||e.allowRecurse)&&(e.onTrigger&&e.onTrigger(i({effect:e},t)),e.scheduler?e.scheduler():e.run())}r._RF.pop()}}}));

System.register("chunks:///_virtual/EffectBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetsManager.ts","./TweenUtils.ts"],(function(t){var e,n,r,a,i,o,s,u,c,l,f,p,h,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,c=t.UIRenderer,l=t.CCFloat,f=t.Component,p=t.Material,h=t.tween},function(t){d=t.AssetsManager},function(t){y=t.TweenUtils}],execute:function(){var v,m,E,g,S,C,T,b,w;s._RF.push({},"7a71dYikDlIU7Sw776bR99r","EffectBase",void 0);var M=u.ccclass,_=u.property,A=(u.playOnFocus,u.requireComponent),R=(u.executeInEditMode,t("EffectState",function(t){return t[t.Start=0]="Start",t[t.End=1]="End",t}({})));t("EffectBase",(v=M("EffectBase"),m=A(c),E=_({type:l}),v(g=m(((w=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(e,"playOnLoad",C,a(e)),r(e,"time",T,a(e)),r(e,"endClearMaterial",b,a(e)),e}n(e,t);var s=e.prototype;return s.setState=function(t){this._state=t,this.node&&(this.node.emit(e.EventType.STATE_CHANGE,t),t===R.End&&(this.node.removeComponent(this),this.endClearMaterial&&(this.getRender().customMaterial=null)))},s.onceEffectStart=function(t){return this.node.once(e.EventType.STATE_CHANGE,(function(e){e===R.Start&&t()})),this},s.getRender=function(){return this.getComponent(c)},s.onLoad=function(){this.playOnLoad&&this.play()},s.play=function(){var t=i(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.onInit();case 2:return this._config=t.sent,this.setState(R.Start),t.next=6,this._config.start();case 6:this.setState(R.End);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.serEndClearMaterial=function(t){return this.endClearMaterial=t,this},s.stop=function(){var t;null==(t=this._config)||t.stop(),this.setState(R.End)},s.onInit=function(){return null},s._commonInitTemplate1=function(){var t=i(o().mark((function t(e){var n,r,a,i,s,u,c,l,f=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.path,r=e.startValue,a=e.endValue,i=e.key,t.next=3,d.resources.load(n,p);case 3:return s=t.sent,u=this.getRender(),c=function(){u.customMaterial=s;var t={value:r};return s.setProperty(i,t.value),h(t).to(f.time,{value:a},{onUpdate:function(){s.setProperty(i,t.value)}})},t.abrupt("return",{start:function(){return l=c(),y.toPromise(l)},stop:function(){var t;null==(t=l)||t.stop()}});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(f)).EventType={STATE_CHANGE:"effect-state-change"},C=e((S=w).prototype,"playOnLoad",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=e(S.prototype,"time",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=e(S.prototype,"endClearMaterial",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=S))||g)||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/effectScope.ts",["./rollupPluginModLoBabelHelpers.js","cc","./warning.ts"],(function(e){var t,s,i;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy},function(e){i=e.warn}],execute:function(){var n;e({effectScope:function(e){return new c(e)},getCurrentScope:function(){return n},onScopeDispose:function(e){n?n.cleanups.push(e):i("onScopeDispose() is called when there is no active effect scope to be associated with.")},recordEffectScope:function(e,t){void 0===t&&(t=n);t&&t.active&&t.effects.push(e)}}),s._RF.push({},"89e16HSZRRM14FV8YVC054T","effectScope",void 0);var c=e("EffectScope",function(){function e(e){void 0===e&&(e=!1),this._active=!0,this.effects=[],this.cleanups=[],this.detached=e,this.parent=n,!e&&n&&(this.index=(n.scopes||(n.scopes=[])).push(this)-1)}var s=e.prototype;return s.run=function(e){if(this._active){var t=n;try{return n=this,e()}finally{n=t}}else i("cannot run an inactive effect scope.")},s.on=function(){n=this},s.off=function(){n=this.parent},s.stop=function(e){if(this._active){var t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}},t(e,[{key:"active",get:function(){return this._active}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/enum.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"08acfnW0PxCxbT+soZOq4M0","enum",void 0);e("ClientMessage",function(e){return e.StartGame="StartGame",e.ChangePlayerStatus="ChangePlayerStatus",e.UpdateMinAmount="ChangePlayerStatus",e.CallAction="CallAction",e.CheckAction="CheckAction",e.RaiseAction="RaiseAction",e.FoldAction="FoldAction",e.SetSharedCards="SetSharedCards",e.SetPlayerCard="SetPlayerCard",e.ResetGame="ResetGame",e}({})),e("GameServerMessage",function(e){return e.StartRoundSuccess="StartRoundSuccess",e.StartRoundFail="StartRoundFail",e.ChangePlayerStatusFail="ChangePlayerStatusFail",e.MakeActionSuccess="MakeActionSuccess",e.MakeActionFail="MakeActionFail",e.DealCardWhenStart="DealCardWhenStart",e.ZoomFull="ZoomFull",e.NotEnoughBalance="NotEnoughBalance",e.UpdateMinAmountFail="UpdateMinAmountFail",e.ShowAllCards="ShowAllCards",e.PlayerAlreadyPlay="PlayerAlreadyPlay",e.SetCardFail="SetCardFail",e.ResetGameFail="ResetGameFail",e}({})),e("GameStatus",function(e){return e[e.Waiting=0]="Waiting",e[e.PreFlop=1]="PreFlop",e[e.Flop=2]="Flop",e[e.TheTurn=3]="TheTurn",e[e.TheRiver=4]="TheRiver",e[e.ShutDown=5]="ShutDown",e}({})),e("PlayerRole",function(e){return e[e.Dealer=0]="Dealer",e[e.SmallBlind=1]="SmallBlind",e[e.BigBlind=2]="BigBlind",e[e.Normal=3]="Normal",e}({})),e("Action",function(e){return e.Call="Call",e.Check="Check",e.Raise="Raise",e.Fold="Fold",e.None="None",e}({})),e("PlayerStatus",function(e){return e.Ready="Ready",e.NotReady="NotReady",e}({})),e("GameName",function(e){return e.zkholdem="zkholdem",e}({})),e("Rank",function(e){return e[e.Two=0]="Two",e[e.Three=1]="Three",e[e.Four=2]="Four",e[e.Five=3]="Five",e[e.Six=4]="Six",e[e.Seven=5]="Seven",e[e.Eight=6]="Eight",e[e.Nine=7]="Nine",e[e.Ten=8]="Ten",e[e.J=9]="J",e[e.Q=10]="Q",e[e.K=11]="K",e[e.A=12]="A",e}({})),e("Suit",function(e){return e[e.Hearts=0]="Hearts",e[e.Diamonds=1]="Diamonds",e[e.Clubs=2]="Clubs",e[e.Spades=3]="Spades",e}({})),e("HandRank",function(e){return e[e.HighCard=0]="HighCard",e[e.OnePair=1]="OnePair",e[e.TwoPair=2]="TwoPair",e[e.ThreeOfKind=3]="ThreeOfKind",e[e.Straight=4]="Straight",e[e.Flush=5]="Flush",e[e.FullHouse=6]="FullHouse",e[e.FourOfKind=7]="FourOfKind",e[e.StraightFlush=8]="StraightFlush",e[e.RoyalFlush=9]="RoyalFlush",e}({})),e("PopupType",function(e){return e[e.Create=0]="Create",e[e.JoinRandom=1]="JoinRandom",e[e.Withdraw=2]="Withdraw",e}({})),e("ApiCPMType",function(e){return e[e.GetSession=0]="GetSession",e[e.GetPlayer=1]="GetPlayer",e[e.GetParticipant=2]="GetParticipant",e}({}));a._RF.pop()}}}));

System.register("chunks:///_virtual/ERC20.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"05898XmX+NKXoIObkJSbbsB","ERC20",void 0);e("default",[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"}],name:"withdrawEther",outputs:[],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"burn",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"unfreeze",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"freezeOf",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"freeze",outputs:[{name:"success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{inputs:[{name:"initialSupply",type:"uint256"},{name:"tokenName",type:"string"},{name:"decimalUnits",type:"uint8"},{name:"tokenSymbol",type:"string"}],payable:!1,type:"constructor"},{payable:!0,type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Freeze",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Unfreeze",type:"event"}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/ERC721Enumerable.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"14d42Ao2GZHLJSOXS8VELY6","ERC721Enumerable",void 0);t("default",[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint256",name:"maxNftSupply",type:"uint256"},{internalType:"uint256",name:"saleStart",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"BAYC_PROVENANCE",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX_APES",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"REVEAL_TIMESTAMP",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"apePrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"emergencySetStartingIndexBlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"flipSaleState",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxApePurchase",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"}],name:"mintApe",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"reserveApes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"saleIsActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"provenanceHash",type:"string"}],name:"setProvenanceHash",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"revealTimeStamp",type:"uint256"}],name:"setRevealTimestamp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"setStartingIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startingIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"startingIndexBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}]);e._RF.pop()}}}));

System.register("chunks:///_virtual/errorHandling.ts",["cc","./shared.ts"],(function(r){var n,t,e;return{setters:[function(r){n=r.cclegacy},function(r){t=r.isFunction,e=r.isPromise}],execute:function(){function o(r,n,t){var e;try{e=t?r.apply(void 0,t):r()}catch(r){c(r,n)}return e}function c(r,n){console.error(new Error("[@vue-reactivity/watch]: "+n)),console.error(r)}function i(r){return new Error("[reactivue]: "+r)}r({callWithAsyncErrorHandling:function r(n,i,a){if(t(n)){var u=o(n,i,a);return u&&e(u)&&u.catch((function(r){c(r,i)})),u}for(var s=[],l=0;l<n.length;l++)s.push(r(n[l],i,a));return s},callWithErrorHandling:o,createError:i,handleError:c,raise:function(r){throw i(r)},warn:function(r){console.warn(i(r))}}),n._RF.push({},"5a84aFUmDRCdplI3Oe4AAQh","errorHandling",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/escapeHtml.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e({escapeHtml:function(e){var t=""+e,a=c.exec(t);if(!a)return t;var r,n,s="",u=0;for(n=a.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}u!==n&&(s+=t.slice(u,n)),u=n+1,s+=r}return u!==n?s+t.slice(u,n):s},escapeHtmlComment:function(e){return e.replace(a,"")}}),t._RF.push({},"93327/iZYJDoY8VHuxMp7VE","escapeHtml",void 0);var c=/["'&<>]/;var a=/^-?>|<!--|-->|--!>|<!-$/g;t._RF.pop()}}}));

System.register("chunks:///_virtual/EthereumUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ethers.umd.mjs_cjs=&original=.js","./GameConfig.ts","./TableManager.ts","./tableEnums.ts","./AlchemyUtils.ts","./bignumber.mjs","./PromiseUtils.ts","./MathUtils.ts","./ethers.umd.js"],(function(e){var t,n,r,s,a,c,u,o,i,l,f,p,d;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},null,function(e){s=e.ChainNetwork2Info,a=e.default,c=e.ChainNetwork},function(e){u=e.TableManager},function(e){o=e.Tables},function(e){i=e.AlchemyUtils},function(e){l=e.BigNumber},function(e){f=e.delay},function(e){p=e.randomFloat},function(e){d=e.default}],execute:function(){e({formatAddress:function(e){return e?e.substring(0,5)+"..."+e.substring(e.length-6):""},getEnsName:function(e,t){return w.apply(this,arguments)},getJsonRpcProvider:m,getPFPNftList:function(e){return x.apply(this,arguments)},getPlayThemeNftList:function(e){return v.apply(this,arguments)},scanAddress:function(e){window.open(s[a.instance.chainNetwork].blockchainExplorer+"/address/"+e)},scanTx:function(e){window.open(s[a.instance.chainNetwork].blockchainExplorer+"/tx/"+e)}}),r._RF.push({},"3197aDBIDpEKKcqwQnJrsEU","EthereumUtils",void 0);e("ETH_DECIMALS",l(10).pow(18));var h=Object.create(null);function m(e){return h[e]||(h[e]=new d.providers.JsonRpcProvider(s[e].rpcUrl)),h[e]}var b=Object.create(null);function w(){return(w=t(n().mark((function e(r,s){var a,u,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=(a=void 0===s?{}:s).cache,o=a.forceFlush,r=r.toLowerCase(),!(u=u||!1!==u)||o||!b[r]){e.next=8;break}if(!(b[r]instanceof Promise)){e.next=7;break}return e.next=7,b[r];case 7:return e.abrupt("return",b[r]);case 8:if(i=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(c.Ethereum).lookupAddress(r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,f(p(1e3,2e3));case 10:return e.next=12,m(c.Ethereum).lookupAddress(r);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,null,[[0,6]])})))(),u){e.next=13;break}return e.next=12,i;case 12:return e.abrupt("return",e.sent);case 13:return b[r]=i,e.next=16,i;case 16:return b[r]=e.sent,e.abrupt("return",b[r]);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=Object.create(null);function x(){return(x=t(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g[r]){e.next=5;break}if(!(g[r]instanceof Promise)){e.next=4;break}return e.next=4,g[r];case 4:return e.abrupt("return",g[r]);case 5:return g[r]=new Promise(t(n().mark((function e(t){var s,a,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object.create(null),u.instance.getTableByName(o.PFPNft).getRows().forEach((function(e){s[e.chainName]?s[e.chainName].contractAddress.push(d.utils.getAddress(e.contractAddress)):s[e.chainName]={network:e.chainName,contractAddress:[d.utils.getAddress(e.contractAddress)]}})),e.next=4,Promise.all(Object.values(s).map((function(e){return i.getNftListWithMoreContracts(e.network,r,e.contractAddress)})));case 4:a=e.sent,c=a.flat(),console.log("pfp nft list:",c),t(c);case 8:case"end":return e.stop()}}),e)})))),e.next=8,g[r];case 8:return g[r]=e.sent,e.abrupt("return",g[r]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=Object.create(null);function v(){return(v=t(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k[r]){e.next=5;break}if(!(k[r]instanceof Promise)){e.next=4;break}return e.next=4,k[r];case 4:return e.abrupt("return",k[r]);case 5:return k[r]=new Promise(t(n().mark((function e(t){var s,a,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object.create(null),u.instance.getTableByName(o.PlayThemeType).getRows().forEach((function(e){if(e.chainName&&e.contractAddress){var t="*"===e.contractAddress;s[e.chainName]?t?s[e.chainName].any=!0:s[e.chainName].contractAddress.push(d.utils.getAddress(e.contractAddress)):s[e.chainName]={network:e.chainName,contractAddress:t?[]:[d.utils.getAddress(e.contractAddress)],any:t}}})),e.next=4,Promise.all(Object.values(s).map((function(e){return e.any&&0===e.contractAddress.length?i.getOneNft(e.network,r):i.getNftListWithMoreContracts(e.network,r,e.contractAddress)})));case 4:a=e.sent,c=a.flat(),console.log("play theme nft list:",c),t(c);case 8:case"end":return e.stop()}}),e)})))),e.next=8,k[r];case 8:return k[r]=e.sent,e.abrupt("return",k[r]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r._RF.pop()}}}));

System.register("chunks:///_virtual/EventConstant.ts",["cc"],(function(_){var A,E;return{setters:[function(_){A=_.cclegacy,E=_._decorator}],execute:function(){A._RF.push({},"df888j2TyFNcoN3p9xStfrG","EventConstant",void 0);E.ccclass,E.property,_("EventConstant",{LOAD_START_ASSETS_OK:"LOAD_START_ASSETS_OK",GAME_MAIN_START:"GAME_MAIN_START",GAME_ALL_MANAGER_INIT_OK:"GAME_MAIN_START",OPEN_UI:"OPEN_UI",CLOSE_UI:"CLOSE_UI",LOGIN:"LOGIN",LOGOUT:"LOGOUT",PROFILE_PIC_CHANGE:"PROFILE_PIC_CHANGE",UPDATE_I18N_JSON:"UPDATE_I18N_JSON",UPDATE_PLAY_THEME:"UPDATE_PLAY_THEME"});A._RF.pop()}}}));

System.register("chunks:///_virtual/EventTarget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(t){var n,e,r;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy},function(t){r=t.Logger}],execute:function(){var i;e._RF.push({},"99d41Rg2I9OKaIT9j3RNjIh","EventTarget",void 0);var f=t("EventItem",function(){function t(t,n,e,r,i){void 0===i&&(i=-1),this.num=0,this.isStop=!1,this.eventTarget=t,this.event=n,this.callback=e,this.target=r,this.max=i}var n=t.prototype;return n.check=function(t,n){return this.target===t&&this.callback===n},n.checkByTarget=function(t){return this.target===t},n.checkByCallback=function(t){return this.callback===t},n.off=function(){return this.eventTarget.offByEventItem(this)},n.emit=function(t){var n;this.num++,-1!==this.max&&this.num>=this.max&&this.off(),(n=this.callback).call.apply(n,[this.target,this].concat(t))},n.wait=function(){var t=this;return new Promise((function(n,e){t.callback=n}))},n.stop=function(t){void 0===t&&(t=!0),this.isStop=t},t}()),o=t("EventTarget",function(){function t(){this._eventItems=[]}var e=t.prototype;return e._getEventList=function(t){return this._eventItems.filter((function(n){return n.event===t}))},e._getTargetEventList=function(t){return this._eventItems.filter((function(n){return n.target===t}))},e._getCallbackEventList=function(t){return this._eventItems.filter((function(n){return n.callback===t}))},e.on=function(t,n,e,i){if(void 0===i&&(i=-1),!t)return r.fatal("on not event"),null;if(!n)return r.fatal("on not callback"),null;var o=new f(this,t,n,e,i);return this._eventItems.push(o),o},e.once=function(t,n,e){return this.on(t,n,e,1)},e.get=function(t,n,e){return t?n?this._getEventList(t).find((function(t){if(t.check(e,n))return t})):(r.fatal("get not callback"),null):(r.fatal("get not event"),null)},e.has=function(t,n,e){return!!this.get(t,n,e)},e.off=function(t,n,e){if(!t)return r.fatal("off not event"),null;var i=[];return this._getEventList(t).forEach((function(t){n?t.check(e,n)&&i.push(t.off()):i.push(t.off())})),i},e.offByTarget=function(t,n){if(!t)return r.fatal("offByTarget not target"),null;var e=this._getTargetEventList(t),i=[];return n?e.forEach((function(t){t.event===n&&i.push(t.off())})):e.forEach((function(t){i.push(t.off())})),i},e.offByCallback=function(t,n){if(!t)return r.fatal("offByCallback not callback"),null;var e=this._getCallbackEventList(t),i=[];return n?e.forEach((function(t){t.event===n&&i.push(t.off())})):e.forEach((function(t){i.push(t.off())})),i},e.clear=function(){this._eventItems=[]},e.clearEvent=function(t){if(!t)return r.fatal("clearEvent not event"),null;var n=[];return this._getEventList(t).forEach((function(t){n.push(t.off())})),n},e.offByEventItem=function(t){return this._eventItems.splice(this._eventItems.indexOf(t),1)[0]},e.emit=function(t){if(!t)return r.error("emit not event");for(var e=this._getEventList(t),i=arguments.length,f=new Array(i>1?i-1:0),o=1;o<i;o++)f[o-1]=arguments[o];for(var a,u=n(e);!(a=u()).done;){var c=a.value;if(c.emit(f),c.isStop)break}},t}());i=o,o.eventManager=new i,e._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Types.ts"],(function(e){var t,n,i,r,a,o,l,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,i=e.inheritsLoose,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,c=e.ccenum,u=e.Component},function(e){s=e.WalletType}],execute:function(){var p,m,h,b,y,f,d,g,w,C,T,E,k,N,v,z,H,L,G,x,K,A,P,D,I,M,Z,U,S,V,W,R,_,B,F,j,O,q,J,Q,X,Y,$,ee,te;o._RF.push({},"81bf0RHzZNCuruUtZT3WpHo","GameConfig",void 0);var ne=l.ccclass,ie=l.property,re=e("GameVersion","1.1.3"),ae=e("GameStoreVersion","0.0.1"),oe=e("SdkVersion","0.0.137");console.log("\nGameVersion:        "+re+"\nGameStoreVersion:   "+ae+"\nSdkVersion:         "+oe+"\n");var le=e("GameEnvironment",function(e){return e[e.LocalDevelopment=0]="LocalDevelopment",e[e.LanDevelopment=1]="LanDevelopment",e[e.LocalProduction=2]="LocalProduction",e[e.Development=3]="Development",e[e.Production=4]="Production",e}({})),ce=e("GameLanguages",function(e){return e[e.Local=0]="Local",e[e.En=1]="En",e}({})),ue=e("GameLanguages2Text",((p={})[ce.Local]="local",p[ce.En]="en",p)),se=e("GamePlatform",function(e){return e[e.Test=0]="Test",e}({})),pe=(e("GamePlatform2Text",((m={})[se.Test]="Test",m)),e("ChainNetwork",function(e){return e[e.Ethereum=0]="Ethereum",e[e.Goerli=1]="Goerli",e[e.ArbitrumGoerli=2]="ArbitrumGoerli",e[e.Caldera=3]="Caldera",e[e.LineaGoerli=4]="LineaGoerli",e[e.Polygon=5]="Polygon",e[e.MantaTestnet=6]="MantaTestnet",e[e.Manta=7]="Manta",e[e.Lumoz=8]="Lumoz",e}({})));e("ChainNetwork2Info",((h={})[pe.Ethereum]={chainNetwork:pe.Ethereum,chainId:"1",chainName:"Ethereum",rpcUrl:"https://eth.llamarpc.com",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockchainExplorer:"https://etherscan.io"},h[pe.Goerli]={chainNetwork:pe.Goerli,chainId:"5",chainName:"Goerli Testnet",rpcUrl:"https://eth-goerli.api.onfinality.io/public",nativeCurrency:{name:"Goerli ETH",symbol:"Goerli ETH",decimals:18},blockchainExplorer:"https://goerli.etherscan.io"},h[pe.ArbitrumGoerli]={chainNetwork:pe.ArbitrumGoerli,chainId:"421613",chainName:"Arbitrum Goerli",rpcUrl:"https://arbitrum-goerli.public.blastapi.io/",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockchainExplorer:"https://goerli.arbiscan.io"},h[pe.Caldera]={chainNetwork:pe.Caldera,chainId:"145632",chainName:"Khartes Testnet",rpcUrl:"https://khartes.calderachain.xyz/http",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockchainExplorer:"https://khartes.calderaexplorer.xyz",deployedOn:pe.Goerli},h[pe.LineaGoerli]={chainNetwork:pe.LineaGoerli,chainId:"59140",chainName:"Linea Testnet",rpcUrl:"https://rpc.goerli.linea.build",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockchainExplorer:"https://explorer.goerli.linea.build"},h[pe.Polygon]={chainNetwork:pe.Polygon,chainId:"137",chainName:"Polygon",rpcUrl:"https://polygon-rpc.com",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockchainExplorer:"https://polygonscan.com"},h[pe.MantaTestnet]={chainNetwork:pe.MantaTestnet,chainId:"3441005",chainName:"Manta Testnet",rpcUrl:"https://manta-testnet.calderachain.xyz/http",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockchainExplorer:"https://manta-testnet.calderaexplorer.xyz",renewParadigmUrl:"https://nonprod-renewparadigm.manta.network/dashboard/staking"},h[pe.Manta]={chainNetwork:pe.Manta,chainId:"169",chainName:"Manta",rpcUrl:"https://pacific-rpc.manta.network/http",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockchainExplorer:"https://pacific-explorer.manta.network",renewParadigmUrl:"https://renewparadigm.manta.network/dashboard/staking"},h[pe.Lumoz]={chainNetwork:pe.Lumoz,chainId:"13033",chainName:"Lumoz",rpcUrl:"http://61.10.9.22:10171",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},blockchainExplorer:"https://scangoerlitest.gaszero.com"},h));c(le),c(se),c(ce),c(ce),c(pe),c(ue),c(s);var me=ne("ZKHoldemSDKConfig")((f=t((y=function(){n(this,"enableLog",f,this),n(this,"useEvent",d,this),n(this,"useBuiltInWsProvider",g,this),n(this,"enableChallenge",w,this)}).prototype,"enableLog",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=t(y.prototype,"useEvent",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=t(y.prototype,"useBuiltInWsProvider",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=t(y.prototype,"enableChallenge",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=y))||b,he=ne("ZKHoldemConfig")((E=t((T=function(){n(this,"twitter",E,this),n(this,"discord",k,this),n(this,"website",N,this),n(this,"advocateList",v,this)}).prototype,"twitter",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=t(T.prototype,"discord",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=t(T.prototype,"website",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=t(T.prototype,"advocateList",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=T))||C,be=ne("ZKHoldemAnalyticsConfig")((L=t((H=function(){n(this,"enable",L,this),n(this,"hostName",G,this)}).prototype,"enable",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=t(H.prototype,"hostName",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=H))||z,ye=ne("AlchemyConfig")((A=t((K=function(){n(this,"apiKey",A,this)}).prototype,"apiKey",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=K))||x;e("default",(P=ne("GameConfig"),D=ie({type:le,displayName:""}),I=ie({type:se,displayName:""}),M=ie({type:ce,displayName:" local"}),Z=ie({type:ce,displayName:"local "}),U=ie({type:pe,displayName:"rpc"}),S=ie({type:s,displayName:"Wallet Type"}),V=ie({type:me,displayName:"ZKHoldem SDK Config"}),W=ie({type:he,displayName:"ZKHoldem Config"}),R=ie({type:ye,displayName:"Alchemy Config"}),_=ie({type:be,displayName:"ZKHoldem Analytics Config"}),P((j=t((F=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"environment",j,r(t)),n(t,"platform",O,r(t)),n(t,"language",q,r(t)),n(t,"defaultLanguage",J,r(t)),n(t,"chainNetwork",Q,r(t)),n(t,"walletType",X,r(t)),n(t,"ZKHoldemSDKConfig",Y,r(t)),n(t,"ZKHoldemConfig",$,r(t)),n(t,"AlchemyConfig",ee,r(t)),n(t,"ZKHoldemAnalyticsConfig",te,r(t)),t}i(t,e),t.onReady=function(){};var o=t.prototype;return o.onLoad=function(){t.instance=this},o.onDestroy=function(){t.instance===this&&(t.instance=null)},a(t,[{key:"symbol",get:function(){return this.platform+"-"+this.language}}]),t}(u)).prototype,"environment",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return le.Development}}),O=t(F.prototype,"platform",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return se.Test}}),q=t(F.prototype,"language",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ce.Local}}),J=t(F.prototype,"defaultLanguage",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ce.En}}),Q=t(F.prototype,"chainNetwork",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pe.ArbitrumGoerli}}),X=t(F.prototype,"walletType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.MetaMask}}),Y=t(F.prototype,"ZKHoldemSDKConfig",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new me}}),$=t(F.prototype,"ZKHoldemConfig",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new he}}),ee=t(F.prototype,"AlchemyConfig",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ye}}),te=t(F.prototype,"ZKHoldemAnalyticsConfig",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new be}}),B=F))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameConst.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.Color}],execute:function(){n._RF.push({},"64839PzOWNLqInGLaRrP3G0","GameConst",void 0);e("sendBird_appId","3E5B168D-52E2-4AC7-AEAB-2651CDB378C3"),e("Max_Players_Count",6),e("Time_Player_Operation",20),e("BetType",function(e){return e[e.Unknown=0]="Unknown",e[e.Call=1]="Call",e[e.Fold=2]="Fold",e[e.Raise=3]="Raise",e[e.Check=4]="Check",e[e.AllIn=5]="AllIn",e}({})),e("BetTypeNames",["","Call","Fold","Raise","Check","All_In","SB","BB"]),e("StatusString",function(e){return e.shuffle="Shuffle",e.deal="Deal",e}({})),e("TxStateString",function(e){return e.pending="pending",e.success="success",e.fail="fail",e}({})),e("CardDeckType",function(e){return e.RoyalFlush="Royal Flush",e.StraightFlush="Straight Flush",e.FourKind="Four of a Kind",e.FullHouse="Full House",e.Flush="Flush",e.Straight="Straight",e.ThreeKind="Three of a Kind",e.TwoPair="Two Pair",e}({})),e("ranks",["2","3","4","5","6","7","8","9","10","J","Q","K","A"]),e("suitsColor",[t.RED,t.RED,t.BLACK,t.BLACK]),e("suitsColorValue",["h","d","c","s"]),e("chatUserFontColor","ffffff66"),e("chatMessageFontColor","ffffffcc"),e("chatBotFontColor","4EDFFF66"),e("chatBotMessageFontColor","4EDFFFcc"),e("linkFontColor","FFFFFFB2");n._RF.pop()}}}));

System.register("chunks:///_virtual/GameHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EthereumUtils.ts","./Utils.ts","./bignumber.mjs","./SpriteFrameList.ts","./StringUtils.ts"],(function(t){var e,n,r,i,u,o,a,s,c,f,p,l,m;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,i=t.isValid,u=t.Node,o=t.Label,a=t.Sprite},function(t){s=t.formatAddress,c=t.getEnsName},function(t){f=t.uuid},function(t){p=t.BigNumber},function(t){l=t.SpriteFrameList},function(t){m=t.formatString}],execute:function(){function h(t){return t.length>14?s(t):t}function d(t){return g.apply(this,arguments)}function g(){return(g=e(n().mark((function t(e){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:if(!((r=t.sent)&&r.length>0)){t.next=5;break}return t.abrupt("return",r);case 5:return t.abrupt("return",h(e));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=e(n().mark((function t(e,r){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r instanceof u&&(r=r.getComponent(o)),r.string=h(e),t.next=4,d(e);case 4:a=t.sent,i(r)&&(r.string=a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=e(n().mark((function t(e,r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r instanceof u&&(r=r.getComponent(a));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=e(n().mark((function t(e,r){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r instanceof u&&(r=r.getComponent(l)),r.index=-1;case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t({formatBalance:function(t){return p(t).div(Math.pow(10,18)).toFixed(6)},formatChipType:function(t){return m(t,{chipType:"chips"})},formatGasValue:function(t){return p(t).div(Math.pow(10,9)).toFixed(3)},formatNumberValue:function(t){var e=p(t);if(e.lt(1e4))return e.toString();if(t<999999)return e.div(1e3).toFixed(1)+"K";if(t<999999999)return e.div(1e6).toFixed(1)+"M";return e.div(1e9).toFixed(1)+"G"},generateUUIDv4:function(){return f(16,Date.now())},getENSName:d,sameArray:function(t,e){return!!t&&!!e&&t.length===e.length&&t.every((function(t,n){return t===e[n]}))},setAvatarBorder:function(t,e){return x.apply(this,arguments)},setENSName:function(t,e){return v.apply(this,arguments)},setProfilePic:function(t,e){return y.apply(this,arguments)},shortName:h}),r._RF.push({},"78398vWGS5MeoqjzH0oApBg","GameHelper",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConst.ts","./OperationManager.ts","./enum.ts"],(function(t){var e,a,n,r,s,i,o,u,c,l;return{setters:[function(t){e=t.asyncToGenerator,a=t.regeneratorRuntime,n=t.createClass},function(t){r=t.cclegacy,s=t.director},function(t){i=t.Max_Players_Count},function(t){o=t.OperationType},function(t){u=t.GameServerMessage,c=t.GameStatus,l=t.ClientMessage}],execute:function(){r._RF.push({},"efb0fUweeRCOLs1KGKwb0rb","GameLogic",void 0);t("GameLogic",function(){function t(){this.playerManager=null,this.pokerManager=null,this.chipsManager=null,this.operationManager=null,this.networkManager=null,this.id="GameLogic",this.gameEnd=!1,this.isInit=!1,this.isInitPlayer=!1,this.isShowCard=!1,this.playerCount=0,this.currentPlayer=-1,this.waitForVariable=function(t,e){return void 0===e&&(e=100),new Promise((function(a){var n=setInterval((function(){var e=t();1==e&&(clearInterval(n),a(e))}),e)}))},this._communityCardsCount=0,this._lastPlayerIndex=-1,this.reallyHandsPokers=[],this.reallyCommunityPokers=[]}var r=t.prototype;return r.registerEvent=function(e){this.networkManager=e,this.networkManager.onStateChange=t._instance.onStateChange,this.networkManager.onMessageEvent=function(e,a){t._instance.onMessageEvent(e,a)}},r.onMessageEvent=function(e,a){switch(e){case u.ChangePlayerStatusFail:break;case u.DealCardWhenStart:this.curentCard=a,t.instance.isInitPlayer&&this.showCurrentCard();break;case u.MakeActionFail:this.stateData.currentIndexPlayer==this.currentPlayer&&(this.operationManager.node.active=!0,this.operationManager.showPlayerOperationButtons(o.Call,o.Check,o.Fold,o.Raise,o.AllIn),this.operationManager.updateCallValue(this.toEther(this.stateData.amountRaise)));break;case u.MakeActionSuccess:case u.NotEnoughBalance:break;case u.StartRoundFail:this._play.showStartButton(!0);break;case u.StartRoundSuccess:case u.UpdateMinAmountFail:case u.ZoomFull:break;case u.ShowAllCards:var n=Object.values(a.sessionIdCards);console.log("arrays",n);for(var r=0;r<n.length;r++)if(console.log(r==this.currentPlayer,this.currentPlayer),r!=this.currentPlayer){var s=n[r][0],i=n[r][1];console.log(s,i,n[r]);var c=this.playerManager.getPlayerShowPokerGroupPosition(r);this.pokerManager.addOtherPokerValues(s.rank,s.suit,i.rank,i.suit,c,r)}break;case u.PlayerAlreadyPlay:case u.SetCardFail:break;case u.ResetGameFail:this._play.showResetButton(!0)}},r.showCurrentCard=function(){var t=this.curentCard.cards[0],e=this.curentCard.cards[1],a=this.playerManager.getPlayerShowPokerGroupPosition(this.currentPlayer);this.pokerManager.addOtherPokerValues(t.rank,t.suit,e.rank,e.suit,a,this.currentPlayer),this.isShowCard=!0},r.onStateChange=function(){var n=e(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.instance.stateData=n,t.instance.isInit){e.next=3;break}return e.abrupt("return");case 3:t.instance.initDataWithState();case 4:case"end":return e.stop()}}),e)})));return function(t){return n.apply(this,arguments)}}(),r.initDataWithState=function(){var t=e(a().mark((function t(){var e,n=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.playerCount=0,this.stateData.players.forEach((function(t,e,a){if(e==n.networkManager.sessionId&&(n.currentPlayer=t.index,n.playerData=t),n.playerManager.addPlayer(t,e==n.networkManager.sessionId,n.stateData.owner==e),n.stateData.gameStatus!=c.Waiting&&e!=n.networkManager.sessionId&&n.stateData.gameStatus!=c.ShutDown){var r=n.playerManager.getPlayerShowPokerGroupPosition(t.index);n.pokerManager.addOtherPlayerCard(r,t.index)}n.chipsManager.updateChipsActions(t.index,t.currentAct),n.chipsManager.setChipsValue(t.index,n.toEther(t.betAmountARound)),n.playerCount++})),this.isInitPlayer=!0,null==this.curentCard||this.isShowCard||this.showCurrentCard(),this._play.roomLabel.string="Room ID: "+this.networkManager.roomId,this.stateData.indexDealer>=0&&(e=this.playerManager.getPlayerShowPokerGroupPosition(this.stateData.indexDealer),this.playerManager.showDealer(this.stateData.indexDealer,e)),t.t0=this.stateData.gameStatus,t.next=t.t0===c.Waiting?9:t.t0===c.PreFlop?13:t.t0===c.Flop?15:t.t0===c.TheTurn?18:t.t0===c.TheRiver?21:t.t0===c.ShutDown?24:30;break;case 9:return this.clearUi(),this._play.showResetButton(!1),this.playerCount>=2&&this.stateData.owner==this.networkManager.sessionId&&this._play.showStartButton(!0),t.abrupt("break",30);case 13:return this.updatePlayer(),t.abrupt("break",30);case 15:case 18:case 21:return this.updatePlayer(),this.showPublicPoker(),t.abrupt("break",30);case 24:return this._play.showStartButton(!1),this._play.showResetButton(!1),this.stateData.players.forEach((function(t,e,a){t.isWining&&n.playerManager.showPlayerWin(t.index,n.toEther(n.stateData.totalPlot))})),this.playerCount>=2&&this.stateData.owner==this.networkManager.sessionId&&this._play.showResetButton(!0),this.curentCard=null,t.abrupt("break",30);case 30:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.getAmountRaise=function(){var t=this,e=0;return this.stateData.players.forEach((function(a,n,r){t.toEther(a.betAmountARound)>e&&(e=t.toEther(a.betAmountARound))})),e},r.isShowButtonCall=function(){return this.getAmountRaise()!=this.toEther(this.playerData.betAmountARound)},r.updatePlayer=function(){if(this.chipsManager.setPoolValue(this.toEther(this.stateData.totalPlot)),this.playerManager.stopALlPlayerTimeCountdown(),this.playerManager.showPlayerTimecountdown(this.stateData.currentIndexPlayer),console.log("updatePlayer ",this.stateData.currentIndexPlayer==this.currentPlayer,this.stateData.currentIndexPlayer,this.currentPlayer),this.stateData.currentIndexPlayer==this.currentPlayer){this.operationManager.node.active=!0;var t=this.getAmountRaise();this.isShowButtonCall()?this.operationManager.showPlayerOperationButtons(o.Call,o.Fold,o.Raise,o.AllIn):this.operationManager.showPlayerOperationButtons(o.Check,o.Fold,o.Raise,o.AllIn),this.operationManager.updateCallValue(t)}this._play.showStartButton(!1)},r.showPublicPoker=function(){this.pokerManager.updateCommunityPokerValues(this.stateData.sharedCards.toArray()),this.pokerManager.updateHand(this.playerData.index)},r.clearUi=function(){this.playerManager.stopALlPlayerTimeCountdown(),this.playerManager.hidePlayerWin(),this.pokerManager.clearAllSmallPokers(),this.pokerManager.hiddenAllPublickPokers(),this.pokerManager.clearAllOthersPokers(),this.chipsManager.hidePool(),this.isShowCard=!1},r.toEther=function(t){var e=BigInt(t),a=BigInt(e)/BigInt(Math.pow(10,18));return Math.round(Number(a))},r.init=function(){var t=e(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isInit=!0,this.gameEnd=!1,this._play=e,this.roomId=-1,null!=this.stateData&&this.initDataWithState(),null!=this.curentCard&&this.showCurrentCard(),this.bindingPlayerOperation();case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.onClose=function(){this.resetData(),s.getScheduler().unschedule(this.showPlayerHandsPoker,this),s.getScheduler().unschedule(this.updateCommunityPoker,this)},r.bindingPlayerOperation=function(){var t=this;if(!this._isWatch){var n=function(){t.operationManager.node.active=!1,t.playerManager.stopPlayerTimeCountdown(t.playerIndex)};this.operationManager.onClickOperationButtonCallback=e(a().mark((function e(r){var s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("click operation:",o[r]),e.t0=r,e.next=e.t0===o.Fold?4:e.t0===o.Call?7:e.t0===o.Check?10:e.t0===o.Raise?13:e.t0===o.AllIn?18:21;break;case 4:return t.callFold(),n(),e.abrupt("break",22);case 7:return t.playerChips<=t.toEther(t.stateData.amountRaise)?t.callAllIn():t.callCall(),n(),e.abrupt("break",22);case 10:return t.callCheck(),n(),e.abrupt("break",22);case 13:return s=t.toEther(t.stateData.amountRaise),i=t.toEther(t.stateData.totalPlot),console.log("minRaise - allPot ",s,i,t.playerChips),t.operationManager.showRaise(t.playerChips,s,0,i),e.abrupt("break",22);case 18:return t.callAllIn(),n(),e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:case"end":return e.stop()}}),e)}))),this.operationManager.onClickRaiseValueCallback=e(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r===t.playerChips?t.callAllIn():t.callRaise(r),n();case 2:case"end":return e.stop()}}),e)})))}},r.getReallyIndex=function(t){return this._reallyIndexMapBackups&&this._board.permanentAccounts[t]?this._reallyIndexMapBackups[this._board.permanentAccounts[t]]:((t-=this.playerIndex)<0&&(t+=i),t)},r.resetData=function(){this._board=null,this._lastBoard=null,this._lastPlayerIndex=-1,this.reallyCommunityPokers=[],this.reallyHandsPokers=[],this._communityCardsCount=0,this.playerManager.clearPlayersMap(),this.pokerManager.hiddenAllPokers(),this.chipsManager.hiddenAllChips(),this.playerManager.dIcon.node.active=!1},r.updateGameStatus=function(){var t=e(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.nextGameOrClose=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.showPlayerOperationAndCountdown=function(){},r.showPlayerRaise=function(){},r.getWinnerIndex=function(t){return-1},r.showPlayerHandsPoker=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.playerEndAction=function(t){},r.showEndPlayerHands=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.updateCommunityPoker=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.getBestPokerTypes=function(t,e){},r.updatePlayerHandsPokerTypes=function(t,e,a){return""},r.showSettle=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r._checkWatchState=function(){var t=e(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r._tryShowStartGameButton=function(){},r._checkNewPlayerJoin=function(){},r.updateGameStep=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.callShuffle=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.callDeal=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.callFold=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.networkManager.sendEvent(l.FoldAction);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.callCheck=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.networkManager.sendEvent(l.CheckAction);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.callCall=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.networkManager.sendEvent(l.CallAction);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.callRaise=function(){var t=e(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.networkManager.sendEvent(l.RaiseAction,this.toWei(e).toString());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.callAllIn=function(){var t=e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.networkManager.sendEvent(l.RaiseAction,this.playerData.balance);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.toWei=function(t,e){void 0===e&&(e=18);var a=Number(Math.pow(10,e));return BigInt(t*a)},r.showTxActionState=function(t){},r.addSystemMessage=function(t){},n(t,[{key:"playerChips",get:function(){return this.toEther(this.playerData.balance)}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetsManager.ts","./GameConfig.ts","./I18nManager.ts","./GameStorageModel.ts","./Loading.ts","./UIMain.ts","./UIManager.ts","./UIErrorInfo.ts","./TableManager.ts","./TwitterManager.ts","./Res.ts"],(function(n){var e,t,r,a,s,i,o,u,c,g,f,l,p,h,d,m,w,v,y,x;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy,a=n._decorator,s=n.sys,i=n.assetManager,o=n.game},function(n){u=n.AssetsManager},function(n){c=n.GameLanguages2Text,g=n.default,f=n.GameLanguages},function(n){l=n.I18nManager},function(n){p=n.GameStorageModel},function(n){h=n.Loading},function(n){d=n.UIMain},function(n){m=n.UIManager},function(n){w=n.UIErrorInfo},function(n){v=n.TableManager},function(n){y=n.TwitterManager},function(n){x=n.Res}],execute:function(){var L;r._RF.push({},"f99b1QSaWNCXqlmcjXLlDaw","GameManager",void 0);a.ccclass,a.property;var M=n("GameState",{NO:0,InitGame:1,Loading:2,Parse:3,OK:4}),k=n("GameManager",function(){function n(){this.state=M.NO}var r=n.prototype;return r.init=function(){var n=e(t().mark((function n(){var e;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.state=M.InitGame,e=[this.initLanguage(),this.initAssets(),v.instance.init()],this.state=M.Loading,n.next=5,Promise.all(e);case 5:return n.next=7,Promise.all([y.instance.init()]);case 7:this.state=M.OK;case 8:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r.preloadRes=function(){var n=e(t().mark((function n(){var r,a,s,o;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i.downloader.maxRequestsPerFrame=3,i.downloader.maxConcurrency=3,r=[],x.startLoadResList.forEach((function(n){r[n.loadPriority]||(r[n.loadPriority]=[]),r[n.loadPriority].push(n)})),r.reverse(),a=0,s=r;case 6:if(!(a<s.length)){n.next=14;break}if(o=s[a],!Array.isArray(o)){n.next=11;break}return n.next=11,Promise.all(o.map(e(t().mark((function n(e){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.newInstance(e.bundle);case 2:return n.next=4,u.getInstance(e.bundle).preload(e.path);case 4:case"end":return n.stop()}}),n)})))));case 11:a++,n.next=6;break;case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),r.onError=function(){function n(n){if(!n.toString().toLowerCase().includes("user rejected"))return m.open(w,{arg:n}),console.error(n),!1}if(s.isBrowser&&(window.addEventListener("unhandledrejection",(function(e){e&&"reason"in e&&e.reason?"stack"in e.reason&&e.reason.stack?n(e.reason.stack):n(e.reason):n(e)})),window.onerror=function(e,t,r,a,s){n({msg:e,url:t,line:r,col:a,error:s})}),s.isNative){var e=console.error;console.error=function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];m.open(w,{arg:t.map((function(n){return n instanceof Error?n.stack:"object"==typeof n?JSON.stringify(n,null,2):n})).join("\n")}),e.apply(void 0,t)}}},r.initLanguage=function(){var n=e(t().mark((function n(){var e,r;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return g.instance.language===f.Local?((e=p.instance.language)||(r=Object.keys(c).find((function(n){return s.language.toLowerCase()===c[n].toLowerCase()})))&&(e=Number(r)),this.checkLanguage(e)?this.language=e:this.language=g.instance.defaultLanguage):this.language=g.instance.language,p.instance.language=this.language,n.next=4,l.instance.init(this.language);case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r.initAssets=function(){var n=e(t().mark((function n(){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.mainAssetsManager=u.resources;case 1:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r.setLanguage=function(){var n=e(t().mark((function n(e){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.language=e,p.instance.language=this.language,n.next=4,o.restart();case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),r.checkLanguage=function(n){return n&&!!c[n.toString().toLowerCase()]},r.openMain=function(){var n=e(t().mark((function n(){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.openUI(d);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),n}());L=k,k.instance=new L,r._RF.pop()}}}));

System.register("chunks:///_virtual/GameplayManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts","./ContractManager.ts","./CPMManager.ts","./socket.io.mjs_cjs=&original=.js","./Constant.ts","./UIPlay.ts","./UIToast.ts","./socket.io.js"],(function(n){var e,t,r,o,a,i,s,c,u,l,p,f,h,g,d,v,y,m;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,r=n.initializerDefineProperty,o=n.assertThisInitialized,a=n.createClass,i=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){c=n.cclegacy,u=n._decorator,l=n.Node,p=n.Component},function(n){f=n.NetworkManager},function(n){h=n.ContractManager},function(n){g=n.CPMManager},null,function(n){d=n.Constant},function(n){v=n.UIPlay},function(n){y=n.UIToast},function(n){m=n.default}],execute:function(){var k,w,b,x,M,S,D,I,C,N,P;c._RF.push({},"231f5OtlnBOtLgi7dSmUqgl","GameplayManager",void 0);var j=u.ccclass,_=u.property;n("GameplayManager",(k=j("GameplayManager"),w=_(l),b=_(l),x=_(f),M=_(y),k((I=e((D=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e=n.call.apply(n,[this].concat(a))||this,r(e,"menuNode",I,o(e)),r(e,"playNode",C,o(e)),r(e,"networkManager",N,o(e)),r(e,"uiToast",P,o(e)),e}t(e,n);var c=e.prototype;return c.onLoad=function(){e._instance=this,this.onJoinZoom(!1)},c.delegateEventSocket=function(){this.socket.on("connect",(function(){console.log("Socket.IO connected.")})),this.socket.on("message",(function(n){console.log("message ",n)}))},c.connectWallet=function(){var n=i(s().mark((function n(){var e,t,r=this;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.instance._connect().then((function(){e=r.userAddress=h.instance.address})).catch((function(){e=null}));case 2:if(this.playNode.getComponent(v).setNetwork(),!(t=localStorage.getItem("reconnectToken"))){n.next=10;break}return n.next=8,this.networkManager.reconnect(t);case 8:n.sent&&this.onJoinZoom(!0);case 10:return n.abrupt("return",e);case 11:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.waitForVariable=function(n,e){return void 0===e&&(e=100),new Promise((function(t){var r=setInterval((function(){var e=n();null!=e&&(clearInterval(r),t(e))}),e)}))},c.getPlayerData=function(){var n=i(s().mark((function n(){var e=this;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.socket=m(d.instance.SOCKET_URL,{transports:["websocket"]}),this.delegateEventSocket(),g.instance.setGameManager(this),g.instance.getPlayerByAddress(this),n.next=6,this.waitForVariable((function(){return e.playerData}));case 6:return n.abrupt("return",this.playerData);case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.getSessionResult=function(n){this.SessionData=n,null!=this.sessionData&&this.onJoinZoom(!0),g.instance.getParticipantion(this,n._id,(function(n){}))},c.getPlayerResult=function(n){this.playerData=n,g.instance.getSession(this)},c.onDisconnect=function(){var n=i(s().mark((function n(e){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.instance.disconnect();case 2:n.sent&&e();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c.onJoinZoom=function(n){(this.menuNode.active=!n,this.playNode.active=n,n)&&this.playNode.getComponent(v).initUI()},c.checkApprove=function(){var n=i(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("checkApprove"),n.next=3,h.instance.checkApprove();case 3:if(!(n.sent<e)){n.next=8;break}return console.log("approve"),n.next=8,h.instance.approve().then((function(n){t=n})).catch((function(){t=!1}));case 8:return n.abrupt("return",t);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c.createSession=function(){var n=i(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Math.floor(100*Math.random()),console.log("create room id: ",t),n.next=4,this.networkManager.createRoom(t+"",this.UserAddress);case 4:n.sent&&this.onJoinZoom(!0);case 6:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),c.joinSession=function(){var n=i(s().mark((function n(e,t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("join room id: ",e),n.next=3,this.networkManager.joinById(e,this.UserAddress);case 3:n.sent&&this.onJoinZoom(!0);case 5:case"end":return n.stop()}}),n,this)})));return function(e,t){return n.apply(this,arguments)}}(),c.joinSessionCPM=function(){var n=i(s().mark((function n(e){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.instance.joinSession(e.sessionId,e.buyIn,e.rn,e.signature);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c.joinRandomSession=function(){var n=i(s().mark((function n(e){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c.quitSession=function(){var n=i(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.networkManager.disconect();case 1:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.leaveSession=function(){},c.finishSession=function(){},c.getBalance=function(){var n=i(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.instance.getBalance();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),a(e,[{key:"UserAddress",get:function(){return h.instance.address}},{key:"SessionData",get:function(){return this.sessionData},set:function(n){this.sessionData=n}}],[{key:"instance",get:function(){return this._instance,this._instance}}]),e}(p)).prototype,"menuNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(D.prototype,"playNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(D.prototype,"networkManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(D.prototype,"uiToast",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=D))||S));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./UIManager.ts","./UIMain.ts","./LoadingScene.ts"],(function(e){var n,t,r,a,c,o,i,s,u,p,f;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,o=e.Component,i=e.view},function(e){s=e.GameManager},function(e){u=e.UIManager},function(e){p=e.UIMain},function(e){f=e.LoadingScene}],execute:function(){var l;a._RF.push({},"80ec7G1+Q1EpqjkNq8QqMns","GameScene",void 0);var g=c.ccclass;e("GameScene",g("GameScene")(l=function(e){function a(){return e.apply(this,arguments)||this}return n(a,e),a.prototype.onLoad=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.enableRetina(!0),e.next=3,s.instance.init();case 3:return e.next=5,u.open(p);case 5:return e.next=7,f.close();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a}(o))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameStorageModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StorageModelBase.ts"],(function(e){var t,n,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.StorageModelBase}],execute:function(){var a;n._RF.push({},"a7cd99gN5BBnIl3f2/FEcMz","GameStorageModel",void 0);var r=e("GameStorageModel",function(e){function n(){return e.call(this,{name:"game"})||this}return t(n,e),n.prototype.getFieldConfig=function(){return[{key:"language"},{key:"token"},{key:"walletType"}]},n}(o));a=r,r.instance=new a,n._RF.pop()}}}));

System.register("chunks:///_virtual/GiftsUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ethers.umd.mjs_cjs=&original=.js","./WalletManager.ts","./Merkle.ts","./AssetsManager.ts","./Res.ts","./Buffer.ts","./GameConfig.ts","./ethers.umd.js"],(function(e){var t,n,r,a,s,u,i,o,c,p,l,y,d;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.JsonAsset},null,function(e){s=e.WalletManager},function(e){u=e.default},function(e){i=e.AssetsManager},function(e){o=e.Res},function(e){c=e.base64ToAddress,p=e.Buffer},function(e){l=e.ChainNetwork,y=e.default},function(e){d=e.default}],execute:function(){var f,m;e({camClaim:function(){return N.apply(this,arguments)},claim:function(){return _.apply(this,arguments)},getMyGiftsInfo:A}),r._RF.push({},"4e9ddNaXrRFNLyjfc57vqNG","GiftsUtils",void 0);var b,x,h=[{type:"constructor",stateMutability:"nonpayable",inputs:[{type:"address",name:"token_",internalType:"address"},{type:"bytes32",name:"merkleRoot_",internalType:"bytes32"}]},{type:"event",name:"Claimed",inputs:[{type:"address",name:"account",internalType:"address",indexed:!1},{type:"uint256",name:"amount",internalType:"uint256",indexed:!1}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{type:"address",name:"previousOwner",internalType:"address",indexed:!0},{type:"address",name:"newOwner",internalType:"address",indexed:!0}],anonymous:!1},{type:"function",stateMutability:"view",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"camClaim",inputs:[{type:"address",name:"account",internalType:"address"},{type:"uint256",name:"amount",internalType:"uint256"},{type:"bytes32[]",name:"merkleProof",internalType:"bytes32[]"}]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"claim",inputs:[{type:"address",name:"account",internalType:"address"},{type:"uint256",name:"amount",internalType:"uint256"},{type:"bytes32[]",name:"merkleProof",internalType:"bytes32[]"}]},{type:"function",stateMutability:"view",outputs:[{type:"bool",name:"",internalType:"bool"}],name:"isClaimed",inputs:[{type:"address",name:"account",internalType:"address"}]},{type:"function",stateMutability:"view",outputs:[{type:"bytes32",name:"",internalType:"bytes32"}],name:"merkleRoot",inputs:[]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"address"}],name:"owner",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"renounceOwnership",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"setMerkleRoot",inputs:[{type:"bytes32",name:"merkleRoot_",internalType:"bytes32"}]},{type:"function",stateMutability:"view",outputs:[{type:"address",name:"",internalType:"address"}],name:"token",inputs:[]},{type:"function",stateMutability:"nonpayable",outputs:[],name:"transferOwnership",inputs:[{type:"address",name:"newOwner",internalType:"address"}]}],w=((f={})[l.Manta]=o.json.mainnetMerkleData.path,f[l.MantaTestnet]=o.json.testnetMerkleData.path,f),k=((m={})[l.Manta]="0x40E23231C871d048A0F643E13EC5240A231F49e1",m[l.MantaTestnet]="0xfC91D326218155b2ca767F832ACDE02c6fbeEd17",m);function g(){return b||(b=new d.Contract(k[y.instance.chainNetwork],h)),b}function T(){return v.apply(this,arguments)}function v(){return(v=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=5;break}return e.next=3,i.resources.load(w[y.instance.chainNetwork],a);case 3:t=e.sent,x=t.json.merkleData.map((function(e){return"string"==typeof e?[c(e),25]:Array.isArray(e)?[c(e[0]),e[1]]:[e.account,e.amount]}));case 5:return e.abrupt("return",x);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return new u(e.map((function(e){return p.from(d.utils.solidityKeccak256(["address","uint256"],[e[0],e[1]]).substring(2),"hex")})))}function C(){return R.apply(this,arguments)}function R(){return(R=t(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,e.next=5,T();case 5:return r=e.sent,a=M(r),console.log("merkle hex root:",a.getHexRoot()),e.abrupt("return",a.getHexProof(p.from(d.utils.solidityKeccak256(["address","uint256"],t).substring(2),"hex")));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return j.apply(this,arguments)}function j(){return(j=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w[y.instance.chainNetwork]){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,s.instance.getAddress();case 4:return t=e.sent,e.next=7,T();case 7:return r=e.sent,e.abrupt("return",r.find((function(e){return e[0]===t})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=t(n().mark((function e(){var t,r,a,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w[y.instance.chainNetwork]){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,s.instance.getSigner();case 4:return t=e.sent,e.next=7,A();case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,C();case 12:return a=e.sent,e.next=15,g().connect(t).camClaim(r[0],r[1],a);case 15:return u=e.sent,console.log("camClaim:",u),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=t(n().mark((function e(){var t,r,a,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.instance.getSigner();case 2:return t=e.sent,e.next=5,A();case 5:return r=e.sent,e.next=8,C();case 8:return a=e.sent,e.next=11,g().connect(t).claim(r[0],r[1],a);case 11:return u=e.sent,console.log(u),e.next=15,u.wait();case 15:return console.log(u),e.abrupt("return",u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r._RF.pop()}}}));

System.register("chunks:///_virtual/globalsWhitelist.ts",["cc","./makeMap.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.makeMap}],execute:function(){t._RF.push({},"e438beZYaBCcrA+wRGoN5rX","globalsWhitelist",void 0);e("isGloballyWhitelisted",n("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"));t._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalType.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"e6d79QXUJ9MKaiRFyU8C7cx","GlobalType",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Hover.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Cursor.ts","./NodeUtils.ts"],(function(t){var o,e,n,s,i,r,h,u;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.NodeEventType,i=t.Component},function(t){r=t.hideCursorPointer,h=t.showCursorPointer},function(t){u=t.hitTest}],execute:function(){var c;e._RF.push({},"0583aQilDBLXrfdvmadpM5Z","Hover",void 0);var a=n.ccclass,v=t("HoverEventType",function(t){return t.Start="hover-start",t.End="hover-end",t}({}));t("Hover",a("Hover")(c=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this)._show=!1,o}o(e,t);var n=e.prototype;return n.onEnable=function(){this.node.on(s.MOUSE_ENTER,this.onMouseEnter,this,!0),this.node.on(s.MOUSE_LEAVE,this.onMouseLeave,this,!0)},n.onDisable=function(){this._show&&(this._show=!1,r()),this.node.off(s.MOUSE_ENTER,this.onMouseEnter,this,!0),this.node.off(s.MOUSE_LEAVE,this.onMouseLeave,this,!0)},n.onMouseEnter=function(t){this._show||(this._show=!0,h(),this.node.emit(v.Start,t))},n.onMouseLeave=function(t){!this._show||t.target!==this.node&&u(this.node,t.getLocation())||(this._show=!1,r(),this.node.emit(v.End,t))},e}(i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Http.ts",["cc","./QueryString.ts","./Logger.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy},function(e){r=e.default},function(e){n=e.Logger}],execute:function(){t._RF.push({},"3652eCpqBdOtJjbl1GvwE8V","Http",void 0);var s=e("HttpRequestMethod",{GET:"GET",POST:"POST",HEAD:"HEAD",OPTIONS:"OPTIONS",PATCH:"PATCH",PUT:"PUT",DELETE:"DELETE"}),o=e("HttpRequestContentType",{FORM_URL_ENCODE:"application/x-www-form-urlencoded;charset=utf-8",JSON:"application/json;charset=utf-8"});e("Http",function(){function e(){}return e.send=function(e){n.info("Http request:",e),e.method=e.method?e.method:s.GET,e.contentType=e.contentType?e.contentType:o.JSON;var t=new XMLHttpRequest;null==e.getXhr||e.getXhr(t);var c=e.data||{},u=r.stringify(c);switch(e.method){case s.GET:u&&(e.url.includes("?")?e.url+="&"+u:e.url+="?"+u),c=null;break;default:if("object"==typeof c)switch(e.contentType){case o.FORM_URL_ENCODE:u&&(e.url.includes("?")?e.url+="&"+u:e.url+="?"+u),c=u;break;case o.JSON:c=JSON.stringify(c)}}t.open(e.method,e.url,!1!==e.async);var a=e.headers||{};for(var i in a["content-type"]=e.contentType,a)t.setRequestHeader(i,a[i]);return e.dataType&&(t.responseType=e.dataType),t.onerror=function(r){n.error("Http request error:",e,r),e.error&&e.error(null,t)},t.onreadystatechange=function(){if(4===t.readyState){var r=t.response;if("string"==typeof r)try{r=JSON.parse(r)}catch(e){}200===t.status?(n.success("Http request success:",e,r),e.success&&e.success(r,t)):(n.error("Http request error:",e,r),e.error&&e.error(r,t)),e.complete&&e.complete(r,t)}},t.send(c),t},e.syncSend=function(t){return new Promise((function(r,s){var o=t.success,c=t.error;t.success=function(e,t){o&&o(e,t),r(e)},t.error=function(e,t){c&&c(e,t),r(e)};try{var u=e.send(t)}catch(e){n.error("Http request error:",t,null),c&&c(null,u),s(e)}}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpApi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetConfig.ts","./Http.ts","./HttpRouter.ts","./GameStorageModel.ts"],(function(t){var e,r,n,i,a,o,s,l;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,n=t._decorator},function(t){i=t.NetConfig},function(t){a=t.Http,o=t.HttpRequestMethod},function(t){s=t.HttpRouter},function(t){l=t.GameStorageModel}],execute:function(){var c;r._RF.push({},"f2facItNV1JnaYIfelJKYYo","HttpApi",void 0);n.ccclass,n.property;var u=t("HttpApi",function(){function t(){this.thirdParty={findOpenSeaAssets:s.FindOpenSeaAssets}}var r=t.prototype;return r._fillParam=function(t){return t.headers=Object.assign(t.headers||{},{Authorization:l.instance.token}),t},r.invite=function(t){return a.syncSend(this._fillParam({url:this.apiUrl.Invite,method:o.POST,data:t}))},r.twitterAuth=function(){return a.syncSend(this._fillParam({url:this.apiUrl.TwitterAuth,method:o.GET,data:{callbackUrl:encodeURIComponent(location.href)}}))},r.twitterDisconnect=function(){return a.syncSend(this._fillParam({url:this.apiUrl.TwitterDisconnect,method:o.POST}))},r.getTwitterUserInfo=function(){return a.syncSend(this._fillParam({url:this.apiUrl.TwitterUserInfo,method:o.GET}))},r.verify=function(t){return a.syncSend(this._fillParam({url:this.apiUrl.TwitterVerify,method:o.POST,data:t}))},r.claim=function(t){return a.syncSend(this._fillParam({url:this.apiUrl.LeaderBoardClaim,method:o.POST,data:t}))},r.getLeaderBoardList=function(t){return a.syncSend(this._fillParam({url:this.apiUrl.LeaderBoardList,method:o.GET,data:t}))},r.getMyLeaderBoardInfo=function(t){return a.syncSend(this._fillParam({url:this.apiUrl.LeaderBoardMyInfo,method:o.GET,data:t}))},r.findNft=function(t){return a.syncSend(this._fillParam({url:this.thirdParty.findOpenSeaAssets,method:o.GET,data:t}))},e(t,[{key:"apiUrl",get:function(){return this._apiUrl||(this._apiUrl=function(t){var e=i.httpServerUrl,r=Object.create(null);for(var n in t)r[n]=e+t[n];return r}(s)),this._apiUrl}}]),t}());c=u,u.instance=new c,r._RF.pop()}}}));

System.register("chunks:///_virtual/HttpParameter.ts",["cc","./HttpRouter.ts"],(function(){var t;return{setters:[function(e){t=e.cclegacy},null],execute:function(){t._RF.push({},"29581rOipBIerY5CRzJLqnE","HttpParameter",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpRouter.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dd8bfksGfVEVJaIG2/UDMqm","HttpRouter",void 0);t("HttpRouter",function(t){return t.User="/user",t.Invite="/user/invite",t.Twitter="/twitter",t.TwitterAuth="/twitter/auth",t.TwitterDisconnect="/twitter/disconnect",t.TwitterCallback="/twitter/callback",t.TwitterUserInfo="/twitter/userinfo",t.TwitterVerify="/twitter/verify",t.LeaderBoard="/leaderBoard",t.LeaderBoardList="/leaderBoard/list",t.LeaderBoardMyInfo="/leaderBoard/myInfo",t.LeaderBoardClaim="/leaderBoard/claim",t.FindOpenSeaAssets="https://api.opensea.io/api/v1/assets",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/I18n.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StringUtils.ts","./GameConfig.ts","./TableManager.ts"],(function(t){var n,e,r,a,u,i,s,o;return{setters:[function(t){n=t.createClass,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy},function(t){u=t.formatString},function(t){i=t.GameLanguages2Text,s=t.GameLanguages},function(t){o=t.TableManager}],execute:function(){var c;a._RF.push({},"340e9LPT5ZAeJTbT3sXupyG","I18n",void 0);var g=t("I18n",function(){function t(){this._data={}}t.get=function(n,e){return t.instance.get(n,e)},t.getForEditor=function(n,e){return t.instance.getForEditor(n,e)};var a=t.prototype;return a.get=function(t,n){if(!t||!this._data)return"";var e=o.instance.getDataById(t);if(!e)return t;var r=e[i[this.language]];return n?u(r,n):r},a.getForEditor=function(){var t=e(r().mark((function t(n,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=3;break;case 3:return t.abrupt("return",this.get(n,e));case 4:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),n(t,[{key:"language",get:function(){return this._language||s.En},set:function(t){this._language!==t&&(this._language=t)}}]),t}());c=g,g.instance=new c,a._RF.pop()}}}));

System.register("chunks:///_virtual/I18nComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./I18nManager.ts"],(function(n){var e,t,o,r,a,c,s,p,u;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.createClass},function(n){r=n.cclegacy,a=n._decorator,c=n.ccenum,s=n.Component},function(n){p=n.GameLanguages},function(n){u=n.I18nManager}],execute:function(){var i,g,l,f;r._RF.push({},"b443d/N+gRE46B175xfATk9","I18nComponent",void 0);var y=a.ccclass,m=a.property;c(p);n("I18nComponent",(i=y("I18nComponent"),g=m({type:p}),i((e((f=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),o(e,[{key:"languages",get:function(){return u.instance.language||p.En},set:function(n){u.instance.init(n)}}]),e}(s)).prototype,"languages",[g],Object.getOwnPropertyDescriptor(f.prototype,"languages"),f.prototype),l=f))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/I18nLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18n.ts","./I18nComponent.ts"],(function(t){var e,n,r,o,s,i,c,a,p,u,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.createClass,o=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){i=t.cclegacy,c=t._decorator,a=t.Label,p=t.CCString},function(t){u=t.I18n},function(t){y=t.I18nComponent}],execute:function(){var h,f,l,g,_;i._RF.push({},"176c0m/9pdMkZRCw1sHWZeI","I18nLabel",void 0);var m=c.ccclass,k=c.property,I=c.requireComponent;t("I18nLabel",(h=m("I18nLabel"),f=I(a),l=k({type:p}),h(g=f((e((_=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype._change=function(){var t=o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.getForEditor(this._key,this._param);case 2:this.getComponent(a).string=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r(e,[{key:"key",get:function(){return this._key},set:function(t){this._key=t,this._change()}},{key:"param",get:function(){return this._param},set:function(t){this._param=t,this._change()}}]),e}(y)).prototype,"key",[l],Object.getOwnPropertyDescriptor(_.prototype,"key"),_.prototype),g=_))||g)||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/I18nManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18n.ts"],(function(n){var e,t,r,a;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy},function(n){a=n.I18n}],execute:function(){var c;r._RF.push({},"3e7caDXsPxK3JlpoDALmKcD","I18nManager",void 0);var u=n("I18nManager",function(){function n(){}return n.prototype.init=function(){var n=e(t().mark((function n(e){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.language=e,a.instance.language=this.language;case 2:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),n}());c=u,u.instance=new c,r._RF.pop()}}}));

System.register("chunks:///_virtual/I18nProperty.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18nComponent.ts"],(function(e){var t,r,i,n,o,l,a,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.Component},function(e){p=e.I18nComponent}],execute:function(){var c,s,b,y,g,f,h,m,d,v,z,I,w,P,V,T,F,_,k,C;o._RF.push({},"a53285hf2VKyb59NKltlr9b","I18nProperty",void 0);var D=l.ccclass,K=l.property,L=e("I18nPropertyField",(c=D("I18nPropertyField"),s=K({type:a,group:"target"}),b=K({type:u,group:"target"}),y=K({}),g=K({group:"value"}),f=K({group:"value"}),h=K({group:"value"}),c((v=t((d=function(){r(this,"nodeTarget",v,this),r(this,"componentTarget",z,this),r(this,"key",I,this),r(this,"numberValue",w,this),r(this,"stringValue",P,this),r(this,"boolValue",V,this)}).prototype,"nodeTarget",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(d.prototype,"componentTarget",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(d.prototype,"key",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=t(d.prototype,"numberValue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=t(d.prototype,"stringValue",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),V=t(d.prototype,"boolValue",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=d))||m));e("I18nProperty",(T=D("I18nProperty"),F=K({type:L}),T((C=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"property",C,n(t)),t}return i(t,e),t}(p)).prototype,"property",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=k))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/I18nSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18nComponent.ts"],(function(n){var t,e,r,o,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,r=n._decorator,o=n.Sprite},function(n){i=n.I18nComponent}],execute:function(){var c;e._RF.push({},"68461UnDQtAbIe+HPtjvjeG","I18nSprite",void 0);var p=r.ccclass,u=(r.property,r.requireComponent);n("I18nSprite",p("I18nSprite")(c=u(o)(c=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i))||c)||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/I18nSpriteFrame.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,c,u;return{setters:[function(e){r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){t=e.cclegacy,c=e._decorator,u=e.SpriteFrame}],execute:function(){var o;t._RF.push({},"fc8bcCkzphLhYP9H6gP/chh","I18nSpriteFrame",void 0);c.ccclass,c.property;var a=e("I18nSpriteFrame",function(){function e(){}return e.get=function(r){return e.instance.get(r)},e.prototype.get=function(){var e=r(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new u);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e}());o=a,a.instance=new o,t._RF.pop()}}}));

System.register("chunks:///_virtual/Icon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetsManager.ts","./Res.ts","./EditorUtils.ts","./Logger.ts"],(function(e){var n,t,r,s,a,c,u,i,o,f,p;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy,s=e._decorator,a=e.SpriteFrame,c=e.Texture2D,u=e.assetManager,i=e.ImageAsset},function(e){o=e.AssetsManager},function(e){f=e.Res},null,function(e){p=e.Logger}],execute:function(){r._RF.push({},"3abfct1iz5PY5JYNqgVRu8t","Icon",void 0);s.ccclass,s.property;e("Icon",function(){function e(){}return e.get=function(){var r=n(t().mark((function n(r,s,a){var c,u;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===a&&(a=!1),s=null!=(c=s)?c:f.directory.icon,u=s.path+r,!(e._icons[u]instanceof Promise)){n.next=8;break}return n.next=6,e._icons[u];case 6:n.next=18;break;case 8:if(e._icons[u]){n.next=15;break}return e._icons[u]=this._get(u,s,a),n.next=12,e._icons[u];case 12:e._icons[u]=n.sent,n.next=18;break;case 15:n.next=18;break;case 18:return n.abrupt("return",e._icons[u]);case 19:case"end":return n.stop()}}),n,this)})));return function(e,n,t){return r.apply(this,arguments)}}(),e.getByUrl=function(){var r=n(t().mark((function n(r){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e._icons[r]instanceof Promise)){n.next=5;break}return n.next=3,e._icons[r];case 3:n.next=14;break;case 5:if(e._icons[r]){n.next=11;break}return e._icons[r]=e._getByUrl(r),n.next=9,e._icons[r];case 9:case 11:n.next=14;break;case 14:return n.abrupt("return",e._icons[r]);case 15:case"end":return n.stop()}}),n)})));return function(e){return r.apply(this,arguments)}}(),e._get=function(){var e=n(t().mark((function e(n,r,s){var i,f,p,x;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===s&&(s=!1),e.prev=1,e.next=14;break;case 6:return f=e.sent,p=f[0].redirect.uuid,i=new a,e.next=11,new Promise((function(e,n){u.loadAny({uuid:p},(function(t,r){t?n(t):e(r)}))}));case 11:i.texture=e.sent,e.next=20;break;case 14:return e.next=16,o.newInstance(r.bundle);case 16:return e.next=18,o.getInstance(r.bundle).load(n+(s?"/spriteFrame":"/texture"),s?a:c);case 18:x=e.sent,s?i=x:(i=new a).texture=x;case 20:e.next=25;break;case 22:return e.prev=22,e.t0=e.catch(1),e.abrupt("return",null);case 25:return e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(n,t,r){return e.apply(this,arguments)}}(),e._getByUrl=function(){var e=n(t().mark((function e(n,r){var s,f,x,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r=!1),e.prev=1,!n.startsWith("http://")&&!n.startsWith("https://")){e.next=9;break}return s=new a,e.next=6,new Promise((function(e,t){var r=document.createElement("img");r.crossOrigin="anonymous",r.onload=function(){var n=new c;n.image=new i(r),e(n)},r.src=n}));case 6:s.texture=e.sent,e.next=24;break;case 9:e.next=20;break;case 12:return f=e.sent,x=f[0].redirect.uuid,s=new a,e.next=17,new Promise((function(e,n){u.loadAny({uuid:x},(function(t,r){t?n(t):e(r)}))}));case 17:s.texture=e.sent,e.next=24;break;case 20:return e.next=22,o.resources.load(n+(r?"/spriteFrame":"/texture"),r?a:c);case 22:l=e.sent,r?s=l:(s=new a).texture=l;case 24:e.next=30;break;case 26:return e.prev=26,e.t0=e.catch(1),p.warn("load icon error: "+n,e.t0),e.abrupt("return",null);case 30:return e.abrupt("return",s);case 31:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(n,t){return e.apply(this,arguments)}}(),e}())._icons=Object.create(null),r._RF.pop()}}}));

System.register("chunks:///_virtual/Identicon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./identicon.mjs_cjs=&original=.js","./identicon.js"],(function(e){var t,n,r,a,i,c,o;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e.ImageAsset,i=e.Texture2D,c=e.SpriteFrame},null,function(e){o=e.default}],execute:function(){e("identicon",(function(e,t){return s.apply(this,arguments)})),r._RF.push({},"65597c28DlO7bPCegXU44NG","Identicon",void 0);var u=Object.create(null);function s(){return(s=t(n().mark((function e(t,r){var s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u[s=t+"_"+r]){e.next=6;break}if(!(u[s]instanceof Promise)){e.next=5;break}return e.next=5,u[s];case 5:return e.abrupt("return",u[s]);case 6:return u[s]=new Promise((function(e,n){var u=document.createElement("img");u.onload=function(){var t=document.createElement("canvas").getContext("2d"),n=u.naturalWidth,o=u.naturalHeight;t.drawImage(u,0,0);var s=t.getImageData(0,0,n,o),l=Uint8ClampedArray.from(s.data),m=new a({_data:l,_compressed:!1,width:r,height:r,format:i.PixelFormat.RGBA8888}),d=new i;d.image=m;var f=new c;f.texture=d,e(f)},u.onerror=n,u.src="data:image/png;base64,"+new o(t,{size:r,format:"png"}).render().getBase64()})),e.next=9,u[s];case 9:return u[s]=e.sent,e.abrupt("return",u[s]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r._RF.pop()}}}));

System.register("chunks:///_virtual/InterfaceClass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs"],(function(e){var i,r,n,t,l,a,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){l=e.cclegacy},function(e){a=e.type,u=e.Schema}],execute:function(){var o,b,c,p,s,m,f,g,y,d,w,z,x,h,v,I,P,A,B,D,S,C,R,j,F,k,L,V,W,_,H,J,K,M,T,X,q,E,G,N,O,Q,U,Y,Z,$,ee,ie,re,ne,te,le,ae,ue;l._RF.push({},"ce13eFjXL9HBJ/yB3CVejfK","InterfaceClass",void 0);var oe=e("PlayerData",(o=a("string"),b=a("string"),c=a("string"),p=a("number"),s=a("string"),m=a("boolean"),f=a("boolean"),g=a("number"),y=a("string"),w=i((d=function(e){function i(){for(var i,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,n(i,"participantId",w,t(i)),n(i,"status",z,t(i)),n(i,"balance",x,t(i)),n(i,"role",h,t(i)),n(i,"currentAct",v,t(i)),n(i,"connected",I,t(i)),n(i,"isWining",P,t(i)),n(i,"index",A,t(i)),n(i,"betAmountARound",B,t(i)),i}return r(i,e),i}(u)).prototype,"participantId",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(d.prototype,"status",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(d.prototype,"balance",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=i(d.prototype,"role",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(d.prototype,"currentAct",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(d.prototype,"connected",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=i(d.prototype,"isWining",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(d.prototype,"index",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(d.prototype,"betAmountARound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d)),be=e("CardData",(D=a("number"),S=a("number"),R=i((C=function(e){function i(){for(var i,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,n(i,"rank",R,t(i)),n(i,"suit",j,t(i)),i}return r(i,e),i}(u)).prototype,"rank",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(C.prototype,"suit",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C)),ce=(e("StateData",(F=a({map:oe}),k=a("string"),L=a("number"),V=a("number"),W=a("number"),_=a("number"),H=a("string"),J=a("number"),K=a("string"),M=a("string"),T=a([be]),X=a("number"),q=a("number"),E=a("number"),N=i((G=function(e){function i(){for(var i,r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];return i=e.call.apply(e,[this].concat(l))||this,n(i,"players",N,t(i)),n(i,"totalPlot",O,t(i)),n(i,"index",Q,t(i)),n(i,"indexDealer",U,t(i)),n(i,"indexSmallBlind",Y,t(i)),n(i,"indexBigBlind",Z,t(i)),n(i,"owner",$,t(i)),n(i,"gameStatus",ee,t(i)),n(i,"amountRaise",ie,t(i)),n(i,"minAmount",re,t(i)),n(i,"sharedCards",ne,t(i)),n(i,"currentIndexPlayer",te,t(i)),n(i,"preIndexPlayer",le,t(i)),n(i,"lastIndexPlayer",ae,t(i)),i}return r(i,e),i}(u)).prototype,"players",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(G.prototype,"totalPlot",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(G.prototype,"index",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(G.prototype,"indexDealer",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=i(G.prototype,"indexSmallBlind",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=i(G.prototype,"indexBigBlind",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=i(G.prototype,"owner",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=i(G.prototype,"gameStatus",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=i(G.prototype,"amountRaise",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=i(G.prototype,"minAmount",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=i(G.prototype,"sharedCards",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=i(G.prototype,"currentIndexPlayer",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=i(G.prototype,"preIndexPlayer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=i(G.prototype,"lastIndexPlayer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G)),e("WaitVariable",(function(){this.waitForVariable=function(e,i){return void 0===i&&(i=100),new Promise((function(r){var n=setInterval((function(){var i=e();1==i&&(clearInterval(n),r(i))}),i)}))}})));ue=ce,ce.instance=new ue,l._RF.pop()}}}));

System.register("chunks:///_virtual/IntersectionUtils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t("pointInPolygon",(function(t,n){for(var e=!1,r=t.x,c=t.y,i=n.length,o=0,s=i-1;o<i;s=o++){var u=n[o].x,a=n[o].y,f=n[s].x,l=n[s].y;a>c!=l>c&&r<(f-u)*(c-a)/(l-a)+u&&(e=!e)}return e})),n._RF.push({},"07a8bf+KCRMtJSh1Ap8j7wT","IntersectionUtils",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/IpfsUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Icon.ts"],(function(t){var e,n,r,s;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy},function(t){s=t.Icon}],execute:function(){r._RF.push({},"a8bd5NTPKVClp0LzgzhoK+J","IpfsUtils",void 0);var u=Object.create(null);t("IpfsUtils",function(){function t(){}return t.getHash=function(t){return t.startsWith("ipfs://")?t.substring(7):t},t.getJson=function(){var r=e(n().mark((function r(s){var c;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=t.getHash(s),!(u[c]instanceof Promise)){r.next=6;break}return r.next=4,u[c];case 4:r.next=10;break;case 6:return u[c]=new Promise(e(n().mark((function t(e){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://ipfs.io/ipfs/"+c);case 2:return r=t.sent,t.t0=e,t.next=6,r.json();case 6:t.t1=t.sent,(0,t.t0)(t.t1);case 8:case"end":return t.stop()}}),t)})))),r.next=9,u[c];case 9:u[c]=r.sent;case 10:return r.abrupt("return",u[c]);case 11:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),t.getImageUrl=function(e){return"https://ipfs.io/ipfs/"+t.getHash(e)},t.getImage=function(){var r=e(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.getByUrl(t.getImageUrl(r)));case 1:case"end":return e.stop()}}),e)})));return function(t){return r.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/LabelExpand.ts",["cc","./Cursor.ts"],(function(){var t,e,o,n,i;return{setters:[function(n){t=n.cclegacy,e=n.Label,o=n.NodeEventType},function(t){n=t.hideCursorPointer,i=t.showCursorPointer}],execute:function(){t._RF.push({},"aa16cbLVABH/7ZFHKakBD3d","LabelExpand",void 0);var s=function(){this.isUnderline&&(d.set(this.node,!0),i())},r=function(){d.get(this.node)&&(d.delete(this.node),n())},a=e.prototype.onLoad,d=new WeakMap;e.prototype.onLoad=function(){a.call(this);var t=this.node;t.on(o.MOUSE_ENTER,s,this,!0),t.on(o.MOUSE_LEAVE,r,this,!0)};var h=e.prototype.onDisable;e.prototype.onDisable=function(){h.call(this);d.get(this.node)&&(d.delete(this.node),n()),this.node.off(o.MOUSE_ENTER,s,this,!0),this.node.off(o.MOUSE_LEAVE,r,this,!0)},t._RF.pop()}}}));

System.register("chunks:///_virtual/LaunchArguments.ts",["cc","./WebUtils.ts"],(function(t){var r,e,s,c;return{setters:[function(t){r=t.cclegacy,e=t._decorator,s=t.sys},function(t){c=t.WebUtils}],execute:function(){r._RF.push({},"1bed0/BcJ1Kro2YSgV459tg","LaunchArguments",void 0);e.ccclass;var n=t("default",{host:"",port:"",storageKey:"",room:"",invite:""});if(s.isBrowser){var o=c.getUrlParams();if(o)for(var a in n)o.hasOwnProperty(a)&&(n[a]=o[a])}r._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./UILoading.ts","./QueueManager.ts","./AssetsManager.ts","./UILoadingPanel.ts"],(function(n){var e,r,t,a,u,o,s,i;return{setters:[function(n){e=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){t=n.cclegacy},function(n){a=n.UIManager},function(n){u=n.UILoading},function(n){o=n.QueueManager},function(n){s=n.AssetsManager},function(n){i=n.UILoadingPanel}],execute:function(){t._RF.push({},"6d1d3eRDoBNvouvhUI5pDd5","Loading",void 0),n("Loading",function(){function n(){}return n.showLoading=function(){var t=e(r().mark((function e(t){var u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.open(i,{arg:t});case 2:if((u=e.sent)||n._loading){e.next=7;break}return e.next=6,a.open(i,{arg:t});case 6:u=e.sent;case 7:return u?n._loading=u:(n._loading&&n._loading.onUIOpen(t),u=n._loading),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(n){return t.apply(this,arguments)}}(),n.hideLoading=function(){n._loadingCount>0||(a.close(i),n._loading=null)},n.loadingRunCode=function(){var t=e(r().mark((function e(t,a){var u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._loadingCount++,e.next=3,n.showLoading("object"==typeof t?t:{type:t});case 3:if(u=e.sent){e.next=7;break}return n._loadingCount--,e.abrupt("return");case 7:return e.prev=7,e.next=10,a(u);case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(7),console.error(e.t0),e.t0;case 17:return e.prev=17,n._loadingCount--,n.hideLoading(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[7,13,17,21]])})));return function(n,e){return t.apply(this,arguments)}}(),n.openUI=function(n,t){return o.getInstance("loading").push(e(r().mark((function e(){var o,s,i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.open(u,{arg:t?t.loadingArgs:null});case 2:return o=e.sent,s=t&&t.uiConfig&&t.uiConfig.progressCallback,i=o.getOnProgress(),t?t.uiConfig||(t.uiConfig={}):t={uiConfig:{}},t.uiConfig.progressCallback=function(){i.apply(void 0,arguments),s&&s.apply(void 0,arguments)},c=null,e.prev=8,e.next=11,a.open(n,t.uiConfig);case 11:if(c=e.sent){e.next=15;break}return o.close(),e.abrupt("return",c);case 15:return e.next=17,o.$wait();case 17:return e.abrupt("return",c);case 20:return e.prev=20,e.t0=e.catch(8),o.close(),e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,null,[[8,20]])}))))},n.loadRes=function(n){return o.getInstance("loading").push(e(r().mark((function e(){var t,o,i,c,g,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.open(u,{arg:n.loadingArgs?n.loadingArgs:null});case 2:return t=e.sent,o=t.getOnProgress(),"function"!=typeof(i=n.fnArgs.pop())&&(n.fnArgs.push(i),i=null),c=function(){o.apply(void 0,arguments),i&&i.apply(void 0,arguments)},g=null,e.prev=8,e.next=11,s.newInstance(n.bundle);case 11:return e.next=13,(p=s.getInstance(n.bundle))[n.fnName].apply(p,n.fnArgs.concat([c]));case 13:return g=e.sent,e.next=16,t.$wait();case 16:return e.abrupt("return",g);case 19:return e.prev=19,e.t0=e.catch(8),t.close(),e.abrupt("return",g);case 23:case"end":return e.stop()}}),e,null,[[8,19]])}))))},n}())._loadingCount=0,t._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts","./Res.ts","./AssetsManager.ts","./TweenUtils.ts"],(function(e){var n,t,o,r,s,i,a,c,u,d,l;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.director,s=e.ProgressBar,i=e.Label},function(e){a=e.ComponentExpand},function(e){c=e.Res,u=e.LoadPriority},function(e){d=e.AssetsManager},function(e){l=e.TweenUtils}],execute:function(){var f;t._RF.push({},"1b699LhqERCWoNqO7VsfA2n","LoadingScene",void 0);var p=o.ccclass;o.property;e("LoadingScene",p("LoadingScene")(f=function(e){function t(){return e.apply(this,arguments)||this}n(t,e),t.close=function(){return t._instance?new Promise((function(e){var n=t._instance;return t._instance=null,r.removePersistRootNode(n.node),l.fadeOut(n.node).call((function(){return n.node.destroy()})).call((function(){return e()})).start()})):Promise.resolve()};var o=t.prototype;return o.start=function(){if(r.addPersistRootNode(this.node),t._instance=this,window.document){var e=document.getElementById("launch-page");e&&(n=e,o=1,s=setInterval((function(){if(o<=.1)return clearInterval(s),void n.remove();n.style.opacity=o,o-=.2}),50))}var n,o,s;this._loadRes()},o._loadRes=function(){var e=this,n=c.startLoadResList.filter((function(e){return e.loadPriority>=u.VeryHigh})),t=0;d.resources.load(n.map((function(e){return e.path})),(function(n,o,a){var c=n/o;c<t||(t=c,e.getUIComponent("progress-bar",s).progress=c,e.getUIComponent("num",i).string=(100*c).toFixed(2)+"%",1===c&&r.loadScene("game"))}))},t}(a))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalStorage.ts",["cc","./LaunchArguments.ts","./GameConfig.ts"],(function(t){var e,n,o,r;return{setters:[function(t){e=t.cclegacy,n=t.sys},function(t){o=t.default},function(t){r=t.GameStoreVersion}],execute:function(){e._RF.push({},"a2c4fCJWS1FPp4xf1o273t8","LocalStorage",void 0);var c=o.storageKey+"_"+r+"_";t("LocalStorage",function(){function t(){}return t.getItem=function(t,e){var o=n.localStorage.getItem(c+t);return null===o?e:o},t.setItem=function(t,e){return n.localStorage.setItem(c+t,e)},t.removeItem=function(t){return n.localStorage.removeItem(c+t)},t.clear=function(){return n.localStorage.clear()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc","./consola.browser.mjs_cjs=&original=.js","./consola.browser.js"],(function(e){var r,o;return{setters:[function(e){r=e.cclegacy},null,function(e){o=e.default}],execute:function(){r._RF.push({},"eaa39rN8hRFFpVmOR6Ui6Lr","Logger",void 0);e("Logger",o);r._RF.pop()}}}));

System.register("chunks:///_virtual/looseEqual.ts",["cc","./shared.ts"],(function(e){var r,t,n,i,u;return{setters:[function(e){r=e.cclegacy},function(e){t=e.isDate,n=e.isSymbol,i=e.isArray,u=e.isObject}],execute:function(){function o(e,r){if(e===r)return!0;var f=t(e),s=t(r);if(f||s)return!(!f||!s)&&e.getTime()===r.getTime();if(f=n(e),s=n(r),f||s)return e===r;if(f=i(e),s=i(r),f||s)return!(!f||!s)&&function(e,r){if(e.length!==r.length)return!1;for(var t=!0,n=0;t&&n<e.length;n++)t=o(e[n],r[n]);return t}(e,r);if(f=u(e),s=u(r),f||s){if(!f||!s)return!1;if(Object.keys(e).length!==Object.keys(r).length)return!1;for(var c in e){var l=e.hasOwnProperty(c),a=r.hasOwnProperty(c);if(l&&!a||!l&&a||!o(e[c],r[c]))return!1}}return String(e)===String(r)}e({looseEqual:o,looseIndexOf:function(e,r){return e.findIndex((function(e){return o(e,r)}))}}),r._RF.push({},"e7907l6HwJOHbcbA3zX+GzC","looseEqual",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./ZKHoldemAnalytics.ts","./HttpApi.ts","./HttpParameter.ts","./HttpRouter.ts","./AssetsManager.ts","./Directory.ts","./Icon.ts","./AudioManager.ts","./ButtonPositionAnimation.ts","./CustomSpacingLabel.ts","./NumberLabel.ts","./OpenUIWithClick.ts","./OpenUrlWithClick.ts","./OptionalBlockInputEvents.ts","./OptionalSafeArea.ts","./Popup.ts","./Recovery.ts","./SetColor.ts","./SpriteFrameList.ts","./SpriteFrameListAnimation.ts","./Switch.ts","./UIStaticBatchMarkAsDirty.ts","./GameConfig.ts","./NetConfig.ts","./Res.ts","./BlindsInEffect.ts","./BlindsOutEffect.ts","./DissolutionInEffect.ts","./DissolutionOutEffect.ts","./EffectBase.ts","./RevealInEffect.ts","./RevealOutEffect.ts","./EventConstant.ts","./EventTarget.ts","./ButtonExpand.ts","./ComponentExpand.ts","./EditBoxExpand.ts","./LabelExpand.ts","./I18n.ts","./I18nComponent.ts","./I18nLabel.ts","./I18nManager.ts","./I18nProperty.ts","./I18nSprite.ts","./I18nSpriteFrame.ts","./alchemy.mjs","./sendbird.mjs_cjs=&original=.cjs","./sendbird.mjs","./super-layout.ts","./super-scrollview.ts","./baseHandlers.ts","./collectionHandlers.ts","./computed.ts","./deferredComputed.ts","./dep.ts","./effect.ts","./effectScope.ts","./operations.ts","./reactive.ts","./reactivity.ts","./ref.ts","./warning.ts","./codeframe.ts","./domAttrConfig.ts","./domTagConfig.ts","./escapeHtml.ts","./globalsWhitelist.ts","./looseEqual.ts","./makeMap.ts","./normalizeProp.ts","./patchFlags.ts","./shapeFlags.ts","./shared.ts","./slotFlags.ts","./toDisplayString.ts","./typeUtils.ts","./errorHandling.ts","./watch.ts","./CPMManager.ts","./Constant.ts","./ContractManager.ts","./GameManager.ts","./GameplayManager.ts","./InterfaceClass.ts","./NetworkManager.ts","./TwitterManager.ts","./enum.ts","./ModelBase.ts","./ModelUtils.ts","./StorageModelBase.ts","./GameStorageModel.ts","./UserStorageModel.ts","./Http.ts","./StatusCode.ts","./OverrideMath.ts","./LaunchArguments.ts","./ZKHoldemSDKManager.ts","./Table2.ts","./TableManager.ts","./table.ts","./tableEnums.ts","./LocalStorage.ts","./Logger.ts","./NodePoolManager.ts","./QueryString.ts","./QueueManager.ts","./CallbackType.ts","./GlobalType.ts","./UIType.ts","./UIBase.ts","./UIConfig.ts","./UIConstant.ts","./UIDecorator.ts","./UIInfo.ts","./UIItem.ts","./UIManager.ts","./UIRoot.ts","./UIToastManager.ts","./UIBlackView.ts","./UIBlockInputEvents.ts","./UIErrorInfo.ts","./UILoading.ts","./UITips.ts","./UITipsPanel.ts","./UIToast.ts","./AlchemyUtils.ts","./Buffer.ts","./ButtonUtils.ts","./ColorUtils.ts","./Cursor.ts","./DateUtils.ts","./DebugUtils.ts","./Decorator.ts","./EditorUtils.ts","./EthereumUtils.ts","./Identicon.ts","./IntersectionUtils.ts","./IpfsUtils.ts","./Loading.ts","./MathUtils.ts","./Merkle.ts","./Meson.ts","./NodeUtils.ts","./PromiseUtils.ts","./RichTextUtils.ts","./Screenshot.ts","./StringUtils.ts","./Tips.ts","./TweenUtils.ts","./Utils.ts","./Validate.ts","./Vector2Utils.ts","./WebUtils.ts","./Padding.ts","./Types.ts","./WalletConnectionAdapter.ts","./WalletManager.ts","./WalletUtils.ts","./ABIContract.ts","./ERC20.ts","./ERC721Enumerable.ts","./TokenAbi.ts","./MetaMaskAdapter.ts","./OKXAdapter.ts","./WalletConnectAdapter.ts","./Hover.ts","./SetWinSize.ts","./GameHelper.ts","./PokerTypeHelper.ts","./GameScene.ts","./LoadingScene.ts","./PopupInput.ts","./PopupJoinGame.ts","./PopupManager.ts","./UIBuyIn.ts","./UIMain.ts","./UIMenu.ts","./UIPlay.ts","./UISetStakeLevel.ts","./ChatItem.ts","./Player.ts","./Poker.ts","./PokerGroup.ts","./PokerModel.ts","./UIRankItem.ts","./UIThemeItem.ts","./UIBuyChips.ts","./UIBuyInHistory.ts","./UIBuyZChips.ts","./UIFund.ts","./UIGM.ts","./UIInvite.ts","./UIInviteToRoom.ts","./UIJoinRoom.ts","./UILoadingPanel.ts","./UINftBag.ts","./UINotNftTip.ts","./UIRanking.ts","./UIRetweet.ts","./UISelectPlayTheme.ts","./UISelectWallet.ts","./UISpectating.ts","./UIUserSettings.ts","./NftBox.ts","./NftCard.ts","./UIBuyNft.ts","./UIBuyNftConfirm.ts","./GiftsUtils.ts","./UIGifts.ts","./SubUILeaderBoard.ts","./SubUINavigationBar.ts","./SubUIUserInfo.ts","./ChatManager.ts","./ChatView.ts","./ChipsManager.ts","./GameConst.ts","./GameLogic.ts","./OperationManager.ts","./PlayerManger.ts","./PokerManger.ts","./RaiseManger.ts","./SettleManager.ts","./PlayThemeCommon.ts","./PlayThemeManager.ts","./PlayThemeSprite.ts","./SelectPath.ts","./colyseus.mjs_cjs=&original=.js"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/makeMap.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){e("makeMap",(function(e,t){for(var n=Object.create(null),r=e.split(","),u=0;u<r.length;u++)n[r[u]]=!0;return t?function(e){return!!n[e.toLowerCase()]}:function(e){return!!n[e]}})),t._RF.push({},"e1a3anQVqtAeKpAAuAZLTS5","makeMap",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t({formatNumberToDigitGrouping:function(t){var n=t.toString();if(n.length<=3)return n;var r="",o=n.length,e=0;for(;o--;)0!==e&&e%3==0&&(r=","+r),r=n[o]+r,e++;return r},randomFloat:function(t,n){return Math.random()*(n-t)+t},randomInt:function(t,n){return Math.floor(Math.random()*(n-t+1)+t)}}),n._RF.push({},"5d55bm05+VHoI0WpSRS1tTE","MathUtils",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Merkle.ts",["cc","./ethers.umd.mjs_cjs=&original=.js","./Buffer.ts","./ethers.umd.js"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy},null,function(e){r=e.Buffer},function(e){n=e.default}],execute:function(){t._RF.push({},"5ddefSMzFdGXpIx0CynvaiX","Merkle",void 0);e("default",function(){function e(t){this.elements=[].concat(t),this.elements.sort(r.compare),this.elements=e.bufDedup(this.elements),this.bufferElementPositionIndex=this.elements.reduce((function(e,t,n){return e[r.from(t).toString("hex")]=n,e}),{}),this.layers=this.getLayers(this.elements)}var t=e.prototype;return t.getLayers=function(e){if(0===e.length)throw new Error("empty tree");var t=[];for(t.push(e);t[t.length-1].length>1;)t.push(this.getNextLayer(t[t.length-1]));return t},t.getNextLayer=function(t){return t.reduce((function(t,r,n,o){return n%2==0&&t.push(e.combinedHash(r,o[n+1])),t}),[])},e.combinedHash=function(t,o){return t?o?r.from(n.utils.keccak256(e.sortAndConcat(t,o)).substring(2),"hex"):t:o},t.getRoot=function(){return this.layers[this.layers.length-1][0]},t.getHexRoot=function(){return r.from(this.getRoot()).toString("hex")},t.getProof=function(t){var n=this.bufferElementPositionIndex[r.from(t).toString("hex")];if("number"!=typeof n)throw new Error("Element does not exist in Merkle tree");return this.layers.reduce((function(t,r){var o=e.getPairElement(n,r);return o&&t.push(o),n=Math.floor(n/2),t}),[])},t.getHexProof=function(t){var r=this.getProof(t);return e.bufArrToHexArr(r)},e.getPairElement=function(e,t){var r=e%2==0?e+1:e-1;return r<t.length?t[r]:null},e.bufDedup=function(e){return e.filter((function(t,r){return 0===r||!e[r-1].equals(t)}))},e.bufArrToHexArr=function(e){if(e.some((function(e){return!r.isBuffer(e)})))throw new Error("Array is not an array of buffers");return e.map((function(e){return"0x"+e.toString("hex")}))},e.sortAndConcat=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.concat([].concat(t).sort(r.compare))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Meson.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletManager.ts"],(function(e){var n,t,r,o;return{setters:[function(e){n=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.WalletManager}],execute:function(){r._RF.push({},"2fd8cWBIWVLV6l+Bb6el36K","Meson",void 0);e("Meson",function(){function e(){}return e.open=function(){var e=n(t().mark((function e(){var n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.instance.adapter){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,o.instance.getAddress();case 4:e.t0=e.sent,e.t1="https://meson.to/manta/"+e.t0,n=e.t1+"?token=eth",window.open(n,"meson.to","width=375,height=640");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MetaMaskAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletConnectionAdapter.ts","./index.mjs_cjs=&original=3.js","./Tips.ts","./ethers.umd.mjs_cjs=&original=.js","./ethers.umd.js","./index3.js"],(function(e){var t,n,r,s,a,u,o,i;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy},function(e){a=e.WalletConnectionAdapter},null,function(e){u=e.showErrorToast},null,function(e){o=e.default},function(e){i=e.default}],execute:function(){s._RF.push({},"e4ebdtd1T9Cf5P90RxqfV2N","MetaMaskAdapter",void 0);e("MetaMaskAdapter",function(e){function s(){return e.apply(this,arguments)||this}return t(s,e),s.prototype.connect=function(){var e=n(r().mark((function e(){var t,n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:if(t=e.sent){e.next=6;break}return u("Please install MetaMask"),e.abrupt("return",!1);case 6:return n=new o.providers.Web3Provider(t,"any"),e.prev=7,e.next=10,n.send("eth_requestAccounts",[]);case 10:s=e.sent,this._account.value=s.map((function(e){return o.utils.getAddress(e)})),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(7),new Error(e.t0.message);case 17:return this._provider=n,this._ethereumProvider=t,this._onAccountsChanged(),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(){return e.apply(this,arguments)}}(),s}(a));s._RF.pop()}}}));

System.register("chunks:///_virtual/ModelBase.ts",["cc","./EventTarget.ts"],(function(t){var i,e,n;return{setters:[function(t){i=t.cclegacy,e=t.js},function(t){n=t.EventTarget}],execute:function(){i._RF.push({},"aed64S0y/NC1KU2jYOZ1UpQ","ModelBase",void 0);var s=t("Watch",function(){function t(t,i,e){this.key=t,this.fn=i,this.target=e}return t.prototype.call=function(i,e,n){this.key===t.ALL?this.fn.call(this.target,i,e,n):i===this.key&&this.fn.call(this.target,e,n)},t}());s.ALL="*";t("ModelBase",function(){function t(t){this._watchList=[],this._isWatch=!0,this._model=null!=t?t:{},this._initField(),this.initEvent()}var i=t.prototype;return i._initField=function(){this.getFieldConfig().forEach(this.addField.bind(this))},i.getFieldConfig=function(){return[]},i.setModel=function(t){this._model=t},i.getModel=function(){return this._model},i.addField=function(t){var i=this;e.getset(this,t.key,(function(){if("function"==typeof t.get)return t.get.call(i);var e="function"==typeof t.defVal?t.defVal():t.defVal;return i.get(t.key,e)}),(function(e){"function"==typeof t.set?t.set.call(i,e):i.set(t.key,e)}),!0,!0)},i.get=function(t,i){return this._model.hasOwnProperty(t)?this._model[t]:(this.set(t,i),i)},i.set=function(t,i){if(this._model[t]===i)return!1;var e=this._model[t];return this._model[t]=i,this._trigger(t,i,e),!0},i.remove=function(t){var i=this._model[t];delete this._model[t],this._trigger(t,null,i)},i.clear=function(){for(var t in this._model)this.remove(t)},i.switchWatch=function(t){this._isWatch=t},i.watch=function(t,i){var e=new s(s.ALL,t,i);return this._watchList.push(e),e},i.watchField=function(t,i,e){var n=new s(t,i,e);return this._watchList.push(n),n},i.off=function(t){this._watchList.splice(this._watchList.indexOf(t),1)},i._trigger=function(t,i,e){if(this._isWatch)for(var n=0,s=this._watchList.length;n<s;n++)this._watchList[n].call(t,i,e)},i.getEventList=function(){return{}},i.initEvent=function(){var t=this.getEventList();for(var i in t)n.eventManager.on(i,t[i],this)},i.offEvent=function(){n.eventManager.offByTarget(this)},i.destroy=function(){for(var t in this.offEvent(),this)this[t]=null},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ModelUtils.ts",["cc","./ModelBase.ts","./StorageModelBase.ts"],(function(e){var t,i,o;return{setters:[function(e){t=e.cclegacy},function(e){i=e.ModelBase},function(e){o=e.StorageModelBase}],execute:function(){t._RF.push({},"4fc6fg88j9Jop5dCQmZVH+t","ModelUtils",void 0);e("ModelUtils",function(){function e(){}return e.createModel=function(e){var t=new i(e.data);if(!e.disableAutoFillField)for(var o in e.data)t.addField({key:o});return e.mix&&e.mix.forEach((function(e){t.addField(e)})),t},e.createStorageModel=function(e){var t=new o(e.param);if(!e.disableAutoFillField)for(var i in e.param.model)t.addField({key:i});return e.mix&&e.mix.forEach((function(e){t.addField(e)})),t},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/NetConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./LaunchArguments.ts"],(function(e){var t,n,o,r,c,i;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,o=e._decorator},function(e){r=e.GameEnvironment,c=e.default},function(e){i=e.default}],execute:function(){var l,a;n._RF.push({},"2ded8gceHRGv6DbADpuHy/y","NetConfig",void 0);o.ccclass,o.property;var s=i.host,u=i.port,p=s||(window.location&&location.hostname?location.hostname:"127.0.0.1"),m=u||"9002",v=((l={})[r.LocalDevelopment]="http://"+p+":"+m,l[r.LanDevelopment]="http://"+(s||"192.168.51.8")+":"+(u||"9002"),l[r.Development]="https://api.zkholdem-server.testnet.zkholdem.xyz",l[r.Production]="https://api.zkholdem-server.mainnet.zkholdem.xyz",l),f=((a={})[r.LocalDevelopment]="ws://"+p+":"+m,a[r.LanDevelopment]="http://"+(s||"192.168.51.8")+":"+(u||"9002"),a[r.Development]="ws://"+(s||"192.168.51.8")+":"+(u||"9002"),a);e("NetConfig",function(){function e(){}return t(e,null,[{key:"httpServerUrl",get:function(){return v[c.instance.environment]}},{key:"socketServerUrl",get:function(){return f[c.instance.environment]}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./Constant.ts","./enum.ts","./colyseus.js"],(function(e){var t,n,o,s,r,a,i,c,l,u,h,g,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,s=e.assertThisInitialized,r=e.createClass,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,l=e._decorator,u=e.Component},null,function(e){h=e.Constant},function(e){g=e.GameServerMessage,p=e.ClientMessage},function(e){f=e.default}],execute:function(){var m,d,v,y,S,M;c._RF.push({},"a35a7yW9XZElq4easNHXquo","NetworkManager",void 0);var w=l.ccclass,E=l.property;e("NetworkManager",w("NetworkManager")((v=t((d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"hostname",v,s(t)),o(t,"port",y,s(t)),o(t,"useSSL",S,s(t)),o(t,"isLocalhost",M,s(t)),t}n(t,e);var c=t.prototype;return c.start=function(){this.isLocalhost?this.client=new f.Client((this.useSSL?"wss":"ws")+"://"+this.hostname+([443,80].includes(this.port)||this.useSSL?"":":"+this.port)):this.client=new f.Client(h.instance.GAME_SERVER_URL)},c.createRoom=function(){var e=a(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.create("zkholdem",{roomId:t,token:h.instance.TOKEN_ADDRESS,wallet:n});case 3:return this.room=e.sent,console.log("createRoom successfully!"),console.log("user's sessionId:",this.room.sessionId),this.registerEvent(),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),c.joinById=function(){var e=a(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.joinById(t,{wallet:n});case 3:return this.room=e.sent,console.log("joined successfully!"),console.log("user's sessionId:",this.room.sessionId),this.registerEvent(),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),c.reconnect=function(){var e=a(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.client.reconnect(t);case 3:return this.room=e.sent,console.log("reconnect successfully!"),console.log("user's sessionId:",this.room.sessionId),this.registerEvent(),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),c.disconect=function(){var e=a(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.room.leave();case 3:return t=e.sent,console.log("disconect successfully! ",t),localStorage.removeItem("reconnectToken"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),c.registerEvent=function(){var e=this,t=this.room.reconnectionToken;localStorage.setItem("reconnectToken",t),this.room.onStateChange((function(t){if(console.log("onStateChange: ",t),e.onStateChange){var n=t;console.log("state ",n),e.onStateChange(n)}})),this.room.state.players.onAdd=function(){console.log("onAdd")},this.room.state,this.room.onLeave((function(e){console.log("onLeave:",e)})),this.room.onMessage(g.ChangePlayerStatusFail,(function(t){console.log("ChangePlayerStatusFail ",t),e.onMessageEvent(g.ChangePlayerStatusFail,t)})),this.room.onMessage(g.DealCardWhenStart,(function(t){console.log("DealCardWhenStart ",t),e.onMessageEvent(g.DealCardWhenStart,t)})),this.room.onMessage(g.MakeActionFail,(function(t){console.log("MakeActionFail ",t),e.onMessageEvent(g.MakeActionFail,t)})),this.room.onMessage(g.MakeActionSuccess,(function(t){console.log("MakeActionSuccess ",t),e.onMessageEvent(g.MakeActionSuccess,t)})),this.room.onMessage(g.NotEnoughBalance,(function(t){console.log("PreLopSuccess ",t),e.onMessageEvent(g.NotEnoughBalance,t)})),this.room.onMessage(g.StartRoundFail,(function(t){console.log("StartRoundFail ",t),e.onMessageEvent(g.StartRoundFail,t)})),this.room.onMessage(g.StartRoundSuccess,(function(t){console.log("StartRoundSuccess ",t),e.onMessageEvent(g.StartRoundSuccess,t)})),this.room.onMessage(g.UpdateMinAmountFail,(function(t){console.log("UpdateMinAmountFail ",t),e.onMessageEvent(g.UpdateMinAmountFail,t)})),this.room.onMessage(g.ZoomFull,(function(t){console.log("ZoomFull ",t),e.onMessageEvent(g.ZoomFull,t)})),this.room.onMessage(g.ShowAllCards,(function(t){console.log("ShowAllCards ",t),e.onMessageEvent(g.ShowAllCards,t)})),this.room.onMessage(g.PlayerAlreadyPlay,(function(t){console.log("PlayerAlreadyPlay ",t),e.onMessageEvent(g.PlayerAlreadyPlay,t)}))},c.sendEvent=function(e,t){e==p.RaiseAction&&null!=t?(console.log("amountRaise ",e,t),this.room.send("RaiseAction",{amountRaise:t})):this.room.send(e)},r(t,[{key:"sessionId",get:function(){return this.room.sessionId}},{key:"roomId",get:function(){return this.room.roomId}}]),t}(u)).prototype,"hostname",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"http://192.168.1.23"}}),y=t(d.prototype,"port",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2567}}),S=t(d.prototype,"useSSL",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=t(d.prototype,"isLocalhost",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=d))||m);c._RF.pop()}}}));

System.register("chunks:///_virtual/NftBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts","./ZKHoldemSDKManager.ts","./WalletManager.ts","./Loading.ts","./UILoadingPanel.ts","./AssetsManager.ts","./Res.ts","./SpriteFrameList.ts","./NftCard.ts","./NodeUtils.ts","./bignumber.mjs","./EthereumUtils.ts","./MathUtils.ts","./Tips.ts","./UITipsPanel.ts","./RichTextUtils.ts"],(function(t){var e,n,r,a,o,s,i,c,u,p,f,h,l,d,g,x,m,v,y,b,N,C,B,I,w,k,T,U,L,S;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,r=t.asyncToGenerator,a=t.regeneratorRuntime,o=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,i=t._decorator,c=t.NodeEventType,u=t.game,p=t.Label,f=t.Animation,h=t.instantiate,l=t.Sprite,d=t.Prefab},function(t){g=t.ComponentExpand},function(t){x=t.ZKHoldemSDKManager},function(t){m=t.WalletManager},function(t){v=t.Loading},function(t){y=t.UILoadingPanelType},function(t){b=t.AssetsManager},function(t){N=t.Res},function(t){C=t.SpriteFrameList},function(t){B=t.NftCardEventType},function(t){I=t.onClick},function(t){w=t.BigNumber},function(t){k=t.scanTx},function(t){T=t.formatNumberToDigitGrouping},function(t){U=t.showTipsPanel},function(t){L=t.UITipsPanelConfig},function(t){S=t.createBold}],execute:function(){var E;s._RF.push({},"bc5ff8EV09OGJqf4FX+5AbO","NftBox",void 0);var P=i.ccclass,O=(i.property,t("NftBoxState",function(t){return t[t.Normal=0]="Normal",t[t.Buy=1]="Buy",t[t.Open=2]="Open",t}({})));t("NftBoxEventType",function(t){return t.StateChanged="state-changed",t}({})),t("NftBox",P("NftBox")(E=function(t){function s(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._state=O.Normal,e}e(s,t);var i=s.prototype;return i.onLoad=function(){var t=this;this.changeState(O.Normal),I(this.getUI("open-c1000"),this.open,this),I(this.getUI("bottom-button"),this.close,this),I(this.getUI("check-scan"),(function(){t._openBoxTxHash&&k(t._openBoxTxHash)}),this),this.getUI("open-c1000").on(c.MOUSE_ENTER,(function(){u.canvas.style.cursor="pointer"})),this.getUI("open-c1000").on(c.MOUSE_LEAVE,(function(){u.canvas.style.cursor=""})),I(this.getUI("?"),(function(){U((new L).set("richText",!0).set("title","Instruction").set("text",S("a.")+" Purchase NFT Power to open boxes\n\n"+S("b.")+" Open boxes to receive zkHoldem NFT\n\n"+S("c.")+" NFT Power will expire after 256 blocks, and the $CHIP spent will be refunded to your account.").set("showConfirmButton",!1).set("cancelText","Close"))}),this)},i.getBoxInfoList=function(){var t=r(a().mark((function t(){var e,n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=x.instance.sdk,t.next=3,m.instance.getAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.getBoxInfo.call(t.t0,t.t1);case 6:return e=t.sent,console.log("box info list:",e),n=x.instance.sdk.getBoxPriceMap(),r=e.reduce((function(t,e){return t+e.count*Number(n[e.boxType])}),0),this.getUIComponent("nft-power",p).string=""+(0===r?"000":T(r)),t.abrupt("return",e);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.changeState=function(){var t=r(a().mark((function t(e){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBoxInfoList();case 2:n=t.sent,r="",t.t0=e,t.next=t.t0===O.Normal?7:t.t0===O.Open?9:t.t0===O.Buy?11:13;break;case 7:return r=this._state===O.Open?"box-ani-close":"box-still-"+(0===n.length?"empty":"gotPower"),t.abrupt("break",13);case 9:return r="box-ani-open",t.abrupt("break",13);case 11:return r="box-enterCard-"+(1===n.length?"empty":"gotPower"),t.abrupt("break",13);case 13:this._state=e,this.animation.play(r),this.node.emit(B.StateChanged,this._state);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.close=function(){var t=r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.changeState(O.Normal);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.open=function(){var t=r(a().mark((function t(){var e=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBoxInfoList();case 2:if(0!==t.sent.length){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,v.loadingRunCode({type:y.Loading,text:"Open Box"},r(a().mark((function t(){var n,r,s,i,c,u,p,f,h,l;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.instance.getHoldemNftInfoList(!0);case 2:return n=t.sent,t.next=5,m.instance.getAddress();case 5:return r=t.sent,t.next=8,x.instance.sdk.openBox(50);case 8:for(s=t.sent,console.log("open box tx:",s),e._openBoxTxHash=s.transactionHash,i=w(0),c=o(s.logs);!(u=c()).done;){p=u.value;try{"Transfer"===(f=x.instance.sdk.chipReadOnly.interface.parseLog(p)).name&&f.args.to===r&&(i=i.plus(f.args.value.toString()))}catch(t){}}return t.next=15,x.instance.getHoldemNftInfoList(!0);case 15:return h=t.sent,l=h.map((function(t){var e=n.find((function(e){return t.tier===e.tier})).data.map((function(t){return t.id.toString()}));return{tier:t.tier,data:t.data.filter((function(t){return!e.includes(t.id.toString())}))}})).filter((function(t){return t.data.length>0})),console.log("open box nft:",l),e.updateRefundChips(i),t.next=21,e.updateOpenNftList(l);case 21:e.changeState(O.Open);case 22:case"end":return t.stop()}}),t)}))));case 8:return t.abrupt("return",t.sent);case 11:return t.prev=11,t.t0=t.catch(5),t.abrupt("return",[]);case 14:case"end":return t.stop()}}),t,this,[[5,11]])})));return function(){return t.apply(this,arguments)}}(),i.updateRefundChips=function(t){t.eq(0)?this.getUI("refund-layout").active=!1:(this.getUI("refund-layout").active=!0,this.getUIComponent("refund-text",p).string=T(t.toString())+" Chips has expired and has been refunded.  ")},i.updateOpenNftList=function(){var t=r(a().mark((function t(e){var n,o,s,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.resources.load([N.prefab.nftGroupItem.path,N.prefab.nftItem.path],d);case 2:n=t.sent,o=n[0],s=n[1],i=this.getUI("content"),e.sort((function(t,e){return e.tier-t.tier})).forEach((function(t,e){var n=i.children[e+1];n||((n=h(o)).parent=i),n.getChildByPath("top/star").getComponent(C).index=t.tier-1,n.getChildByPath("top/num").getComponent(p).string=""+(t.data?t.data.length:0);var c=n.getChildByName("list");c.children.forEach((function(t){return t.active=!1})),c.getChildByName("empty").active=!t.data||0===t.data.length,t.data.forEach(r(a().mark((function e(n,r){var o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=c.children[r+1])||((o=h(s)).parent=c),o.active=!0,o.getComponent(C).index=t.tier,o.getChildByName("text").getComponent(p).string="#"+n.id.toString(),e.next=7,x.instance.getHoldemNftImageByTokenUri(n.uri);case 7:i=e.sent,o.getChildByName("mask").getChildByName("icon").getComponent(l).spriteFrame=i;case 9:case"end":return e.stop()}}),e)}))))}));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n(s,[{key:"animation",get:function(){return this.getComponent(f)}}]),s}(g))||E);s._RF.pop()}}}));

System.register("chunks:///_virtual/NftCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts","./NodeUtils.ts","./ZKHoldemSDK.mjs","./UIManager.ts","./UIBuyNftConfirm.ts"],(function(t){var n,e,a,r,o,i,c,u,s,f,p,h,l,m;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator,c=t.ccenum,u=t.Label,s=t.Animation},function(t){f=t.ComponentExpand},function(t){p=t.onClick},function(t){h=t.BoxType},function(t){l=t.UIManager},function(t){m=t.UIBuyNftConfirm}],execute:function(){var y;o._RF.push({},"b0afcCa3o9Bda+NZm4qavFs","NftCard",void 0);var g=i.ccclass,d=(i.property,t("NftCardState",function(t){return t[t.Normal=0]="Normal",t[t.Buy=1]="Buy",t}({}))),N=t("NftCardEventType",function(t){return t.StateChanged="state-changed",t}({}));c(h);t("NftCard",g("NftCard")(y=function(t){function o(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return(n=t.call.apply(t,[this].concat(a))||this)._state=d.Normal,n}n(o,t);var i=o.prototype;return i.getClipName=function(t){var n="";switch(t){case d.Normal:n="ani-appear";break;case d.Buy:n="ani-flyToBox"}return"leftNFT-"+n},i.onLoad=function(){p(this.getUI("buy-button"),this.buy,this),this.changeState(d.Normal)},i.onEnable=function(){this.changeState(d.Normal)},i.buy=function(){var t=a(r().mark((function t(){var n,e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._state===d.Normal){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,l.open(m,{arg:this.type});case 4:(n=t.sent).eventTarget.off("buy"),n.eventTarget.once("buy",(function(){e.animation.once(s.EventType.FINISHED,(function(){e.scheduleOnce((function(){e.changeState(d.Normal)}),.5)})),e.changeState(d.Buy)}));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.updatePowerCount=function(t){this.getUIComponent("power-count",u).string=""+t},i.changeState=function(t){this.animation.play(this.getClipName(t)),this._state=t,this.node.emit(N.StateChanged,this._state)},e(o,[{key:"animation",get:function(){return this.getComponent(s)}}]),o}(f))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/NodePoolManager.ts",["cc","./Logger.ts"],(function(e){var o,n,t;return{setters:[function(e){o=e.cclegacy,n=e.NodePool},function(e){t=e.Logger}],execute:function(){e({createNodePool:u,getNode:function(e){return c(e).get()},getNodePool:c,putNode:function(e,o){return c(e).put(o)},removeNodePool:function(e){delete r[e]},removeNodePoolByInstance:function(e){for(var o in r)if(r[o]===e){delete r[o];break}}}),o._RF.push({},"52303quqAJN17VfjI42liyX","NodePoolManager",void 0);var r=Object.create(null);function u(e,o){return r[e]&&t.warn("NodePool!name:"+e),r[e]=new n(o)}function c(e){return r[e]||(r[e]=u(e)),r[e]}o._RF.pop()}}}));

System.register("chunks:///_virtual/NodeUtils.ts",["cc"],(function(t){var e,n,o,r,c;return{setters:[function(t){e=t.cclegacy,n=t.NodeEventType,o=t.EventHandler,r=t.Button,c=t.UITransform}],execute:function(){t({addClickButtonEvent:function(t,e,n,c,i){var u=new o;u.target=e,u.component=n,u.handler=c,u.customEventData=i;var a=t&&t.getComponent(r);if(a){a.clickEvents.push(u)}return u},convertToNodeSpaceAR:function(t,e){return t.getComponent(c).convertToNodeSpaceAR(e)},convertToWorldSpaceAR:function(t,e){return t.getComponent(c).convertToWorldSpaceAR(e)},getNodeAnchor:function(t){return t.getComponent(c).anchorPoint},getNodeAnchorX:function(t){return t.getComponent(c).anchorX},getNodeAnchorY:function(t){return t.getComponent(c).anchorY},getNodeHeight:function(t){return t.getComponent(c).height},getNodePath:function(t){var e="";for(;t.parent;)e=t.name+e,(t=t.parent)&&(e="/"+e);return e},getNodeSize:function(t){return t.getComponent(c).contentSize},getNodeTreeToMap:function(t,e){var n=e||Object.create(null);return t.walk((function(t){n[t.name]=t})),n},getNodeWidth:function(t){return t.getComponent(c).width},hitTest:function(t,e){return t.getComponent(c).hitTest(e)},offClick:function(t,e,o){t.off(n.TOUCH_END,e,o)},onClick:function(t,e,o){t.on(n.TOUCH_END,e,o)},setNodeHeight:function(t,e){t.getComponent(c).height=e},setNodeSize:function(t,e){t.getComponent(c).setContentSize(e)},setNodeWidth:function(t,e){t.getComponent(c).width=e}}),e._RF.push({},"3c1e762YLJBdb4Uw6XcVVfT","NodeUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/normalizeProp.ts",["cc","./shared.ts"],(function(r){var t,n,i,e,a;return{setters:[function(r){t=r.cclegacy},function(r){n=r.isArray,i=r.isString,e=r.isObject,a=r.hyphenate}],execute:function(){function s(r){if(n(r)){for(var t={},a=0;a<r.length;a++){var o=r[a],f=i(o)?u(o):s(o);if(f)for(var l in f)t[l]=f[l]}return t}return i(r)||e(r)?r:void 0}r({normalizeClass:c,normalizeProps:function(r){if(!r)return null;var t=r.class,n=r.style;t&&!i(t)&&(r.class=c(t));n&&(r.style=s(n));return r},normalizeStyle:s,parseStringStyle:u,stringifyStyle:function(r){var t="";if(!r||i(r))return t;for(var n in r){var e=r[n],s=n.startsWith("--")?n:a(n);(i(e)||"number"==typeof e)&&(t+=s+":"+e+";")}return t}}),t._RF.push({},"037436S+whLi4WqhTiQ76vw","normalizeProp",void 0);var o=/;(?![^(]*\))/g,f=/:([^]+)/,l=/\/\*[\s\S]*?\*\//g;function u(r){var t={};return r.replace(l,"").split(o).forEach((function(r){if(r){var n=r.split(f);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function c(r){var t="";if(i(r))t=r;else if(n(r))for(var a=0;a<r.length;a++){var s=c(r[a]);s&&(t+=s+" ")}else if(e(r))for(var o in r)r[o]&&(t+=o+" ");return t.trim()}t._RF.pop()}}}));

System.register("chunks:///_virtual/NumberLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtils.ts"],(function(e){var t,r,i,n,u,o,a,s,l,p,c,b,m,f,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,u=e.createClass,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,p=e.ccenum,c=e.Label,b=e.CCFloat,m=e.Tween,f=e.Component,h=e.tween},function(e){y=e.formatNumberToDigitGrouping}],execute:function(){var g,_,N,d,w,T,v,L,z,C,x,F,S,A,D,k,M,B,G,I;s._RF.push({},"c7ba9K044lFNYhAMTtXgGr+","NumberLabel",void 0);var O=l.ccclass,P=l.property,R=l.requireComponent,j=e("NumberLabelType",function(e){return e[e.Time=0]="Time",e[e.Count=1]="Count",e}({}));p(j);e("NumberLabel",(g=O("NumberLabel"),_=R(c),N=P(b),d=P(b),w=P({type:j,tooltip:"Time: \nCount: "}),T=P({type:b,tooltip:"",visible:function(){return this.type===j.Count}}),v=P({type:b,tooltip:"",visible:function(){return this.type===j.Time}}),L=P({tooltip:""}),z=P({displayName:""}),C=P({displayName:""}),g(x=_((S=t((F=function(e){function t(){for(var t,r=arguments.length,u=new Array(r),o=0;o<r;o++)u[o]=arguments[o];return t=e.call.apply(e,[this].concat(u))||this,i(t,"_number",S,n(t)),i(t,"type",A,n(t)),i(t,"speed",D,n(t)),i(t,"time",k,n(t)),i(t,"isFloat",M,n(t)),i(t,"prefix",B,n(t)),i(t,"suffix",G,n(t)),i(t,"format",I,n(t)),t._currentNumber=0,t}r(t,e);var s=t.prototype;return s.refresh=function(){var e=o(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.stopAllByTarget(this),h(this).to(this.type===j.Time?this.time:Math.abs(this._number-this._currentNumber)/this.speed,{_currentNumber:this._number},{easing:"quadInOut",onUpdate:function(){t._refreshLabelString()}}).start();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s._refreshLabelString=function(){this._currentNumber=this.isFloat?parseFloat(this._currentNumber.toString()):parseInt(this._currentNumber.toString()),this.getComponent(c).string=this.prefix+(this.format?y(this._currentNumber):this._currentNumber)+this.suffix,this.node.emit("change-number",this._currentNumber)},s.setNumberSkipAnimation=function(e){m.stopAllByTarget(this),this._currentNumber=e,this._number=e,this._refreshLabelString()},u(t,[{key:"number",get:function(){return this._number},set:function(e){this._number=e,this.refresh()}}]),t}(f)).prototype,"_number",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(F.prototype,"number",[d],Object.getOwnPropertyDescriptor(F.prototype,"number"),F.prototype),A=t(F.prototype,"type",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.Time}}),D=t(F.prototype,"speed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),k=t(F.prototype,"time",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=t(F.prototype,"isFloat",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=t(F.prototype,"prefix",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=t(F.prototype,"suffix",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=t(F.prototype,"format",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=F))||x)||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/OKXAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletConnectionAdapter.ts","./ethers.umd.mjs_cjs=&original=.js","./Tips.ts","./ethers.umd.js"],(function(e){var t,r,n,s,o,u,a;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){s=e.cclegacy},function(e){o=e.WalletConnectionAdapter},null,function(e){u=e.showErrorToast},function(e){a=e.default}],execute:function(){s._RF.push({},"902e1lOtfJAAKYKcebjj8Rf","OKXAdapter",void 0);e("OKXAdapter",function(e){function s(){return e.apply(this,arguments)||this}return t(s,e),s.prototype.connect=function(){var e=r(n().mark((function e(){var t,r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.okxwallet,void 0!==window.okxwallet){e.next=4;break}return u("Please install OKX!"),e.abrupt("return",!1);case 4:return r=new a.providers.Web3Provider(t,"any"),e.prev=5,e.next=8,r.send("eth_requestAccounts",[]);case 8:s=e.sent,this._account.value=s.map((function(e){return a.utils.getAddress(e)})),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(5),new Error(e.t0.message);case 15:return this._provider=r,this._ethereumProvider=t,this._onAccountsChanged(),e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}(),s}(o));s._RF.pop()}}}));

System.register("chunks:///_virtual/OpenUIWithClick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts","./UIManager.ts","./QueryString.ts"],(function(e){var t,n,i,r,o,a,l,c,s,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.CCString,c=e.Button,s=e.Component},function(e){u=e.onClick},function(e){p=e.UIManager},function(e){f=e.default}],execute:function(){var g,h,d,y,C;o._RF.push({},"630dcHIlEZIVrKNbuc0eXsp","OpenUIWithClick",void 0);var I=a.ccclass,v=a.property,U=a.disallowMultiple;e("OpenUIWithClick",(g=I("OpenUIWithClick"),h=v(l),g(d=U((C=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"url",C,r(t)),t}return n(t,e),t.prototype.onLoad=function(){var e=this;u(this.node,(function(){var t=e.getComponent(c);if(!t||t.interactable){var n=e.url;if(n)if(n.indexOf("?")>-1){var i=n.split("?"),r=i[0],o=i[1];p.open(p.getUIClassByName(r),{arg:f.parse(o)})}else p.open(p.getUIClassByName(n))}}))},t}(s)).prototype,"url",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=y))||d)||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/OpenUrlWithClick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts"],(function(t){var e,i,n,r,o,l,a,u,c,p,s,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.CCString,u=t.CCBoolean,c=t.CCFloat,p=t.Button,s=t.sys,h=t.Component},function(t){f=t.onClick}],execute:function(){var b,w,d,y,g,C,v,m,T,k,z;o._RF.push({},"fa1dbixCl9Pd5PTMO6tFtpr","OpenUrlWithClick",void 0);var U=l.ccclass,O=l.property;t("OpenUrlWithClick",(b=U("OpenUrlWithClick"),w=O(a),d=O(u),y=O({type:c,visible:function(){return!this.newTab}}),g=O({type:c,visible:function(){return!this.newTab}}),b((m=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(e,"url",m,r(e)),n(e,"newTab",T,r(e)),n(e,"width",k,r(e)),n(e,"height",z,r(e)),e}return i(e,t),e.prototype.onLoad=function(){var t=this;f(this.node,(function(){var e=t.getComponent(p);if(!e||e.interactable){var i=t.url;i&&(t.newTab?s.openURL(i):window.open(i,"","width="+t.width+",height="+t.height))}}))},e}(h)).prototype,"url",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=e(v.prototype,"newTab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=e(v.prototype,"width",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 375}}),z=e(v.prototype,"height",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 640}}),C=v))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/OperationManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RaiseManger.ts"],(function(t){var e,n,i,o,a,l,r,u,c,s,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,r=t.Button,u=t.Label,c=t.Node,s=t.Component},function(t){h=t.RaiseManger}],execute:function(){var p,d,f,b,B,k,v,C,g,y,R,w,I,O,m,z,N,V,M,F,A,L,_,D;a._RF.push({},"b39e4q39yVBPJGbRlLZxs7K","OperationManager",void 0);var P=l.ccclass,T=l.property,E=t("OperationType",function(t){return t[t.Fold=0]="Fold",t[t.Check=1]="Check",t[t.Call=2]="Call",t[t.Raise=3]="Raise",t[t.AllIn=4]="AllIn",t}({}));t("OperationManager",(p=P("OperationManager"),d=T({tooltip:"fold button"}),f=T(r),b=T({tooltip:"check button"}),B=T(r),k=T({tooltip:"call button"}),v=T(r),C=T({tooltip:"call value"}),g=T(u),y=T({tooltip:"all in button"}),R=T(r),w=T({tooltip:"raise button"}),I=T(r),O=T({tooltip:"raise node"}),m=T(h),p((V=e((N=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,i(e,"foldButton",V,o(e)),i(e,"checkButton",M,o(e)),i(e,"callButton",F,o(e)),i(e,"callValue",A,o(e)),i(e,"allInButton",L,o(e)),i(e,"raiseButton",_,o(e)),i(e,"raiseNode",D,o(e)),e.onClickOperationButtonCallback=null,e.onClickRaiseValueCallback=null,e}n(e,t);var a=e.prototype;return a.start=function(){var t=this;this.registerButtonClick(),this.raiseNode.onSelectRaiseChipsCallback=function(e){t.onClickRaiseValueCallback&&t.onClickRaiseValueCallback(e)}},a.registerButtonClick=function(){var t=this;[[this.foldButton.node,E.Fold],[this.checkButton.node,E.Check],[this.callButton.node,E.Call],[this.raiseButton.node,E.Raise],[this.allInButton.node,E.AllIn]].forEach((function(e){var n=e[0],i=e[1];n.on(c.EventType.TOUCH_END,(function(){t.onClickOperationButtonCallback&&t.onClickOperationButtonCallback(i)}))}))},a.onLoad=function(){this.init()},a.init=function(){this.foldButton.node.active=!1,this.checkButton.node.active=!1,this.callButton.node.active=!1,this.raiseButton.node.active=!1,this.raiseNode.node.active=!1,this.allInButton.node.active=!1},a.showPlayerOperationButtons=function(){this.init();for(var t=0;t<arguments.length;t++){var e=t<0||arguments.length<=t?void 0:arguments[t];switch(e){case E.Fold:this.foldButton.node.active=!0;break;case E.Check:this.checkButton.node.active=!0;break;case E.Call:this.callButton.node.active=!0;break;case E.Raise:this.raiseButton.node.active=!0;break;case E.AllIn:this.allInButton.node.active=!0}}},a.updateCallValue=function(t){this.callValue.string=t.toString()},a.showRaise=function(t,e,n,i){this.raiseNode.showRaise(t,e,n,i)},a.show=function(){this.node.active=!0,this.raiseNode.node.active=!1},a.update=function(t){},e}(s)).prototype,"foldButton",[d,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(N.prototype,"checkButton",[b,B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(N.prototype,"callButton",[k,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(N.prototype,"callValue",[C,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(N.prototype,"allInButton",[y,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(N.prototype,"raiseButton",[w,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(N.prototype,"raiseNode",[O,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=N))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/operations.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3fbe3Fv+UxH24JvwOZzEyEz","operations",void 0);e("TrackOpTypes",{GET:"get",HAS:"has",ITERATE:"iterate"}),e("TriggerOpTypes",{SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"});t._RF.pop()}}}));

System.register("chunks:///_virtual/OptionalBlockInputEvents.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,o,a,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.NodeEventType,u=e.Component}],execute:function(){var E,c,p,O,f,_,b,s,U,M,S;o._RF.push({},"9540a7/d/xK5YsNCimSf8nG","OptionalBlockInputEvents",void 0);var T=a.ccclass,y=a.property,g=["TOUCH_START","TOUCH_END","TOUCH_MOVE","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_WHEEL"];function h(e){e.propagationStopped=!0}e("OptionalBlockInputEvents",T("OptionalBlockInputEvents")((p=t((c=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"TOUCH_START",p,r(t)),i(t,"TOUCH_END",O,r(t)),i(t,"TOUCH_MOVE",f,r(t)),i(t,"MOUSE_DOWN",_,r(t)),i(t,"MOUSE_MOVE",b,r(t)),i(t,"MOUSE_UP",s,r(t)),i(t,"MOUSE_ENTER",U,r(t)),i(t,"MOUSE_LEAVE",M,r(t)),i(t,"MOUSE_WHEEL",S,r(t)),t}n(t,e);var o=t.prototype;return o.onEnable=function(){for(var e=0;e<g.length;e++)this[g[e]]&&this.node.on(l[g[e]],h,this)},o.onDisable=function(){for(var e=0;e<g.length;e++)this.node.off(l[g[e]],h,this)},t}(u)).prototype,"TOUCH_START",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=t(c.prototype,"TOUCH_END",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=t(c.prototype,"TOUCH_MOVE",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=t(c.prototype,"MOUSE_DOWN",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=t(c.prototype,"MOUSE_MOVE",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s=t(c.prototype,"MOUSE_UP",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),U=t(c.prototype,"MOUSE_ENTER",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),M=t(c.prototype,"MOUSE_LEAVE",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=t(c.prototype,"MOUSE_WHEEL",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=c))||E);o._RF.pop()}}}));

System.register("chunks:///_virtual/OptionalSafeArea.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,n,a,p,l,s,u,c,h,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,p=t._decorator,l=t.CCFloat,s=t.Widget,u=t.UITransform,c=t.view,h=t.sys,b=t.widgetManager,f=t.SafeArea}],execute:function(){var g,y,d,m,_,A,w,v,O,z,R,L,T,P,S;a._RF.push({},"a9313C6H+ZFOLCE/Tgqe6VR","OptionalSafeArea",void 0);var B=p.ccclass,C=p.property;t("OptionalSafeArea",(g=B("OptionalSafeArea"),y=C({type:l,visible:function(){return this.enabledTop}}),d=C({type:l,visible:function(){return this.enabledBottom}}),m=C({type:l,visible:function(){return this.enabledLeft}}),_=C({type:l,visible:function(){return this.enabledRight}}),g((v=e((w=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"enabledTop",v,r(e)),o(e,"_top",O,r(e)),o(e,"enabledBottom",z,r(e)),o(e,"_bottom",R,r(e)),o(e,"enabledLeft",L,r(e)),o(e,"_left",T,r(e)),o(e,"enabledRight",P,r(e)),o(e,"_right",S,r(e)),e}return i(e,t),e.prototype.updateArea=function(){var t=this.node.getComponent(s),e=this.node.getComponent(u);if(t&&e){t.updateAlignment();var i=this.node.position.clone(),o=e.anchorPoint.clone();t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0;var r=c.getVisibleSize(),n=r.width,a=r.height,p=h.getSafeAreaRect();t.top=this.enabledTop?this._top:a-p.y-p.height,t.bottom=this.enabledBottom?this._bottom:p.y,t.left=this.enabledLeft?this._left:p.x,t.right=this.enabledRight?this._right:n-p.x-p.width,t.updateAlignment();var l=this.node.position.clone(),f=o.x-(l.x-i.x)/e.width,g=o.y-(l.y-i.y)/e.height;e.setAnchorPoint(f,g),b.add(t)}},n(e,[{key:"top",get:function(){return this._top},set:function(t){this._top=t,this.enabledTop&&this.updateArea()}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t,this.enabledBottom&&this.updateArea()}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,this.enabledLeft&&this.updateArea()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,this.enabledRight&&this.updateArea()}}]),e}(f)).prototype,"enabledTop",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=e(w.prototype,"_top",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"top",[y],Object.getOwnPropertyDescriptor(w.prototype,"top"),w.prototype),z=e(w.prototype,"enabledBottom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=e(w.prototype,"_bottom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"bottom",[d],Object.getOwnPropertyDescriptor(w.prototype,"bottom"),w.prototype),L=e(w.prototype,"enabledLeft",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=e(w.prototype,"_left",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"left",[m],Object.getOwnPropertyDescriptor(w.prototype,"left"),w.prototype),P=e(w.prototype,"enabledRight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=e(w.prototype,"_right",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(w.prototype,"right",[_],Object.getOwnPropertyDescriptor(w.prototype,"right"),w.prototype),A=w))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/OverrideMath.ts",["cc"],(function(){var cclegacy;return{setters:[function(c){cclegacy=c.cclegacy}],execute:function(){cclegacy._RF.push({},"4b80az3mwhIJK5ZCNVoVWzv","OverrideMath",void 0);var pow=eval("(function(a,b){return a**b})");Math.pow=pow,cclegacy._RF.pop()}}}));

System.register("chunks:///_virtual/Padding.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,o,n,u,a,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){u=t.cclegacy,a=t._decorator,l=t.CCFloat,s=t.CCObject}],execute:function(){var c,h,f,p,b,g,d,m,y,v,z;u._RF.push({},"60841Xgw39JUKzbscqj5HaE","Padding",void 0);var P=a.ccclass,w=a.property;t("Padding",(c=P("Padding"),h=w(l),f=w(l),p=w(l),b=w(l),c((m=e((d=function(t){function e(e,i,n,u){var a;return a=t.call(this)||this,r(a,"left",m,o(a)),r(a,"right",y,o(a)),r(a,"top",v,o(a)),r(a,"bottom",z,o(a)),e&&"object"==typeof e?a.set(e):"number"==typeof e&&(e&&(a.left=e),i&&(a.right=i),n&&(a.top=n),u&&(a.bottom=u)),a}i(e,t);var u=e.prototype;return u.clone=function(){return new e(this)},u.equals=function(t){return this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom},u.set=function(t){return this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this},u.toString=function(){return"Padding("+this.left+", "+this.right+", "+this.top+", "+this.bottom+")"},n(e,[{key:"vertical",get:function(){return this.top+this.bottom}},{key:"horizontal",get:function(){return this.left+this.right}}]),e}(s)).prototype,"left",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=e(d.prototype,"right",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=e(d.prototype,"top",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=e(d.prototype,"bottom",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=d))||g));u._RF.pop()}}}));

System.register("chunks:///_virtual/patchFlags.ts",["cc"],(function(E){var T;return{setters:[function(E){T=E.cclegacy}],execute:function(){var S;T._RF.push({},"55c3aHjWFNNCaPNh28xpPvo","patchFlags",void 0);var A=E("PatchFlags",{TEXT:1,CLASS:2,STYLE:4,PROPS:8,FULL_PROPS:16,HYDRATE_EVENTS:32,STABLE_FRAGMENT:64,KEYED_FRAGMENT:128,UNKEYED_FRAGMENT:256,NEED_PATCH:512,DYNAMIC_SLOTS:1024,DEV_ROOT_FRAGMENT:2048,HOISTED:-1,BAIL:-2});E("PatchFlagNames",((S={})[A.TEXT]="TEXT",S[A.CLASS]="CLASS",S[A.STYLE]="STYLE",S[A.PROPS]="PROPS",S[A.FULL_PROPS]="FULL_PROPS",S[A.HYDRATE_EVENTS]="HYDRATE_EVENTS",S[A.STABLE_FRAGMENT]="STABLE_FRAGMENT",S[A.KEYED_FRAGMENT]="KEYED_FRAGMENT",S[A.UNKEYED_FRAGMENT]="UNKEYED_FRAGMENT",S[A.NEED_PATCH]="NEED_PATCH",S[A.DYNAMIC_SLOTS]="DYNAMIC_SLOTS",S[A.DEV_ROOT_FRAGMENT]="DEV_ROOT_FRAGMENT",S[A.HOISTED]="HOISTED",S[A.BAIL]="BAIL",S));T._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts","./TweenUtils.ts","./ComponentExpand.ts","./ZKHoldemSDK.mjs","./EthereumUtils.ts","./GameConfig.ts","./NodeUtils.ts","./Tips.ts","./UITipsPanel.ts"],(function(t){var e,n,o,i,r,a,s,u,l,c,p,h,w,f,d,y,m,b,v,g,k,P,N,_,C,x,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,l=t.Sprite,c=t.Label,p=t.Node,h=t.SpriteFrame,w=t.Animation,f=t.v3,d=t.tween,y=t.UIOpacity},function(t){m=t.formatNumberValue,b=t.setENSName},function(t){v=t.TweenUtils},function(t){g=t.ComponentExpand},function(t){k=t.GameStage},function(t){P=t.getJsonRpcProvider},function(t){N=t.ChainNetwork2Info,_=t.default},function(t){C=t.onClick},function(t){x=t.showTipsPanel},function(t){T=t.UITipsPanelConfig}],execute:function(){var D,I,U,S,V,z,L,K,E,A,R,B,G,F,H,O,j,J,W,M,Z,$,q,Q,X,Y,tt,et,nt,ot,it,rt,at;s._RF.push({},"3447fhSfVJEkoNkzfouBCgR","Player",void 0);var st=u.ccclass,ut=u.property;t("Player",(D=st("Player"),I=ut({tooltip:"player count down timer node"}),U=ut(l),S=ut({tooltip:"player count down timer"}),V=ut(l),z=ut({tooltip:"player avatar"}),L=ut(l),K=ut({tooltip:"player name"}),E=ut(c),A=ut({tooltip:"player coin"}),R=ut(c),B=ut({tooltip:"status label"}),G=ut(c),F=ut({tooltip:"won crown"}),H=ut(l),O=ut({tooltip:"won value"}),j=ut(c),J=ut({tooltip:"small poker"}),W=ut(p),M=ut({tooltip:"small poker"}),Z=ut(h),D((Q=e((q=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"countDownNode",Q,i(e)),o(e,"countDown",X,i(e)),o(e,"avatar",Y,i(e)),o(e,"playerName",tt,i(e)),o(e,"playerCoin",et,i(e)),o(e,"statusLabel",nt,i(e)),o(e,"wonCrown",ot,i(e)),o(e,"wonValue",it,i(e)),o(e,"smallPoker",rt,i(e)),o(e,"defaultAvatar",at,i(e)),e.countdownTween=null,e}n(e,t);var s=e.prototype;return s.onLoad=function(){this.countDownNode.node.active=!1,this.wonCrown.node.active=!1,this.wonValue.node.active=!1},s.start=function(){},s.showWonValue=function(t){this.wonCrown.node.active=!0,this.wonValue.node.active=!0,this.wonValue.string="+ $"+t,this.wonCrown.node.getComponent(w).play(),v.fadeIn(this.wonValue.node,{duration:.4}).start();var e=this.wonValue.node.getPosition(),n=f(e.x,e.y-40,e.z);this.wonValue.node.position=n,d(this.wonValue.node).to(.4,{position:e}).start()},s.hiddenWon=function(){v.fadeOut(this.wonValue.node,{duration:.4}).start();var t=this.wonValue.node.getPosition(),e=f(t.x,t.y+40,t.z);this.wonValue.node.position=t,d(this.wonValue.node).to(.4,{position:e}).start()},s.showPlayerCountdown=function(t,e){var n=this;return void 0===e&&(e=0),new Promise((function(o,i){n.countDownNode.node.active||(n.countDownNode.node.active=!0),n.countdownTween&&n.countdownTween.stop(),n.countDownNode.node.active||(n.countDownNode.node.active=!0),n.countDown.fillRange=(t-e)/t,n.countdownTween=d(n.countDown).to(t-e,{fillRange:0}).call((function(t){n.countdownTween=null,n.countDownNode.node.active=!1,o()})).start()}))},s.stopPlayerCountdown=function(){this.countdownTween&&(this.countdownTween.stop(),this.countdownTween=null),this.countDownNode.node.active=!1},s.setOwnerActive=function(t){this.getUI("owner").active=t},s.setPlayerName=function(){var t=r(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e,this.playerName);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.setPlayerAvatar=function(){var t=r(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.avatar.node.active=!0,this.avatar.spriteFrame=this.defaultAvatar;case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.setPlayerChips=function(t){this.playerCoin.string=m(t)},s.tryShowKick=function(){var t=r(a().mark((function t(e,n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._board=e,this._playerIndex=n,this.getUI("kick").active=!1,this.getUI("timeout").active=!1,this._board.stage>k.GatheringPlayers&&this._board.stage<k.Ended&&this._board.nextPlayer===this._playerIndex?(this._startTime=Date.now(),this.schedule(this._tryShowKick,3),this._tryShowKick()):(this._board=null,this._playerIndex=null,this.unschedule(this._tryShowKick));case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),s._tryShowKick=function(){var t=r(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.getUI("timeout").active=!1,this.getUI("kick").active=!1,this.getUI("kick").off(p.EventType.TOUCH_END),this._playerIndex,e=N[_.instance.chainNetwork],t.next=7,P(e.chainNetwork).getBlockNumber();case 7:if(n=t.sent,this._board){t.next=10;break}return t.abrupt("return");case 10:if(!(0===this._board.startingBlock&&this._startTime+9e4>Date.now())){t.next=12;break}return t.abrupt("return");case 12:n>=this._board.startingBlock+10&&(this.unschedule(this._tryShowKick),this.getUI("kick").active=!0,this.getUI("timeout").active=!0,C(this.getUI("kick"),(function(){x((new T).set("title","Kick player").set("text","Kick a player will cause him lose all his in-room money and restart the game, are you sure?").set("confirmText","Kick").set("confirmCallback",r(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))))})));case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.setSmallPokersShow=function(t){this.smallPoker&&(this.smallPoker.active=t)},s.showStatusLabel=function(t){console.log("show status string",t),this.statusLabel.string=t,this.statusLabel.node.active=!0,this.statusLabel.node.setPosition(f(0,0,0)),this.statusLabel.getComponent(y).opacity=255,d(this.statusLabel.node).to(2.1,{position:f(0,80,0)}).call((function(t){return t.active=!1})).start(),d(this.statusLabel.getComponent(y)).delay(1.5).to(.6,{opacity:0}).start()},e}(g)).prototype,"countDownNode",[I,U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(q.prototype,"countDown",[S,V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(q.prototype,"avatar",[z,L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(q.prototype,"playerName",[K,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(q.prototype,"playerCoin",[A,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(q.prototype,"statusLabel",[B,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(q.prototype,"wonCrown",[F,H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(q.prototype,"wonValue",[O,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(q.prototype,"smallPoker",[J,W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(q.prototype,"defaultAvatar",[M,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=q))||$));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./GameConst.ts","./GameLogic.ts"],(function(e){var t,n,o,a,r,i,s,l,p,c,u,y,h,d,f,P,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,p=e.Sprite,c=e.Node,u=e.log,y=e.Component,h=e.instantiate},function(e){d=e.Player},function(e){f=e.Time_Player_Operation,P=e.Max_Players_Count},function(e){g=e.GameLogic}],execute:function(){var w,v,m,C,M,S,b,x,I,k,A,L,N,_,O;s._RF.push({},"c3daeOCaflNvbN7Y3oCNCfM","PlayerManger",void 0);var z=l.ccclass,R=l.property;e("PlayerManger",(w=z("PlayerManger"),v=R({tooltip:"owner player head"}),m=R(d),C=R({tooltip:"other player head"}),M=R(d),S=R({tooltip:"D icon"}),b=R(p),x=R({tooltip:"seats node"}),I=R(c),w((L=t((A=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,o(t,"ownerPlayer",L,a(t)),o(t,"otherPlayer",N,a(t)),o(t,"dIcon",_,a(t)),o(t,"seats",O,a(t)),t.playersMaps=new Map,t}n(t,e);var s=t.prototype;return s.start=function(){},s.onLoad=function(){this.ownerPlayer.node.active=!1,this.otherPlayer.node.active=!1,this.dIcon.node.active=!1},s.getPlayer=function(e){return 0==e?this.ownerPlayer.node:this.playersMaps.get(e)},s.getPlayerOriginPositon=function(e){return this.seats.getChildByName(e.toString()).getPosition()},s.getPlayerSmallPokerPosition=function(e){var t=this.getPlayerOriginPositon(e);return t.x+=90,t},s.getPlayerShowPokerGroupPosition=function(e){var t=this.getPlayerOriginPositon(e);return t.x+=150,t},s.clearPlayersMap=function(){this.ownerPlayer.node.active=!1,Array.from(this.playersMaps.values()).forEach((function(e){e.destroy()})),this.playersMaps.clear()},s.getPlayerCount=function(){return Array.from(this.playersMaps.values()).length},s.addPlayer=function(){var e=r(i().mark((function e(t,n,o){var a,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.playersMaps.get(t.index)||h(this.otherPlayer.node),this.playersMaps.set(t.index,a),a.active=!0,a.parent=this.otherPlayer.node.parent,a.setPosition(this.getPlayerOriginPositon(t.index)),r=a.getComponent(d),s=g.instance.toEther(t.balance),r.setPlayerName(t.participantId),r.setPlayerAvatar(t.participantId),r.setPlayerChips(s),r.setOwnerActive(n),this.updateSeatShowCount();case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,o){return e.apply(this,arguments)}}(),s.updatePlayerChips=function(e){for(var t=0;t<e.length;t++){var n=g.instance.getReallyIndex(t);if(0==n)this.ownerPlayer.setPlayerChips(e[t]);else{var o=this.playersMaps.get(n);o&&o.getComponent(d).setPlayerChips(e[t])}}},s.showPlayerTimecountdown=function(e){var t=this;return new Promise((function(n,o){u("show player animte",e),u("player maps",t.playersMaps);var a=t.playersMaps.get(e);a?a.getComponent(d).showPlayerCountdown(f).then((function(){n()})):u("player not found, "+e,t.playersMaps)}))},s.showPlayerWin=function(e,t){var n=this.playersMaps.get(e);n?n.getComponent(d).showWonValue(t):u("player not found, "+e,this.playersMaps)},s.hidePlayerWin=function(){this.playersMaps.forEach((function(e,t){e.getComponent(d).hiddenWon()}))},s.stopPlayerTimeCountdown=function(e){if(e=g.instance.getReallyIndex(e),console.log("show player countdown index",e),0==e)this.ownerPlayer.stopPlayerCountdown();else{var t=this.playersMaps.get(e);t&&t.getComponent(d).stopPlayerCountdown()}},s.stopALlPlayerTimeCountdown=function(){for(var e=0;e<P;e++){var t=this.playersMaps.get(e);t&&t.getComponent(d).stopPlayerCountdown()}},s.showDealer=function(e,t){e<4?t.x+=100:t.x-=100,console.log("show dealer",e),null!=this.dIcon.node.active||(this.dIcon.node.active=!0),this.dIcon.node.active=!0,this.dIcon.node.setPosition(t)},s.updateSeatShowCount=function(){for(var e=0;e<P;e++){var t=this.playersMaps.get(e),n=this.seats.getChildByName(e.toString());n&&(n.active=!t)}},s.hiddenAllSeat=function(){for(var e=0;e<P;e++){this.seats.getChildByName(e.toString()).active=!1}},s.showPlayerStatus=function(e,t){if(0==(e=g.instance.getReallyIndex(e)))this.ownerPlayer.showStatusLabel(t);else{var n=this.playersMaps.get(e);n&&n.getComponent(d).showStatusLabel(t)}},s.setSmallPokerShow=function(e,t){if(console.log("setSmallPokerShow "+e,t),0!=t){var n=this.playersMaps.get(t);n&&n.getComponent(d).setSmallPokersShow(e)}},s.hiddenAllSmallPoker=function(){this.playersMaps.forEach((function(e,t){e.getComponent(d).setSmallPokersShow(!1)}))},s.update=function(e){},t}(y)).prototype,"ownerPlayer",[v,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(A.prototype,"otherPlayer",[C,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(A.prototype,"dIcon",[S,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"seats",[x,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=A))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayThemeCommon.ts",["cc","./EditorUtils.ts","./Res.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},null,null],execute:function(){e("PlayThemePathEnum",void 0),t._RF.push({},"a0d61fGCWxL173duTXQfy9y","PlayThemeCommon",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayThemeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tableEnums.ts","./TableManager.ts","./AudioManager.ts","./Res.ts","./Icon.ts","./EventTarget.ts","./EventConstant.ts"],(function(e){var t,n,r,a,o,u,c,i,s,l,p,y,h,f,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass,u=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){i=e.cclegacy,s=e._decorator,l=e.ccenum,p=e.Component},function(e){y=e.PlayThemeType},null,null,function(e){h=e.Res},function(e){f=e.Icon},function(e){m=e.EventTarget},function(e){g=e.EventConstant}],execute:function(){var T,v,d,M,b,x;i._RF.push({},"125e5qfkJtKI6xdV4suhQ3z","PlayThemeManager",void 0);var w=s.ccclass,P=s.property,_=s.playOnFocus,k=s.executeInEditMode;l(y);e("PlayThemeManager",(T=w("PlayThemeManager"),v=P({type:y}),d=P({type:y}),T(M=k(M=_((x=t((b=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return t=e.call.apply(e,[this].concat(o))||this,r(t,"_theme",x,a(t)),t}n(t,e);var i=t.prototype;return i.playBGM=function(){return null},i.stopBGM=function(){return null},i.getSpriteFrame=function(){var e=u(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get((n||this.playThemeRow).resource+"/"+t,h.directory.playThemeTexture,!0);case 3:r=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:if(r){e.next=12;break}return e.next=11,f.get((n||this.playThemeRow).resource+"/"+t,h.directory.playThemeTexture);case 11:r=e.sent;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),i.onLoad=function(){var e=u(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.onDestroy=function(){return null},o(t,[{key:"theme",get:function(){return null},set:function(e){this._theme!==e&&(this._theme=e,m.eventManager.emit(g.UPDATE_PLAY_THEME))}},{key:"playThemeRow",get:function(){return null}}],[{key:"instance",get:function(){return null}}]),t}(p)).prototype,"_theme",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.Default}}),t(b.prototype,"theme",[d],Object.getOwnPropertyDescriptor(b.prototype,"theme"),b.prototype),M=b))||M)||M)||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayThemeSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SelectPath.ts","./ComponentExpand.ts","./EventConstant.ts"],(function(e){var t,n,r,i,a,o,s,c,p,u,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,p=e.Sprite},function(e){u=e.SelectPath},function(e){l=e.ComponentExpand},function(e){h=e.EventConstant}],execute:function(){var f,d,m,y,P,S,v;s._RF.push({},"eefb3I+fM5I4INQamnjt5LD","PlayThemeSprite",void 0);var E=c.ccclass,T=c.property,g=c.requireComponent,b=c.executeInEditMode,w=c.disallowMultiple;e("PlayThemeSprite",(f=E("PlayThemeSprite"),d=w(!0),m=g(p),y=T(u),f(P=b(P=d(P=m((v=t((S=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"selectPath",v,i(t)),t}n(t,e);var s=t.prototype;return s.onLoad=function(){this.updateSpriteFrame(),this.on(h.UPDATE_PLAY_THEME,this.updateSpriteFrame,this),this.selectPath.onChange(this.updateSpriteFrame.bind(this))},s.updateSpriteFrame=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.selectPath.path;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(l)).prototype,"selectPath",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),P=S))||P)||P)||P)||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/Poker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConst.ts"],(function(e){var o,r,t,i,n,l,a,c,u,p,s,b,f,g,k;return{setters:[function(e){o=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.Node,c=e.Label,u=e.Sprite,p=e.SpriteFrame,s=e.v3,b=e.tween,f=e.Component},function(e){g=e.ranks,k=e.suitsColor}],execute:function(){var m,d,h,y,v,P,F,I,w,C,z,B,S,V,D,L,_,G,H,R,j,x,A,M,N,T,W;n._RF.push({},"673fcHF0X9DWIkl9kGS2kc8","Poker",void 0);var X=l.ccclass,q=l.property;e("Poker",(m=X("Poker"),d=q({tooltip:"poker bg"}),h=q(a),y=q({tooltip:"poker value"}),v=q(c),P=q({tooltip:"small poker type icon"}),F=q(u),I=q({tooltip:"poker type icon"}),w=q(u),C=q({tooltip:"poker back bg"}),z=q(u),B=q({tooltip:"small poker type icon spriteFrames"}),S=q([p]),V=q({tooltip:"poker type icon spriteFames"}),D=q([p]),L=q({tooltip:"poker select light"}),_=q(u),m((R=o((H=function(e){function o(){for(var o,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return o=e.call.apply(e,[this].concat(n))||this,t(o,"bg",R,i(o)),t(o,"pokerValue",j,i(o)),t(o,"sColorIcon",x,i(o)),t(o,"ColorIcon",A,i(o)),t(o,"backBg",M,i(o)),t(o,"sColorIconSpriteFrames",N,i(o)),t(o,"colorIconSpriteFrames",T,i(o)),t(o,"lightBorder",W,i(o)),o}r(o,e);var n=o.prototype;return n.start=function(){},n.showPokerValue=function(e,o,r){var t=this;return void 0===r&&(r=!0),new Promise((function(i,n){t.resetPoker(),t.pValue=e,t.pokerValue.string=g[e],t.pokerValue.color=k[o],t.sColorIcon.spriteFrame=t.sColorIconSpriteFrames[o],t.ColorIcon.spriteFrame=t.colorIconSpriteFrames[o];var l=t.node.getScale(),a=s(0,l.y,l.z);r?b(t.node).to(.1,{scale:a}).call((function(){t.backBg.node.active=!0})).to(.1,{scale:l}).call((function(){t.backBg.node.active=!1,i()})).start():(t.backBg.node.active=!1,i())}))},n.showPokerLight=function(){this.lightBorder.node.active=!0;var e=this.node.getPosition();e.y+=20,this.node.setPosition(e)},n.resetPoker=function(){this.backBg.node.active=!0,this.lightBorder.node.active=!1;var e=this.node.getPosition();e.y=0,this.node.setPosition(e)},n.update=function(e){},o}(f)).prototype,"bg",[d,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=o(H.prototype,"pokerValue",[y,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=o(H.prototype,"sColorIcon",[P,F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=o(H.prototype,"ColorIcon",[I,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=o(H.prototype,"backBg",[C,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=o(H.prototype,"sColorIconSpriteFrames",[B,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=o(H.prototype,"colorIconSpriteFrames",[V,D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=o(H.prototype,"lightBorder",[L,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=H))||G));n._RF.pop()}}}));

System.register("chunks:///_virtual/PokerGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Poker.ts","./index.mjs_cjs=&original=2.js","./GameConst.ts","./index2.js"],(function(e){var t,r,n,o,a,i,u,c,s,l,p,h,d,f,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,s=e.Sprite,l=e.Label,p=e.Component},function(e){h=e.Poker},null,function(e){d=e.ranks,f=e.suitsColorValue},function(e){k=e.default}],execute:function(){var g,v,y,m,P,b,w,C,R,S,V,B,F,z,G;u._RF.push({},"171acO+qwBL2aN9k3uMUXyR","PokerGroup",void 0);var T=c.ccclass,j=c.property;e("PokerGroup",(g=T("PokerGroup"),v=j({tooltip:"poker 1"}),y=j(h),m=j({tooltip:"poker 2"}),P=j(h),b=j({tooltip:"poker pattern"}),w=j(s),C=j({tooltip:"poker pattern value"}),R=j(l),g((B=t((V=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,n(t,"poker1",B,o(t)),n(t,"poker2",F,o(t)),n(t,"patternBg",z,o(t)),n(t,"patternValue",G,o(t)),t}r(t,e);var u=t.prototype;return u.start=function(){},u.updatePokersValue=function(){var e=a(i().mark((function e(t,r,n,o,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=!0),this.card1=""+this.checkReplace(d[t])+f[r],this.card2=""+this.checkReplace(d[n])+f[o],this.poker1.showPokerValue(t,r,a),e.next=6,this.poker2.showPokerValue(n,o,a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,o,a){return e.apply(this,arguments)}}(),u.checkAndUpdateHand=function(e){var t,r=this;if(console.log(e),console.log(this.card1),console.log(this.card2),null==e||e.length<=0)t={holeCards:[this.card1,this.card2],communityCards:[]};else{var n=e.map((function(e){return""+r.checkReplace(d[e.rank])+f[e.suit]}));t={holeCards:[this.card1,this.card2],communityCards:n}}console.log(t);var o=k.evaluate(t);this.updateSolvehand(this.getSolvehand(o.strength))},u.convertCardDataToCards=function(e){var t=this;if(null==e||e.length<=0)return[];e.map((function(e){return""+t.checkReplace(d[e.rank])+f[e.suit]}))},u.checkReplace=function(e){return"10"==e?"T":e},u.getSolvehand=function(e){switch(e){case 0:return"High Card";case 1:return"One Pair";case 2:return"Two Pair";case 3:return"Three Of A Kind";case 4:return"Straight";case 5:return"Flush";case 6:return"Full House";case 7:return"Four Of A Kind";case 8:return"Straight Flush";case 9:return"Royal Flush"}},u.showHideCard=function(){this.patternBg.node.active=!1,this.poker1.resetPoker(),this.poker2.resetPoker()},u.updateSolvehand=function(e){this.patternBg.node.active=!0,this.patternValue.string=e},u.hideSolvehand=function(){this.patternBg.node.active=!1,this.patternValue.string=""},u.update=function(e){},t}(p)).prototype,"poker1",[v,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(V.prototype,"poker2",[m,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(V.prototype,"patternBg",[b,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(V.prototype,"patternValue",[C,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=V))||S));u._RF.pop()}}}));

System.register("chunks:///_virtual/PokerManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Poker.ts","./PokerGroup.ts"],(function(e){var r,o,t,n,a,i,s,u,l,p,c,h,k;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,l=e.Node,p=e.Component,c=e.instantiate},function(e){h=e.Poker},function(e){k=e.PokerGroup}],execute:function(){var P,d,f,g,v,m,w,y,b,G,C,x;s._RF.push({},"228achQl0hO+pStT/Nwwviq","PokerManger",void 0);var H=u.ccclass,L=u.property;e("PokerManager",(P=H("PokerManager"),d=L({tooltip:"owner poker group"}),f=L(k),g=L({tooltip:"other player poker group"}),v=L(k),m=L({tooltip:"public poker layout"}),w=L(l),P((G=r((b=function(e){function r(){for(var r,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=e.call.apply(e,[this].concat(a))||this,t(r,"ownerPokerGroup",G,n(r)),t(r,"otherPokerGroup",C,n(r)),t(r,"publicPokerLayout",x,n(r)),r.smallPokerMaps=new Map,r.ohterHandsPokers=new Map,r}o(r,e);var s=r.prototype;return s.onLoad=function(){this.hiddenAllPokers()},s.clearAllSmallPokers=function(){this.smallPokerMaps.size>0&&(Array.from(this.smallPokerMaps.values()).forEach((function(e){e.forEach((function(e){e.destroy()}))})),this.smallPokerMaps.clear())},s.getSmallPokerNodes=function(e){return this.smallPokerMaps.get(e)},s.removeSmallPokerNodes=function(e){var r=this.smallPokerMaps.get(e);r&&r.length>0&&r.forEach((function(e){e.destroy()})),this.smallPokerMaps.delete(e)},s.hiddenAllPokers=function(){this.ownerPokerGroup.node.active=!1,this.otherPokerGroup.node.active=!1,this.hiddenAllPublickPokers(),this.clearAllOthersPokers()},s.hiddenAllPublickPokers=function(){for(var e=0;e<5;e++){this.publicPokerLayout.getChildByName(e.toString()).active=!1}},s.showPublickPoker=function(e,r,o){var t=this.getPublickPoker(o);t.node.active||(t.node.active=!0),t.showPokerValue(e,r)},s.getPublickPoker=function(e){return this.publicPokerLayout.getChildByName(e.toString()).getComponent(h)},s.showOwnerPlayerPokers=function(){var e=a(i().mark((function e(r,o,t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ownerPokerGroup.node.active=!0,e.next=3,this.ownerPokerGroup.updatePokersValue(r,o,t,n);case 3:case"end":return e.stop()}}),e,this)})));return function(r,o,t,n){return e.apply(this,arguments)}}(),s.clearAllOthersPokers=function(){console.log("clear add poker"),this.ohterHandsPokers.forEach((function(e,r){console.log(r),e.destroy()})),this.ohterHandsPokers.clear()},s.updateHand=function(e){var r=this.ohterHandsPokers.get(e);r&&r.getComponent(k).checkAndUpdateHand(this.cardData)},s.addOtherPokerValues=function(){var e=a(i().mark((function e(r,o,t,n,a,s,u){var l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===u&&(u=!0),(l=c(this.otherPokerGroup.node)).active=!0,l.parent=this.otherPokerGroup.node.parent,l.setPosition(a),this.ohterHandsPokers.set(s,l),e.next=8,l.getComponent(k).updatePokersValue(r,o,t,n,u);case 8:return e.abrupt("return",l);case 9:case"end":return e.stop()}}),e,this)})));return function(r,o,t,n,a,i,s){return e.apply(this,arguments)}}(),s.addOtherPlayerCard=function(){var e=a(i().mark((function e(r,o){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=c(this.otherPokerGroup.node)).active=!0,t.parent=this.otherPokerGroup.node.parent,t.setPosition(r),this.ohterHandsPokers.set(o,t),e.next=7,t.getComponent(k).showHideCard();case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(r,o){return e.apply(this,arguments)}}(),s.getPokerGroup=function(e){return console.log("getPokerGroup",e),0==e?this.ownerPokerGroup.node:this.ohterHandsPokers.get(e)},s.updateCommunityPokerValues=function(){var e=a(i().mark((function e(r){var o,t,n,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cardData=r,o=r.length,t=0;case 3:if(!(t<r.length)){e.next=19;break}if(n=this.publicPokerLayout.getChildByName(t.toString()),!(t<o)){e.next=16;break}if(a=r[t].rank,s=r[t].suit,n.active||-1==a){e.next=16;break}if(n.active=!0,t!=r.length-1){e.next=15;break}return e.next=13,n.getComponent(h).showPokerValue(a,s);case 13:e.next=16;break;case 15:n.getComponent(h).showPokerValue(a,s);case 16:t++,e.next=3;break;case 19:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),s.updateSolveHand=function(e,r){var o=this.getPokerGroup(r);o&&o.getComponent(k).updateSolvehand(e)},s.lightPlayerHandsPoker=function(e){var r=this.ownerPokerGroup.poker1.pValue,o=this.ownerPokerGroup.poker2.pValue;return-1!=e.indexOf(r)&&this.ownerPokerGroup.poker1.showPokerLight(),-1!=e.indexOf(o)&&this.ownerPokerGroup.poker2.showPokerLight(),this.ownerPokerGroup.node},s.lightOtherPlayerHandPoker=function(e,r){var o=this.ohterHandsPokers.get(r);if(o){var t=o.getComponent(k).poker1.pValue,n=o.getComponent(k).poker2.pValue;return-1!=e.indexOf(t)&&o.getComponent(k).poker1.showPokerLight(),-1!=e.indexOf(n)&&o.getComponent(k).poker2.showPokerLight(),o}},s.lightCommunityPoker=function(e){for(var r=0;r<5;r++){var o=this.publicPokerLayout.getChildByName(r.toString()).getComponent(h);-1!=e.indexOf(o.pValue)&&o.showPokerLight()}},r}(p)).prototype,"ownerPokerGroup",[d,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=r(b.prototype,"otherPokerGroup",[g,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(b.prototype,"publicPokerLayout",[m,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/PokerModel.ts",["cc","./ZKHoldemSDKManager.ts"],(function(e){var r,t;return{setters:[function(e){r=e.cclegacy},function(e){t=e.ZKHoldemSDKManager}],execute:function(){r._RF.push({},"cbdb9P+Xw1B4bCX8+iau+my","PokerModel",void 0);e("default",function(){function e(){}return e.decryptedCard=function(e){return new Promise((function(r,n){var c,o=0;c=setInterval((function(){if(console.log("decrypted card "+e+" count:"+o),o>20)return console.error("decrypted card "+e+" has 20 times, decrypted faild!"),r(-1),void clearInterval(c);o++;var n=t.instance.game.decryptedCard(e);console.log("decrypted card "+e+" error sdk decrypted value "+n+" count "+o),-1!=n&&(r(n),clearInterval(c))}),500)}))},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/PokerTypeHelper.ts",["cc","./GameConst.ts","./pokersolver.mjs_cjs=&original=.js","./pokersolver.js"],(function(e){var o,r,n,s,c;return{setters:[function(e){o=e.cclegacy},function(e){r=e.CardDeckType,n=e.ranks,s=e.suitsColorValue},null,function(e){c=e.default}],execute:function(){e("solveHandsTypes",(function(e,o){var a=e.concat(o),t=Object.create(null),l=[];a.forEach((function(e){if(-1!=e&&255!==e){var o=e%4,r=Math.floor(e/4),c=n[r];"10"==c&&(c="T");var a=c+s[o];t[a]=e,l.push(a)}})),console.log("cardMap",t),console.log("cards",l);var u=c.Hand.solve(l);return console.log("hand",u),{type:u.descr===r.RoyalFlush?u.descr:u.name,pokers:u.cards.map((function(e){return t[e.value+e.suit]}))}})),o._RF.push({},"38d08vNfCJMWbS4bMKbPJfj","PokerTypeHelper",void 0),o._RF.pop()}}}));

System.register("chunks:///_virtual/Popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts"],(function(t){var e,i,n,s,o,h,a,r,c,p,u,d,g,l,y,f,_,m,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createClass},function(t){h=t.cclegacy,a=t._decorator,r=t.ccenum,c=t.CCFloat,p=t.Node,u=t.UITransform,d=t.v3,g=t.tween,l=t.Component},function(t){y=t.setNodeHeight,f=t.getNodeHeight,_=t.setNodeWidth,m=t.getNodeWidth,v=t.getNodeSize}],execute:function(){var T,b,C,x,E,P,w,z,M,O,H,N,S;h._RF.push({},"be462GxK0hOZYq806mBKYhX","Popup",void 0);var X=a.ccclass,Y=a.property,A=t("PopupType",function(t){return t[t.X=0]="X",t[t.Y=1]="Y",t[t.Width=2]="Width",t[t.Height=3]="Height",t}({}));r(A);var W=t("PopupEventType",function(t){return t.OPEN="popup-open",t.CLOSE="popup-close",t.PROGRESS="popup-progress",t}({})),k=t("PopupStatus",function(t){return t[t.Open=0]="Open",t[t.Close=1]="Close",t}({}));t("Popup",(T=X("Popup"),b=Y({type:c,displayName:""}),C=Y({type:c,displayName:" max,min"}),x=Y({type:c,displayName:""}),E=Y({type:A,displayName:"",tooltip:",X,Y,Width,Height"}),P=Y({type:p,tooltip:"()"}),T((M=e((z=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),h=0;h<i;h++)o[h]=arguments[h];return e=t.call.apply(t,[this].concat(o))||this,n(e,"minSize",M,s(e)),n(e,"offset",O,s(e)),n(e,"speed",H,s(e)),n(e,"type",N,s(e)),n(e,"parentNode",S,s(e)),e._status=k.Close,e}i(e,t);var h=e.prototype;return h.onEnable=function(){this.node.on(p.EventType.TOUCH_START,this._stop,this),this.node.on(p.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(p.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(p.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},h.onDisable=function(){this.node.off(p.EventType.TOUCH_START,this._stop,this),this.node.off(p.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(p.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(p.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},h._onTouchMove=function(t){var e=this.node.getPosition(),i=t.getDelta(),n=this._getMinAndMax(),s=n.max,o=n.min,h=function(t){return Math.max(Math.min(t,s),o)};switch(this.type){case A.X:this.node.setPosition(h(e.x+i.x),e.y);break;case A.Y:this.node.setPosition(e.x,h(e.y+i.y));break;case A.Width:_(this.node,h(m(this.node)+i.x));break;case A.Height:y(this.node,h(f(this.node)+i.y))}this._emitProgress()},h._getMinAndMax=function(){var t=this._axisKey,e=(this.parentNode||this.node.parent).getComponent(u),i=this.getComponent(u),n=this.node.parent.getComponent(u);switch(this.type){case A.X:case A.Y:var s=n.convertToNodeSpaceAR(e.convertToWorldSpaceAR(d(e.width*-e.anchorX-i.width*(1-i.anchorX),e.height*-e.anchorY-i.height*(1-i.anchorY),0))),o=n.convertToNodeSpaceAR(e.convertToWorldSpaceAR(d(e.width*(1-e.anchorX)-i.width*(1-i.anchorX),e.height*(1-e.anchorY)-i.height*(1-i.anchorY),0)));return{min:this.minSize+s[t]+this.offset,max:o[t]+this.offset};case A.Width:case A.Height:return{min:this.minSize+this.offset,max:e[this._sizeKey]+this.offset}}},h._onTouchEnd=function(t){var e=t.getStartLocation(),i=t.getLocation(),n=this._getMinAndMax(),s=n.min,o=n.max,h=this._axisKey,a=Math.abs(i[h]-e[h])/(o-s),r=this.getLocalProportion();e[h]>i[h]?a>.2||r<=.2?this.close():this.open():a>.2||r>=1?this.open():this.close()},h._emitProgress=function(){this.node.emit(W.PROGRESS,this.getLocalProportion())},h._stop=function(){this._tween&&this._tween.stop()},h.getLocalProportion=function(){var t,e=this._getMinAndMax(),i=e.min,n=e.max;switch(this.type){case A.X:case A.Y:t=this.node.getPosition()[this._axisKey];break;case A.Width:case A.Height:t=v(this.node)[this._sizeKey]}return(t-i)/(n-i)},h.open=function(){var t,e=this;this._stop();var i,n=this._getMinAndMax().max,s="backOut",o=function(t,i,n,s){return e._emitProgress(),t+(i-t)*s};switch(this.type){case A.Width:case A.Height:var h=v(this.node),a=Math.abs(n-h[this._sizeKey])/this.speed;i=g(this.node.getComponent(u)).to(a,((t={})[this._sizeKey]=n,t),{easing:s,progress:o});break;case A.X:case A.Y:var r=this.node.getPosition(),c=this.type===A.X?d(n,r.y,r.z):d(r.x,n,r.z),p=r.subtract(c).length()/this.speed;i=g(this.node).to(p,{position:c},{easing:s,progress:o})}this._tween=i.call((function(){return e.status=k.Open})).start()},h.close=function(){var t,e=this;this._stop();var i,n=this._getMinAndMax().min,s="backOut",o=function(t,i,n,s){return e._emitProgress(),t+(i-t)*s};switch(this.type){case A.Width:case A.Height:var h=v(this.node),a=Math.abs(h[this._sizeKey]-n)/this.speed;i=g(this.node.getComponent(u)).to(a,((t={})[this._sizeKey]=n,t),{easing:s,progress:o});break;case A.X:case A.Y:var r=this.node.getPosition(),c=this.type===A.X?d(n,r.y,r.z):d(r.x,n,r.z),p=r.subtract(c).length()/this.speed;i=g(this.node).to(p,{position:c},{easing:s,progress:o})}this._tween=i.call((function(){return e.status=k.Close})).start()},o(e,[{key:"status",get:function(){return this._status},set:function(t){switch(this._status=t,t){case k.Open:this.node.emit(W.OPEN);break;case k.Close:this.node.emit(W.CLOSE)}}},{key:"_axisKey",get:function(){switch(this.type){case A.X:case A.Width:return"x";case A.Y:case A.Height:return"y"}}},{key:"_anchorKey",get:function(){switch(this.type){case A.X:case A.Width:return"anchorX";case A.Y:case A.Height:return"anchorY"}}},{key:"_sizeKey",get:function(){switch(this.type){case A.X:case A.Width:return"width";case A.Y:case A.Height:return"height"}}}]),e}(l)).prototype,"minSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),O=e(z.prototype,"offset",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=e(z.prototype,"speed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),N=e(z.prototype,"type",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.Y}}),S=e(z.prototype,"parentNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=z))||w));h._RF.pop()}}}));

System.register("chunks:///_virtual/PopupInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts"],(function(t){var n,e,o,i,r,u,a,l,c,s,p,b,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,u=t.regeneratorRuntime},function(t){a=t.cclegacy,l=t._decorator,c=t.Button,s=t.EditBox,p=t.Label,b=t.Component},function(t){h=t.PopupType}],execute:function(){var f,y,C,v,B,I,d,g,k,m,w;a._RF.push({},"197789h57ZBa6nUHPmwx17A","PopupInput",void 0);var L=l.ccclass,P=l.property;t("PopupInput",(f=L("PopupInput"),y=P(c),C=P(c),v=P(s),B=P(p),f((g=n((d=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,o(n,"joinButton",g,i(n)),o(n,"closeButton",k,i(n)),o(n,"buyInInput",m,i(n)),o(n,"buttonLabel",w,i(n)),n.clickCount=0,n}e(n,t);var a=n.prototype;return a.onLoad=function(){this.joinButton.node.on(c.EventType.CLICK,this.onClickJoinButton,this),this.closeButton.node.on(c.EventType.CLICK,this.onClickCloseButton,this)},a.onClickCloseButton=function(){this.node.active=!1},a.onClickJoinButton=function(){this.clickCount++},a.enablePopup=function(){var t=r(u().mark((function t(n){var e=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clickCount=0,n==h.Create?this.buttonLabel.string="Create":n==h.JoinRandom?this.buttonLabel.string="Join":this.buttonLabel.string="Withdraw",t.next=4,this.waitForVariable((function(){return e.clickCount}));case 4:return this.clickCount=0,this.onClickCloseButton(),t.abrupt("return",this.buyInInput.textLabel.string);case 7:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),a.waitForVariable=function(t,n){return void 0===n&&(n=100),new Promise((function(e){var o=setInterval((function(){var n=t();null!=n&&n>0&&(clearInterval(o),e(n))}),n)}))},n}(b)).prototype,"joinButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(d.prototype,"closeButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(d.prototype,"buyInInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(d.prototype,"buttonLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=d))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/PopupJoinGame.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,o,e,i,u,r,l,a,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){u=t.cclegacy,r=t._decorator,l=t.Button,a=t.EditBox,c=t.Component}],execute:function(){var p,s,b,f,h,y,I,B,d,m,C;u._RF.push({},"5c0a9R6DZ9IsJ42QG1lXD7/","PopupJoinGame",void 0);var g=r.ccclass,v=r.property;t("PopupJoinGame",(p=g("PopupJoinGame"),s=v(l),b=v(l),f=v(a),h=v(a),p((B=n((I=function(t){function n(){for(var n,o=arguments.length,u=new Array(o),r=0;r<o;r++)u[r]=arguments[r];return n=t.call.apply(t,[this].concat(u))||this,e(n,"joinButton",B,i(n)),e(n,"closeButton",d,i(n)),e(n,"zoomIdInput",m,i(n)),e(n,"buyInInput",C,i(n)),n}o(n,t);var u=n.prototype;return u.onLoad=function(){this.joinButton.node.on(l.EventType.CLICK,this.onClickJoinButton,this),this.closeButton.node.on(l.EventType.CLICK,this.onClickCloseButton,this)},u.onClickCloseButton=function(){this.node.active=!1},u.onClickJoinButton=function(){this.onClickCloseButton(),this.callback(this.zoomIdInput.textLabel.string,this.buyInInput.textLabel.string)},u.enablePopup=function(t){this.callback=t},n}(c)).prototype,"joinButton",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(I.prototype,"closeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(I.prototype,"zoomIdInput",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(I.prototype,"buyInInput",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=I))||y));u._RF.pop()}}}));

System.register("chunks:///_virtual/PopupManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PopupJoinGame.ts","./PopupInput.ts"],(function(n){var e,t,p,o,r,u,i,a,c,s,l;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,p=n.initializerDefineProperty,o=n.assertThisInitialized,r=n.asyncToGenerator,u=n.regeneratorRuntime},function(n){i=n.cclegacy,a=n._decorator,c=n.Component},function(n){s=n.PopupJoinGame},function(n){l=n.PopupInput}],execute:function(){var f,h,m,P,v,d,y;i._RF.push({},"7adc7a1w4RNobR3tWXnXhw0","PopupManager",void 0);var b=a.ccclass,g=a.property;n("PopupManager",(f=b("PopupManager"),h=g(s),m=g(l),f((d=e((v=function(n){function e(){for(var e,t=arguments.length,r=new Array(t),u=0;u<t;u++)r[u]=arguments[u];return e=n.call.apply(n,[this].concat(r))||this,p(e,"popupJoinGame",d,o(e)),p(e,"popupInput",y,o(e)),e}t(e,n);var i=e.prototype;return i.onLoad=function(){this.popupJoinGame.node.active=!1,this.popupInput.node.active=!1},i.ShowPopupJoinGame=function(n){this.popupJoinGame.node.active=!0,this.popupJoinGame.enablePopup(n)},i.ShowPopupInput=function(){var n=r(u().mark((function n(e){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.popupInput.node.active=!0,n.next=3,this.popupInput.enablePopup(e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),e}(c)).prototype,"popupJoinGame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(v.prototype,"popupInput",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=v))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/PromiseUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("delay",(function(t){return new Promise((function(e,c){setTimeout(e,t)}))})),e._RF.push({},"ab0b7WKtDxDV7Bc6cHpIkEw","PromiseUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/QueryString.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){function r(e,n){return Object.prototype.hasOwnProperty.call(e,n)}n._RF.push({},"c1395ABvLZK4bvfEdIZ0HBy","QueryString",void 0);var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e("default",function(){function e(){}return e.parse=function(e,n,t,o){n=n||"&",t=t||"=";var u={};if("string"!=typeof e||0===e.length)return u;var c=/\+/g;e=e.split(n);var i=1e3;o&&"number"==typeof o.maxKeys&&(i=o.maxKeys);var a=e.length;i>0&&a>i&&(a=i);for(var s=0;s<a;++s){var f,p,y,d,l=e[s].replace(c,"%20"),m=l.indexOf(t);m>=0?(f=l.substr(0,m),p=l.substr(m+1)):(f=l,p=""),y=decodeURIComponent(f),d=decodeURIComponent(p),r(u,y)?Array.isArray(u[y])?u[y].push(d):u[y]=[u[y],d]:u[y]=d}return u},e.stringify=function(e,n,r,o){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(o){var u=encodeURIComponent(t(o))+r;return Array.isArray(e[o])?e[o].map((function(e){return u+encodeURIComponent(t(e))})).join(n):u+encodeURIComponent(t(e[o]))})).join(n):o?encodeURIComponent(t(o))+r+encodeURIComponent(t(e)):""},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/QueueManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(t){var e,n,s,r,u,i;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){r=t.cclegacy,u=t._decorator},function(t){i=t.Logger}],execute:function(){r._RF.push({},"c7d42gsASlPboMrBSH4wgPZ","QueueManager",void 0);u.ccclass,u.property;var a=t("Queue",function(){function t(t,e,n,s){this._isRun=!1,this.fn=t,this.arg=e,this.resolve=n,this.reject=s,this.fn=t,this.arg=e}var r=t.prototype;return r.cancel=function(){this._isCancel=!0},r.run=function(){var t=n(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isRun=!0,!this._isCancel){t.next=4;break}return this.resolve(),t.abrupt("return");case 4:return t.prev=4,t.t0=this,t.next=8,this.fn.apply(null,this.arg);case 8:t.t1=t.sent,t.t0.resolve.call(t.t0,t.t1),t.next=15;break;case 12:t.prev=12,t.t2=t.catch(4),this.reject(t.t2);case 15:case"end":return t.stop()}}),t,this,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),e(t,[{key:"isRun",get:function(){return this._isRun}}]),t}()),c=t("QueueManagerState",function(t){return t[t.Run=0]="Run",t[t.Pause=1]="Pause",t[t.Running=2]="Running",t[t.Destroy=3]="Destroy",t}({}));t("QueueManager",function(){function t(t){this._state=c.Run,this._queueList=[],this._endCallbacks=[],this.name=t,this._sid=setInterval(this.update.bind(this))}t.getInstance=function(e){return this._instances[e]||(this._instances[e]=new t(e)),this._instances[e]},t.destroyInstance=function(t){this._instances[t]||(this._instances[t].destroy(),this._instances[t]=null)};var r=t.prototype;return r.get=function(t){return this._queueList[t]},r.indexOf=function(t){return this._queueList.indexOf(t)},r.push=function(t){for(var e=this,n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return new Promise((function(n,r){var u=new a(t,s,n,r);e._queueList.push(u)}))},r.pause=function(){return this._state!==c.Destroy&&(this._state=c.Pause),this},r.resume=function(){return this._state===c.Pause&&(this._state=c.Run),this},r.end=function(t){var e=this;return new Promise((function(n){t&&e._endCallbacks.push(t),e._endCallbacks.push(n)}))},r._run=function(){var t=n(s().mark((function t(){var e=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._state===c.Run){t.next=2;break}return t.abrupt("return");case 2:return this._state=c.Running,t.prev=3,t.next=6,this._queueList[0].run();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),i.error("",t.t0);case 11:if(this._state!==c.Destroy){t.next=13;break}return t.abrupt("return");case 13:if(this._queueList[0]){t.next=17;break}return this._endCallbacks.forEach((function(t){return t(e)})),this._endCallbacks.length=0,t.abrupt("return");case 17:this._queueList.splice(0,1),this._state===c.Running&&(this._state=c.Run);case 19:case"end":return t.stop()}}),t,this,[[3,8]])})));return function(){return t.apply(this,arguments)}}(),r.destroy=function(){this._state=c.Destroy,this._queueList=null,this._endCallbacks=null,t._instances[this.name]=null,clearInterval(this._sid)},r.update=function(){this._state===c.Run&&this._queueList[0]&&this._run()},e(t,[{key:"length",get:function(){return this._queueList.length}}],[{key:"default",get:function(){return this.getInstance("default")}}]),t}())._instances=Object.create(null),r._RF.pop()}}}));

System.register("chunks:///_virtual/RaiseManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./I18n.ts"],(function(t){var i,e,n,o,r,l,s,a,u,p,c,h,d,f,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){l=t.cclegacy,s=t._decorator,a=t.EditBox,u=t.Slider,p=t.Sprite,c=t.Label,h=t.Button,d=t.Node,f=t.Component},function(t){b=t.I18n}],execute:function(){var C,g,S,m,y,T,v,B,_,R,P,w,z,E,M,D,N,V,k,H,O,U,I,L,A,Q,x,F,j,J;l._RF.push({},"00701OQhu5Pro4yDIdJzu0W","RaiseManger",void 0);var W=s.ccclass,q=s.property;t("RaiseManger",(C=W("RaiseManger"),g=q({tooltip:"raise show value"}),S=q(a),m=q({tooltip:"raise slider"}),y=q(u),T=q({tooltip:"raise slider color bar"}),v=q(p),B=q({tooltip:"raise slider tipsBg"}),_=q(p),R=q({tooltip:"raise slider tips value"}),P=q(c),w=q({tooltip:"all pot button"}),z=q(h),E=q({tooltip:"1/2 pot button"}),M=q(h),D=q({tooltip:"1/3 pot button"}),N=q(h),V=q({tooltip:"confirm button"}),k=q(h),C((U=i((O=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,n(i,"raiseValue",U,o(i)),n(i,"raiseSlider",I,o(i)),n(i,"raiseSliderBar",L,o(i)),n(i,"raiseSliderTips",A,o(i)),n(i,"raiseSliderTipsValue",Q,o(i)),n(i,"allPotButton",x,o(i)),n(i,"pot1p2Button",F,o(i)),n(i,"pot1p3Button",j,o(i)),n(i,"confirmButton",J,o(i)),i.onSelectRaiseChipsCallback=null,i.totalChips=0,i.baseRaise=0,i.allPot=0,i._minChips=0,i._selectChips=0,i}e(i,t);var l=i.prototype;return l.start=function(){var t=this;this.raiseSlider.node.on("slide",(function(i){t.selectChips=Math.floor(i.progress*t.totalChips)})),this.raiseSlider.handle.node.on(d.EventType.TOUCH_START,(function(){t.raiseSliderTips.node.active||(t.raiseSliderTips.node.active=!0)})),this.raiseSlider.handle.node.on(d.EventType.TOUCH_END,(function(){t.raiseSliderTips.node.active=!1})),this.allPotButton.node.on(d.EventType.TOUCH_END,(function(){t.selectChips=Math.min(t.totalChips,t.allPot)})),this.pot1p2Button.node.on(d.EventType.TOUCH_END,(function(){t.selectChips=t.selectChips=Math.min(t.totalChips,Math.floor(t.allPot/2))})),this.pot1p3Button.node.on(d.EventType.TOUCH_END,(function(){t.selectChips=Math.min(t.totalChips,Math.floor(t.allPot/3))})),this.confirmButton.node.on(d.EventType.TOUCH_END,(function(){t.selectChips>0&&t.onSelectRaiseChipsCallback&&t.onSelectRaiseChipsCallback(t.selectChips)}))},l.onLoad=function(){var t=this;this.raiseSliderTips.node.active=!1,this.raiseValue.node.on("editing-did-ended",(function(i){var e=Number(i.string);console.log("inputNum",e),0==e?t.selectChips=t._selectChips:(e>t.totalChips+t.baseRaise?e=t.totalChips:e-=t.baseRaise,t.selectChips=e)}))},l.updateQuickSelectPotButton=function(){},l.showRaise=function(t,i,e,n){this.totalChips=t,this._minChips=i,this.baseRaise=e,this.selectChips=this._minChips,this.node.active=!0,this.allPot=n,this.updateQuickSelectPotButton()},l.update=function(t){},r(i,[{key:"selectChips",get:function(){return this._selectChips},set:function(t){t<this._minChips&&(t=this._minChips),this._selectChips=t;var i=t/this.totalChips;this.raiseSlider.progress=i,this.raiseSliderBar.fillRange=i,t==this.totalChips?this.raiseSliderTipsValue.string=b.get("All_In"):this.raiseSliderTipsValue.string=(t+this.baseRaise).toString(),this.raiseValue.string=(t+this.baseRaise).toString()}}]),i}(f)).prototype,"raiseValue",[g,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(O.prototype,"raiseSlider",[m,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(O.prototype,"raiseSliderBar",[T,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(O.prototype,"raiseSliderTips",[B,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(O.prototype,"raiseSliderTipsValue",[R,P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(O.prototype,"allPotButton",[w,z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(O.prototype,"pot1p2Button",[E,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(O.prototype,"pot1p3Button",[D,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(O.prototype,"confirmButton",[V,k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=O))||H));l._RF.pop()}}}));

System.register("chunks:///_virtual/reactive.ts",["cc","./shared.ts","./baseHandlers.ts","./collectionHandlers.ts"],(function(e){var n,a,t,r,o,l,c,i,s,u,f,R;return{setters:[function(e){n=e.cclegacy},function(e){a=e.isObject,t=e.toRawType,r=e.def},function(e){o=e.mutableHandlers,l=e.shallowReactiveHandlers,c=e.readonlyHandlers,i=e.shallowReadonlyHandlers},function(e){s=e.mutableCollectionHandlers,u=e.shallowCollectionHandlers,f=e.readonlyCollectionHandlers,R=e.shallowReadonlyCollectionHandlers}],execute:function(){e({isProxy:function(e){return M(e)||k(e)},isReactive:M,isReadonly:k,isShallow:function(e){return!(!e||!e[d.IS_SHALLOW])},markRaw:function(e){return r(e,d.SKIP,!0),e},reactive:W,readonly:A,shallowReactive:function(e){return H(e,!1,l,u,_)},shallowReadonly:function(e){return H(e,!0,i,R,S)},toRaw:function e(n){var a=n&&n[d.RAW];return a?e(a):n}}),n._RF.push({},"e3fc6X1hXBJXKaahTBYWSCL","reactive",void 0);var d=e("ReactiveFlags",{SKIP:"__v_skip",IS_REACTIVE:"__v_isReactive",IS_READONLY:"__v_isReadonly",IS_SHALLOW:"__v_isShallow",RAW:"__v_raw"}),v=e("reactiveMap",new WeakMap),_=e("shallowReactiveMap",new WeakMap),w=e("readonlyMap",new WeakMap),S=e("shallowReadonlyMap",new WeakMap),y=0,h=1,p=2;function I(e){return e[d.SKIP]||!Object.isExtensible(e)?y:function(e){switch(e){case"Object":case"Array":return h;case"Map":case"Set":case"WeakMap":case"WeakSet":return p;default:return y}}(t(e))}function W(e){return k(e)?e:H(e,!1,o,s,v)}function A(e){return H(e,!0,c,f,w)}function H(e,n,t,r,o){if(!a(e))return console.warn("value cannot be made reactive: "+String(e)),e;if(e[d.RAW]&&(!n||!e[d.IS_REACTIVE]))return e;var l=o.get(e);if(l)return l;var c=I(e);if(c===y)return e;var i=new Proxy(e,c===p?r:t);return o.set(e,i),i}function M(e){return k(e)?M(e[d.RAW]):!(!e||!e[d.IS_REACTIVE])}function k(e){return!(!e||!e[d.IS_READONLY])}e("toReactive",(function(e){return a(e)?W(e):e})),e("toReadonly",(function(e){return a(e)?A(e):e}));n._RF.pop()}}}));

System.register("chunks:///_virtual/reactivity.ts",["cc","./ref.ts","./reactive.ts","./computed.ts","./deferredComputed.ts","./effect.ts","./effectScope.ts","./operations.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){var r={};r.customRef=t.customRef,r.isRef=t.isRef,r.proxyRefs=t.proxyRefs,r.ref=t.ref,r.shallowRef=t.shallowRef,r.toRef=t.toRef,r.toRefs=t.toRefs,r.triggerRef=t.triggerRef,r.unref=t.unref,e(r)},function(t){var r={};r.ReactiveFlags=t.ReactiveFlags,r.isProxy=t.isProxy,r.isReactive=t.isReactive,r.isReadonly=t.isReadonly,r.isShallow=t.isShallow,r.markRaw=t.markRaw,r.reactive=t.reactive,r.readonly=t.readonly,r.shallowReactive=t.shallowReactive,r.shallowReadonly=t.shallowReadonly,r.toRaw=t.toRaw,e(r)},function(t){e("computed",t.computed)},function(t){e("deferredComputed",t.deferredComputed)},function(t){var r={};r.ITERATE_KEY=t.ITERATE_KEY,r.ReactiveEffect=t.ReactiveEffect,r.effect=t.effect,r.enableTracking=t.enableTracking,r.pauseTracking=t.pauseTracking,r.resetTracking=t.resetTracking,r.stop=t.stop,r.track=t.track,r.trigger=t.trigger,e(r)},function(t){var r={};r.EffectScope=t.EffectScope,r.effectScope=t.effectScope,r.getCurrentScope=t.getCurrentScope,r.onScopeDispose=t.onScopeDispose,e(r)},function(t){var r={};r.TrackOpTypes=t.TrackOpTypes,r.TriggerOpTypes=t.TriggerOpTypes,e(r)}],execute:function(){t._RF.push({},"7d74foiyR1CiKHxMOutDJn3","reactivity",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Recovery.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts","./StringUtils.ts","./DateUtils.ts","./Switch.ts"],(function(t){var e,r,i,n,o,c,s,a,u,p,l,f,h,y,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){c=t.cclegacy,s=t._decorator,a=t.CCInteger,u=t.CCString,p=t.instantiate,l=t.Label},function(t){f=t.ComponentExpand},function(t){h=t.formatString},function(t){y=t.formatUTCDate},function(t){m=t.Switch}],execute:function(){var _,g,x,b,d,v,w,D,k,C,O,T,z,U,I,N,P,j;c._RF.push({},"5f96adE0L5Bfr9Bdz+zGdBI","Recovery",void 0);var R=s.ccclass,S=s.property;t("Recovery",(_=R("Recovery"),g=S(a),x=S({type:a,displayName:""}),b=S(a),d=S({type:a,displayName:""}),v=S(a),w=S({type:a,displayName:""}),D=S(u),k=S({type:u,displayName:""}),C=S(u),O=S({type:u,displayName:""}),_((U=e((z=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,i(e,"_max",U,n(e)),i(e,"_current",I,n(e)),i(e,"_nextTime",N,n(e)),i(e,"_text",P,n(e)),i(e,"_fmt",j,n(e)),e._callback=[],e}r(e,t);var c=e.prototype;return c.refresh=function(){var t=this._current<=0;if(this.getUI("nums").active=!t,this.getUI("time").active=t,t)this._countDown(),this.unschedule(this._countDown),this.schedule(this._countDown,1);else for(var e=this._max,r=this._current,i=this.getUI("nums"),n=0;n<e;n++){var o=i.children[n];o||(o=p(i.children[0]),i.addChild(o)),o.getComponent(m).isActive=n<r}},c._countDown=function(){var t=this,e=this._nextTime-Date.now();if(e<=0)return this.unschedule(this._countDown),void this._callback.forEach((function(e){return e(t)}));var r=new Date(0);r.setUTCMilliseconds(e),this.getUIComponent("time",l).string=h(this._text,{time:y(r,this._fmt)})},c.onNext=function(t){this._callback.push(t)},c.offNext=function(t){this._callback.splice(this._callback.indexOf(t),1)},c.offAll=function(){this._callback.length=0},o(e,[{key:"max",get:function(){return this._max},set:function(t){this._max=t,this.refresh()}},{key:"current",get:function(){return this._current},set:function(t){this._current=t,this.refresh()}},{key:"nextTime",get:function(){return this._nextTime},set:function(t){this._nextTime=t,this.refresh()}},{key:"text",get:function(){return this._text},set:function(t){this._text=t,this.refresh()}},{key:"fmt",get:function(){return this._fmt},set:function(t){this._fmt=t,this.refresh()}}]),e}(f)).prototype,"_max",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(z.prototype,"max",[x],Object.getOwnPropertyDescriptor(z.prototype,"max"),z.prototype),I=e(z.prototype,"_current",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(z.prototype,"current",[d],Object.getOwnPropertyDescriptor(z.prototype,"current"),z.prototype),N=e(z.prototype,"_nextTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(z.prototype,"nextTime",[w],Object.getOwnPropertyDescriptor(z.prototype,"nextTime"),z.prototype),P=e(z.prototype,"_text",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"{time}"}}),e(z.prototype,"text",[k],Object.getOwnPropertyDescriptor(z.prototype,"text"),z.prototype),j=e(z.prototype,"_fmt",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"hh:mm:ss"}}),e(z.prototype,"fmt",[O],Object.getOwnPropertyDescriptor(z.prototype,"fmt"),z.prototype),T=z))||T));c._RF.pop()}}}));

System.register("chunks:///_virtual/ref.ts",["./rollupPluginModLoBabelHelpers.js","cc","./effect.ts","./operations.ts","./shared.ts","./reactive.ts","./dep.ts"],(function(e){var t,n,i,r,u,s,o,c,a,f,l,v,h,_,g,p,R,y;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy},function(e){i=e.shouldTrack,r=e.activeEffect,u=e.trackEffects,s=e.triggerEffects,o=e.getDepFromReactive},function(e){c=e.TrackOpTypes,a=e.TriggerOpTypes},function(e){f=e.isArray,l=e.hasChanged},function(e){v=e.toRaw,h=e.isReactive,_=e.isProxy,g=e.toReactive,p=e.isShallow,R=e.isReadonly},function(e){y=e.createDep}],execute:function(){function d(e){i&&r&&(e=v(e),u(e.dep||(e.dep=y()),{target:e,type:c.GET,key:"value"}))}function k(e,t){var n=(e=v(e)).dep;n&&s(n,{target:e,type:a.SET,key:"value",newValue:t})}function w(e){return!(!e||!0!==e.__v_isRef)}function V(e,t){return w(e)?e:new b(e,t)}e({customRef:function(e){return new x(e)},isRef:w,proxyRefs:function(e){return h(e)?e:new Proxy(e,j)},ref:function(e){return V(e,!1)},shallowRef:function(e){return V(e,!0)},toRef:S,toRefs:function(e){_(e)||console.warn("toRefs() expects a reactive object but received a plain one.");var t=f(e)?new Array(e.length):{};for(var n in e)t[n]=S(e,n);return t},trackRefValue:d,triggerRef:function(e){k(e,e.value)},triggerRefValue:k,unref:T}),n._RF.push({},"058dcWJ9u9JXp/VNoqAsunD","ref",void 0);var b=function(){function e(e,t){this.dep=void 0,this.__v_isRef=!0,this.__v_isShallow=t,this._rawValue=t?e:v(e),this._value=t?e:g(e)}return t(e,[{key:"value",get:function(){return d(this),this._value},set:function(e){var t=this.__v_isShallow||p(e)||R(e);e=t?e:v(e),l(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:g(e),k(this,e))}}]),e}();function T(e){return w(e)?e.value:e}var j={get:function(e,t,n){return T(Reflect.get(e,t,n))},set:function(e,t,n,i){var r=e[t];return w(r)&&!w(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};var x=function(){function e(e){var t=this;this.dep=void 0,this.__v_isRef=!0;var n=e((function(){return d(t)}),(function(){return k(t)})),i=n.get,r=n.set;this._get=i,this._set=r}return t(e,[{key:"value",get:function(){return this._get()},set:function(e){this._set(e)}}]),e}();var E=function(){function e(e,t,n){this.__v_isRef=!0,this._object=e,this._key=t,this._defaultValue=n}return t(e,[{key:"value",get:function(){var e=this._object[this._key];return void 0===e?this._defaultValue:e},set:function(e){this._object[this._key]=e}},{key:"dep",get:function(){return o(v(this._object),this._key)}}]),e}();function S(e,t,n){var i=e[t];return w(i)?i:new E(e,t,n)}n._RF.pop()}}}));

System.register("chunks:///_virtual/Res.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var a,e;return{setters:[function(t){a=t.createClass},function(t){e=t.cclegacy}],execute:function(){var r;e._RF.push({},"fa736YY9oBLlKtLEcuuuUTR","Res",void 0);var i=t("GameBundle",{Resources:"resources"}),o=(t("GameBundle2Path",((r={})[i.Resources]="resources/",r)),t("LoadPriority",function(t){return t[t.Lowest=0]="Lowest",t[t.Idle=1]="Idle",t[t.VeryLow=2]="VeryLow",t[t.Low=3]="Low",t[t.BelowNormal=4]="BelowNormal",t[t.Normal=5]="Normal",t[t.AboveNormal=6]="AboveNormal",t[t.High=7]="High",t[t.VeryHigh=8]="VeryHigh",t[t.Critical=9]="Critical",t}({}))),l=[];function n(t){for(var a in t){"string"==typeof t[a]&&(t[a]={path:t[a]});var e=t[a];l.push(e),e.bundle||(e.bundle=i.Resources),"number"!=typeof e.loadPriority&&(e.loadPriority=o.Normal)}return t}var p=t("Res",function(){function t(){}return a(t,null,[{key:"startLoadResList",get:function(){return l.filter((function(t){return t.startLoad}))}}]),t}());p.items=l,p.prefab=n({tips:{path:"prefab/ui/built-in/tips",startLoad:!0,loadPriority:o.VeryHigh},tipsPanel:{path:"prefab/ui/built-in/tipsPanel",startLoad:!0,loadPriority:o.VeryHigh},loading:{path:"prefab/ui/built-in/loading",startLoad:!0,loadPriority:o.VeryHigh},blockInputEvents:{path:"prefab/ui/built-in/blockInputEvents",startLoad:!0,loadPriority:o.VeryHigh},blackView:{path:"prefab/ui/built-in/blackView",startLoad:!0,loadPriority:o.VeryHigh},errorInfo:{path:"prefab/ui/built-in/errorInfo",startLoad:!1},toast:{path:"prefab/ui/built-in/toast",startLoad:!0,loadPriority:o.VeryHigh},main:{path:"prefab/ui/main",startLoad:!0,loadPriority:o.VeryHigh},setStakeLevel:{path:"prefab/ui/setStakeLevel",startLoad:!0,loadPriority:o.VeryHigh},buyIn:{path:"prefab/ui/buyIn",startLoad:!0,loadPriority:o.VeryHigh},play:"prefab/ui/play/play",loadingPanel:{path:"prefab/ui/panel/loadingPanel",startLoad:!0,loadPriority:o.VeryHigh},joinRoom:{path:"prefab/ui/panel/joinRoom",startLoad:!0,loadPriority:o.VeryHigh},inviteToRoom:{path:"prefab/ui/panel/inviteToRoom",startLoad:!0},buyInHistory:{path:"prefab/ui/panel/buyInHistory",startLoad:!0},gm:{path:"prefab/ui/panel/gm",startLoad:!0},ranking:{path:"prefab/ui/panel/ranking",startLoad:!0,loadPriority:o.VeryHigh},invite:{path:"prefab/ui/panel/invite",startLoad:!0,loadPriority:o.VeryHigh},retweet:{path:"prefab/ui/panel/retweet",startLoad:!0,loadPriority:o.VeryHigh},userSettings:{path:"prefab/ui/panel/userSettings",startLoad:!0,loadPriority:o.VeryHigh},selectPlayTheme:{path:"prefab/ui/panel/selectPlayTheme",startLoad:!0,loadPriority:o.VeryHigh},settle:{path:"prefab/ui/panel/settle",startLoad:!0},spectating:{path:"prefab/ui/panel/spectating",startLoad:!0},fund:{path:"prefab/ui/panel/fund",startLoad:!0,loadPriority:o.VeryHigh},nftBag:{path:"prefab/ui/panel/nftBag",startLoad:!0,loadPriority:o.VeryHigh},buyNft:{path:"prefab/ui/panel/buyNft",startLoad:!0,loadPriority:o.VeryHigh},buyChips:{path:"prefab/ui/panel/buyChips",startLoad:!0,loadPriority:o.VeryHigh},buyNftConfirm:{path:"prefab/ui/panel/buyNftConfirm",startLoad:!0,loadPriority:o.VeryHigh},notNftTip:{path:"prefab/ui/panel/notNftTip",startLoad:!0,loadPriority:o.VeryHigh},gifts:{path:"prefab/ui/panel/gifts"},selectWallet:{path:"prefab/ui/panel/selectWallet",startLoad:!0,loadPriority:o.VeryHigh},buyZChips:{path:"prefab/ui/panel/buyZChips",startLoad:!0,loadPriority:o.VeryHigh},rankItem:{path:"prefab/ui/item/rank-item",startLoad:!0},nftGroupItem:{path:"prefab/ui/item/nft-group-item",startLoad:!0},nftItem:{path:"prefab/ui/item/nft-item",startLoad:!0}}),p.texture=n({}),p.spriteFrame=n({}),p.spriteAtlas=n({}),p.json=n({mainnetMerkleData:{path:"json/config/gifts/merkleData_mainnet",startLoad:!1},testnetMerkleData:{path:"json/config/gifts/merkleData_testnet",startLoad:!1}}),p.music=n({yourTurn:"music/your-turn",addPlayer:"music/add-player"}),p.material=n({dissolution:"material/dissolution",blinds:"material/blinds",reveal:"material/reveal",filterBackground:"material/filterBackground",spriteMaterial:"material/ui-sprite-material"}),p.directory=n({resource:"/",uiPrefab:"prefab/ui/",uiItemPrefab:"prefab/ui/item/",table:"json/config/excel/",icon:"texture/icon/",task:"texture/task/",playThemeTexture:"texture/playTheme/",playThemeMusic:"music/playTheme/"}),e._RF.pop()}}}));

System.register("chunks:///_virtual/RevealInEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts","./Res.ts"],(function(e){var t,n,r,a,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){a=e.EffectBase},function(e){c=e.Res}],execute:function(){var s;n._RF.push({},"9318ekcLhdHArZQydQQmrEF","RevealInEffect",void 0);var l=r.ccclass;r.property,e("RevealInEffect",l("RevealInEffect")(s=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).endClearMaterial=!0,t.startValue=0,t.endValue=1,t}return t(n,e),n.prototype.onInit=function(){return this._commonInitTemplate1({path:c.material.reveal.path,startValue:this.startValue,endValue:this.endValue,key:"uProgress"})},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/RevealOutEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EffectBase.ts","./Res.ts"],(function(e){var t,r,a,n,c;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,a=e._decorator},function(e){n=e.EffectBase},function(e){c=e.Res}],execute:function(){var u;r._RF.push({},"9b6f8j47rtPfKrqh/DoAYjm","RevealOutEffect",void 0);var s=a.ccclass;a.property,e("RevealOutEffect",s("RevealOutEffect")(u=function(e){function r(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).endClearMaterial=!0,t.startValue=1,t.endValue=0,t}return t(r,e),r.prototype.onInit=function(){return this._commonInitTemplate1({path:c.material.reveal.path,startValue:this.startValue,endValue:this.endValue,key:"uProgress"})},r}(n))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/RichTextUtils.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){function e(t){return t&&t.click?t.param?' click="'+t.click+'" param="'+t.param+'" ':' click="'+t.click+'" ':""}t({createBold:function(t){return"<b>"+t+"</b>"},createBr:function(){return"<br/>"},createColor:function(t,r,n){return"<color="+t+e(n)+">"+r+"</color>"},createImg:function(t,r){return"<img src='"+t+"'"+function(t){if(!t)return"";var r=""+e(t)+function(t){if(t){if(t.x&&t.y)return" offset="+t.x+","+t.y+" ";if(t.x)return" offset="+t.x+",0 ";if(t.y)return" offset="+t.y+" "}return""}(t);t.width&&(r+=" width="+t.width+" ");t.height&&(r+=" height="+t.height+" ");t.align&&(r+=" align="+t.align+" ");return r}(r)+"/>"},createItalic:function(t){return"<i>"+t+"</i>"},createOn:function(t,r){return"<on"+e(r)+">"+t+"</color>"},createOutline:function(t,r){return"<outline "+function(t){var r="";t&&(t.color&&(r+=" color="+t.color+" "),t.width&&(r+=" width="+t.width+" "));return r}(r)+">"+t+"</outline>"},createSize:function(t,r,n){return"<size="+t+e(n)+">"+r+"</size>"},createUnderline:function(t){return"<u>"+t+"</u>"}}),r._RF.push({},"f0fbf40srhHVKCL8w8gVUaG","RichTextUtils",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/Screenshot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QueueManager.ts"],(function(e){var t,r,n,a,o,i,s,c,u,h,f,p,l,d,w,m,g,v,x,y;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,a=e.sys,o=e.find,i=e.instantiate,s=e.UITransform,c=e.v3,u=e.ImageAsset,h=e.Texture2D,f=e.Camera,p=e.view,l=e.size,d=e.SpriteFrame,w=e.RenderTexture,m=e.director,g=e.Director,v=e.UIRenderer,x=e.Mask},function(e){y=e.QueueManager}],execute:function(){var P;function R(e){for(var t,r=e.components.length-1;r>=0;r--)(t=e.components[r])instanceof v||t instanceof x||t instanceof s||t.destroy()}e({pushScreenshotWithQueue:function(e){return y.getInstance("screenshot").push(e)},screenshot:S,screenshotNode:function(e){return E.apply(this,arguments)}}),n._RF.push({},"ee5f0CCvExHeaz93Ek/Gp/N","Screenshot",void 0);var C=(P={},P[a.Platform.ANDROID]=!0,P[a.Platform.MOBILE_BROWSER]=!0,P[a.Platform.WIN32]=!0,P[a.Platform.DESKTOP_BROWSER]=!0,P)[a.platform];function E(){return(E=t(r().mark((function e(t){var n,a,u,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o("CaptureCanvas"),a=i(t),u=n.layer,a.layer=u,R(a),a.walk((function(e){e.layer=u,R(e)})),h=a.getComponent(s),a.setPosition(c(h.width*(h.anchorX-.5),h.height*(h.anchorY-.5))),a.parent=n,e.next=11,S({rt:C,w:h.width,h:h.height,x:a.worldPosition.x-h.width*h.anchorX,y:a.worldPosition.y-h.height*h.anchorY});case 11:return f=e.sent,a.destroy(),e.abrupt("return",f);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){var n=void 0===e?{}:e,a=n.x,i=n.y,s=n.w,c=n.h,v=n.rt;return new Promise(t(r().mark((function e(t){var n,x,y,P,R,C,E,S,T,_,I,M,k;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o("CaptureCanvas/CaptureCamera").getComponent(f),x=p.getVisibleSize(),y=l(Math.ceil(s||x.width),Math.ceil(c||x.height)),P=new d,(R=new w).reset({width:x.width,height:x.height}),n.targetTexture=R,C=y.width,E=y.height,e.next=10,new Promise((function(e){m.once(g.EVENT_AFTER_DRAW,e)}));case 10:if(S=R.readPixels(a||0,i||0,C,E),T=S,v)for(T=new Uint8Array(C*E*4),_=E-1;_>=0;_--)for(I=0;I<C;I++)T[4*((E-1-_)*C+I)+0]=S[4*(_*C+I)+0],T[4*((E-1-_)*C+I)+1]=S[4*(_*C+I)+1],T[4*((E-1-_)*C+I)+2]=S[4*(_*C+I)+2],T[4*((E-1-_)*C+I)+3]=S[4*(_*C+I)+3];M=new u({_data:T,_compressed:!1,width:C,height:E,format:h.PixelFormat.RGBA8888}),(k=new h).image=M,P.texture=k,n.targetTexture=null,t(P);case 19:case"end":return e.stop()}}),e)}))))}n._RF.pop()}}}));

System.register("chunks:///_virtual/SelectPath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayThemeCommon.ts"],(function(t){var e,n,o,r,i,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.createClass,o=t.initializerDefineProperty},function(t){r=t.cclegacy,i=t._decorator},function(t){p=t.PlayThemePathEnum}],execute:function(){var c,a,h,s,y;r._RF.push({},"b561cy9EwBEP5wZcT2yr7ZU","SelectPath",void 0);var u=i.ccclass,l=i.property;i.executeInEditMode,t("SelectPath",(c=u("SelectPath"),a=l({type:null}),c((e((s=function(){function t(){o(this,"_path",y,this)}return t.prototype.onChange=function(t){this._onChangeFn=t},n(t,[{key:"key",get:function(){return void 0===this._key&&(this._key=this._path?p[this._path]:p[Object.keys(p)[0]]),this._key},set:function(t){this._key!==t&&(this._key=t,this._path=p[t],this._onChangeFn&&this._onChangeFn())}},{key:"path",get:function(){return this._path}}]),t}()).prototype,"key",[a],Object.getOwnPropertyDescriptor(s.prototype,"key"),s.prototype),y=e(s.prototype,"_path",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(s.prototype,"path",[l],Object.getOwnPropertyDescriptor(s.prototype,"path"),s.prototype),h=s))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/sendbird.cjs",["./cjs-loader.mjs"],(function(e,t){var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0);var r=e("__cjsMetaURL",t.meta.url);n.define(r,(function(t,n,r,i,s){Object.defineProperty(t,"__esModule",{value:!0});var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function l(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{u(r.next(e))}catch(e){s(e)}}function a(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function p(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var _,v="4.8.5",m=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();!function(e){e[e.STAT_LOG_NOT_ALLOWED=400108]="STAT_LOG_NOT_ALLOWED",e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR"}(_||(_={})),t.PushTokenRegistrationState=void 0,t.PushTriggerOption=void 0,t.PushTokenType=void 0,t.PushTemplate=void 0;var y,g=function(e){return!(e instanceof E&&!e.shouldThrowOutside)},E=function(e){function t(n){var r=n.code,i=void 0===r?0:r,s=n.message,o=void 0===s?"":s,a=e.call(this,o)||this;return a.shouldThrowOutside=!1,a.name="SendbirdError",a.code=i,Object.setPrototypeOf(a,t.prototype),a}return u(t,e),Object.defineProperty(t.prototype,"isInvalidTokenError",{get:function(){return this.code===_.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===_.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===_.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSessionRevokedError",{get:function(){return this.code===_.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(t,"debugModeRequired",{get:function(){return new t({code:_.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"lostInstance",{get:function(){return new t({code:_.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRenew",{get:function(){return new t({code:_.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidConnectionStateTransition",{get:function(){return new t({code:_.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionRequired",{get:function(){return new t({code:_.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionCanceled",{get:function(){return new t({code:_.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"invalidParameters",{get:function(){return new t({code:_.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"notSupportedError",{get:function(){return new t({code:_.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"networkError",{get:function(){return new t({code:_.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"markAsReadAllRateLimitExceeded",{get:function(){return new t({code:_.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"queryInProgress",{get:function(){return new t({code:_.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"noAckTimeout",{get:function(){return new t({code:_.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"loginTimeout",{get:function(){return new t({code:_.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"connectionClosed",{get:function(){return new t({code:_.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestFailed",{get:function(){return new t({code:_.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"fileUploadCanceled",{get:function(){return new t({code:_.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"requestCanceled",{get:function(){return new t({code:_.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRefreshFailed",{get:function(){return new t({code:_.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"sessionTokenRequestFailed",{get:function(){return new t({code:_.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseError",{get:function(){return new t({code:_.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),t.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},t}(Error),b=[_.CONNECTION_REQUIRED,_.NETWORK_ERROR,_.ACK_TIMEOUT,_.WEBSOCKET_CONNECTION_CLOSED,_.WEBSOCKET_CONNECTION_FAILED,_.FILE_UPLOAD_CANCEL_FAILED,_.REQUEST_CANCELED,_.INTERNAL_SERVER_ERROR,_.RATE_LIMIT_EXCEEDED,_.UNKNOWN_SERVER_ERROR],w=[_.WEBSOCKET_CONNECTION_CLOSED,_.WEBSOCKET_CONNECTION_FAILED,_.CONNECTION_REQUIRED],T=function(e,t){if(e!==t){var n=c({},e),r=c({},t);return!(n.hasOwnProperty("messageId")&&r.hasOwnProperty("messageId")&&n.messageId!==r.messageId||n.hasOwnProperty("reqId")&&r.hasOwnProperty("reqId")&&n.reqId!==r.reqId||(n.hasOwnProperty("messageId")&&delete n.messageId,n.hasOwnProperty("reqId")&&delete n.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(n)!==JSON.stringify(r)))}return!0},I=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||("string"!=typeof e?"object"==typeof e?C(e,t):S(e,t):typeof t===e)},C=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Object.values(e).includes(t)},S=function(e,t){return t instanceof e},N=function(e,t,n){return void 0===n&&(n=!1),!(!n||null!=t)||Array.isArray(t)&&t.every((function(t){return I(e,t)}))},A=function(e){return e>0&&w.indexOf(e)>=0},k=function(e,t){if(void 0===t&&(t=!1),t&&null===e)return!0;var n=I("object",e)&&null!==e&&e.hasOwnProperty("name")&&"string"==typeof e.name&&e.hasOwnProperty("uri")&&"string"==typeof e.uri&&e.hasOwnProperty("type")&&"string"==typeof e.type;if(!n){if("undefined"!=typeof Blob)return e instanceof Blob;if("undefined"!=typeof File)return e instanceof File}return n},O=function(){function e(e){var t=void 0===e?{}:e,n=t.useMemberInfoInMessage,r=void 0===n||n,i=t.typingIndicatorInvalidateTime,s=void 0===i?1e4:i,o=t.typingIndicatorThrottle,a=void 0===o?1e3:o,u=t.websocketResponseTimeout,c=void 0===u?1e4:u,l=t.websocketPayloadDecompression,h=void 0===l||l,d=t.sessionTokenRefreshTimeout,f=void 0===d?60:d;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=r,this._typingIndicatorInvalidateTime=s,this._typingIndicatorThrottle=a,this._websocketResponseTimeout=c,this._sessionTokenRefreshTimeout=f,this.websocketPayloadDecompression=h}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(e){I("boolean",e)&&(this._useMemberInfoInMessage=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(e){I("number",e)&&(this._typingIndicatorInvalidateTime=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(e){I("number",e)&&e>=1e3&&e<=9e3&&(this._typingIndicatorThrottle=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(e){I("number",e)&&e>=5e3&&e<=3e4&&(this._websocketResponseTimeout=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(e){I("number",e)&&(e<60?e=60:e>1800&&(e=1800),this._sessionTokenRefreshTimeout=e)},enumerable:!1,configurable:!0}),e}(),R={encrypt:function(e){return e},decrypt:function(e){return e}},D=function(){function e(e){var t=e.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this._store.set({key:this._keysAddress,value:p([],f(this._preference.keys()),!1)})];case 1:return e.sent(),[2]}}))}))},e.prototype.init=function(e,t){var n;return void 0===t&&(t=1),l(this,void 0,void 0,(function(){var r,i,s,o,a,u,c,l,f,p;return h(this,(function(h){switch(h.label){case 0:return this._version=t,this._keysAddress=e,r="".concat(e,".metadata.version"),[4,this._store.get(r)];case 1:return i=h.sent(),[4,this._store.get(e)];case 2:return s=null!==(n=h.sent())&&void 0!==n?n:[],!i||i.version<this._version?[4,this._resetPreferenceData(s,r)]:[3,4];case 3:return h.sent(),[3,11];case 4:h.trys.push([4,9,10,11]),o=d(s),a=o.next(),h.label=5;case 5:return a.done?[3,8]:(u=a.value,[4,this._store.get(u)]);case 6:(c=h.sent())&&this._preference.set(u,c),h.label=7;case 7:return a=o.next(),[3,5];case 8:return[3,11];case 9:return l=h.sent(),f={error:l},[3,11];case 10:try{a&&!a.done&&(p=o.return)&&p.call(o)}finally{if(f)throw f.error}return[7];case 11:return[2]}}))}))},e.prototype._resetPreferenceData=function(e,t){return l(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return this._preference=new Map,[4,this._store.removeMany(e)];case 1:return n.sent(),[4,this._store.set({key:t,value:{version:this._version}})];case 2:return n.sent(),[2]}}))}))},e.prototype.get=function(e){var t;return l(this,void 0,void 0,(function(){return h(this,(function(n){return[2,null!==(t=this._preference.get(e))&&void 0!==t?t:null]}))}))},e.prototype.set=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=!this._preference.has(e),[4,this._store.set({key:e,value:t})];case 1:return r.sent(),this._preference.set(e,t),n?[4,this._savePreferenceKeys()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.remove=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this._store.remove(e)];case 1:return t.sent(),this._preference.delete(e),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this._store.removeMany(p([],f(this._preference.keys()),!1))];case 1:return e.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}}))}))},e}(),U=function(){function e(e){var t=e.encryption,n=void 0===t?null:t,r=e.store,i=void 0===r?null:r,s=e.localCacheEnabled,o=void 0===s||s,a=e.localCacheConfig,u=void 0===a?null:a;this.nestdb=null,this.store=i,this.preference=new D({store:i}),this.encryption=null!=n?n:R,this.localCacheEnabled=o,this.localCacheConfig=u}return e.prototype.replaceStore=function(e){this.store=e,this.preference=new D({store:e})},e}();!function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"}(t.PushTokenRegistrationState||(t.PushTokenRegistrationState={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(t.PushTriggerOption||(t.PushTriggerOption={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(t.PushTokenType||(t.PushTokenType={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(t.PushTemplate||(t.PushTemplate={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}(y||(y={}));var L,M=function(){function e(e){var t=e.channel,n=e.cachedMessageCount;this._channel=null,this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=n}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),P=function(){function e(e){var t=void 0===e?{}:e,n=t.maxSize,r=void 0===n?256:n,i=t.clearOrder,s=void 0===i?y.MESSAGE_COLLECTION_ACCESSED_AT:i,o=t.customClearOrderComparator,a=void 0===o?null:o;this._customClearOrderComparator=null,this._clearOrderComparatorUseMessageCollectionAccessedAt=function(e,t){return e.channel.messageCollectionLastAccessedAt===t.channel.messageCollectionLastAccessedAt?e.channel.lastMessage&&!t.channel.lastMessage?1:!e.channel.lastMessage&&t.channel.lastMessage?-1:e.channel.lastMessage.createdAt-t.channel.lastMessage.createdAt:e.channel.messageCollectionLastAccessedAt>t.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(r,64),a?(this._clearOrder=s,this._customClearOrderComparator=a):this._clearOrder=y.MESSAGE_COLLECTION_ACCESSED_AT}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var e;return this._clearOrder===y.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:null!==(e=this._customClearOrderComparator)&&void 0!==e?e:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),e}(),x=function(){function e(){this.sessionKey=null,this.authToken=null}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=null,this.sessionKey=null},e}(),q=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},F=function(){function e(e){var t=e.container;this._container={},this._container=t,this.key=q()}return e.prototype._register=function(e,t,n){return e in this._container||(this._container[e]=new Map),this._container[e].set(this.key,{occurence:t,handler:n}),this},e.prototype.on=function(e,t){return this._register(e,-1,t)},e.prototype.once=function(e,t){return this._register(e,1,t)},e.prototype.close=function(){for(var e in this._container)this._container[e].delete(this.key)},e}(),z=function(){function e(){this._container={}}return e.prototype.on=function(e,t){return new F({container:this._container}).on(e,t)},e.prototype.once=function(e,t){return new F({container:this._container}).once(e,t)},e.prototype.dispatch=function(e,t){var n,r,i=this._container[e];if(i){var s=[];try{for(var o=d(i.keys()),a=o.next();!a.done;a=o.next()){var u=a.value,c=i.get(u);c.handler(t),c.occurence>0&&(c.occurence--,0===c.occurence&&s.push(u))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}s.forEach((function(e){return i.delete(e)}))}},e}(),H=function(){function e(){this._dispatcher=new z}return e.prototype.on=function(e){return this._dispatcher.on("event",e)},e.prototype.once=function(e){return this._dispatcher.once("event",e)},e.prototype.dispatch=function(e){this._dispatcher.dispatch("event",e)},e}(),j=function(){},B=function(e){var t={};return e&&Object.keys(e).forEach((function(n){void 0===e[n]||Number.isNaN(e[n])||null===e[n]||(t[n]=e[n])})),t};!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(L||(L={}));var G,Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=q(),t}return u(t,e),t.prototype.stringifyParams=function(e){return"object"!=typeof e||Array.isArray(e)?String(e):e?JSON.stringify(e):""},t.prototype.encodeParams=function(e){var t=this;return null==e||""===e?encodeURIComponent(""):Array.isArray(e)?e.map((function(e){return t.encodeParams(e)})).join(","):"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(String(e))},Object.defineProperty(t.prototype,"query",{get:function(){var e=this,t=B(this.params);return"?".concat(Object.keys(t).map((function(n){return"".concat(encodeURIComponent(n),"=").concat(e.encodeParams(t[n]))})).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"payload",{get:function(){var e=this,t=B(this.params);if(Object.keys(t).some((function(e){return k(t[e])}))){var n=new FormData;return Object.keys(t).forEach((function(r){var i,s=t[r];if(k(s)){var o=s;n.append(r,o,null!==(i=o.name)&&void 0!==i?i:"filename")}else n.append(r,e.stringifyParams(s))})),n}return JSON.stringify(t)},enumerable:!1,configurable:!0}),t}(j),K=function(e){function t(t,n){var r=e.call(this)||this;return r._iid=t,r._payload=n,r}return u(t,e),Object.defineProperty(t.prototype,"payload",{get:function(){return c({},this._payload)},enumerable:!1,configurable:!0}),t.prototype.as=function(e){return new e(this._iid,this.payload)},t}(j),V=function(e){function t(t){var n=e.call(this)||this;return n.requestId=t,n}return u(t,e),t}(j),W=function(e){function t(t){var n=t.expires_in,r=t.reason,i=void 0===r?_.SESSION_KEY_EXPIRED:r,s=e.call(this)||this;switch(s.expiresIn=null!=n?n:0,i){case _.SESSION_KEY_EXPIRED:case _.SESSION_TOKEN_EXPIRED:case _.SESSION_REVOKED:s.error=new E({code:i})}return s}return u(t,e),Object.defineProperty(t.prototype,"invalidateSessionToken",{get:function(){var e;return null===(e=this.error)||void 0===e?void 0:e.isSessionTokenExpiredError},enumerable:!1,configurable:!0}),t}(j),Y=function(e){function t(t){var n=e.call(this)||this;return n.statLog=t,n}return u(t,e),t}(j);!function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.WEBSOCKET_CONNECT="ws:connect",e.API_RESULT="api:result"}(G||(G={}));var Z=function(){function e(e){var t=e.type,n=e.data,r=e.ts,i=void 0===r?Date.now():r;this.type=t,this.createdAt=i,this.data=n}return e.payloadify=function(e){return B({stat_type:e.type,ts:e.createdAt,data:B(e.data)})},e}(),X=function(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"==navigator.product},J=function(){function e(e,t){var n=t.auth,r=t.sdkState,i=t.dispatcher,s=t.logger,o=t.useFetchCompat,a=void 0!==o&&o,u=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=e,this._auth=n,this._sdkState=r,this._dispatcher=i,this._dispatcher.on((function(e){e instanceof V&&u.cancel(e.requestId)})),this._logger=s,this._shouldImportFetchCompat=a}return Object.defineProperty(e.prototype,"_userAgentWithExtension",{get:function(){var e=this._sdkState.extensions,t=X()?"reactnative":"JS",n=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",r=e.sb_uikit?"u".concat(e.sb_uikit):"",i=e["device-os-platform"]?"o".concat(e["device-os-platform"]):"";return"".concat(t,"/c").concat(m.SDK_VERSION,"/").concat(n,"/").concat(r,"/").concat(i)},enumerable:!1,configurable:!0}),e.prototype._createHeader=function(e,t){void 0===t&&(t=null);var n=this._sdkState,r=n.appId,i=n.appVersion,s=c(c({},e.headers),{SendBird:"JS,".concat(m.OS_VERSION,",").concat(m.SDK_VERSION,",").concat(r).concat(i?",".concat(i):""),"SB-User-Agent":encodeURIComponent(this._userAgentWithExtension),"Request-Sent-Timestamp":Date.now().toString()});return t||(s["Content-Type"]="application/json; charset=utf-8"),e.requireAuth&&this._auth.hasSession&&(s["Session-Key"]=this._auth.sessionKey),this._auth&&this._auth.authToken&&(s["App-Id"]=r,s["Access-Token"]=this._auth.authToken),s},e.prototype._statLogApiResult=function(e,t,n){this._dispatcher.dispatch(new Y(new Z({type:G.API_RESULT,data:{endpoint:e.path,method:e.method,success:!n,latency:Date.now()-t,error_code:null==n?void 0:n.code,error_description:null==n?void 0:n.message}})))},e.prototype.send=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,a,u,c,l,d,f,p,_,v,m;return h(this,(function(h){switch(h.label){case 0:t=e.path,n=e.method,r=![L.GET,L.DELETE].includes(n),i=this._sdkState.api,s="".concat(i.host).concat(t).concat(r?"":e.query),a=r?e.payload:null,u=this._createHeader(e,a instanceof FormData?a:null),c=new AbortController,l=c.signal,this._abortControl.set(e.requestId,c),d=Date.now(),h.label=1;case 1:return h.trys.push([1,8,,9]),this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,("undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==o&&o||{fetch:null}).fetch=void 0),"undefined"!=typeof AbortController?[3,3]:[4,Promise.resolve().then((function(){return Qh}))];case 2:h.sent(),h.label=3;case 3:return"function"==typeof fetch?[3,5]:[4,Promise.resolve().then((function(){return vd}))];case 4:h.sent(),h.label=5;case 5:return[4,fetch(s,{method:n,body:a,headers:u,signal:l})];case 6:return[4,(f=h.sent()).json()];case 7:if(p=h.sent(),f.ok||f.redirected)return this._logger.debug("receive api response",e.requestId),this._statLogApiResult(e,d,null),[2,new K(this._iid,p)];throw p?(((_=new E(p)).isSessionKeyExpiredError||_.isSessionTokenExpiredError)&&this._dispatcher.dispatch(new W({reason:_.code})),this._statLogApiResult(e,d,_),_):(_=E.requestFailed,this._statLogApiResult(e,d,_),_);case 8:throw v=h.sent(),this._statLogApiResult(e,d,v),v instanceof E?(this._logger.debug("fail api request",v),v):"AbortError"===v.name?E.requestCanceled:(m=E.networkError,this._logger.debug("fail api request",m),m);case 9:return[2]}}))}))},e.prototype.cancel=function(e){this._abortControl.has(e)&&(this._abortControl.get(e).abort(),this._abortControl.delete(e))},e.prototype.cancelAll=function(){var e,t;try{for(var n=d(this._abortControl.values()),r=n.next();!r.done;r=n.next())r.value.abort()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._abortControl.clear()},e}(),$=function(e){function t(t,n,r,i){void 0===i&&(i="");var s=e.call(this)||this;return s._iid=t,s.code=n,s.payload=r,s.requestId=r?r.req_id:i,s}return u(t,e),t.createFromRawMessage=function(e,n){var r=n.substring(0,4),i=null;try{i=JSON.parse(n.substring(4))}catch(e){r="NOOP"}finally{return new t(e,r,i)}},t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},t}(j),ee=function(){};function te(e){for(var t=e.length;--t>=0;)e[t]=0}var ne=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),re=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ie=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),se=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oe=new Array(576);te(oe);var ae=new Array(60);te(ae);var ue=new Array(512);te(ue);var ce=new Array(256);te(ce);var le=new Array(29);te(le);var he,de,fe,pe=new Array(30);function _e(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function ve(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}te(pe);var me=function(e){return e<256?ue[e]:ue[256+(e>>>7)]},ye=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ge=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,ye(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ee=function(e,t,n){ge(e,n[2*t],n[2*t+1])},be=function(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},we=function(e,t,n){var r,i,s=new Array(16),o=0;for(r=1;r<=15;r++)o=o+n[r-1]<<1,s[r]=o;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=be(s[a]++,a))}},Te=function(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ie=function(e){e.bi_valid>8?ye(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Ce=function(e,t,n,r){var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},Se=function(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&Ce(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Ce(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},Ne=function(e,t,n){var r,i,s,o,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?Ee(e,i,t):(s=ce[i],Ee(e,s+256+1,t),0!==(o=ne[s])&&(i-=le[s],ge(e,i,o)),r--,s=me(r),Ee(e,s,n),0!==(o=re[s])&&(r-=pe[s],ge(e,r,o)))}while(a<e.sym_next);Ee(e,256,t)},Ae=function(e,t){var n,r,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==s[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)Se(e,s,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Se(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*i]=s[2*n]+s[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=i,e.heap[1]=i++,Se(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,s,o,a,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,_=0;for(s=0;s<=15;s++)e.bl_count[s]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(s=u[2*u[2*(r=e.heap[n])+1]+1]+1)>p&&(s=p,_++),u[2*r+1]=s,r>c||(e.bl_count[s]++,o=0,r>=f&&(o=d[r-f]),a=u[2*r],e.opt_len+=a*(s+o),h&&(e.static_len+=a*(l[2*r+1]+o)));if(0!==_){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,_-=2}while(_>0);for(s=p;0!==s;s--)for(r=e.bl_count[s];0!==r;)(i=e.heap[--n])>c||(u[2*i+1]!==s&&(e.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),r--)}}(e,t),we(s,c,e.bl_count)},ke=function(e,t,n){var r,i,s=-1,o=t[1],a=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<u&&i===o||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))},Oe=function(e,t,n){var r,i,s=-1,o=t[1],a=0,u=7,c=4;for(0===o&&(u=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<u&&i===o)){if(a<c)do{Ee(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(Ee(e,i,e.bl_tree),a--),Ee(e,16,e.bl_tree),ge(e,a-3,2)):a<=10?(Ee(e,17,e.bl_tree),ge(e,a-3,3)):(Ee(e,18,e.bl_tree),ge(e,a-11,7));a=0,s=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}},Re=!1,De=function(e,t,n,r){ge(e,0+(r?1:0),3),Ie(e),ye(e,n),ye(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},Ue=function(e){Re||(function(){var e,t,n,r,i,s=new Array(16);for(n=0,r=0;r<28;r++)for(le[r]=n,e=0;e<1<<ne[r];e++)ce[n++]=r;for(ce[n-1]=r,i=0,r=0;r<16;r++)for(pe[r]=i,e=0;e<1<<re[r];e++)ue[i++]=r;for(i>>=7;r<30;r++)for(pe[r]=i<<7,e=0;e<1<<re[r]-7;e++)ue[256+i++]=r;for(t=0;t<=15;t++)s[t]=0;for(e=0;e<=143;)oe[2*e+1]=8,e++,s[8]++;for(;e<=255;)oe[2*e+1]=9,e++,s[9]++;for(;e<=279;)oe[2*e+1]=7,e++,s[7]++;for(;e<=287;)oe[2*e+1]=8,e++,s[8]++;for(we(oe,287,s),e=0;e<30;e++)ae[2*e+1]=5,ae[2*e]=be(e,5);he=new _e(oe,ne,257,286,15),de=new _e(ae,re,0,30,15),fe=new _e(new Array(0),ie,0,19,7)}(),Re=!0),e.l_desc=new ve(e.dyn_ltree,he),e.d_desc=new ve(e.dyn_dtree,de),e.bl_desc=new ve(e.bl_tree,fe),e.bi_buf=0,e.bi_valid=0,Te(e)},Le=De,Me=function(e,t,n,r){var i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),Ae(e,e.l_desc),Ae(e,e.d_desc),o=function(e){var t;for(ke(e,e.dyn_ltree,e.l_desc.max_code),ke(e,e.dyn_dtree,e.d_desc.max_code),Ae(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*se[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?De(e,t,n,r):4===e.strategy||s===i?(ge(e,2+(r?1:0),3),Ne(e,oe,ae)):(ge(e,4+(r?1:0),3),function(e,t,n,r){var i;for(ge(e,t-257,5),ge(e,n-1,5),ge(e,r-4,4),i=0;i<r;i++)ge(e,e.bl_tree[2*se[i]+1],3);Oe(e,e.dyn_ltree,t-1),Oe(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Ne(e,e.dyn_ltree,e.dyn_dtree)),Te(e),r&&Ie(e)},Pe=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ce[n]+256+1)]++,e.dyn_dtree[2*me(t)]++),e.sym_next===e.sym_end},xe=function(e){ge(e,2,3),Ee(e,256,oe),function(e){16===e.bi_valid?(ye(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)},qe=function(e,t,n,r){for(var i=65535&e|0,s=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{s=s+(i=i+t[r++]|0)|0}while(--o);i%=65521,s%=65521}return i|s<<16|0},Fe=new Uint32Array(function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}()),ze=function(e,t,n,r){var i=Fe,s=r+n;e^=-1;for(var o=r;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},He={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},je={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Be=Ue,Ge=Le,Qe=Me,Ke=Pe,Ve=xe,We=je.Z_NO_FLUSH,Ye=je.Z_PARTIAL_FLUSH,Ze=je.Z_FULL_FLUSH,Xe=je.Z_FINISH,Je=je.Z_BLOCK,$e=je.Z_OK,et=je.Z_STREAM_END,tt=je.Z_STREAM_ERROR,nt=je.Z_DATA_ERROR,rt=je.Z_BUF_ERROR,it=je.Z_DEFAULT_COMPRESSION,st=je.Z_FILTERED,ot=je.Z_HUFFMAN_ONLY,at=je.Z_RLE,ut=je.Z_FIXED,ct=je.Z_UNKNOWN,lt=je.Z_DEFLATED,ht=258,dt=262,ft=42,pt=113,_t=666,vt=function(e,t){return e.msg=He[t],t},mt=function(e){return 2*e-(e>4?9:0)},yt=function(e){for(var t=e.length;--t>=0;)e[t]=0},gt=function(e){var t,n,r,i=e.w_size;r=t=e.hash_size;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);r=t=i;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)},Et=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},bt=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},wt=function(e,t){Qe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,bt(e.strm)},Tt=function(e,t){e.pending_buf[e.pending++]=t},It=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ct=function(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=qe(e.adler,t,i,n):2===e.state.wrap&&(e.adler=ze(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},St=function(e,t){var n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-dt?e.strstart-(e.w_size-dt):0,c=e.window,l=e.w_mask,h=e.prev,d=e.strstart+ht,f=c[s+o-1],p=c[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+o]===p&&c[n+o-1]===f&&c[n]===c[s]&&c[++n]===c[s+1]){s+=2,n++;do{}while(c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&c[++s]===c[++n]&&s<d);if(r=ht-(d-s),s=d-ht,r>o){if(e.match_start=t,o=r,r>=a)break;f=c[s+o-1],p=c[s+o]}}}while((t=h[t&l])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead},Nt=function(e){var t,n,r,i=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-dt)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),gt(e),n+=i),0===e.strm.avail_in)break;if(t=Ct(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Et(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Et(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<dt&&0!==e.strm.avail_in)},At=function(e,t){var n,r,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n>(r=e.strstart-e.block_start)+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&t!==Xe||t===We||n!==r+e.strm.avail_in))break;o=t===Xe&&n===r+e.strm.avail_in?1:0,Ge(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,bt(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Ct(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return(a-=e.strm.avail_in)&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==We&&t!==Xe&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Ct(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,s=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=s||(r||t===Xe)&&t!==We&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===Xe&&0===e.strm.avail_in&&n===r?1:0,Ge(e,e.block_start,n,o),e.block_start+=n,bt(e.strm)),o?3:1)},kt=function(e,t){for(var n,r;;){if(e.lookahead<dt){if(Nt(e),e.lookahead<dt&&t===We)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-dt&&(e.match_length=St(e,n)),e.match_length>=3)if(r=Ke(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Et(e,e.ins_h,e.window[e.strstart+1]);else r=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Xe?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2},Ot=function(e,t){for(var n,r,i;;){if(e.lookahead<dt){if(Nt(e),e.lookahead<dt&&t===We)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-dt&&(e.match_length=St(e,n),e.match_length<=5&&(e.strategy===st||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Ke(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Et(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(wt(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=Ke(e,0,e.window[e.strstart-1]))&&wt(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ke(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Xe?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2};function Rt(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var Dt=[new Rt(0,0,0,0,At),new Rt(4,4,8,4,kt),new Rt(4,5,16,8,kt),new Rt(4,6,32,32,kt),new Rt(4,4,16,16,Ot),new Rt(8,16,32,32,Ot),new Rt(8,16,128,128,Ot),new Rt(8,32,128,256,Ot),new Rt(32,128,258,1024,Ot),new Rt(32,258,258,4096,Ot)];function Ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),yt(this.dyn_ltree),yt(this.dyn_dtree),yt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),yt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),yt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Lt=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.status!==ft&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==pt&&t.status!==_t?1:0},Mt=function(e){if(Lt(e))return vt(e,tt);e.total_in=e.total_out=0,e.data_type=ct;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?ft:pt,e.adler=2===t.wrap?0:1,t.last_flush=-2,Be(t),$e},Pt=function(e){var t,n=Mt(e);return n===$e&&((t=e.state).window_size=2*t.w_size,yt(t.head),t.max_lazy_match=Dt[t.level].max_lazy,t.good_match=Dt[t.level].good_length,t.nice_match=Dt[t.level].nice_length,t.max_chain_length=Dt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},xt=function(e,t,n,r,i,s){if(!e)return tt;var o=1;if(t===it&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==lt||r<8||r>15||t<0||t>9||s<0||s>ut||8===r&&1!==o)return vt(e,tt);8===r&&(r=9);var a=new Ut;return e.state=a,a.strm=e,a.status=ft,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,Pt(e)},qt=xt,Ft=function(e,t){return Lt(e)||2!==e.state.wrap?tt:(e.state.gzhead=t,$e)},zt=function(e,t){if(Lt(e)||t>Je||t<0)return e?vt(e,tt):tt;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===_t&&t!==Xe)return vt(e,0===e.avail_out?rt:tt);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(bt(e),0===e.avail_out)return n.last_flush=-1,$e}else if(0===e.avail_in&&mt(t)<=mt(r)&&t!==Xe)return vt(e,rt);if(n.status===_t&&0!==e.avail_in)return vt(e,rt);if(n.status===ft&&0===n.wrap&&(n.status=pt),n.status===ft){var i=lt+(n.w_bits-8<<4)<<8;if(i|=(n.strategy>=ot||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(i|=32),It(n,i+=31-i%31),0!==n.strstart&&(It(n,e.adler>>>16),It(n,65535&e.adler)),e.adler=1,n.status=pt,bt(e),0!==n.pending)return n.last_flush=-1,$e}if(57===n.status)if(e.adler=0,Tt(n,31),Tt(n,139),Tt(n,8),n.gzhead)Tt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Tt(n,255&n.gzhead.time),Tt(n,n.gzhead.time>>8&255),Tt(n,n.gzhead.time>>16&255),Tt(n,n.gzhead.time>>24&255),Tt(n,9===n.level?2:n.strategy>=ot||n.level<2?4:0),Tt(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Tt(n,255&n.gzhead.extra.length),Tt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ze(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Tt(n,0),Tt(n,0),Tt(n,0),Tt(n,0),Tt(n,0),Tt(n,9===n.level?2:n.strategy>=ot||n.level<2?4:0),Tt(n,3),n.status=pt,bt(e),0!==n.pending)return n.last_flush=-1,$e;if(69===n.status){if(n.gzhead.extra){for(var s=n.pending,o=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+o>n.pending_buf_size;){var a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>s&&(e.adler=ze(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex+=a,bt(e),0!==n.pending)return n.last_flush=-1,$e;s=0,o-=a}var u=new Uint8Array(n.gzhead.extra);n.pending_buf.set(u.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>s&&(e.adler=ze(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var c,l=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>l&&(e.adler=ze(e.adler,n.pending_buf,n.pending-l,l)),bt(e),0!==n.pending)return n.last_flush=-1,$e;l=0}c=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Tt(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>l&&(e.adler=ze(e.adler,n.pending_buf,n.pending-l,l)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var h,d=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>d&&(e.adler=ze(e.adler,n.pending_buf,n.pending-d,d)),bt(e),0!==n.pending)return n.last_flush=-1,$e;d=0}h=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Tt(n,h)}while(0!==h);n.gzhead.hcrc&&n.pending>d&&(e.adler=ze(e.adler,n.pending_buf,n.pending-d,d))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(bt(e),0!==n.pending))return n.last_flush=-1,$e;Tt(n,255&e.adler),Tt(n,e.adler>>8&255),e.adler=0}if(n.status=pt,bt(e),0!==n.pending)return n.last_flush=-1,$e}if(0!==e.avail_in||0!==n.lookahead||t!==We&&n.status!==_t){var f=0===n.level?At(n,t):n.strategy===ot?function(e,t){for(var n;;){if(0===e.lookahead&&(Nt(e),0===e.lookahead)){if(t===We)return 1;break}if(e.match_length=0,n=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Xe?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===at?function(e,t){for(var n,r,i,s,o=e.window;;){if(e.lookahead<=ht){if(Nt(e),e.lookahead<=ht&&t===We)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&((r=o[i=e.strstart-1])===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+ht;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=ht-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ke(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ke(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(wt(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Xe?(wt(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(wt(e,!1),0===e.strm.avail_out)?1:2}(n,t):Dt[n.level].func(n,t);if(3!==f&&4!==f||(n.status=_t),1===f||3===f)return 0===e.avail_out&&(n.last_flush=-1),$e;if(2===f&&(t===Ye?Ve(n):t!==Je&&(Ge(n,0,0,!1),t===Ze&&(yt(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),bt(e),0===e.avail_out))return n.last_flush=-1,$e}return t!==Xe?$e:n.wrap<=0?et:(2===n.wrap?(Tt(n,255&e.adler),Tt(n,e.adler>>8&255),Tt(n,e.adler>>16&255),Tt(n,e.adler>>24&255),Tt(n,255&e.total_in),Tt(n,e.total_in>>8&255),Tt(n,e.total_in>>16&255),Tt(n,e.total_in>>24&255)):(It(n,e.adler>>>16),It(n,65535&e.adler)),bt(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?$e:et)},Ht=function(e){if(Lt(e))return tt;var t=e.state.status;return e.state=null,t===pt?vt(e,nt):$e},jt=function(e,t){var n=t.length;if(Lt(e))return tt;var r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==ft||r.lookahead)return tt;if(1===i&&(e.adler=qe(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(yt(r.head),r.strstart=0,r.block_start=0,r.insert=0);var s=new Uint8Array(r.w_size);s.set(t.subarray(n-r.w_size,n),0),t=s,n=r.w_size}var o=e.avail_in,a=e.next_in,u=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Nt(r);r.lookahead>=3;){var c=r.strstart,l=r.lookahead-2;do{r.ins_h=Et(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--l);r.strstart=c,r.lookahead=2,Nt(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=u,e.avail_in=o,r.wrap=i,$e},Bt=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Gt=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)Bt(n,r)&&(e[r]=n[r])}}return e},Qt=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),s=0,o=0,a=e.length;s<a;s++){var u=e[s];i.set(u,o),o+=u.length}return i},Kt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Kt=!1}for(var Vt=new Uint8Array(256),Wt=0;Wt<256;Wt++)Vt[Wt]=Wt>=252?6:Wt>=248?5:Wt>=240?4:Wt>=224?3:Wt>=192?2:1;Vt[254]=Vt[254]=1;var Yt=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);var t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&(56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&(56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},Zt=function(e,t){var n,r,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));var s=new Array(2*i);for(r=0,n=0;n<i;){var o=e[n++];if(o<128)s[r++]=o;else{var a=Vt[o];if(a>4)s[r++]=65533,n+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&n<i;)o=o<<6|63&e[n++],a--;a>1?s[r++]=65533:o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|1023&o)}}}return function(e,t){if(t<65534&&e.subarray&&Kt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}(s,r)},Xt=function(e,t){(t=t||e.length)>e.length&&(t=e.length);for(var n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Vt[e[n]]>t?n:t},Jt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$t=Object.prototype.toString,en=je.Z_NO_FLUSH,tn=je.Z_SYNC_FLUSH,nn=je.Z_FULL_FLUSH,rn=je.Z_FINISH,sn=je.Z_OK,on=je.Z_STREAM_END,an=je.Z_DEFAULT_COMPRESSION,un=je.Z_DEFAULT_STRATEGY,cn=je.Z_DEFLATED;function ln(e){this.options=Gt({level:an,method:cn,chunkSize:16384,windowBits:15,memLevel:8,strategy:un},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jt,this.strm.avail_out=0;var n=qt(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==sn)throw new Error(He[n]);if(t.header&&Ft(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?Yt(t.dictionary):"[object ArrayBuffer]"===$t.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=jt(this.strm,r))!==sn)throw new Error(He[n]);this._dict_set=!0}}function hn(e,t){var n=new ln(t);if(n.push(e,!0),n.err)throw n.msg||He[n.err];return n.result}ln.prototype.push=function(e,t){var n,r,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?rn:en,"string"==typeof e?i.input=Yt(e):"[object ArrayBuffer]"===$t.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(r===tn||r===nn)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if((n=zt(i,r))===on)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=Ht(this.strm),this.onEnd(n),this.ended=!0,n===sn;if(0!==i.avail_out){if(r>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},ln.prototype.onData=function(e){this.chunks.push(e)},ln.prototype.onEnd=function(e){e===sn&&(this.result=Qt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var dn=ln,fn=hn,pn=function(e,t){return(t=t||{}).raw=!0,hn(e,t)},_n=function(e,t){return(t=t||{}).gzip=!0,hn(e,t)},vn=16209,mn=function(e,t){var n,r,i,s,o,a,u,c,l,h,d,f,p,_,v,m,y,g,E,b,w,T,I,C,S=e.state;n=e.next_in,I=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=S.dmax,u=S.wsize,c=S.whave,l=S.wnext,h=S.window,d=S.hold,f=S.bits,p=S.lencode,_=S.distcode,v=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;e:do{f<15&&(d+=I[n++]<<f,f+=8,d+=I[n++]<<f,f+=8),y=p[d&v];t:for(;;){if(d>>>=g=y>>>24,f-=g,0===(g=y>>>16&255))C[i++]=65535&y;else{if(!(16&g)){if(0==(64&g)){y=p[(65535&y)+(d&(1<<g)-1)];continue t}if(32&g){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=vn;break e}E=65535&y,(g&=15)&&(f<g&&(d+=I[n++]<<f,f+=8),E+=d&(1<<g)-1,d>>>=g,f-=g),f<15&&(d+=I[n++]<<f,f+=8,d+=I[n++]<<f,f+=8),y=_[d&m];n:for(;;){if(d>>>=g=y>>>24,f-=g,!(16&(g=y>>>16&255))){if(0==(64&g)){y=_[(65535&y)+(d&(1<<g)-1)];continue n}e.msg="invalid distance code",S.mode=vn;break e}if(b=65535&y,f<(g&=15)&&(d+=I[n++]<<f,(f+=8)<g&&(d+=I[n++]<<f,f+=8)),(b+=d&(1<<g)-1)>a){e.msg="invalid distance too far back",S.mode=vn;break e}if(d>>>=g,f-=g,b>(g=i-s)){if((g=b-g)>c&&S.sane){e.msg="invalid distance too far back",S.mode=vn;break e}if(w=0,T=h,0===l){if(w+=u-g,g<E){E-=g;do{C[i++]=h[w++]}while(--g);w=i-b,T=C}}else if(l<g){if(w+=u+l-g,(g-=l)<E){E-=g;do{C[i++]=h[w++]}while(--g);if(w=0,l<E){E-=g=l;do{C[i++]=h[w++]}while(--g);w=i-b,T=C}}}else if(w+=l-g,g<E){E-=g;do{C[i++]=h[w++]}while(--g);w=i-b,T=C}for(;E>2;)C[i++]=T[w++],C[i++]=T[w++],C[i++]=T[w++],E-=3;E&&(C[i++]=T[w++],E>1&&(C[i++]=T[w++]))}else{w=i-b;do{C[i++]=C[w++],C[i++]=C[w++],C[i++]=C[w++],E-=3}while(E>2);E&&(C[i++]=C[w++],E>1&&(C[i++]=C[w++]))}break}}break}}while(n<r&&i<o);n-=E=f>>3,d&=(1<<(f-=E<<3))-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),S.hold=d,S.bits=f},yn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),En=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),bn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),wn=function(e,t,n,r,i,s,o,a){var u,c,l,h,d,f,p,_,v,m=a.bits,y=0,g=0,E=0,b=0,w=0,T=0,I=0,C=0,S=0,N=0,A=null,k=new Uint16Array(16),O=new Uint16Array(16),R=null;for(y=0;y<=15;y++)k[y]=0;for(g=0;g<r;g++)k[t[n+g]]++;for(w=m,b=15;b>=1&&0===k[b];b--);if(w>b&&(w=b),0===b)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(E=1;E<b&&0===k[E];E++);for(w<E&&(w=E),C=1,y=1;y<=15;y++)if(C<<=1,(C-=k[y])<0)return-1;if(C>0&&(0===e||1!==b))return-1;for(O[1]=0,y=1;y<15;y++)O[y+1]=O[y]+k[y];for(g=0;g<r;g++)0!==t[n+g]&&(o[O[t[n+g]]++]=g);if(0===e?(A=R=o,f=20):1===e?(A=yn,R=gn,f=257):(A=En,R=bn,f=0),N=0,g=0,y=E,d=s,T=w,I=0,l=-1,h=(S=1<<w)-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){p=y-I,o[g]+1<f?(_=0,v=o[g]):o[g]>=f?(_=R[o[g]-f],v=A[o[g]-f]):(_=96,v=0),u=1<<y-I,E=c=1<<T;do{i[d+(N>>I)+(c-=u)]=p<<24|_<<16|v|0}while(0!==c);for(u=1<<y-1;N&u;)u>>=1;if(0!==u?(N&=u-1,N+=u):N=0,g++,0==--k[y]){if(y===b)break;y=t[n+o[g]]}if(y>w&&(N&h)!==l){for(0===I&&(I=w),d+=E,C=1<<(T=y-I);T+I<b&&!((C-=k[T+I])<=0);)T++,C<<=1;if(S+=1<<T,1===e&&S>852||2===e&&S>592)return 1;i[l=N&h]=w<<24|T<<16|d-s|0}}return 0!==N&&(i[d+N]=y-I<<24|64<<16|0),a.bits=w,0},Tn=je.Z_FINISH,In=je.Z_BLOCK,Cn=je.Z_TREES,Sn=je.Z_OK,Nn=je.Z_STREAM_END,An=je.Z_NEED_DICT,kn=je.Z_STREAM_ERROR,On=je.Z_DATA_ERROR,Rn=je.Z_MEM_ERROR,Dn=je.Z_BUF_ERROR,Un=je.Z_DEFLATED,Ln=16180,Mn=16190,Pn=16191,xn=16192,qn=16194,Fn=16199,zn=16200,Hn=16206,jn=16209,Bn=function(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)};function Gn(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Qn,Kn,Vn=function(e){if(!e)return 1;var t=e.state;return!t||t.strm!==e||t.mode<Ln||t.mode>16211?1:0},Wn=function(e){if(Vn(e))return kn;var t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Ln,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Sn},Yn=function(e){if(Vn(e))return kn;var t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Wn(e)},Zn=function(e,t){var n;if(Vn(e))return kn;var r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?kn:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Yn(e))},Xn=function(e,t){if(!e)return kn;var n=new Gn;e.state=n,n.strm=e,n.window=null,n.mode=Ln;var r=Zn(e,t);return r!==Sn&&(e.state=null),r},Jn=!0,$n=function(e){if(Jn){Qn=new Int32Array(512),Kn=new Int32Array(32);for(var t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(wn(1,e.lens,0,288,Qn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;wn(2,e.lens,0,32,Kn,0,e.work,{bits:5}),Jn=!1}e.lencode=Qn,e.lenbits=9,e.distcode=Kn,e.distbits=5},er=function(e,t,n,r){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):((i=s.wsize-s.wnext)>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},tr=Yn,nr=Xn,rr=function(e,t){var n,r,i,s,o,a,u,c,l,h,d,f,p,_,v,m,y,g,E,b,w,T,I,C,S=0,N=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Vn(e)||!e.output||!e.input&&0!==e.avail_in)return kn;(n=e.state).mode===Pn&&(n.mode=xn),o=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,l=n.bits,h=a,d=u,T=Sn;e:for(;;)switch(n.mode){case Ln:if(0===n.wrap){n.mode=xn;break}for(;l<16;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,N[0]=255&c,N[1]=c>>>8&255,n.check=ze(n.check,N,2,0),c=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=jn;break}if((15&c)!==Un){e.msg="unknown compression method",n.mode=jn;break}if(l-=4,w=8+(15&(c>>>=4)),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=jn;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:Pn,c=0,l=0;break;case 16181:for(;l<16;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(n.flags=c,(255&n.flags)!==Un){e.msg="unknown compression method",n.mode=jn;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=jn;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(N[0]=255&c,N[1]=c>>>8&255,n.check=ze(n.check,N,2,0)),c=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(N[0]=255&c,N[1]=c>>>8&255,N[2]=c>>>16&255,N[3]=c>>>24&255,n.check=ze(n.check,N,4,0)),c=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(N[0]=255&c,N[1]=c>>>8&255,n.check=ze(n.check,N,2,0)),c=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(N[0]=255&c,N[1]=c>>>8&255,n.check=ze(n.check,N,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((f=n.length)>a&&(f=a),f&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),w)),512&n.flags&&4&n.wrap&&(n.check=ze(n.check,r,f,s)),a-=f,s+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;f=0;do{w=r[s+f++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=ze(n.check,r,f,s)),a-=f,s+=f,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;f=0;do{w=r[s+f++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=ze(n.check,r,f,s)),a-=f,s+=f,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=jn;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Pn;break;case 16189:for(;l<32;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}e.adler=n.check=Bn(c),c=0,l=0,n.mode=Mn;case Mn:if(0===n.havedict)return e.next_out=o,e.avail_out=u,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=l,An;e.adler=n.check=1,n.mode=Pn;case Pn:if(t===In||t===Cn)break e;case xn:if(n.last){c>>>=7&l,l-=7&l,n.mode=Hn;break}for(;l<3;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}switch(n.last=1&c,l-=1,3&(c>>>=1)){case 0:n.mode=16193;break;case 1:if($n(n),n.mode=Fn,t===Cn){c>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=jn}c>>>=2,l-=2;break;case 16193:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=jn;break}if(n.length=65535&c,c=0,l=0,n.mode=qn,t===Cn)break e;case qn:n.mode=16195;case 16195:if(f=n.length){if(f>a&&(f=a),f>u&&(f=u),0===f)break e;i.set(r.subarray(s,s+f),o),a-=f,s+=f,u-=f,o+=f,n.length-=f;break}n.mode=Pn;break;case 16196:for(;l<14;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(n.nlen=257+(31&c),c>>>=5,l-=5,n.ndist=1+(31&c),c>>>=5,l-=5,n.ncode=4+(15&c),c>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=jn;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}n.lens[A[n.have++]]=7&c,c>>>=3,l-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},T=wn(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,T){e.msg="invalid code lengths set",n.mode=jn;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;m=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((v=S>>>24)<=l);){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(y<16)c>>>=v,l-=v,n.lens[n.have++]=y;else{if(16===y){for(C=v+2;l<C;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(c>>>=v,l-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=jn;break}w=n.lens[n.have-1],f=3+(3&c),c>>>=2,l-=2}else if(17===y){for(C=v+3;l<C;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}l-=v,w=0,f=3+(7&(c>>>=v)),c>>>=3,l-=3}else{for(C=v+7;l<C;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}l-=v,w=0,f=11+(127&(c>>>=v)),c>>>=7,l-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=jn;break}for(;f--;)n.lens[n.have++]=w}}if(n.mode===jn)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=jn;break}if(n.lenbits=9,I={bits:n.lenbits},T=wn(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,T){e.msg="invalid literal/lengths set",n.mode=jn;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},T=wn(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,T){e.msg="invalid distances set",n.mode=jn;break}if(n.mode=Fn,t===Cn)break e;case Fn:n.mode=zn;case zn:if(a>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=l,mn(e,d),o=e.next_out,i=e.output,u=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,c=n.hold,l=n.bits,n.mode===Pn&&(n.back=-1);break}for(n.back=0;m=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((v=S>>>24)<=l);){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(m&&0==(240&m)){for(g=v,E=m,b=y;m=(S=n.lencode[b+((c&(1<<g+E)-1)>>g)])>>>16&255,y=65535&S,!(g+(v=S>>>24)<=l);){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}c>>>=g,l-=g,n.back+=g}if(c>>>=v,l-=v,n.back+=v,n.length=y,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=Pn;break}if(64&m){e.msg="invalid literal/length code",n.mode=jn;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(C=n.extra;l<C;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;m=(S=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&S,!((v=S>>>24)<=l);){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(0==(240&m)){for(g=v,E=m,b=y;m=(S=n.distcode[b+((c&(1<<g+E)-1)>>g)])>>>16&255,y=65535&S,!(g+(v=S>>>24)<=l);){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}c>>>=g,l-=g,n.back+=g}if(c>>>=v,l-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=jn;break}n.offset=y,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(C=n.extra;l<C;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=jn;break}n.mode=16204;case 16204:if(0===u)break e;if(f=d-u,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=jn;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=i,p=o-n.offset,f=n.length;f>u&&(f=u),u-=f,n.length-=f;do{i[o++]=_[p++]}while(--f);0===n.length&&(n.mode=zn);break;case 16205:if(0===u)break e;i[o++]=n.length,u--,n.mode=zn;break;case Hn:if(n.wrap){for(;l<32;){if(0===a)break e;a--,c|=r[s++]<<l,l+=8}if(d-=u,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?ze(n.check,i,d,o-d):qe(n.check,i,d,o-d)),d=u,4&n.wrap&&(n.flags?c:Bn(c))!==n.check){e.msg="incorrect data check",n.mode=jn;break}c=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===a)break e;a--,c+=r[s++]<<l,l+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=jn;break}c=0,l=0}n.mode=16208;case 16208:T=Nn;break e;case jn:T=On;break e;case 16210:return Rn;default:return kn}return e.next_out=o,e.avail_out=u,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=l,(n.wsize||d!==e.avail_out&&n.mode<jn&&(n.mode<Hn||t!==Tn))&&er(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,4&n.wrap&&d&&(e.adler=n.check=n.flags?ze(n.check,i,d,e.next_out-d):qe(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Pn?128:0)+(n.mode===Fn||n.mode===qn?256:0),(0===h&&0===d||t===Tn)&&T===Sn&&(T=Dn),T},ir=function(e){if(Vn(e))return kn;var t=e.state;return t.window&&(t.window=null),e.state=null,Sn},sr=function(e,t){if(Vn(e))return kn;var n=e.state;return 0==(2&n.wrap)?kn:(n.head=t,t.done=!1,Sn)},or=function(e,t){var n,r=t.length;return Vn(e)?kn:0!==(n=e.state).wrap&&n.mode!==Mn?kn:n.mode===Mn&&qe(1,t,r,0)!==n.check?On:er(e,t,r,r)?(n.mode=16210,Rn):(n.havedict=1,Sn)},ar=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ur=Object.prototype.toString,cr=je.Z_NO_FLUSH,lr=je.Z_FINISH,hr=je.Z_OK,dr=je.Z_STREAM_END,fr=je.Z_NEED_DICT,pr=je.Z_STREAM_ERROR,_r=je.Z_DATA_ERROR,vr=je.Z_MEM_ERROR;function mr(e){this.options=Gt({chunkSize:65536,windowBits:15,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Jt,this.strm.avail_out=0;var n=nr(this.strm,t.windowBits);if(n!==hr)throw new Error(He[n]);if(this.header=new ar,sr(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Yt(t.dictionary):"[object ArrayBuffer]"===ur.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=or(this.strm,t.dictionary))!==hr))throw new Error(He[n])}function yr(e,t){var n=new mr(t);if(n.push(e),n.err)throw n.msg||He[n.err];return n.result}mr.prototype.push=function(e,t){var n,r,i,s=this.strm,o=this.options.chunkSize,a=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?lr:cr,"[object ArrayBuffer]"===ur.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(o),s.next_out=0,s.avail_out=o),(n=rr(s,r))===fr&&a&&((n=or(s,a))===hr?n=rr(s,r):n===_r&&(n=fr));s.avail_in>0&&n===dr&&s.state.wrap>0&&0!==e[s.next_in];)tr(s),n=rr(s,r);switch(n){case pr:case _r:case fr:case vr:return this.onEnd(n),this.ended=!0,!1}if(i=s.avail_out,s.next_out&&(0===s.avail_out||n===dr))if("string"===this.options.to){var u=Xt(s.output,s.next_out),c=s.next_out-u,l=Zt(s.output,u);s.next_out=c,s.avail_out=o-c,c&&s.output.set(s.output.subarray(u,u+c),0),this.onData(l)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(n!==hr||0!==i){if(n===dr)return n=ir(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},mr.prototype.onData=function(e){this.chunks.push(e)},mr.prototype.onEnd=function(e){e===hr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Qt(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var gr=dn,Er=fn,br=pn,wr=_n,Tr=mr,Ir=yr,Cr=function(e,t){return(t=t||{}).raw=!0,yr(e,t)},Sr=yr;t.ConnectionState=void 0;var Nr={Deflate:gr,deflate:Er,deflateRaw:br,gzip:wr,Inflate:Tr,inflate:Ir,inflateRaw:Cr,ungzip:Sr,constants:je};!function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"}(t.ConnectionState||(t.ConnectionState={}));var Ar,kr=function(e){function n(t,n){var r=n.sdkState,i=n.dispatcher,s=n.logger,o=e.call(this)||this;return o.lastActive=0,o._iid=t,o._sdkState=r,o._dispatcher=i,o._logger=s,o}return u(n,e),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===t.ConnectionState.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return t.ConnectionState.CONNECTING;case 1:return t.ConnectionState.OPEN}return t.ConnectionState.CLOSED},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(e){var t=this;e.split("\n").forEach((function(e){if(e){var n=$.createFromRawMessage(t._iid,e);if(t._logger.debug("receive websocket event",n),"LOGI"===n.code)t.dispatch("message",n);else if("PONG"===n.code)t.dispatch("pong");else if("EXPR"===n.code){if(n.payload){var r=new W(n.payload);r.expiresIn>=0&&t._dispatcher.dispatch(r)}}else"NOOP"===n.code||t.dispatch("message",n)}}))},n.prototype.connect=function(e){var t=this;this._ws=new WebSocket(e),this._ws.onopen=function(){t._logger.debug("websocket open"),t.dispatch("open")},this._ws.onmessage=function(e){return l(t,void 0,void 0,(function(){var t,n,r=this;return h(this,(function(i){return(null===(n=this._sdkState.websocket)||void 0===n?void 0:n.compression)?e.data instanceof Blob?((t=new FileReader).readAsArrayBuffer(e.data),t.onloadend=function(){return l(r,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:return[4,(r=t.result,l(void 0,void 0,void 0,(function(){var e;return h(this,(function(t){return e=Nr.ungzip(r),[2,String.fromCharCode.apply(null,e)]}))})))];case 1:return e=n.sent(),this._handleMessage(e),[2]}var r}))}))}):"string"==typeof e.data&&this._handleMessage(e.data):this._handleMessage(e.data),[2]}))}))},this._ws.onerror=function(){t._logger.debug("websocket error"),t.dispatch("error",E.networkError)},this._ws.onclose=function(){t._logger.debug("websocket close"),t.dispatch("close")},this.lastActive=Date.now()},n.prototype.disconnect=function(){var e=this;return new Promise((function(n){e._logger.debug("websocket disconnect"),e._ws&&e.connectionState!==t.ConnectionState.CLOSED?(e._ws.onopen=ee,e._ws.onmessage=ee,e._ws.onerror=ee,e._ws.onclose=function(){e.dispatch("close"),n()},e._ws.close(),e._ws=null):n()}))},n.prototype.send=function(e){if(!this._ws)throw E.connectionClosed;"PING"!==e.code?this.dispatch("ping-refresh"):this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},n.prototype.error=function(e){this._logger.debug("websocket error",e),this.dispatch("error",e)},n}(z),Or=function(e){function t(t){var n,r=t.code,i=t.ackRequired,s=t.payload,o=void 0===s?null:s,a=this;return(a=e.call(this)||this).code=r,a.payload=o,a.requestId=null!==(n=a.payload.req_id)&&void 0!==n?n:q(),a.ackRequired=i,a.payload.req_id=a.requestId,a}return u(t,e),t.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),"\n")},t}(j),Rr=function(e){function t(t){var n=t.all,r=t.custom_types,i=t.ts,s=e.call(this)||this;return s.all=n,s.customTypes=r,s.ts=i,s}return u(t,e),t}(j),Dr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},Ur=function(){function e(e,t){var n=t.auth,r=t.sdkState,i=t.dispatcher,s=t.logger,o=t.useFetchCompat,a=void 0!==o&&o,u=this;this._ackStateMap=new Map,this._sdkState=r,this._dispatcher=i,this._logger=s,this.apiClient=new J(e,{auth:n,sdkState:r,dispatcher:i,logger:s,useFetchCompat:a}),this.websocketClient=new kr(e,{sdkState:r,dispatcher:i,logger:s}),this.websocketClient.on("message",(function(e){if(e.payload.unread_cnt&&u._dispatcher.dispatch(new Rr(e.payload.unread_cnt)),e.requestId){if(u._ackStateMap.has(e.requestId)){var t=u._ackStateMap.get(e.requestId);"EROR"!==e.code?t.resolve(e):t.reject(new E({code:e.payload.code,message:e.payload.message}))}}else u._dispatcher.dispatch(e)})).on("close",(function(){u._ackStateMap.forEach((function(e){e.reject(E.connectionClosed)})),u._ackStateMap.clear()}))}return e.prototype._sendApiRequest=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.apiClient.send(e)];case 1:return[2,t.sent()]}}))}))},e.prototype._sendWebsocketRequest=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i=this;return h(this,(function(s){if(t=new Dr,e.ackRequired){n=null,r=function(r,s){void 0===r&&(r=null),void 0===s&&(s=null),i._ackStateMap.has(e.requestId)&&(i._ackStateMap.delete(e.requestId),n&&(clearTimeout(n),n=null),r?(i._logger.debug("fail websocket request",r),t.reject(r)):(i._logger.debug("receive websocket ack",e.requestId),t.resolve(s)))};try{n=setTimeout((function(){return r(E.noAckTimeout)}),this._sdkState.websocket.responseTimeout),this._ackStateMap.set(e.requestId,{resolve:function(e){return r(null,e)},reject:function(e){return r(e)}}),this.websocketClient.send(e)}catch(e){r(e)}}else try{this.websocketClient.send(e),t.resolve(null)}catch(e){t.reject(e)}return[2,t.promise]}))}))},e.prototype.send=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return e instanceof Q?[4,this._sendApiRequest(e)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return e instanceof Or?[4,this._sendWebsocketRequest(e)]:[3,4];case 4:throw E.invalidParameters}}))}))},e.prototype.cancel=function(e){this.apiClient.cancel(e)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();!function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT"}(Ar||(Ar={}));var Lr=function(e){function t(t){var n=t.stateType,r=e.call(this)||this;return r.stateType=n,r}return u(t,e),t}(j),Mr=function(){function e(e,t){var n=t.auth,r=t.sdkState,i=t.dispatcher,s=t.logger,o=t.useFetchCompat,a=void 0!==o&&o,u=this;this._currentConnectionStateType=Ar.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new Ur(e,{auth:n,sdkState:r,dispatcher:i,logger:s,useFetchCompat:a}),this._auth=n,this._logger=s,this._dispatcher=i,this._dispatcher.on((function(e){if(e instanceof Lr){var t=e.stateType;switch(u._currentConnectionStateType=t,t){case Ar.CONNECTED:var n=u._lazyCallQueue;u._lazyCallQueue=[],n.forEach((function(e){return l(u,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:t=e.command,n=e.deferred,r=e.timeout,clearTimeout(r),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.send(t)];case 2:return i=o.sent(),n.resolve(i),[3,4];case 3:return s=o.sent(),n.reject(s),[3,4];case 4:return[2]}}))}))}));break;case Ar.INITIALIZED:case Ar.INTERNAL_DISCONNECTED:case Ar.EXTERNAL_DISCONNECTED:case Ar.LOGOUT:n=u._lazyCallQueue,u._lazyCallQueue=[],n.forEach((function(e){return l(u,void 0,void 0,(function(){var t,n;return h(this,(function(r){return t=e.deferred,n=e.timeout,clearTimeout(n),this._auth&&this._auth.hasSession?t.reject(E.connectionClosed):t.reject(E.connectionRequired),[2]}))}))}))}}}))}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===Ar.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===Ar.CONNECTING||this._currentConnectionStateType===Ar.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype.send=function(e){return l(this,void 0,void 0,(function(){var t,n,r=this;return h(this,(function(i){switch(i.label){case 0:return e instanceof Or?this.isReady?(this._logger.debug("send websocket request",e),[4,this.commandRouter.send(e)]):[3,2]:[3,4];case 1:case 5:return[2,i.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",e),t=new Dr,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return r.timeout(e.requestId)}),1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),E.connectionRequired;case 3:return[3,7];case 4:return e instanceof Q?this._auth.hasSession?(this._logger.debug("send api request",e),[4,this.commandRouter.send(e)]):[3,6]:[3,7];case 6:if(this.isLazyCallActivated)return this._logger.debug("wait api request",e),t=new Dr,this._lazyCallQueue.push({command:e,deferred:t,timeout:setTimeout((function(){return r.timeout(e.requestId)}),1e4)}),[2,t.promise];throw n=E.connectionRequired,this._logger.debug("fail api request",n),n;case 7:return[2]}}))}))},e.prototype.forceSend=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this._logger.debug("send forced request",e),[4,this.commandRouter.send(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.timeout=function(e){this._logger.debug("timeout request",e);var t=this._lazyCallQueue.findIndex((function(t){return t.command.requestId===e}));t>-1&&(this._lazyCallQueue[t].deferred.reject(E.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(e){this._logger.debug("cancel api request",e),this.commandRouter.cancel(e)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),Pr="sendbird@devicetokens",xr=function(){function e(e){var t=e.type,n=e.token;this.type=t,this.token=n}return e.payloadify=function(e){return{type:e.type,token:e.token}},e}(),qr="v3",Fr="/".concat(qr,"/users"),zr="/".concat(qr,"/storage/file"),Hr="/".concat(qr,"/group_channels"),jr="/".concat(qr,"/open_channels"),Br="/".concat(qr,"/sdk/open_channels"),Gr="/".concat(qr,"/search"),Qr="/".concat(qr,"/report"),Kr="/".concat(qr,"/emojis"),Vr="/".concat(qr,"/emoji_categories"),Wr="/".concat(qr,"/polls"),Yr="/".concat(qr,"/sdk/ui_kit/configuration"),Zr="/".concat(qr,"/sdk/statistics"),Xr=function(e){function t(t){var n=t.userId,r=t.authToken,i=t.expiringSession,s=void 0===i||i,o=e.call(this)||this;return o.path="".concat(Fr,"/").concat(n,"/session_key"),o.method=L.POST,o.params={token:r,expiring_session:!!s},o.requireAuth=!1,o}return u(t,e),t}(Q),Jr=function(e){function t(t){var n=t.authToken,r=t.expiringSession,i=void 0===r||r,s=t.requestId,o=void 0===s?null:s;return e.call(this,{code:"LOGI",payload:{token:n,expiring_session:i?1:0,req_id:o},ackRequired:!0})||this}return u(t,e),t}(Or),$r=function(e){function t(t,n){var r=e.call(this,t,n)||this,i=n.key;return r.key=i,r}return u(t,e),t}(K),ei=function(e){function t(t,n,r){var i=e.call(this,t,"LOGI",r)||this;return i.error=null,i.newKey=r.new_key,i.error=r.error?new E(r.error):null,i}return u(t,e),t}($),ti=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(j),ni=function(e){return l(void 0,void 0,void 0,(function(){return h(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},ri=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),ii=function(e,t,n){return void 0===n&&(n=new ri),l(void 0,void 0,void 0,(function(){var r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:r=0,i=null,s=function(e){return void 0===e&&(e=null),i=null!=e?e:new Error("Halted")},o=function(){r=0},c.label=1;case 1:if(!(-1===t||r<t))return[3,9];c.label=2;case 2:return c.trys.push([2,4,,8]),[4,e(s,o)];case 3:if(a=c.sent(),i)throw i;return[2,a];case 4:if(u=c.sent(),i)return[3,6];if(++r===t)throw u;return[4,ni(n.calcTimeout(r))];case 5:return c.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}}))}))},si=function(e){return l(void 0,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return n.sent(),[3,3];case 2:if(!((t=n.sent())instanceof E))throw t;return t.throwOutside(),[3,3];case 3:return[2]}}))}))},oi=function(e){return l(void 0,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},ai=new WeakMap,ui=function(e){function t(t){var n=t.auth,r=t.cacheContext,i=t.sdkState,s=t.dispatcher,o=t.requestQueue,a=t.logger,u=e.call(this)||this;return u._currentConnectionStateType=Ar.INITIALIZED,u._isRefreshingAuthToken=!1,u._isRefreshingSessionKey=!1,u.auth=n,u._cacheContext=r,u._sdkState=i,u._dispatcher=s,u._requestQueue=o,u._logger=a,u._deviceTokens=[],u._dispatcher.on((function(e){var t;if(e instanceof Lr){var n=e.stateType;u._currentConnectionStateType=n}else e instanceof W&&u.handler&&(e.invalidateSessionToken&&(u.auth.authToken=void 0),e.error&&(e.error.isSessionKeyExpiredError||e.error.isSessionTokenExpiredError)&&(u._logger.debug("session expired"),(null===(t=u.handler)||void 0===t?void 0:t.onSessionExpired)&&u.handler.onSessionExpired(),u.refresh()))})),u}return u(t,e),Object.defineProperty(t.prototype,"ekey",{get:function(){return ai.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),t.prototype.indexOfDeviceToken=function(e,t){return this._deviceTokens.findIndex((function(n){return n.type===e&&n.token===t}))},t.prototype.hasDeviceToken=function(e,t){return this.indexOfDeviceToken(e,t)>=0},t.prototype.createRefreshWebsocketCommand=function(e,t){return void 0===t&&(t=null),new Jr({authToken:e,expiringSession:!0,requestId:t})},t.prototype._refreshSessionKeyByWebSocket=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return t=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(t)];case 1:if(n=o.sent(),r=n.as(ei),i=r.newKey,s=r.error)throw s;return this.auth.sessionKey=null!=i?i:this.auth.sessionKey,[2]}}))}))},t.prototype._refreshSessionKeyByApi=function(e){return l(this,void 0,void 0,(function(){var t,n=this;return h(this,(function(r){switch(r.label){case 0:return t=new Xr({userId:this._sdkState.userId,authToken:e,expiringSession:!0}),[4,ii((function(e){return l(n,void 0,void 0,(function(){var n,r,i;return h(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(t)];case 1:return n=s.sent(),r=n.as($r).key,this.auth.sessionKey=r,[3,3];case 2:if(i=s.sent(),!this._isSessionRelatedError(i))throw i;return e(i),[3,3];case 3:return[2]}}))}))}),3)];case 1:return r.sent(),[2]}}))}))},t.prototype._refreshSessionKey=function(e,t){return void 0===t&&(t=!0),l(this,void 0,void 0,(function(){var n,r,i,s;return h(this,(function(o){switch(o.label){case 0:if(this._currentConnectionStateType!==Ar.CONNECTED)return[3,10];o.label=1;case 1:return o.trys.push([1,3,,10]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return o.sent(),this.complete(),[2];case 3:return n=o.sent(),this._isSessionRelatedError(n)&&t?(r=this.auth,[4,this._receiveNewAuthToken()]):[3,9];case 4:return r.authToken=o.sent(),this.auth.authToken?[4,this._refreshSessionKey(this.auth.authToken,!1)]:[3,6];case 5:return o.sent(),this.complete(),[3,8];case 6:return[4,this.clear()];case 7:o.sent(),this.close(),o.label=8;case 8:return[2];case 9:return[3,10];case 10:return o.trys.push([10,12,,22]),[4,this._refreshSessionKeyByApi(e)];case 11:return o.sent(),this.complete(),[3,22];case 12:return i=o.sent(),this._isSessionRelatedError(i)?t?(s=this.auth,[4,this._receiveNewAuthToken()]):[3,18]:[3,20];case 13:return s.authToken=o.sent(),this.auth.authToken?[4,this._refreshSessionKeyByApi(this.auth.authToken)]:[3,15];case 14:return o.sent(),this.complete(),[3,17];case 15:return[4,this.clear()];case 16:o.sent(),this.close(),o.label=17;case 17:return[3,19];case 18:throw i;case 19:return[3,21];case 20:throw i;case 21:return[3,22];case 22:return[2]}}))}))},t.prototype._receiveNewAuthToken=function(){var e=this,t=new Dr;return si((function(){return l(e,void 0,void 0,(function(){var e,n,r=this;return h(this,(function(i){return this._isRefreshingAuthToken=!0,this.auth.clear(),e=null,n=function(){e&&(clearTimeout(e),e=null)},e=setTimeout((function(){r._isRefreshingAuthToken=!1,t.reject()}),1e3*this._sdkState.sessionTokenRefreshTimeout),this.handler.onSessionTokenRequired?this.handler.onSessionTokenRequired((function(e){n(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,r.dispatch("refresh-authtoken"),t.resolve(e))}),(function(e){n(),r._isRefreshingAuthToken=!1,t.reject(e)})):t.resolve(null),[2]}))}))})),t.promise},t.prototype._isSessionRelatedError=function(e){return e instanceof E&&(e.isSessionKeyExpiredError||e.isSessionTokenExpiredError||e.isSessionRevokedError)},Object.defineProperty(t.prototype,"isSessionKeyRefreshing",{get:function(){return this._isRefreshingSessionKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),t.prototype.login=function(e){var t;return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:return n=e.key,r=e.ekey,i=e.userProfile,s=e.deviceTokenLastDeletedAt,o=void 0===s?0:s,this.auth.sessionKey=n,ai.set(this,r),this._deviceTokenCacheEnabled=null===(t=null==i?void 0:i.appInfo)||void 0===t?void 0:t.deviceTokenCache,a=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,a.get(Pr)]:[3,5];case 1:return!(u=c.sent())||u.lastDeletedAt<o?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=o,[4,this.saveDeviceToken()]):[3,3];case 2:return c.sent(),[3,4];case 3:this._deviceTokens=u.tokens.map((function(e){return new xr(xr.payloadify(e))})),this._deviceTokenLastDeletedAt=u.lastDeletedAt,c.label=4;case 4:return[3,7];case 5:return[4,a.remove(Pr)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},t.prototype.complete=function(){var e=this;this.dispatch("refresh"),si((function(){return l(e,void 0,void 0,(function(){var e;return h(this,(function(t){return this._logger.debug("session refreshed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionRefreshed)&&this.handler.onSessionRefreshed(),[2]}))}))}))},t.prototype.error=function(e){var t=this;si((function(){return l(t,void 0,void 0,(function(){var t;return h(this,(function(n){return(null===(t=this.handler)||void 0===t?void 0:t.onSessionError)&&this.handler.onSessionError(e),[2]}))}))}))},t.prototype.close=function(){var e=this;this.dispatch("close"),si((function(){return l(e,void 0,void 0,(function(){var e;return h(this,(function(t){return this._logger.debug("session closed"),(null===(e=this.handler)||void 0===e?void 0:e.onSessionClosed)&&this.handler.onSessionClosed(),[2]}))}))}))},t.prototype.refresh=function(){return l(this,void 0,void 0,(function(){var e,t;return h(this,(function(n){switch(n.label){case 0:if(!this.handler)return[3,10];if(this._isRefreshingSessionKey)return[3,10];if(this._isRefreshingSessionKey=!0,this.auth.authToken)return[3,7];n.label=1;case 1:return n.trys.push([1,6,,7]),[4,this._receiveNewAuthToken()];case 2:return(e=n.sent())?(this._logger.debug("session refreshing.."),this.auth.authToken=e,[3,5]):[3,3];case 3:return[4,this.clear()];case 4:return n.sent(),this._isRefreshingSessionKey=!1,[2];case 5:return[3,7];case 6:throw n.sent(),t=E.sessionTokenRequestFailed,this._dispatcher.dispatch(new ti),this.error(t),this._isRefreshingSessionKey=!1,t;case 7:return n.trys.push([7,9,,10]),[4,this._refreshSessionKey(this.auth.authToken)];case 8:return n.sent(),this._isRefreshingSessionKey=!1,[3,10];case 9:throw n.sent(),t=E.sessionTokenRefreshFailed,this._dispatcher.dispatch(new ti),this.error(t),this._isRefreshingSessionKey=!1,t;case 10:return[2]}}))}))},t.prototype.setDeviceToken=function(e,t){return!!(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(e,t)<0)&&(this._deviceTokens.push(new xr({type:e,token:t})),!0)},t.prototype.unsetDeviceToken=function(e,t){if(this._deviceTokenCacheEnabled){var n=this.indexOfDeviceToken(e,t);n>=0&&this._deviceTokens.splice(n,1)}},t.prototype.unsetDeviceTokens=function(e){this._deviceTokenCacheEnabled&&(this._deviceTokens=e?this._deviceTokens.filter((function(t){return t.type!==e})):[])},t.prototype.setDeviceTokenDeletedAt=function(e){e>0&&(this._deviceTokenLastDeletedAt=e)},t.prototype.saveDeviceToken=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(Pr,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.currentUser=null,this.auth.clear(),this.close(),ai.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))},t}(z),ci=function(){function e(){this.type=Ar.NONE,this.name="none"}return e.prototype.run=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},e.prototype.onConnect=function(e,t){return l(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},e.prototype.onReconnect=function(e,t){return t.resetReconnectCount,l(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},e.prototype.onDisconnect=function(e,t){return t.error,t.autoReconnect,l(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},e.prototype.onDisconnectWebSocket=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},e.prototype.onLogout=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},e}(),li=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Ar.LOGOUT,t.name="logout",t}return u(t,e),t.prototype.run=function(e){return l(this,void 0,void 0,(function(){var t,n,r=this;return h(this,(function(i){switch(i.label){case 0:return t=Date.now(),n=e.sdkState.userId,[4,e.logout()];case 1:return i.sent(),[4,e.changeState(new vi,t)];case 2:return i.sent(),si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onDisconnected(n)})),[2]}))}))})),[2]}}))}))},t}(ci),hi=function(e){function t(){var t=e.call(this)||this;return t.type=Ar.EXTERNAL_DISCONNECTED,t.name="externaldisconnected",t}return u(t,e),t.prototype.run=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,e.disconnect()];case 1:return t.sent(),[2]}}))}))},t.prototype.onConnect=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return r.sent(),[4,e.changeState(new _i({authToken:t}),n)];case 2:return r.sent(),[2]}}))}))},t.prototype.onReconnect=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new fi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new li,t)];case 1:return n.sent(),[2]}}))}))},t}(ci),di=function(e){function t(t){var n=t.autoReconnect,r=e.call(this)||this;return r.type=Ar.INTERNAL_DISCONNECTED,r.name="internaldisconnected",r._autoReconnect=!1,r._autoReconnect=n,r}return u(t,e),t.prototype.run=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),this._autoReconnect?[4,e.changeState(new fi,t)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.onConnect=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.disconnect()];case 1:return r.sent(),[4,e.changeState(new _i({authToken:t}),n)];case 2:return r.sent(),[2]}}))}))},t.prototype.onReconnect=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new fi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new hi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new li,t)];case 1:return n.sent(),[2]}}))}))},t}(ci),fi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Ar.RECONNECTING,t.name="reconnecting",t._haltConnect=null,t._resetConnect=null,t._callbacks=[],t}return u(t,e),t.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=null)},t.prototype._flushCallbacks=function(e){void 0===e&&(e=null),this._haltConnect=null,this._resetConnect=null,this._callbacks.forEach((function(t){return t(e)}))},t.prototype.run=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a=this;return h(this,(function(u){switch(u.label){case 0:t=Date.now(),n=new Dr,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),si((function(){return l(a,void 0,void 0,(function(){return h(this,(function(t){return e.connectionHandlers.forEach((function(e){e.onReconnectStarted()})),[2]}))}))})),u.label=1;case 1:return u.trys.push([1,4,,9]),r=e.sdkState.websocket,i=r.reconnectMaxRetry,s=r.reconnectRetryStrategy,[4,ii((function(t,n){return l(a,void 0,void 0,(function(){var r;return h(this,(function(i){switch(i.label){case 0:this._haltConnect=t,this._resetConnect=n,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.connect()];case 2:return i.sent(),[3,4];case 3:if(r=i.sent(),e.clearLoginTimer(),r instanceof E&&r.code===_.CONNECTION_CANCELED)return t(r),[2];throw r;case 4:return[2]}}))}))}),i,s)];case 2:return u.sent(),[4,e.changeState(new pi,t)];case 3:return u.sent(),si((function(){return l(a,void 0,void 0,(function(){return h(this,(function(t){return this._flushCallbacks(null),e.connectionHandlers.forEach((function(e){e.onReconnectSucceeded()})),[2]}))}))})),[3,9];case 4:return o=u.sent(),g(o)?[3,7]:o instanceof E?o.code===_.CONNECTION_CANCELED?[3,6]:[4,e.changeState(new di({autoReconnect:!1}),t)]:[3,6];case 5:u.sent(),u.label=6;case 6:return si((function(){return l(a,void 0,void 0,(function(){return h(this,(function(t){return this._flushCallbacks(o),e.connectionHandlers.forEach((function(e){e.onReconnectFailed()})),[2]}))}))})),[3,8];case 7:throw o;case 8:return[3,9];case 9:return[2,n.promise]}}))}))},t.prototype.onConnect=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){return n=new Dr,this._halt(E.connectionCanceled),e.cancelConnectForRetry(),this._callbacks.push((function(){var r=Date.now();e.changeState(new _i({authToken:t}),r).then((function(){n.resolve()})).catch((function(e){n.reject(e)}))})),[2,n.promise]}))}))},t.prototype.onReconnect=function(e,t){var n=t.resetReconnectCount,r=void 0!==n&&n;return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){return e=new Dr,this._resetConnect&&r&&this._resetConnect(),this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},t.prototype.onDisconnect=function(e,t){t.error;var n=t.autoReconnect,r=void 0===n||n;return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(E.connectionCanceled),[4,e.changeState(new di({autoReconnect:r}),t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(E.connectionCanceled),[4,e.changeState(new hi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(E.connectionCanceled),[4,e.changeState(new li,t)];case 1:return n.sent(),[2]}}))}))},t}(ci),pi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Ar.CONNECTED,t.name="connected",t}return u(t,e),t.prototype.onReconnect=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.disconnect()];case 1:return n.sent(),[4,e.changeState(new fi,t)];case 2:return n.sent(),[2]}}))}))},t.prototype.onDisconnect=function(e,t){var n=t.autoReconnect;return l(this,void 0,void 0,(function(){var t;return h(this,(function(r){switch(r.label){case 0:return t=Date.now(),[4,e.changeState(new di({autoReconnect:n}),t)];case 1:return r.sent(),[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new hi,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.onLogout=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e.changeState(new li,t)];case 1:return n.sent(),[2]}}))}))},t}(ci),_i=function(e){function t(t){var n=t.authToken,r=e.call(this)||this;return r.type=Ar.CONNECTING,r.name="connecting",r._authToken="",r._haltConnect=null,r._callbacks=[],r._authToken=n,r}return u(t,e),t.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=null)},t.prototype._flushCallbacks=function(e){void 0===e&&(e=null),this._haltConnect=null,this._callbacks.forEach((function(t){return t(e)}))},t.prototype.run=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i=this;return h(this,(function(s){switch(s.label){case 0:t=Date.now(),n=new Dr,this._callbacks.push((function(e){return e?n.reject(e):n.resolve()})),s.label=1;case 1:return s.trys.push([1,4,,10]),[4,ii((function(t){return l(i,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:this._haltConnect=t,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.connect(this._authToken)];case 2:return r.sent(),[3,4];case 3:if(n=r.sent(),e.clearLoginTimer(),n instanceof E&&n.code===_.CONNECTION_CANCELED)return t(n),[2];throw n;case 4:return[2]}}))}))}),e.sdkState.websocket.connectMaxRetry)];case 2:return s.sent(),[4,e.changeState(new pi,t)];case 3:return s.sent(),si((function(){return l(i,void 0,void 0,(function(){return h(this,(function(t){return this._flushCallbacks(null),e.connectionHandlers.forEach((function(t){t.onConnected(e.sdkState.userId)})),[2]}))}))})),[3,10];case 4:return r=s.sent(),g(r)?[3,8]:[4,e.disconnect()];case 5:return s.sent(),r instanceof E?r.code===_.CONNECTION_CANCELED?[3,7]:[4,e.changeState(new vi,t)]:[3,7];case 6:s.sent(),s.label=7;case 7:return si((function(){return l(i,void 0,void 0,(function(){return h(this,(function(e){return this._flushCallbacks(r),[2]}))}))})),[3,9];case 8:throw r;case 9:return[3,10];case 10:return[2,n.promise]}}))}))},t.prototype.onConnect=function(e){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){return e=new Dr,this._callbacks.push((function(t){return t?e.reject(t):e.resolve()})),[2,e.promise]}))}))},t.prototype.onDisconnect=function(e,t){var n=t.error,r=void 0===n?null:n,i=t.autoReconnect;return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(null!=r?r:E.connectionCanceled),e.hasSession?[4,e.changeState(new di({autoReconnect:i}),t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new li,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.onDisconnectWebSocket=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(E.connectionCanceled),e.hasSession?[4,e.changeState(new hi,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.changeState(new li,t)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},t.prototype.onLogout=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=Date.now(),this._halt(E.connectionCanceled),[4,e.changeState(new li,t)];case 1:return n.sent(),[2]}}))}))},t}(ci),vi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=Ar.INITIALIZED,t.name="initialized",t}return u(t,e),t.prototype.onConnect=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=Date.now(),[4,e.changeState(new _i({authToken:t}),n)];case 1:return r.sent(),[2]}}))}))},t}(ci),mi=function(e){function t(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return u(t,e),t}(Or),yi=function(){function e(e){var t=e.pingDelegate,n=e.sdkState,r=e.logger;this._pingTimer=null,this._pingTimeoutTimer=null,this.pingDelegate=t,this.sdkState=n,this._logger=r}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var e,t=this,n=new mi;try{var r=null!==(e=this.sdkState.websocket.pongTimeout)&&void 0!==e?e:5e3;this._pingTimeoutTimer=setTimeout((function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error(null)}),r),this.pingDelegate.send(n),this._logger.debug("pinger.ping()")}catch(e){this._logger.debug("pinger.ping() error",e),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=null),this.pingDelegate.error(null)}return n},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=null)},e.prototype.refreshTimer=function(){var e,t=this;this._logger.debug("pinger.refreshTimer()");var n=null!==(e=this.sdkState.websocket.pingInterval)&&void 0!==e?e:15e3;this.stop(),this._pingTimer=setInterval((function(){t.ping()}),n)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=null),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=null)},e}(),gi=function(){function e(e){var t;this.lastUpdatedAt=null!==(t=e.last_updated_at)&&void 0!==t?t:0}return e.payloadify=function(e){return B({last_updated_at:e.lastUpdatedAt})},e}(),Ei=1048576,bi=function(){function e(e){var t,n,r,i;void 0===e&&(e={}),this.emojiHash=e.emoji_hash||"",this.uploadSizeLimit=e.file_upload_size_limit?e.file_upload_size_limit*Ei:Number.MAX_SAFE_INTEGER,this.useReaction=!!e.use_reaction,this.applicationAttributes=null!==(t=e.application_attributes)&&void 0!==t?t:[],this.premiumFeatureList=null!==(n=e.premium_feature_list)&&void 0!==n?n:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.allowSdkStatsUpload=null===(r=e.allow_sdk_log_ingestion)||void 0===r||r,this.uikitConfigInfo=new gi(null!==(i=e.uikit_config)&&void 0!==i?i:{})}return e.payloadify=function(e){return{emoji_hash:e.emojiHash,file_upload_size_limit:e.uploadSizeLimit/Ei,application_attributes:e.applicationAttributes,premium_feature_list:e.premiumFeatureList,use_reaction:e.useReaction,allow_sdk_log_ingestion:e.allowSdkStatsUpload,uikit_config:e.uikitConfigInfo?gi.payloadify(e.uikitConfigInfo):void 0}},e}(),wi=function(){function e(e){this._iid="",this._iid=e}return e.payloadify=function(e){return e?{}:null},e}(),Ti=function(e){function t(t){var n=t.userId,r=t.metadata,i=e.call(this)||this;return i.method=L.POST,i.path="".concat(Fr,"/").concat(n,"/metadata"),i.params={metadata:r},i}return u(t,e),t}(Q),Ii=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaData=n,r}return u(t,e),t}(K),Ci=function(e){function t(t){var n=t.userId,r=t.metadata,i=t.upsert,s=e.call(this)||this;return s.method=L.PUT,s.path="".concat(Fr,"/").concat(n,"/metadata"),s.params={metadata:r,upsert:i},s}return u(t,e),t}(Q),Si=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metadata=n,r}return u(t,e),t}(K),Ni=function(e){function t(t){var n=t.userId,r=t.metadataKey,i=e.call(this)||this;return i.method=L.DELETE,i.path="".concat(Fr,"/").concat(n,"/metadata/").concat(r),i}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var Ai=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.DELETE,r.path="".concat(Fr,"/").concat(n,"/metadata"),r}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K),t.UserOnlineState=void 0;var ki=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return n._iid&&delete n._iid,t&&t(n),n},Oi=function(e,t){void 0===t&&(t=null);var n=JSON.parse(JSON.stringify(e));return t&&t(n),n},Ri=function(e){return{do:function(t){e||t()},throw:function(t){if(!e)throw t}}};!function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"}(t.UserOnlineState||(t.UserOnlineState={}));var Di,Ui=function(e){function n(n,r){var i,s,o,a,u,c,l,h,d,_,v,m,y=this;return(y=e.call(this,n)||this).userId=null!==(s=null!==(i=r.guest_id)&&void 0!==i?i:r.user_id)&&void 0!==s?s:"",y.nickname=null!==(a=null!==(o=r.nickname)&&void 0!==o?o:r.name)&&void 0!==a?a:"",y.plainProfileUrl=null!==(c=null!==(u=r.profile_url)&&void 0!==u?u:r.image)&&void 0!==c?c:"",y.requireAuth=null!==(l=r.require_auth_for_profile_image)&&void 0!==l&&l,y.metaData=null!==(h=r.metadata)&&void 0!==h?h:{},y.connectionStatus=t.UserOnlineState.NON_AVAILABLE,C(t.UserOnlineState,r.is_online)?y.connectionStatus=r.is_online:I("boolean",r.is_online)&&(y.connectionStatus=r.is_online?t.UserOnlineState.ONLINE:t.UserOnlineState.OFFLINE),y.isActive=null===(d=r.is_active)||void 0===d||d,y.lastSeenAt=null!==(_=r.last_seen_at)&&void 0!==_?_:null,y.preferredLanguages=r.preferred_languages?p([],f(r.preferred_languages),!1):null,y.friendDiscoveryKey=null!==(v=r.friend_discovery_key)&&void 0!==v?v:null,y.friendName=null!==(m=r.friend_name)&&void 0!==m?m:null,y}return u(n,e),n.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})):null},Object.defineProperty(n.prototype,"profileUrl",{get:function(){var e=Wi.of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return ki(this)},n.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(t){return e[t]})).every((function(e){return I("string",e)}))},n.prototype._applyMetaData=function(e,t){var n=this;void 0===t&&(t=!1),Object.keys(e).forEach((function(r){t?delete n.metaData[r]:n.metaData[r]=e[r]}))},n.prototype.createMetaData=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return Ri(this._isValidMetaData(e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ti({userId:n.userId,metadata:e}),[4,r.send(i)];case 1:return s=a.sent(),o=s.as(Ii).metaData,this._applyMetaData(o),[2,this.metaData]}}))}))},n.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),l(this,void 0,void 0,(function(){var n,r,i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return Ri(this._isValidMetaData(e)).throw(E.invalidParameters),n=Wi.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Ci({userId:r.userId,metadata:e,upsert:t}),[4,i.send(s)];case 1:return o=u.sent(),a=o.as(Si).metadata,this._applyMetaData(a),[2,this.metaData]}}))}))},n.prototype.deleteMetaData=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return Ri(I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ni({userId:n.userId,metadataKey:e}),[4,r.send(i)];case 1:return o.sent(),this._applyMetaData(((s={})[e]=!0,s),!0),[2,this.metaData]}}))}))},n.prototype.deleteAllMetaData=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Ai({userId:t.userId}),[4,n.send(r)];case 1:return i.sent(),this.metaData={},[2]}}))}))},n}(wi),Li=function(e){function t(t){var n=t.userProfile,r=e.call(this)||this;return r.userProfile=n,r}return u(t,e),t}(j),Mi=function(){function e(e,t){var n,r,i,s,o,a,u,c,l,h,d,f,p,_;this._iid=e,this.appInfo=new bi(t),this.user=new Ui(e,t),this.connectedAt=null!==(n=t.login_ts)&&void 0!==n?n:0,this.firstConnectedAt=0,this.pingInterval=null!==(r=t.ping_interval)&&void 0!==r?r:15e3,this.pongTimeout=null!==(i=t.pong_timeout)&&void 0!==i?i:5e3,this.reconnectInterval=null!==(o=null===(s=t.reconnect)||void 0===s?void 0:s.interval)&&void 0!==o?o:3e3,this.reconnectMaxInterval=null!==(u=null===(a=t.reconnect)||void 0===a?void 0:a.max_interval)&&void 0!==u?u:6e4,this.reconnectRetryCount=null!==(l=null===(c=t.reconnect)||void 0===c?void 0:c.retry_cnt)&&void 0!==l?l:5,this.reconnectIntervalMultiple=null!==(d=null===(h=t.reconnect)||void 0===h?void 0:h.mul)&&void 0!==d?d:2,this.maxUnreadCountOnSuperGroup=null!==(f=t.max_unread_cnt_on_super_group)&&void 0!==f?f:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=null!==(p=t.concurrent_call_limit)&&void 0!==p?p:5,this.backOffDelay=null!==(_=t.back_off_delay)&&void 0!==_?_:100}return e.payloadify=function(e){return c(c(c({},Ui.payloadify(e.user)),bi.payloadify(e.appInfo)),{login_ts:e.connectedAt,ping_interval:e.pingInterval,pong_timeout:e.pongTimeout,reconnect:{interval:e.reconnectInterval,max_interval:e.reconnectMaxInterval,retry_cnt:e.reconnectRetryCount,mul:e.reconnectIntervalMultiple},max_unread_cnt_on_super_group:e.maxUnreadCountOnSuperGroup,profile_image_encryption:e.profileImageEncryption,concurrent_call_limit:e.concurrentCallLimit,back_off_delay:e.backOffDelay})},e.prototype.apply=function(){var e=this.reconnectInterval,t=this.reconnectMaxInterval,n=this.reconnectIntervalMultiple,r=Wi.of(this._iid);r.sdkState.websocket.pingInterval=1e3*this.pingInterval,r.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,r.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,r.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(r){return r>0?1e3*Math.min(e*Math.pow(n,r-1),t):10}},r.appInfo=this.appInfo,r.sessionManager.currentUser=this.user,r.connectedAt=this.connectedAt,this.firstConnectedAt||(r.firstConnectedAt=this.connectedAt),r.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,r.concurrentCallLimit=this.concurrentCallLimit,r.backOffDelay=this.backOffDelay,r.dispatcher.dispatch(new Li({userProfile:this}))},e}(),Pi=function(e){function t(t,n,r){var i,s=this;return(s=e.call(this,t,n,r)||this).error=null,s.userProfile=new Mi(t,r),s.deviceTokenLastDeletedAt=r.device_token_last_deleted_at,s.key=r.key,s.ekey=null!==(i=r.ekey)&&void 0!==i?i:"",s.error=r.error?new E(r):null,s}return u(t,e),t.asError=function(e){return new t(null,"LOGI",c({user_id:null,error:!0},e))},t.prototype.applyTo=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.error?[3,4]:(t=Wi.of(e))?[4,t.sessionManager.login(this)]:[3,2];case 1:return n.sent(),this.userProfile.apply(),[3,3];case 2:throw E.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}}))}))},t}($),xi=function(e){function t(t){var n=t.request,r=void 0===n||n,i=t.features,s=void 0===i?{}:i,o=t.options,a=void 0===o?{}:o,u=e.call(this)||this;return u.request=r,u.features=c({localCache:!0},s),u.options=c({ingestion:!0},a),u}return u(t,e),t}(j),qi=function(e){function t(t,n){var r=n.sdkState,i=n.cacheContext,s=n.connectionHandlers,o=n.sessionManager,a=n.websocketClient,u=n.dispatcher,c=n.logger,l=n.entryState,h=void 0===l?new vi:l,d=e.call(this)||this;return d._currentState=null,d._loginTimer=null,d._logiProcessingTimer=null,d._unresolvedLogi=null,d._stateUpdatedAt=0,d._connectingAt=0,d._connectionRequestQueue=[],d._iid=t,d.sdkState=r,d.cacheContext=i,d.connectionHandlers=s,d._sessionManager=o,d._websocketClient=a,d._dispatcher=u,d._logger=c,d._currentState=h,d.sdkState.websocket.pingerDisabled||(d._pinger=new yi({pingDelegate:{send:function(e){return d._websocketClient.send(e)},error:function(e){return d._websocketClient.error(e)}},sdkState:d.sdkState,logger:c})),d._websocketClient.on("open",(function(){d._tryResolveConnectionRequest()})).on("message",(function(e){"LOGI"===e.code&&(d.clearLoginTimer(),d._dispatcher.dispatch(e.as(Pi)))})).on("ping-refresh",(function(){var e;return null===(e=d._pinger)||void 0===e?void 0:e.refreshTimer()})).on("pong",(function(){var e;return null===(e=d._pinger)||void 0===e?void 0:e.pong()})).on("error",(function(){var e;return null===(e=d._pinger)||void 0===e?void 0:e.stop()})).on("close",(function(){d._logiProcessingTimer=setTimeout((function(){d._logiProcessingTimer=null,d._unresolvedLogi||d._rejectConnectionRequest(E.networkError)}),500)})),d._dispatcher.on((function(e){e instanceof Pi&&(d._unresolvedLogi=e,d._tryResolveConnectionRequest())})),d}return u(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSession",{get:function(){return this._sessionManager.auth.hasSession},enumerable:!1,configurable:!0}),t.prototype.changeState=function(e,t){return l(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return t>=this._stateUpdatedAt?(this._currentState=e,this._stateUpdatedAt=t,this._dispatcher.dispatch(new Lr({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)]):[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype._tryResolveConnectionRequest=function(){var e;return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=this._unresolvedLogi,this._websocketClient.isOpen&&t?(this._unresolvedLogi=null,t.error?[3,2]:[4,t.applyTo(this._iid)]):[3,3];case 1:return r.sent(),n=t.userProfile,this._enableStatLog({request:n.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:n.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish")},options:{ingestion:n.appInfo.allowSdkStatsUpload}}),this._statLogConnection(null),null===(e=this._pinger)||void 0===e||e.start(),this._connectionRequestQueue.forEach((function(e){return e.resolve()})),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._sessionManager.auth.authToken=null,(t.error.isSessionKeyExpiredError||t.error.isSessionTokenExpiredError)&&this._dispatcher.dispatch(new W({reason:t.error.code})),this._rejectConnectionRequest(t.error),r.label=3;case 3:return[2]}}))}))},t.prototype._rejectConnectionRequest=function(e){var t;if(null===(t=this._pinger)||void 0===t||t.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var n=this._connectionRequestQueue;this._connectionRequestQueue=[],n.forEach((function(t){return t.reject(e)})),this._statLogConnection(e)}},t.prototype._url=function(e){var t;void 0===e&&(e="");var n=this.sdkState,r=n.appId,i=n.appVersion,s=n.userId,o=n.extensions,a=this.cacheContext.localCacheEnabled,u=this._sessionManager.auth,c=null===(t=this.sdkState.websocket)||void 0===t?void 0:t.compression,l=!!this.sdkState.extensions.sb_uikit,h=o.sb_syncmanager?"s".concat(o.sb_syncmanager):"",d=o.sb_uikit?"u".concat(o.sb_uikit):"",f="JS/c".concat(m.SDK_VERSION,"/").concat(h,"/").concat(d);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(m.OS_VERSION),"&sv=").concat(encodeURIComponent(m.SDK_VERSION),"&ai=").concat(r).concat(i?"&av=".concat(i):"").concat(u.hasSession?"&key=".concat(encodeURIComponent(u.sessionKey)):"&user_id=".concat(encodeURIComponent(s),"&access_token=").concat(encodeURIComponent(e)),"&pmce=").concat(c?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(f,"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash"]))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(a?1:0,"&include_poll_details=1").concat(l?"&uikit_config=1":"")},t.prototype._enableStatLog=function(e){var t=e.request,n=e.features,r=e.options,i=void 0===r?{}:r;this._dispatcher.dispatch(new xi({request:t,features:n,options:i}))},t.prototype._statLogConnection=function(e){this._dispatcher.dispatch(new Y(new Z({type:G.WEBSOCKET_CONNECT,data:{host_url:this.sdkState.websocket.host,success:!e,latency:Date.now()-this._connectingAt,error_code:null==e?void 0:e.code,error_description:null==e?void 0:e.message}})))},t.prototype.connect=function(e){return void 0===e&&(e=""),l(this,void 0,void 0,(function(){var t,n,r=this;return h(this,(function(i){return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=null,this._rejectConnectionRequest(E.connectionCanceled)),t=this._url(e),n=new Dr,this._connectionRequestQueue.push(n),1===this._connectionRequestQueue.length&&(this._connectingAt=Date.now(),this._loginTimer=setTimeout((function(){r._loginTimer=null,r._rejectConnectionRequest(E.loginTimeout)}),this.sdkState.websocket.responseTimeout),e&&(this._sessionManager.auth.authToken=e),this._websocketClient.connect(t)),[2,n.promise]}))}))},t.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(Pi.asError(E.connectionRenew))},t.prototype.disconnect=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return e.sent(),[2]}}))}))},t.prototype.logout=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.sdkState.userId=null,this._unresolvedLogi=null,[4,this._sessionManager.clear()];case 1:return e.sent(),[4,this.disconnect()];case 2:return e.sent(),[2]}}))}))},t.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=null)},t}(z),Fi=function(){function e(e,t){var n=t.sdkState,r=t.cacheContext,i=t.connectionHandlers,s=t.sessionManager,o=t.websocketClient,a=t.dispatcher,u=t.logger,c=t.disableWebSocketCloseEventHandling,l=void 0!==c&&c;this._context=null,this._disableWebSocketCloseEventHandling=!1,this._externalCalledWebSocketClose=!1,this._logger=u,this._disableWebSocketCloseEventHandling=l,this._context=new qi(e,{sdkState:n,cacheContext:r,connectionHandlers:i,sessionManager:s,websocketClient:o,dispatcher:a,logger:u}),this._sdkState=n,this._sessionManager=s,this._websocketClient=o}return e.prototype._registerEventDispatcher=function(){var e=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh-authtoken",(function(){e.isConnected||(e._logger.debug("try reconnect by session token refresh"),e.reconnect())})).on("refresh",(function(){e.isConnecting||e.isConnected||(e._logger.debug("try reconnect by session key refresh"),e.reconnect())})),this._websocketEventDispatcherContext=this._websocketClient.on("close",(function(){"foreground"!==e._sdkState.appState||e._externalCalledWebSocketClose||e._sessionManager.isRefreshingAuthToken||(e._logger.debug("try reconnect by websocket connection closed"),e.reconnect())})))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=null),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=null)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===Ar.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var e=this._context.currentState;return e.type===Ar.CONNECTING||e.type===Ar.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype.connect=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,t.onConnect(this._context,e)];case 1:return n.sent(),this._registerEventDispatcher(),[2]}}))}))},e.prototype.reconnect=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{})];case 1:return t.sent(),[2]}}))}))},e.prototype.resetAndReconnect=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!1,[4,e.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.background=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnect(this._context,{autoReconnect:!1})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnect=function(e){return void 0===e&&(e=null),l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:e,autoReconnect:!0})];case 1:return t.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._externalCalledWebSocketClose=!0,[4,e.onDisconnectWebSocket(this._context)];case 1:return t.sent(),[2]}}))}))},e.prototype.logout=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e=this._context.currentState,this._clearEventDispatcher(),[4,e.onLogout(this._context)];case 1:return t.sent(),[2]}}))}))},e}(),zi=function(e){function t(t){var n,r,i,s,o=t.type,a=t.data,u=t.ts,c=void 0===u?Date.now():u,l=e.call(this,{type:o,data:a,ts:c})||this;return l.date=new Date(c),l.key="".concat((n=l.date,r=n.getFullYear(),i=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),"".concat(r).concat(i).concat(s)),"_").concat(o),l}return u(t,e),t}(Z),Hi=function(e){function t(t){var n=t.deviceId,r=t.statLogs,i=e.call(this)||this;return i.method=L.POST,i.path="".concat(Zr),i.params={device_id:n,log_entries:r.map((function(e){return Z.payloadify(e)}))},i}return u(t,e),t}(Q),ji=function e(t,n){var r,i;if(null!==t&&null!==n){var s=Object.keys(t),o=Object.keys(n),a=p([],f(new Set(p(p([],f(s),!1),f(o),!1))),!1),u={};try{for(var c=d(a),l=c.next();!l.done;l=c.next()){var h=l.value,_=typeof t[h],v=typeof n[h];"undefined"===_?u[h]=n[h]:"undefined"===v?u[h]=t[h]:_!==v?u[h]=n[h]:"object"===_&&t[h]&&n[h]?u[h]=e(t[h],n[h]):u[h]=n[h]}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return u}return n};!function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"}(Di||(Di={})),t.LogLevel=void 0;var Bi,Gi=function(e){function t(t){var n=t.cacheContext,r=t.requestQueue,i=t.dispatcher,s=t.baseLimit,o=void 0===s?100:s,a=t.maxLimit,u=void 0===a?1e3:a,c=t.minLimit,l=void 0===c?10:c,h=e.call(this)||this;return h.queue=[],h.enabledState=Di.PENDING,h.isFlushing=!1,h.generation=1,h.lastFlushedAt=0,h.commandEventContext=null,h._collectRequestStat=!0,h._collectFeatureLocalCacheStat=!0,h.deviceId=q(),h.cacheContext=n,h.requestQueue=r,h.dispatcher=i,h.baseLimit=o,h.limit=o,h.maxLimit=u,h.minLimit=l,h}return u(t,e),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.enabledState===Di.ENABLED},enumerable:!1,configurable:!0}),t.prototype._arrangeStat=function(){var e=[];this._collectRequestStat&&e.push.apply(e,p([],f(this.queue.filter((function(e){return e.type===G.API_RESULT||e.type===G.WEBSOCKET_CONNECT}))),!1)),this._collectFeatureLocalCacheStat&&e.push.apply(e,p([],f(this.queue.filter((function(e){return e.type===G.FEATURE_LOCALCACHE}))),!1)),this.queue=e},t.prototype._save=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.enabledState!==Di.ENABLED?[3,2]:[4,this.cacheContext.preference.set(this.key,{deviceId:this.deviceId,statLogs:this.queue.map((function(e){return Z.payloadify(e)})),generation:this.generation++,lastFlushedAt:this.lastFlushedAt})];case 1:e.sent(),this.dispatch("save",p([],f(this.queue),!1)),e.label=2;case 2:return[2]}}))}))},t.prototype._flush=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i;return h(this,(function(s){switch(s.label){case 0:if(!this.isEnabled)return[3,10];if(this.isFlushing)return[3,10];this.isFlushing=!0,s.label=1;case 1:return s.trys.push([1,5,9,10]),this._arrangeStat(),e=this.queue.filter((function(e){if(e instanceof zi){var t=new Date,n=f([e.date.getFullYear(),t.getFullYear()],2),r=n[0],i=n[1];if(r<i)return!0;if(r===i){var s=f([e.date.getMonth(),t.getMonth()],2),o=s[0],a=s[1];if(o<a)return!0;if(o===a){var u=f([e.date.getDate(),t.getDate()],2);return u[0]<u[1]}}}return!1})),t=this.queue.filter((function(e){return!(e instanceof zi)})),(n=p(p([],f(e),!1),f(t),!1).slice(0,Math.min(this.limit,this.maxLimit))).length>0?(r=new Hi({deviceId:this.deviceId,statLogs:n}),[4,this.requestQueue.send(r)]):[3,4];case 2:return s.sent(),this.dispatch("flush",n),this.queue=p(p([],f(e),!1),f(t),!1).slice(n.length),[4,this._save()];case 3:s.sent(),s.label=4;case 4:return this.limit=this.baseLimit,this.lastFlushedAt=Date.now(),[3,10];case 5:return(i=s.sent())instanceof E?i.code!==_.STAT_LOG_NOT_ALLOWED?[3,7]:[4,this.clear()]:[3,8];case 6:return s.sent(),this.enabledState=Di.DISABLED,[3,8];case 7:i.code===_.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=Di.COLLECT_ONLY),s.label=8;case 8:return this.limit=this.limit+20,[3,10];case 9:return this.isFlushing=!1,[7];case 10:return[2]}}))}))},t.prototype.init=function(e){return l(this,void 0,void 0,(function(){var t,n,r=this;return h(this,(function(i){switch(i.label){case 0:return this.key=e,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=i.sent())?(this.deviceId=t.deviceId,this.queue=t.statLogs.map((function(e){return new Z({type:e.stat_type,ts:e.ts,data:e.data})})),this.generation=t.generation,this.lastFlushedAt=t.lastFlushedAt,Date.now()-this.lastFlushedAt>=108e5&&this.queue.length>=this.minLimit?(n=Math.min(Math.floor(18e4*Math.random()),100),[4,ni(n)]):[3,4]):[3,4];case 2:return i.sent(),[4,this._flush()];case 3:i.sent(),i.label=4;case 4:return this.commandEventContext||(this.commandEventContext=this.dispatcher.on((function(e){if(e instanceof Y){var t=e.statLog;r.put(t)}else if(e instanceof xi){var n=e.request,i=e.features,s=e.options;r._collectRequestStat=n,r._collectFeatureLocalCacheStat=null==i?void 0:i.localCache,r._arrangeStat(),r._collectRequestStat||r._collectFeatureLocalCacheStat?r.enabledState=s.ingestion?Di.ENABLED:Di.COLLECT_ONLY:r.enabledState=Di.DISABLED,r.isEnabled?r.queue.length>=r.limit&&r._flush():r.clear()}}))),[2]}}))}))},t.prototype.put=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return this.enabledState===Di.DISABLED?[3,3]:(e instanceof zi?this._collectFeatureLocalCacheStat&&(t=f(this.queue.filter((function(t){return t instanceof zi&&t.key===e.key})),1),(n=t[0])?n.data=ji(n.data,e.data):this.queue.push(e)):this._collectRequestStat&&this.queue.push(e),[4,this._save()]);case 1:return r.sent(),this.queue.length>=this.limit?[4,this._flush()]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.queue=[],this.generation=1,[4,this._save()];case 1:return e.sent(),[2]}}))}))},t.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=null)},t}(z);!function(e){e[e.NONE=0]="NONE",e[e.VERBOSE=1]="VERBOSE",e[e.DEBUG=2]="DEBUG",e[e.INFO=3]="INFO",e[e.WARN=4]="WARN",e[e.ERROR=5]="ERROR"}(t.LogLevel||(t.LogLevel={})),t.MessageType=void 0,t.MessageTypeFilter=void 0,t.MentionType=void 0,t.ReplyType=void 0,t.PushNotificationDeliveryOption=void 0,t.SendingStatus=void 0,t.ChannelType=void 0,t.Role=void 0;var Qi,Ki=function(){function e(){this.level=t.LogLevel.WARN}return e.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level<=t.LogLevel.VERBOSE&&console.log.apply(console,p(["[verbose]"],f(e),!1))},e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level<=t.LogLevel.DEBUG&&console.log.apply(console,p(["[debug]"],f(e),!1))},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level<=t.LogLevel.INFO&&console.log.apply(console,p(["[info]"],f(e),!1))},e.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level<=t.LogLevel.WARN&&console.warn.apply(console,p(["[warn]"],f(e),!1))},e.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.level<=t.LogLevel.ERROR&&console.error.apply(console,p(["[error]"],f(e),!1))},e}(),Vi={},Wi=function(){function e(e,n){var r,i,s,o,a,u,c,l,h,d;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!Vi[e]){Vi[e]=this;var f=null!==(r=n.options)&&void 0!==r?r:new O,p=this.sdkState={appId:n.appId,appVersion:null!==(i=n.appVersion)&&void 0!==i?i:"",appState:"foreground",userId:null,extensions:{},api:{host:null!==(s=n.apiHost)&&void 0!==s?s:"https://api-".concat(n.appId,".sendbird.com")},websocket:{host:null!==(o=n.websocketHost)&&void 0!==o?o:"wss://ws-".concat(n.appId,".sendbird.com"),pingerDisabled:!!n.noPingpong,pingInterval:null,pongTimeout:null,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new ri,responseTimeout:f.websocketResponseTimeout},sessionTokenRefreshTimeout:f.sessionTokenRefreshTimeout};this.appInfo=null,this.subscribedUnreadMessageCount={all:0,customTypes:{},ts:0};var _=this.logger=new Ki;this.logger.level=null!==(a=n.logLevel)&&void 0!==a?a:t.LogLevel.WARN,this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map;var v=this.cacheContext=new U({encryption:n.encryption,store:n.store,localCacheEnabled:null!==(u=n.localCacheEnabled)&&void 0!==u&&u,localCacheConfig:null!==(c=n.localCacheConfig)&&void 0!==c?c:new P});this.debugMode=null!==(l=n.debugMode)&&void 0!==l&&l,this.maxSuperGroupChannelUnreadCount=m.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=f.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=f.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=f.typingIndicatorThrottle,this.concurrentCallLimit=null,this.backOffDelay=null;var y=this.dispatcher=new H,g=new x;this.requestQueue=new Mr(e,{auth:g,sdkState:p,dispatcher:y,logger:_,useFetchCompat:n.useFetchCompat}),this.sessionManager=new ui({auth:g,cacheContext:v,sdkState:p,dispatcher:y,requestQueue:this.requestQueue,logger:_}),this.connectionManager=new Fi(e,{sdkState:p,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:y,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:null!==(h=n.disableWebSocketCloseEventHandling)&&void 0!==h&&h,logger:_}),this.statLogCollector=new Gi({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:y}),this.appStateToggleEnabled=null===(d=n.appStateToggleEnabled)||void 0===d||d}return Vi[e]}return e.of=function(e){if(Vi[e])return Vi[e];throw E.lostInstance},e.clear=function(e){Vi[e]&&delete Vi[e]},e.prototype.hasExtension=function(e){return!!this.sdkState.extensions[e]},e}(),Yi=function(){function e(){}return e.prototype.init=function(e,t){var n=t.sdkState,r=t.dispatcher,i=t.sessionManager,s=t.requestQueue,o=t.logger;t.onlineDetector;var a=t.cacheContext,u=void 0===a?null:a;this._iid=e,this._cacheContext=u,this._sdkState=n,this._dispatcher=r,this._sessionManager=i,this._requestQueue=s,this._logger=o},e}();!function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(t.MessageType||(t.MessageType={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(t.MessageTypeFilter||(t.MessageTypeFilter={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(Bi||(Bi={})),function(e){e.USERS="users",e.CHANNEL="channel"}(t.MentionType||(t.MentionType={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(t.ReplyType||(t.ReplyType={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(t.PushNotificationDeliveryOption||(t.PushNotificationDeliveryOption={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(t.SendingStatus||(t.SendingStatus={})),function(e){e.BASE="base",e.GROUP="group",e.OPEN="open"}(t.ChannelType||(t.ChannelType={})),function(e){e.OPERATOR="operator",e.NONE="none"}(t.Role||(t.Role={})),function(e){e.OPEN="open",e.CLOSED="closed"}(Qi||(Qi={}));var Zi,Xi=function(e){switch(e){case Qi.OPEN:return Qi.OPEN;case Qi.CLOSED:return Qi.CLOSED}},Ji=function(e){return!e||e.text&&I("string",e.text)},$i=function(e){function t(t,n){var r,i,s,o,a,u,c,l=this;return(l=e.call(this,t)||this).pollId=0,l.id=0,l.text=null,l.voteCount=0,l.createdBy=null,l.createdAt=0,l.updatedAt=0,l._lastVotedAt=0,l.pollId=null!==(r=n.poll_id)&&void 0!==r?r:0,l.id=null!==(i=n.id)&&void 0!==i?i:0,l.text=null!==(s=n.text)&&void 0!==s?s:null,l.voteCount=null!==(o=n.vote_count)&&void 0!==o?o:0,l.createdBy=null!==(a=n.created_by)&&void 0!==a?a:null,l.createdAt=null!==(u=n.created_at)&&void 0!==u?u:0,l.updatedAt=null!==(c=n.updated_at)&&void 0!==c?c:0,l}return u(t,e),t.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})):null},t}(wi),es=function(e){function t(t,n){var r,i,s,o,a,u,c,l,h,d,f,p,_,v=this;return(v=e.call(this,t)||this).id=0,v.title=null,v.createdAt=0,v.updatedAt=0,v.closeAt=-1,v.status=Qi.CLOSED,v.messageId=0,v.data=null,v.voterCount=-1,v.options=[],v.createdBy=null,v.allowUserSuggestion=!1,v.allowMultipleVotes=!1,v.votedPollOptionIds=[],v.id=null!==(r=n.id)&&void 0!==r?r:0,v.title=null!==(i=n.title)&&void 0!==i?i:null,v.createdAt=null!==(s=n.created_at)&&void 0!==s?s:0,v.updatedAt=null!==(o=n.updated_at)&&void 0!==o?o:0,v.closeAt=null!==(a=n.close_at)&&void 0!==a?a:-1,v.status=null!==(u=Xi(n.status))&&void 0!==u?u:Qi.CLOSED,v.messageId=null!==(c=n.message_id)&&void 0!==c?c:0,v.data=null!==(l=n.data)&&void 0!==l?l:null,v.voterCount=null!==(h=n.voter_count)&&void 0!==h?h:-1,v.options=n.options?n.options.map((function(e){return new $i(v._iid,e)})):[],v.createdBy=null!==(d=n.created_by)&&void 0!==d?d:null,v.allowUserSuggestion=null!==(f=n.allow_user_suggestion)&&void 0!==f&&f,v.allowMultipleVotes=null!==(p=n.allow_multiple_votes)&&void 0!==p&&p,v.votedPollOptionIds=null!==(_=n.voted_option_ids)&&void 0!==_?_:[],v}return u(t,e),t.prototype._applyPollUpdatePayload=function(e){var t,n,r,i,s,o,a,u,c=this;this.title=null!==(t=e.title)&&void 0!==t?t:this.title,this.updatedAt=null!==(n=e.updated_at)&&void 0!==n?n:this.updatedAt,this.closeAt=null!==(r=e.close_at)&&void 0!==r?r:this.closeAt,this.status=null!==(i=Xi(e.status))&&void 0!==i?i:this.status,this.data=null!==(s=e.data)&&void 0!==s?s:this.data,this.voterCount=null!==(o=e.voter_count)&&void 0!==o?o:this.voterCount,e.options&&(this.options=e.options.map((function(e){return new $i(c._iid,e)})),this.votedPollOptionIds=e.options.filter((function(e){return e.vote_count>0})).map((function(e){return e.id}))),this.allowUserSuggestion=null!==(a=e.allow_user_suggestion)&&void 0!==a?a:this.allowUserSuggestion,this.allowMultipleVotes=null!==(u=e.allow_multiple_votes)&&void 0!==u?u:this.allowMultipleVotes},t.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map((function(e){return $i.payloadify(e)})),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})):null},t.prototype.applyPollUpdateEvent=function(e){var t=e._payload.poll;return!(!t||this.id!==t.id||t.updated_at<this.updatedAt||(this._applyPollUpdatePayload(t),0))},t.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var t=this.options,n=t.map((function(e){return e.id})),r=e._payload,i=Math.floor(r.ts/1e3);return r.updated_vote_counts.forEach((function(e){var r=n.indexOf(e.option_id);if(r>-1){var s=t[r];i>=s._lastVotedAt&&(s.voteCount=e.vote_count,s._lastVotedAt=i)}})),r.req_id&&r.voted_option_ids&&(this.votedPollOptionIds=r.voted_option_ids),!0},t.prototype.serialize=function(){return ki(this)},t}(wi),ts=function(e){switch(e){case t.ChannelType.GROUP:return Hr;case t.ChannelType.OPEN:return jr;default:return null}},ns=function(e){switch(e){case t.ChannelType.GROUP:return"".concat(Qr,"/group_channels");case t.ChannelType.OPEN:return"".concat(Qr,"/open_channels");default:return null}},rs=function(e,n,r){var i,s;switch(e){case t.MentionType.CHANNEL:return!0;case t.MentionType.USERS:if(n)try{for(var o=d(n),a=o.next();!a.done;a=o.next())if(a.value===r)return!0}catch(e){i={error:e}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}return!1},is=function(e,t,n){var r=rs(e.mentionType,e.mentionedUserIds,n),i=rs(t.mentionType,t.mentionedUserIds,n);return!r&&i?1:r&&!i?-1:0};!function(e){e.UNKNOWN="UNKNOWN",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"}(Zi||(Zi={}));var ss=function(e){function t(t){var n=t.messages,r=t.source,i=e.call(this)||this;return i.messages=n,i.source=r,i}return u(t,e),t}(j),os=function(e){function t(t){var n=t.messageIds,r=t.source,i=e.call(this)||this;return i.messageIds=n,i.source=r,i}return u(t,e),t}(j);!function(e){u((function(t){var n=t.reqId,r=t.source,i=e.call(this)||this;return i.reqId=n,i.source=r,i}),e)}(j);var as=function(e){function t(t){var n=t.polls,r=t.source,i=e.call(this)||this;return i.polls=n,i.source=r,i}return u(t,e),t}(j),us=function(e){function t(t){var n=t.event,r=t.source,i=e.call(this)||this;return i.event=n,i.source=r,i}return u(t,e),t}(j),cs=function(e){function t(t){var n=t.event,r=t.source,i=e.call(this)||this;return i.event=null,i.source=null,i.event=n,i.source=r,i}return u(t,e),t}(j),ls=function(){function e(e,t){var n;this._iid=null,this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=e,this.limit=null!==(n=t.limit)&&void 0!==n?n:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return I("number",this.limit)&&this.limit>0},e}(),hs=function(e){function n(t,n,r,i){var s=e.call(this,t,i)||this;return s.channelUrl=n,s.channelType=r,s}return u(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&I("string",this.channelUrl)&&C(t.ChannelType,this.channelType)},n}(ls);t.ReactionEventOperation=void 0;var ds=function(e){function t(t){var n=e.call(this)||this;if(n.method=L.POST,n.path="".concat(zr),n.params=B({file:t.file,channel_url:t.channelUrl}),t.thumbnailSizes)for(var r=0;r<t.thumbnailSizes.length;r++){var i=t.thumbnailSizes[r],s=i.maxWidth,o=i.maxHeight;n.params["thumbnail".concat(r+1)]="".concat(s,",").concat(o)}return n.requestId=t.requestId,n}return u(t,e),t}(Q),fs=function(e){function t(t,n){var r,i,s,o=this;return(o=e.call(this,t,n)||this).url=n.url,o.fileSize=null!==(r=n.file_size)&&void 0!==r?r:0,o.thumbnailSizes=null!==(i=n.thumbnails)&&void 0!==i?i:[],o.requireAuth=null!==(s=n.require_auth)&&void 0!==s&&s,o}return u(t,e),t}(K),ps=function(e){function t(t,n){var r,i,s,o=this;return(o=e.call(this,t)||this).replyCount=0,o.mostRepliedUsers=null,o.lastRepliedAt=0,o.updatedAt=0,o.replyCount=null!==(r=n.reply_count)&&void 0!==r?r:0,o.mostRepliedUsers=n.hasOwnProperty("most_replies")&&N("object",n.most_replies)?n.most_replies.map((function(e){return new Ui(o._iid,e)})):[],o.lastRepliedAt=null!==(i=n.last_replied_at)&&void 0!==i?i:0,o.updatedAt=null!==(s=n.updated_at)&&void 0!==s?s:0,o}return u(t,e),t.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{reply_count:t.replyCount,most_replies:Array.isArray(t.mostRepliedUsers)?t.mostRepliedUsers.map((function(e){return Ui.payloadify(e)})):[],last_replied_at:t.lastRepliedAt,updated_at:t.updatedAt})):null},t}(wi);!function(e){e.ADD="add",e.DELETE="delete"}(t.ReactionEventOperation||(t.ReactionEventOperation={}));var _s,vs,ms=function(e){this.messageId=0,this.userId=null,this.key=null,this.operation=null,this.updatedAt=0;var n=I("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,r=e.user_id,i=e.operation?e.operation.toLowerCase():null,s=e.reaction,o=e.updated_at;n&&I("string",r)&&I("string",i)&&C(t.ReactionEventOperation,i)&&I("string",s)&&s&&I("number",o)&&(this.messageId=n,this.userId=r,this.key=s,this.operation=i,this.updatedAt=o)},ys=function(){function e(e){var t,n,r,i=e.key,s=null!==(r=p([],f(e.user_ids),!1))&&void 0!==r?r:[],o=e.updated_at;I("string",i)&&i&&N("string",s)&&s.length>0&&I("number",o)&&(this.key=i,this.userIds=s,this.updatedAt=o);var a={};try{for(var u=d(this.userIds),c=u.next();!c.done;c=u.next())a[c.value]=this.updatedAt}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}this._version=a}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.userIds.length},enumerable:!1,configurable:!0}),e.payloadify=function(e){return e?B({key:e.key,user_ids:e.userIds,updated_at:e.updatedAt}):null},e.prototype.applyEvent=function(e){if(e.key===this.key&&this.updatedAt<=e.updatedAt){if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var n=this.userIds.indexOf(e.userId);switch(e.operation){case t.ReactionEventOperation.ADD:n<0&&this.userIds.push(e.userId);break;case t.ReactionEventOperation.DELETE:n>=0&&this.userIds.splice(n,1)}this._version[e.userId]=e.updatedAt}this.updatedAt=Math.max(this.updatedAt,e.updatedAt)}},e}(),gs=function(){function e(e){this.key=e.key,this.value=N("string",e.value)?p([],f(e.value),!1):[]}return e.payloadify=function(e){var t;return e?B({key:e.key,value:null!==(t=e.value)&&void 0!==t?t:[]}):null},e}(),Es=function(){function e(e){this.url=null,this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=e.url,e.hasOwnProperty("secure_url")&&(this.secureUrl=e.secure_url),e.hasOwnProperty("type")&&(this.type=e.type),e.hasOwnProperty("width")&&(this.width=e.width),e.hasOwnProperty("height")&&(this.height=e.height),e.hasOwnProperty("alt")&&(this.alt=e.alt)}return e.payloadify=function(e){var t,n;return e?B({url:e.url,secure_url:e.secureUrl,type:e.type,width:null!==(t=e.width)&&void 0!==t?t:0,height:null!==(n=e.height)&&void 0!==n?n:0,alt:e.alt}):null},e}(),bs=function(){function e(e){this.title=null,this.url=null,this.description=null,this.defaultImage=null,e.hasOwnProperty("og:title")&&(this.title=e["og:title"]),e.hasOwnProperty("og:url")&&(this.url=e["og:url"]),e.hasOwnProperty("og:description")&&(this.description=e["og:description"]),e.hasOwnProperty("og:image")&&(this.defaultImage=new Es(e["og:image"]))}return e.payloadify=function(e){return e?B({"og:title":e.title,"og:url":e.url,"og:description":e.description,"og:image":e.defaultImage?Es.payloadify(e.defaultImage):null}):null},e}(),ws=function(){function e(e){var t,n;this.name=null,this.volume=0,this.name=null!==(t=e.name)&&void 0!==t?t:"default",this.volume=null!==(n=e.volume)&&void 0!==n?n:1}return e.prototype.serialize=function(){return{name:this.name,volume:this.volume}},e.payloadify=function(e){return e?B({name:e.name,volume:e.volume}):null},e}();!function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"}(_s||(_s={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(vs||(vs={}));var Ts,Is=function(e){switch(e){case t.MessageType.BASE:return"";case t.MessageType.USER:return"MESG";case t.MessageType.FILE:return"FILE";case t.MessageType.ADMIN:return"ADMM"}},Cs=function(e){function n(n,r){var i,s,o,a,u,c,l,h,d,f,p,_,v,m,y,g=this;(g=e.call(this,n)||this).channelUrl=null,g.channelType=t.ChannelType.BASE,g.messageId=0,g.parentMessageId=null,g.parentMessage=null,g.silent=!1,g.isOperatorMessage=!1,g.messageType=t.MessageType.BASE,g.data=null,g.customType=null,g.mentionType=null,g.mentionedUsers=[],g.mentionedUserIds=[],g.mentionedMessageTemplate=null,g.threadInfo=null,g.reactions=[],g.metaArrays=[],g.ogMetaData=null,g.appleCriticalAlertOptions=null,g.createdAt=0,g.updatedAt=0,g.scheduledInfo=null,g.extendedMessage={},g._isContinuousMessages=!1,g._scheduledStatus=null,g.messageId=null!==(s=null!==(i=r.msg_id)&&void 0!==i?i:r.message_id)&&void 0!==s?s:0,g.channelUrl=r.channel_url,g.channelType=C(t.ChannelType,r.channel_type)?r.channel_type:t.ChannelType.GROUP,r.channel&&(r.channel.channel_url&&(g.channelUrl=r.channel.channel_url),r.channel.channel_type&&(g.channelType=r.channel.channel_type)),g.parentMessageId=null!==(o="string"==typeof r.parent_message_id?parseInt(r.parent_message_id):r.parent_message_id)&&void 0!==o?o:0,g.data=null!==(a=r.data)&&void 0!==a?a:"",g.customType=null!==(u=r.custom_type)&&void 0!==u?u:"",g.mentionType=C(t.MentionType,r.mention_type)?r.mention_type:null;var E=r.mentioned_users;g.mentionedUsers=E?E.map((function(e){return new Ui(g._iid,e)})):null;var b=r.mentioned_user_ids;g.mentionedUserIds=null!=b?b:null,g.mentionedUsers&&!g.mentionedUserIds&&(g.mentionedUserIds=g.mentionedUsers.map((function(e){return e.userId}))),g.mentionedMessageTemplate=null!==(c=r.mentioned_message_template)&&void 0!==c?c:"",g.threadInfo=r.thread_info?new ps(g._iid,r.thread_info):null,g.reactions=r.reactions?r.reactions.map((function(e){return new ys(e)})):[];for(var w=null!==(l=r.metaarray)&&void 0!==l?l:{},T=null!==(h=r.metaarray_key_order)&&void 0!==h?h:Object.keys(w).sort((function(e,t){return e.localeCompare(t)})),I=0;I<T.length;I++){var S=T[I];g.metaArrays.push(new gs({key:S,value:w[S]||[]}))}return r.sorted_metaarray&&(g.metaArrays=r.sorted_metaarray.map((function(e){return new gs(e)}))),g.ogMetaData=r.og_tag?new bs(r.og_tag):null,g.silent=null!==(d=r.silent)&&void 0!==d&&d,g.isOperatorMessage=null!==(f=r.is_op_msg)&&void 0!==f&&f,g.appleCriticalAlertOptions=r.apple_critical_alert_options?new ws(r.apple_critical_alert_options):null,g.createdAt=null!==(_=null!==(p=r.created_at)&&void 0!==p?p:r.ts)&&void 0!==_?_:0,g.updatedAt=null!==(v=r.updated_at)&&void 0!==v?v:0,"number"==typeof r.scheduled_message_id&&"number"==typeof r.scheduled_at&&r.scheduled_status&&(g.scheduledInfo={scheduledMessageId:r.scheduled_message_id,scheduledAt:r.scheduled_at},g._scheduledStatus=r.scheduled_status),g.extendedMessage=null!==(m=r.extended_message)&&void 0!==m?m:{},g._isContinuousMessages=null!==(y=r.is_continuous_messages)&&void 0!==y&&y,g}return u(n,e),n.payloadify=function(t){var n,r,i,s;return t?B(c(c({},e.payloadify.call(this,t)),{channel_url:t.channelUrl,channel_type:t.channelType,message_id:t.messageId,type:Is(t.messageType),parent_message_id:t.parentMessageId,data:t.data,custom_type:t.customType,mention_type:t.mentionType,mentioned_user_ids:t.mentionedUserIds,mentioned_users:null===(n=t.mentionedUsers)||void 0===n?void 0:n.map((function(e){return Ui.payloadify(e)})),mentioned_message_template:t.mentionedMessageTemplate,thread_info:t.threadInfo?ps.payloadify(t.threadInfo):null,reactions:t.reactions.map((function(e){return ys.payloadify(e)})),sorted_metaarray:null===(r=t.metaArrays)||void 0===r?void 0:r.map((function(e){return gs.payloadify(e)})),og_tag:bs.payloadify(t.ogMetaData),silent:t.silent,is_op_msg:t.isOperatorMessage,apple_critical_alert_options:ws.payloadify(t.appleCriticalAlertOptions),created_at:t.createdAt,updated_at:t.updatedAt,scheduled_message_id:null===(i=t.scheduledInfo)||void 0===i?void 0:i.scheduledMessageId,scheduled_at:null===(s=t.scheduledInfo)||void 0===s?void 0:s.scheduledAt,scheduled_status:t._scheduledStatus,extended_message:t.extendedMessage})):null},n.prototype.isIdentical=function(e){return this.messageId===e.messageId},n.prototype.isEqual=function(e){return T(this,e)},n.prototype.isUserMessage=function(){return this.messageType===t.MessageType.USER},n.prototype.isFileMessage=function(){return this.messageType===t.MessageType.FILE},n.prototype.isAdminMessage=function(){return this.messageType===t.MessageType.ADMIN},n.prototype.serialize=function(){return ki(this)},n.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter((function(t){return e.includes(t.key)}))},n.prototype.applyThreadInfoUpdateEvent=function(e){return this.messageId===e.targetMessageId&&(this.threadInfo=e.threadInfo),!1},n.prototype.applyReactionEvent=function(e){if(this.messageId===e.messageId){for(var t=!1,n=0;n<this.reactions.length;n++)if(this.reactions[n].key===e.key){this.reactions[n].applyEvent(e),this.reactions[n].isEmpty&&this.reactions.splice(n,1),t=!0;break}t||"add"!==e.operation||this.reactions.push(new ys(ys.payloadify({key:e.key,userIds:[e.userId],updatedAt:e.updatedAt})))}},n.prototype.applyParentMessage=function(e){if(this.parentMessageId===e.messageId){var t=this.parentMessage.updatedAt;if(e.updatedAt>=t)return this.parentMessage=e,!0}return!1},n}(wi),Ss=function(e){function n(n,r){var i=e.call(this,n,r)||this;return i.role=null,i.isBlockedByMe=!1,i.role=C(t.Role,r.role)?r.role:t.Role.NONE,r.hasOwnProperty("is_blocked_by_me")&&(i.isBlockedByMe=r.is_blocked_by_me),i}return u(n,e),n.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{role:t.role,is_blocked_by_me:t.isBlockedByMe})):null},n}(Ui),Ns=function(e){function n(n,r){var i,s,o,a,u=this;if((u=e.call(this,n,r)||this).sender=null,u.reqId="",u.replyToChannel=!1,u.sendingStatus=null,u.errorCode=0,u.sender=r.user?new Ss(u._iid,r.user):r.sender_id,u.reqId=null!==(s=null!==(i=r.req_id)&&void 0!==i?i:r.request_id)&&void 0!==s?s:"",u.replyToChannel=null!==(o=r.is_reply_to_channel)&&void 0!==o&&o,r.request_state&&C(t.SendingStatus,r.request_state)&&(u.sendingStatus=r.request_state),!u.sendingStatus)if(u.messageId>0)u.sendingStatus=t.SendingStatus.SUCCEEDED;else if(u.scheduledInfo)switch(u._scheduledStatus=r.scheduled_status,r.scheduled_status){case vs.SENT:case vs.IN_QUEUE:u.sendingStatus=t.SendingStatus.SUCCEEDED;break;case vs.PENDING:u.sendingStatus=t.SendingStatus.SCHEDULED;break;case vs.FAILED:case vs.REMOVED:u.sendingStatus=t.SendingStatus.FAILED;break;case vs.CANCELED:u.sendingStatus=t.SendingStatus.CANCELED}else u.sendingStatus=t.SendingStatus.PENDING;return u.errorCode=null!==(a=r.error_code)&&void 0!==a?a:0,u}return u(n,e),n.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{user:Ss.payloadify(t.sender),req_id:t.reqId,is_reply_to_channel:t.replyToChannel,request_state:t.sendingStatus,error_code:t.errorCode})):null},Object.defineProperty(n.prototype,"isResendable",{get:function(){return this.sendingStatus===t.SendingStatus.FAILED&&function(e){return e>0&&b.indexOf(e)>=0}(this.errorCode)},enumerable:!1,configurable:!0}),n.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},n}(Cs),As=function(){function e(e){var t,n;this.url=null,this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this.url=e.url,this.width=e.width,this.height=e.height,this.realWidth=null!==(t=e.real_width)&&void 0!==t?t:e.width,this.realHeight=null!==(n=e.real_height)&&void 0!==n?n:e.height}return e.payloadify=function(e){return e?B({url:"",width:e.maxWidth,height:e.maxHeight,real_width:0,real_height:0}):null},Object.defineProperty(e.prototype,"plainUrl",{get:function(){return this.url.split("?auth=")[0]},enumerable:!1,configurable:!0}),e}(),ks={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:t.MessageTypeFilter.ALL,customTypesFilter:null,senderUserIdsFilter:null,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},Os=function(e){return I("number",e.prevResultSize)&&I("number",e.nextResultSize)&&I("boolean",e.isInclusive)&&I("boolean",e.reverse)&&I("string",e.messageTypeFilter)&&C(t.MessageTypeFilter,e.messageTypeFilter)&&N("string",e.customTypesFilter,!0)&&N("string",e.senderUserIdsFilter,!0)&&I("boolean",e.includeMetaArray)&&I("boolean",e.includeReactions)&&I("boolean",e.includeParentMessageInfo)},Rs=function(e){function n(n,r){var i,s,o,a,u=this;if((u=e.call(this,n,r)||this).message=null,u.translations={},u.message=null!==(i=r.message)&&void 0!==i?i:"",u.messageType=t.MessageType.ADMIN,u.translations=null!==(s=r.translations)&&void 0!==s?s:{},r.parent_message_info){var l=r.parent_message_info,h=c(c({},l),{message_id:u.parentMessageId,channel_url:u.channelUrl,channel_type:u.channelType,file:l.file,url:null===(o=l.file)||void 0===o?void 0:o.url,require_auth:null===(a=l.file)||void 0===a?void 0:a.require_auth});u.parentMessage=Ms(n,h)}return u}return u(n,e),n.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,parent_message_info:Ls(t.parentMessage)})):null},n.prototype.getThreadedMessagesByTimestamp=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=c(c({},ks),t),Ri(this.messageId>0&&I("number",e)&&Os(n)).throw(E.invalidParameters),[4,to.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},n}(Cs),Ds=function(){function e(e){var t,n;this.type=null,this.vendor=null,this.detail={},this.type=null!==(t=e.type)&&void 0!==t?t:"",this.vendor=null!==(n=e.vendor)&&void 0!==n?n:"",e.hasOwnProperty("detail")&&I("object",e.detail)&&!Array.isArray(e.detail)&&(this.detail=e.detail)}return e.payloadify=function(e){return e?B({type:e.type,vendor:e.vendor,detail:e.detail}):null},e}(),Us=function(e){function n(n,r){var i,s,o,a,u,l,h,f=this;if((f=e.call(this,n,r)||this).message="",f.messageParams=null,f.translations={},f.translationTargetLanguages=[],f.messageSurvivalSeconds=-1,f.plugins=[],f._poll=null,f.message=r.message,f.messageType=t.MessageType.USER,f.translations=null!==(o=r.translations)&&void 0!==o?o:{},f.translationTargetLanguages=null!==(a=r.target_langs)&&void 0!==a?a:[],0===Object.keys(f.translations).length&&f.translationTargetLanguages.length>0)try{for(var p=d(f.translationTargetLanguages),_=p.next();!_.done;_=p.next()){var v=_.value;f.translations[v]=""}}catch(n){i={error:n}}finally{try{_&&!_.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}if(f.messageSurvivalSeconds=null!==(u=r.message_survival_seconds)&&void 0!==u?u:-1,f.plugins=r.plugins?r.plugins.map((function(e){return new Ds(e)})):[],f._poll=r.poll?new es(f._iid,r.poll):null,r.parent_message_info){var m=r.parent_message_info,y=c(c({},m),{created_at:m.ts,message_id:f.parentMessageId,channel_url:f.channelUrl,channel_type:f.channelType,file:m.file,url:null===(l=m.file)||void 0===l?void 0:l.url,require_auth:null===(h=m.file)||void 0===h?void 0:h.require_auth});f.parentMessage=Ms(n,B(y))}return f}return u(n,e),n.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{message:t.message,translations:t.translations,message_survival_seconds:t.messageSurvivalSeconds,plugins:t.plugins.map((function(e){return Ds.payloadify(e)})),poll:es.payloadify(t._poll),parent_message_info:Ls(t.parentMessage)})):null},n.prototype.getThreadedMessagesByTimestamp=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=c(c({},ks),t),Ri(this.messageId>0&&I("number",e)&&Os(n)).throw(E.invalidParameters),[4,to.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt||(this._poll=e,0))},Object.defineProperty(n.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),n}(Ns),Ls=function(e){if(e)switch(e.messageType){case t.MessageType.USER:return Us.payloadify(e);case t.MessageType.FILE:return Ps.payloadify(e);case t.MessageType.ADMIN:return Rs.payloadify(e)}return null},Ms=function(e,t){switch(t.type){case"MESG":return new Us(e,t);case"FILE":return new Ps(e,t);case"ADMM":case"BRDM":return new Rs(e,t)}return null},Ps=function(e){function n(n,r){var i,s,o,a,u,l,h,d,f,p,_,v,m,y,g,E=this;(E=e.call(this,n,r)||this).messageParams=null,E.plainUrl="",E.requireAuth=!1,E.name=null,E.size=0,E.type=null,E.thumbnails=[],E.messageSurvivalSeconds=-1,E.messageType=t.MessageType.FILE;var b=null!==(i=r.file)&&void 0!==i?i:null;E.plainUrl=(null!==(o=null!==(s=null==b?void 0:b.url)&&void 0!==s?s:r.url)&&void 0!==o?o:"").split("?auth=")[0],E.name=null!==(u=null!==(a=null==b?void 0:b.name)&&void 0!==a?a:r.name)&&void 0!==u?u:"File",E.size=null!==(h=null!==(l=null==b?void 0:b.size)&&void 0!==l?l:r.size)&&void 0!==h?h:0,E.data=null!==(f=null!==(d=null==b?void 0:b.data)&&void 0!==d?d:r.custom)&&void 0!==f?f:"",E.type=b?null!==(p=b.type)&&void 0!==p?p:"":null!==(_=r.type)&&void 0!==_?_:"";var w=Wi.of(E._iid).sessionManager;if(E.requireAuth=null!==(v=r.require_auth)&&void 0!==v&&v,E.thumbnails=r.thumbnails?r.thumbnails.map((function(e){return new As(c(c({},e),{url:"".concat(e.url.split("?auth=")[0]).concat(E.requireAuth?"?auth=".concat(w.ekey):"")}))})):[],E.messageSurvivalSeconds=null!==(m=r.message_survival_seconds)&&void 0!==m?m:-1,r.parent_message_info){var T=r.parent_message_info,I=c(c({},T),{message_id:E.parentMessageId,channel_url:E.channelUrl,channel_type:E.channelType,file:T.file,url:null===(y=T.file)||void 0===y?void 0:y.url,require_auth:null===(g=T.file)||void 0===g?void 0:g.require_auth});E.parentMessage=Ms(n,I)}return E}return u(n,e),n.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),{url:t.plainUrl,require_auth:t.requireAuth,file:{name:t.name,size:t.size,type:t.type,data:t.data},thumbnails:t.thumbnails.map((function(e){return{url:e.url,width:e.width,height:e.height,real_width:e.realWidth,real_height:e.realHeight}})),message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:Ls(t.parentMessage)})):null},Object.defineProperty(n.prototype,"url",{get:function(){var e=Wi.of(this._iid).sessionManager;return this.requireAuth?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n.prototype.getThreadedMessagesByTimestamp=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=c(c({},ks),t),Ri(this.messageId>0&&I("number",e)&&Os(n)).throw(E.invalidParameters),[4,to.of(this._iid).getThreadedMessagesByTimestamp(this,e,n)];case 1:return[2,r.sent()]}}))}))},n}(Ns),xs=function(e){function n(n){var r,i,s,o=[];return n.mentionType===t.MentionType.USERS&&(n.mentionedUserIds?o=n.mentionedUserIds:n.mentionedUsers&&(o=n.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"FILE",ackRequired:!0,payload:B({channel_url:n.channelUrl,url:n.url,name:null!==(r=n.fileName)&&void 0!==r?r:"",type:null!==(i=n.mimeType)&&void 0!==i?i:"",size:null!==(s=n.fileSize)&&void 0!==s?s:0,custom:n.data,custom_type:n.customType,thumbnails:n.thumbnailSizes,require_auth:n.requireAuth,metaarray:n.metaArrays,mention_type:n.mentionType,mentioned_user_ids:o,push_option:n.pushNotificationDeliveryOption&&n.pushNotificationDeliveryOption!==t.PushNotificationDeliveryOption.DEFAULT?n.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:n.appleCriticalAlertOptions,silent:n.silent,reply_to_channel:n.isReplyToChannel,parent_message_id:n.parentMessageId>0?n.parentMessageId:null,req_id:n.reqId,pin_message:n.isPinnedMessage})})||this}return u(n,e),n}(Or),qs=function(e){function n(n){var r,i=this;i=e.call(this)||this;var s=[];return n.mentionType===t.MentionType.USERS&&(n.mentionedUserIds?s=n.mentionedUserIds:n.mentionedUsers&&(s=n.mentionedUsers.map((function(e){return e.userId})))),i.method=L.POST,i.path="".concat(ts(n.channelType),"/").concat(encodeURIComponent(n.channelUrl),"/messages"),i.params=B({message_type:t.MessageType.FILE,user_id:n.userId,url:n.fileUrl,mention_type:n.mentionType,mentioned_user_ids:s,file_name:n.fileName,file_size:n.fileSize,file_type:n.mimeType,data:n.data,custom_type:n.customType,thumbnails:n.thumbnailSizes.map((function(e){return As.payloadify(e)})),require_auth:n.requireAuth,sorted_metaarray:null===(r=n.metaArrays)||void 0===r?void 0:r.map((function(e){return gs.payloadify(e)})),push_option:n.pushNotificationDeliveryOption,parent_message_id:n.parentMessageId>0?n.parentMessageId:null,apple_critical_alert_options:ws.payloadify(n.appleCriticalAlertOptions),reply_to_channel:n.isReplyToChannel,req_id:n.reqId,pin_message:n.isPinnedMessage}),i}return u(n,e),n}(Q),Fs=function(e){function t(t,n,r){var i,s,o,a=this;(a=e.call(this,t,"FILE",r)||this).message=new Ps(t,r);var u=Wi.of(t).sdkState;return a.isMentioned=rs(a.message.mentionType,null!==(i=a.message.mentionedUserIds)&&void 0!==i?i:null===(s=a.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})),u.userId),a.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,a}return u(t,e),t}($),zs=function(e){function t(t,n){var r,i,s=this;(s=e.call(this,t,n)||this).message=new Ps(t,n);var o=Wi.of(t).sdkState;return s.isMentioned=rs(s.message.mentionType,null!==(r=s.message.mentionedUserIds)&&void 0!==r?r:s.message.mentionedUsers.map((function(e){return e.userId})),o.userId),s.forceUpdateLastMessage=null!==(i=n.force_update_last_message)&&void 0!==i&&i,s}return u(t,e),t}(K);!function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"}(Ts||(Ts={})),t.MessageSearchOrder=void 0;var Hs=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,o=t.cacheContext,a=this;this._queueMap=new Map,this._connectionState=null,this._onlineDetector=null,this._iid=e,this._sdkState=n,this._requestQueue=i,this._cacheContext=o,this._dispatcher=r,this._dispatcher.on((function(e){e instanceof Lr&&(a._connectionState=e.stateType)})),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===Ar.CONNECTED||this._connectionState===Ar.CONNECTING||this._connectionState===Ar.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return this._shouldSendThroughWebSocket?(n=new xs(c(c({},t.params),{channelUrl:e.url,channelType:e.channelType,url:t.params.fileUrl,requireAuth:t.requireAuth,reqId:t.requestId})),[4,this._requestQueue.send(n)]):[3,2];case 1:return[2,r.sent().as(Fs).message];case 2:return n=new qs(c(c({},t.params),{channelUrl:e.url,channelType:e.channelType,url:t.params.fileUrl,userId:this._sdkState.userId,requireAuth:t.requireAuth,reqId:t.requestId})),[4,this._requestQueue.send(n)];case 3:return[2,r.sent().as(zs).message]}}))}))},e.prototype._resolveMessageQueue=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c,l,f,p;return h(this,(function(h){switch(h.label){case 0:if(!(t=this._queueMap.get(e.url)))return[3,21];if(t.isResolving)return[3,20];t.isResolving=!0,n=[],r=!0,h.label=1;case 1:h.trys.push([1,15,16,17]),i=d(t.messageQueue),s=i.next(),h.label=2;case 2:if(s.done)return[3,14];switch((o=s.value).state){case Ts.PENDING:case Ts.UPLOADING:return[3,3];case Ts.UPLOADED:return[3,4];case Ts.FAILED:return[3,12]}return[3,13];case 3:return r=!1,n.push(o),[3,13];case 4:if(!r)return[3,10];h.label=5;case 5:return h.trys.push([5,8,,9]),o.state=Ts.SENDING,[4,this._sendFileMessage(e,o)];case 6:return a=h.sent(),o.deferred.resolve(a),[4,ni(100)];case 7:return h.sent(),[3,9];case 8:return u=h.sent(),o.deferred.reject(u),[3,9];case 9:return[3,11];case 10:n.push(o),h.label=11;case 11:return[3,13];case 12:return o.deferred.reject(o.error.code===_.REQUEST_CANCELED?E.fileUploadCanceled:o.error),[3,13];case 13:return s=i.next(),[3,2];case 14:return[3,17];case 15:return c=h.sent(),f={error:c},[3,17];case 16:try{s&&!s.done&&(p=i.return)&&p.call(i)}finally{if(f)throw f.error}return[7];case 17:return l=t.isResolveRequestPending,t.messageQueue=n,t.isResolving=!1,t.isResolveRequestPending=!1,l?[4,this._resolveMessageQueue(e)]:[3,19];case 18:h.sent(),h.label=19;case 19:return[3,21];case 20:t.isResolveRequestPending=!0,h.label=21;case 21:return[2]}}))}))},e.prototype._uploadNextPendingItem=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c,l,d,f,p,v;return h(this,(function(h){switch(h.label){case 0:return t=this._queueMap.get(e.url),(n=t.messageQueue.find((function(e){return e.state===Ts.PENDING})))?k(n.params.file)?t.uploadQueue.length<6?(n.state=Ts.UPLOADING,t.uploadQueue.push(n),[4,this._onlineDetector.isOnline()]):[3,10]:[3,11]:[3,13];case 1:if(!h.sent())return[3,8];h.label=2;case 2:return h.trys.push([2,4,5,7]),r=new ds({file:n.params.file,channelUrl:e.url,thumbnailSizes:n.params.thumbnailSizes,requestId:n.requestId}),[4,this._requestQueue.send(r)];case 3:return i=h.sent(),s=i.as(fs),o=s.url,a=s.fileSize,u=void 0===a?n.params.fileSize:a,c=s.thumbnailSizes,l=void 0===c?n.params.thumbnailSizes:c,d=s.requireAuth,f=void 0!==d&&d,n.params.fileUrl=o,n.params.fileSize=u,n.params.thumbnailSizes=l,n.params.requireAuth=f,n.requireAuth=f,n.state=Ts.UPLOADED,[3,7];case 4:return(p=h.sent()).code===_.REQUEST_FAILED?n.error=new E({code:_.NETWORK_ERROR,message:"Failed to upload a file."}):n.error=p,n.state=Ts.FAILED,[3,7];case 5:return(v=t.uploadQueue.findIndex((function(e){return e.requestId===n.requestId})))>=0&&(t.uploadQueue.splice(v,1),this._uploadNextPendingItem(e)),[4,this._resolveMessageQueue(e)];case 6:return h.sent(),[7];case 7:return[3,10];case 8:return n.state=Ts.FAILED,n.error=E.connectionRequired,(v=t.uploadQueue.findIndex((function(e){return e.requestId===n.requestId})))>=0&&(t.uploadQueue.splice(v,1),this._uploadNextPendingItem(e)),[4,this._resolveMessageQueue(e)];case 9:h.sent(),h.label=10;case 10:return[3,13];case 11:return n.params.thumbnailSizes=[],n.state=Ts.UPLOADED,[4,this._resolveMessageQueue(e)];case 12:h.sent(),h.label=13;case 13:return[2]}}))}))},e.prototype.request=function(e,t,n){var r,i,s;return l(this,void 0,void 0,(function(){var o;return h(this,(function(a){return o=new Dr,k(n.file)&&(n.fileName=null!==(r=n.fileName)&&void 0!==r?r:n.file.name,n.mimeType=null!==(i=n.mimeType)&&void 0!==i?i:n.file.type,n.fileSize=null!==(s=n.fileSize)&&void 0!==s?s:n.file.size),this._queueMap.has(e.url)||this._queueMap.set(e.url,{messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1}),this._queueMap.get(e.url).messageQueue.push({requestId:t,params:n,state:Ts.PENDING,deferred:o,requireAuth:n.requireAuth}),this._uploadNextPendingItem(e),[2,o.promise]}))}))},e.prototype.cancel=function(e,t){var n,r;void 0===t&&(t=null);var i=this._queueMap.get(e.url);if(i){var s=t?[i.messageQueue.find((function(e){return e.requestId===t}))]:p([],f(i.messageQueue),!1);try{for(var o=d(s),a=o.next();!a.done;a=o.next()){var u=a.value;if(u)switch(u.state){case Ts.PENDING:u.state=Ts.FAILED,u.error=E.requestCanceled,this._resolveMessageQueue(e);break;case Ts.UPLOADING:this._requestQueue.cancel(u.requestId)}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}},e}(),js={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:t.MessageTypeFilter.ALL,customTypesFilter:null,senderUserIdsFilter:null,replyType:t.ReplyType.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},Bs=function(e){return I("number",e.prevResultSize)&&I("number",e.nextResultSize)&&I("boolean",e.isInclusive)&&I("boolean",e.reverse)&&I("string",e.messageTypeFilter)&&C(t.MessageTypeFilter,e.messageTypeFilter)&&N("string",e.customTypesFilter,!0)&&N("string",e.senderUserIdsFilter,!0)&&C(t.ReplyType,e.replyType)&&I("boolean",e.includeMetaArray)&&I("boolean",e.includeReactions)&&I("boolean",e.includeParentMessageInfo)&&I("boolean",e.includeThreadInfo)&&I("boolean",e.showSubchannelMessagesOnly)},Gs={replyType:t.ReplyType.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},Qs=function(e){return C(t.ReplyType,e.replyType)&&I("boolean",e.includeReactions)&&I("boolean",e.includeMetaArray)&&I("boolean",e.includeParentMessageInfo)&&I("boolean",e.includeThreadInfo)},Ks=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.includeMetaArray,o=t.includeReactions,a=t.includeThreadInfo,u=t.includeParentMessageInfo,c=e.call(this)||this;return c.method=L.GET,c.path="".concat(ts(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(i)),c.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions:o,include_thread_info:a,include_parent_message_info:u,include_poll_details:!0},c}return u(t,e),t}(Q),Vs=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?Ms(t,c({},n)):null,r}return u(t,e),t}(K),Ws=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,s=void 0===i?null:i,o=t.token,a=void 0===o?null:o,u=t.prevResultSize,c=t.nextResultSize,l=t.isInclusive,h=t.reverse,d=t.messageTypeFilter,f=t.customTypesFilter,p=t.senderUserIdsFilter,_=t.replyType,v=t.includeMetaArray,m=t.includeReactions,y=t.parentMessageId,g=t.includeThreadInfo,E=t.includeParentMessageInfo,b=t.showSubchannelMessagesOnly,w=t.checkingContinuousMessages,T=e.call(this)||this;return T.method=L.GET,T.path="".concat(ts(n),"/").concat(encodeURIComponent(r),"/messages"),T.params=B({is_sdk:!0,prev_limit:u,next_limit:c,include:l,reverse:h,message_ts:s,message_id:a,message_type:null!=d?d:null,custom_types:f,sender_ids:p,include_reply_type:_,with_sorted_meta_array:v,include_reactions:m,parent_message_id:y,include_thread_info:g,include_parent_message_info:E,show_subchannel_message_only:b,include_poll_details:!0,checking_continuous_messages:w}),T}return u(t,e),t}(Q),Ys=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.messages.map((function(e){return Ms(t,e)})),r}return u(t,e),t}(K),Zs=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,s=t.token,o=t.replyType,a=t.includeMetaArray,u=t.includeReactions,c=t.includeThreadInfo,l=t.includeParentMessageInfo,h=e.call(this)||this;return h.method=L.GET,h.path="".concat(ts(n),"/").concat(encodeURIComponent(r),"/messages/changelogs"),h.params={change_ts:i,token:s,with_sorted_meta_array:a,include_reactions:u,include_thread_info:c,include_reply_type:o,include_parent_message_info:l,include_poll_details:!0},h}return u(t,e),t}(Q),Xs=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedMessages=n.updated.map((function(e){return Ms(t,e)})),r.deletedMessagesInfo=n.deleted.map((function(e){return{messageId:e.message_id,deletedAt:e.deleted_at}})),r.hasMore=n.has_more,r.nextToken=n.next,r}return u(t,e),t}(K),Js=function(e){function t(t){var n=t.channelUrl,r=t.scheduledMessageId,i=e.call(this)||this;return i.method=L.GET,i.path="".concat(Hr,"/").concat(encodeURIComponent(n),"/scheduled_messages/").concat(encodeURIComponent(r)),i.params={},i}return u(t,e),t}(Q),$s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=n?Ms(t,c({},n)):null,r}return u(t,e),t}(K),eo={},to=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=t.onlineDetector,o=t.cacheContext;this._iid=e,this._sdkState=n,this._requestQueue=i,this._dispatcher=r,this._cacheContext=o,this.fileMessageQueue=new Hs(e,{sdkState:n,dispatcher:r,requestQueue:i,onlineDetector:s,cacheContext:o}),eo[e]=this}return e.of=function(e){return eo[e]},e.prototype.buildMessageFromSerializedData=function(e){var n=Oi(e);switch(n.messageType){case t.MessageType.USER:return new Us(this._iid,Us.payloadify(n));case t.MessageType.FILE:return new Ps(this._iid,Ps.payloadify(n));case t.MessageType.ADMIN:return new Rs(this._iid,Rs.payloadify(n))}return null},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(e,t){return B({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:e.pollId})},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(e,t){return B({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:e.file,fileKey:e.fileKey,fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:t.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),fileType:e.fileType,requireAuth:t.requireAuth})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(e,t){return c(c({},this.buildUserMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(e,t){return c(c({},this.buildFileMessageCreateParamsFromSerializedData(e,t)),{scheduledAt:e.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(e){var t=Oi(e);return new Ss(this._iid,Ss.payloadify(t))},e.prototype.getMessage=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=new Ks(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(Vs).message]}}))}))},e.prototype.getScheduledMessage=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=new Js(e),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as($s).message]}}))}))},e.prototype.getMessagesByMessageId=function(e,t,n,r,i){return void 0===i&&(i=Zi.REQUEST_MESSAGE),l(this,void 0,void 0,(function(){var s,o,a;return h(this,(function(u){switch(u.label){case 0:return s=new Ws(c(c({channelType:t,channelUrl:e,token:String(n)},js),r)),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),a=o.as(Ys).messages,this._dispatcher.dispatch(new ss({messages:a,source:i})),[2,a]}}))}))},e.prototype.getMessagesByTimestamp=function(e,t,n,r,i){return void 0===i&&(i=Zi.REQUEST_MESSAGE),l(this,void 0,void 0,(function(){var s,o,a;return h(this,(function(u){switch(u.label){case 0:return s=new Ws(c(c({channelType:t,channelUrl:e,timestamp:n},js),r)),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),a=o.as(Ys).messages,this._dispatcher.dispatch(new ss({messages:a,source:i})),[2,a]}}))}))},e.prototype._getMessagesByTimestampForCollection=function(e,t,n,r,i,s){return void 0===i&&(i=Zi.REQUEST_MESSAGE),l(this,void 0,void 0,(function(){var o,a,u,l;return h(this,(function(h){switch(h.label){case 0:return o=new Ws(c(c(c({channelType:t,channelUrl:e,timestamp:n},js),r),{checkingContinuousMessages:s})),[4,this._requestQueue.send(o)];case 1:return a=h.sent(),u=a.payload,l=a.as(Ys).messages,this._dispatcher.dispatch(new ss({messages:l,source:i})),[2,{messages:l,isContinuousMessages:u}]}}))}))},e.prototype.getThreadedMessagesByTimestamp=function(e,n,r,i){return void 0===i&&(i=Zi.REQUEST_THREADED_MESSAGE),l(this,void 0,void 0,(function(){var s,o,a,u;return h(this,(function(l){switch(l.label){case 0:return s=new Ws(c(c(c({channelUrl:e.channelUrl,channelType:e.channelType,timestamp:n},ks),r),{replyType:t.ReplyType.ALL,parentMessageId:e.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(s)];case 1:return o=l.sent(),a=o.as(Ys).messages,(u=a.slice(1)).forEach((function(t){t.parentMessage=e})),this._dispatcher.dispatch(new ss({messages:u,source:i})),[2,{parentMessage:a[0],threadedMessages:u}]}}))}))},e.prototype.getMessageChangelogs=function(e,t,n,r,i){return void 0===i&&(i=Zi.REQUEST_MESSAGE_CHANGELOGS),l(this,void 0,void 0,(function(){var s,o,a,u,l,d,f,p;return h(this,(function(h){switch(h.label){case 0:return s=new Zs(B(c(c({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null},Gs),r))),[4,this._requestQueue.send(s)];case 1:return o=h.sent(),a=o.as(Xs),u=a.updatedMessages,l=a.deletedMessagesInfo,d=a.hasMore,f=a.nextToken,p=l.map((function(e){return e.messageId})),u.length>0&&this._dispatcher.dispatch(new ss({messages:u,source:i})),p.length>0&&this._dispatcher.dispatch(new os({messageIds:p,source:i})),[2,{updatedMessages:u,deletedMessageIds:p,hasMore:d,token:f}]}}))}))},e}(),no=function(){function e(){this._onPending=ee,this._onFailed=ee,this._onSucceeded=ee}return e.prototype._trigger=function(e,n){switch(n.sendingStatus){case t.SendingStatus.PENDING:0===n.errorCode&&this._onPending(n);break;case t.SendingStatus.FAILED:case t.SendingStatus.CANCELED:this._onFailed(e,n.scheduledInfo?null:n);break;case t.SendingStatus.SCHEDULED:case t.SendingStatus.SUCCEEDED:this._onSucceeded(n)}},e.prototype.onPending=function(e){return this._onPending=e,this},e.prototype.onFailed=function(e){return this._onFailed=e,this},e.prototype.onSucceeded=function(e){return this._onSucceeded=e,this},e}(),ro=function(e){function t(t,n){var r=e.call(this,t)||this;r.threadInfo=null,r.targetMessageId=0,r.channelUrl=null,r.channelType=null;var i=n.thread_info,s=n.parent_message_id,o=n.channel_url,a=n.channel_type;return i&&I("object",i)&&I("number",s)&&I("string",o)&&I("string",a)&&(r.threadInfo=new ps(t,i),r.targetMessageId=s,r.channelUrl=o,r.channelType=a),r}return u(t,e),t}(wi),io={channelUrl:null,channelType:null,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},so=function(e){function t(t){var n=t.channelCustomType,r=t.keyword,i=t.limit,s=t.reverse,o=t.exactMatch,a=t.channelUrl,u=t.order,c=t.messageTimestampFrom,l=t.messageTimestampTo,h=t.advancedQuery,d=t.targetFields,f=t.nextToken,p=e.call(this)||this;return p.method=L.GET,p.path="".concat(Gr,"/messages"),p.params={custom_type:n,query:r,limit:i,reverse:s,exact_match:o,channel_url:a,message_ts_from:c,message_ts_to:l,sort_field:u,advanced_query:h,target_fields:d,after:f},p}return u(t,e),t}(Q),oo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.messages=n.results.map((function(e){return Ms(t,e)})),r.hasNext=n.has_next,r.nextToken=n.end_cursor,r.totalCount=n.total_count,r}return u(t,e),t}(K);!function(e){e.SCORE="score",e.TIMESTAMP="ts"}(t.MessageSearchOrder||(t.MessageSearchOrder={}));var ao,uo=function(e){function n(n,r){var i,s,o,a,u,c,l,h,d,f=this;return(f=e.call(this,n,r)||this).keyword="",f.reverse=!1,f.exactMatch=!1,f.channelUrl="",f.channelCustomType="",f.messageTimestampFrom=null,f.messageTimestampTo=null,f.order=t.MessageSearchOrder.SCORE,f.advancedQuery=!1,f.targetFields=null,f._nextToken="",f.totalCount=-1,f.keyword=r.keyword,f.reverse=null!==(i=r.reverse)&&void 0!==i&&i,f.exactMatch=null!==(s=r.exactMatch)&&void 0!==s&&s,f.channelUrl=null!==(o=r.channelUrl)&&void 0!==o?o:"",f.channelCustomType=null!==(a=r.channelCustomType)&&void 0!==a?a:"",f.messageTimestampFrom=null!==(u=r.messageTimestampFrom)&&void 0!==u?u:null,f.messageTimestampTo=null!==(c=r.messageTimestampTo)&&void 0!==c?c:null,f.order=null!==(l=r.order)&&void 0!==l?l:t.MessageSearchOrder.SCORE,f.advancedQuery=null!==(h=r.advancedQuery)&&void 0!==h&&h,f.targetFields=null!==(d=r.targetFields)&&void 0!==d?d:null,f}return u(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&I("string",this.keyword)&&this.keyword.length>0&&I("boolean",this.reverse)&&I("boolean",this.exactMatch)&&I("string",this.channelUrl)&&I("string",this.channelCustomType)&&(I("number",this.messageTimestampFrom)||null===this.messageTimestampFrom)&&(I("number",this.messageTimestampTo)||null===this.messageTimestampTo)&&C(t.MessageSearchOrder,this.order)&&I("boolean",this.advancedQuery)&&N("string",this.targetFields,!0)},n.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new so(c(c({},this),{nextToken:this._nextToken?this._nextToken:null})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=u.sent(),r=n.as(oo),i=r.messages,s=r.hasNext,o=r.nextToken,a=r.totalCount,this._nextToken=o,this._hasNext=s,this._isLoading=!1,this.totalCount=a,[2,i];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},n}(ls),co=function(e){function n(n,r,i,s){var o,a,u,c,l,h,d,f,p,_,v=this;return(v=e.call(this,n,r,i,s)||this).reverse=!1,v.messageTypeFilter=t.MessageTypeFilter.ALL,v.customTypesFilter=null,v.senderUserIdsFilter=null,v.replyType=t.ReplyType.NONE,v.includeMetaArray=!1,v.includeReactions=!1,v.includeParentMessageInfo=!1,v.includeThreadInfo=!1,v.showSubchannelMessagesOnly=!1,v._edge=Number.MAX_SAFE_INTEGER,v.reverse=null!==(o=s.reverse)&&void 0!==o&&o,v.messageTypeFilter=null!==(a=s.messageTypeFilter)&&void 0!==a?a:t.MessageTypeFilter.ALL,v.customTypesFilter=null!==(u=s.customTypesFilter)&&void 0!==u?u:null,v.senderUserIdsFilter=null!==(c=s.senderUserIdsFilter)&&void 0!==c?c:null,v.replyType=null!==(l=s.replyType)&&void 0!==l?l:t.ReplyType.NONE,v.includeMetaArray=null!==(h=s.includeMetaArray)&&void 0!==h&&h,v.includeReactions=null!==(d=s.includeReactions)&&void 0!==d&&d,v.includeParentMessageInfo=null!==(f=s.includeParentMessageInfo)&&void 0!==f&&f,v.includeThreadInfo=null!==(p=s.includeThreadInfo)&&void 0!==p&&p,v.showSubchannelMessagesOnly=null!==(_=s.showSubchannelMessagesOnly)&&void 0!==_&&_,v}return u(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&I("boolean",this.reverse)&&C(t.MessageTypeFilter,this.messageTypeFilter)&&C(t.ReplyType,this.replyType)&&N("string",this.customTypesFilter,!0)&&N("string",this.senderUserIdsFilter,!0)&&I("boolean",this.includeMetaArray)&&I("boolean",this.includeReactions)&&I("boolean",this.includeParentMessageInfo)&&I("boolean",this.includeThreadInfo)&&I("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,to.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,{prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly})]):[3,2]:[3,5];case 1:return e=t.sent(),this._edge=Math.min.apply(Math,p([Number.MAX_SAFE_INTEGER],f(e.map((function(e){return e.createdAt}))),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},n}(hs),lo={channelUrl:null,scheduledMessageId:0},ho=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="message",t}return u(n,e),n.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,s=n.sessionManager,o=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:o,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new to(t,{sdkState:r,dispatcher:i,requestQueue:o,onlineDetector:u,cacheContext:c})},n.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},n.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},n.prototype.getMessage=function(e){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){return n=c(c({},io),e),Ri(function(e){return I("string",e.channelUrl)&&I("string",e.channelType)&&C(t.ChannelType,e.channelType)&&I("number",e.messageId)&&I("boolean",e.includeMetaArray)&&I("boolean",e.includeParentMessageInfo)&&I("boolean",e.includeThreadInfo)}(n)).throw(E.invalidParameters),[2,this._manager.getMessage(n)]}))}))},n.prototype.getScheduledMessage=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){return t=c(c({},lo),e),Ri(function(e){return I("string",e.channelUrl)&&I("number",e.scheduledMessageId)}(t)).throw(E.invalidParameters),[2,this._manager.getScheduledMessage(t)]}))}))},n}(Yi),fo=function(e){function t(t){var n=t.title,r=t.optionTexts,i=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,a=t.closeAt,u=e.call(this)||this;return u.method=L.POST,u.path=Wr,u.params={title:n,options:r,data:i,allow_user_suggestion:s,allow_multiple_votes:o,close_at:a},u}return u(t,e),t}(Q),po=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new es(t,n),r}return u(t,e),t}(K),_o=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,s=e.call(this)||this;return s.method=L.GET,s.path="".concat(Wr,"/").concat(encodeURIComponent(i)),s.params={channel_url:n,channel_type:r},s}return u(t,e),t}(Q),vo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new es(t,n),r}return u(t,e),t}(K),mo=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,s=t.pollOptionId,o=e.call(this)||this;return o.method=L.GET,o.path="".concat(Wr,"/").concat(encodeURIComponent(i),"/options/").concat(encodeURIComponent(s)),o.params={channel_url:n,channel_type:r},o}return u(t,e),t}(Q),yo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pollOption=new $i(t,n),r}return u(t,e),t}(K),go=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.timestamp,s=t.token,o=e.call(this)||this;return o.method=L.GET,o.path="".concat(ts(n),"/").concat(encodeURIComponent(r),"/polls/changelogs"),o.params=B({change_ts:i,token:s}),o}return u(t,e),t}(Q),Eo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.updatedPolls=n.updated.map((function(e){return function(e,t){return t?new es(e,t):null}(t,e)})),r.deletedPollIds=n.deleted.map((function(e){return e})),r.hasMore=n.has_more,r.nextToken=n.next,r}return u(t,e),t}(K),bo={title:null,optionTexts:null,data:null,allowUserSuggestion:null,allowMultipleVotes:null,closeAt:-1},wo=function(e){return I("string",e.title)&&function(e){return N("string",e)&&e.every((function(e){return""!==e.trim()}))}(e.optionTexts)&&Ji(e.data)&&I("boolean",e.allowUserSuggestion,!0)&&I("boolean",e.allowMultipleVotes,!0)&&I("number",e.closeAt,!0)},To={channelUrl:null,channelType:null,pollId:null,pollOptionId:null},Io=function(e){return I("string",e.channelUrl)&&C(t.ChannelType,e.channelType)&&I("number",e.pollId)&&I("number",e.pollOptionId)},Co={channelUrl:null,channelType:null,pollId:null},So=function(e){return I("string",e.channelUrl)&&""!==e.channelUrl&&C(t.ChannelType,e.channelType)&&I("number",e.pollId)},No={},Ao=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.sessionManager,s=t.requestQueue,o=t.logger;this._iid=e,this._sdkState=n,this._sessionManager=i,this._requestQueue=s,this._dispatcher=r,this._logger=o,No[e]=this}return e.of=function(e){return No[e]},e.prototype.buildPollFromSerializedData=function(e){var t=Oi(e);return new es(this._iid,es.payloadify(t))},e.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return Ri(So(e)).throw(E.invalidParameters),t=new _o(c({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(vo).poll]}}))}))},e.prototype.create=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(wo(e)).throw(E.invalidParameters),t=e.data,n=new fo(c(c({},e),{data:t})),[4,this._requestQueue.send(n)];case 1:return[2,r.sent().as(po).poll]}}))}))},e.prototype.getOption=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return Ri(Io(e)).throw(E.invalidParameters),t=new mo(c({},e)),[4,this._requestQueue.send(t)];case 1:return[2,n.sent().as(yo).pollOption]}}))}))},e.prototype.getPollChangeLogs=function(e,t,n,r){return void 0===r&&(r=Zi.SYNC_POLL_CHANGELOGS),l(this,void 0,void 0,(function(){var i,s,o,a,u,c,l;return h(this,(function(h){switch(h.label){case 0:return i=new go(B({channelType:t,channelUrl:e,timestamp:"number"==typeof n?n:null,token:"string"==typeof n?n:null})),[4,this._requestQueue.send(i)];case 1:return s=h.sent(),o=s.as(Eo),a=o.updatedPolls,u=o.deletedPollIds,c=o.hasMore,l=o.nextToken,a.length>0&&this._dispatcher.dispatch(new as({polls:a,source:r})),[2,{updatedPolls:a,deletedPollIds:u,hasMore:c,token:l}]}}))}))},e}(),ko=function(e,t){this.pollId=0,this.messageId=0,this.pollId=t.poll.id,this.messageId=t.poll.message_id,this._iid=e,this._payload=t},Oo=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},Ro=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.token,s=t.limit,o=e.call(this)||this;return o.method=L.GET,o.path=Wr,o.params={channel_url:n,channel_type:r,token:i,limit:s},o}return u(t,e),t}(Q),Do=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).polls=(null!==(r=n.polls)&&void 0!==r?r:[]).map((function(e){return new es(t,e)})),i.token=n.next,i}return u(t,e),t}(K),Uo=function(e){function t(t,n){return e.call(this,t,n.channelUrl,n.channelType,n)||this}return u(t,e),t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new Ro(c(c({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(Do),i=r.polls,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(hs),Lo=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,s=t.pollOptionId,o=t.token,a=t.limit,u=e.call(this)||this;return u.method=L.GET,u.path="".concat(Wr,"/").concat(encodeURIComponent(i),"/options/").concat(encodeURIComponent(s),"/voters"),u.params={channel_url:n,channel_type:r,token:o,limit:a},u}return u(t,e),t}(Q),Mo=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).voters=(null!==(r=n.voters)&&void 0!==r?r:[]).map((function(e){return new Ui(t,e)})),i.token=n.next,i}return u(t,e),t}(K),Po=function(e){function t(t,n){var r=e.call(this,t,n.channelUrl,n.channelType,n)||this;return r.pollId=n.pollId,r.pollOptionId=n.pollOptionId,r}return u(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&I("number",this.pollId)&&I("number",this.pollOptionId)},t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new Lo(c(c({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(Mo),i=r.voters,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(hs),xo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="poll",t}return u(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,s=n.sessionManager,o=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:o,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new Ao(t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:o,logger:a,onlineDetector:u,cacheContext:c})},t.prototype.create=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){return t=c(c({},bo),e),Ri(wo(t)).throw(E.invalidParameters),[2,this._manager.create(t)]}))}))},t.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){return t=c(c({},Co),e),Ri(So(t)).throw(E.invalidParameters),[2,this._manager.get(t)]}))}))},t.prototype.getOption=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){return t=c(c({},To),e),Ri(Io(t)).throw(E.invalidParameters),[2,this._manager.getOption(t)]}))}))},t.prototype.buildPollFromSerializedData=function(e){return this._manager.buildPollFromSerializedData(e)},t}(Yi),qo="Message",Fo={data:null,customType:null,mentionType:t.MentionType.USERS,mentionedUserIds:null,mentionedUsers:null,mentionedMessageTemplate:null,metaArrays:null,parentMessageId:null,isReplyToChannel:!1,pushNotificationDeliveryOption:null,appleCriticalAlertOptions:null,isPinnedMessage:!1},zo=function(e){return I("string",e.data,!0)&&I("string",e.customType,!0)&&C(t.MentionType,e.mentionType)&&N("string",e.mentionedUserIds,!0)&&N(Ui,e.mentionedUsers,!0)&&I("string",e.mentionedMessageTemplate,!0)&&N(gs,e.metaArrays,!0)&&I("number",e.parentMessageId,!0)&&I("boolean",e.isReplyToChannel)&&C(t.PushNotificationDeliveryOption,e.pushNotificationDeliveryOption,!0)&&I(ws,e.appleCriticalAlertOptions,!0)&&I("boolean",e.isPinnedMessage,!0)},Ho=function(e){return e?{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}:null},jo=c(c({},Fo),{message:null,translationTargetLanguages:null,pollId:null});!function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"}(ao||(ao={})),t.RestrictionType=void 0;var Bo=function(e){return"undefined"!=typeof window&&"Blob"in window&&"undefined"!=typeof Blob&&e instanceof Blob},Go=function(e){return e===ao.BLOB||e===ao.FILE},Qo=function(e){return e?{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}:null},Ko=c(c({},Fo),{file:null,fileKey:null,fileUrl:null,fileName:null,fileType:null,fileSize:null,mimeType:null,thumbnailSizes:null,requireAuth:!1}),Vo=function(e){return zo(e)&&(k(e.file)||I("string",e.fileUrl))&&I("string",e.fileName,!0)&&I("string",e.mimeType,!0)&&I("number",e.fileSize,!0)&&(null===e.thumbnailSizes||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every((function(e){return I("object",e)&&e.maxWidth>0&&e.maxHeight>0})))};!function(e){e.MUTED="muted",e.BANNED="banned"}(t.RestrictionType||(t.RestrictionType={})),t.ReportCategory=void 0;var Wo=function(){function e(e){var n,r,i,s;this.restrictionType=null,this.description=null,this.endAt=-1,this.remainingDuration=-1,C(t.RestrictionType,e.restriction_type)&&(this.restrictionType=e.restriction_type),this.description=null!==(n=e.description)&&void 0!==n?n:null,this.endAt=null!==(i=null!==(r=e.end_at)&&void 0!==r?r:e.muted_end_at)&&void 0!==i?i:-1,this.remainingDuration=null!==(s=e.remaining_duration)&&void 0!==s?s:-1}return e.payloadify=function(e){return e?B({restriction_type:e.restrictionType,description:e.description,end_at:e.endAt,remaining_duration:e.remainingDuration}):null},e}(),Yo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.restrictionInfo=null,r.restrictionInfo=new Wo(n),r}return u(t,e),t.payloadify=function(t){return t?B(c(c({},e.payloadify.call(this,t)),Wo.payloadify(t.restrictionInfo))):null},t}(Ui),Zo={data:null,customType:null,mentionType:t.MentionType.USERS,mentionedUserIds:null,mentionedUsers:null,mentionedMessageTemplate:null,metaArrays:null,pushNotificationDeliveryOption:null,appleCriticalAlertOptions:null},Xo=function(e){return I("string",e.data,!0)&&I("string",e.customType,!0)&&C(t.MentionType,e.mentionType)&&N("string",e.mentionedUserIds,!0)&&N(Ui,e.mentionedUsers,!0)&&I("string",e.mentionedMessageTemplate,!0)&&N(gs,e.metaArrays,!0)&&C(t.PushNotificationDeliveryOption,e.pushNotificationDeliveryOption,!0)&&I(ws,e.appleCriticalAlertOptions,!0)},Jo=c(c({},Zo),{message:null,translationTargetLanguages:null,pollId:null}),$o=c({},Zo),ea=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.token,s=t.limit,o=e.call(this)||this;return o.method=L.GET,o.path="".concat(ts(r),"/").concat(encodeURIComponent(n),"/operators"),o.params={token:i,limit:s},o}return u(t,e),t}(Q),ta=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.operators=n.operators.map((function(e){return new Ui(t,e)})),r.token=n.next,r}return u(t,e),t}(K),na=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return u(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,t=Wi.of(this._iid).requestQueue,n=new ea(c(c({},this),{channelUrl:this.channelUrl,token:this._token})),[4,t.send(n)]):[3,2]):[3,5];case 1:return r=a.sent(),i=r.as(ta),s=i.operators,o=i.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,e];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(hs),ra=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.limit,o=t.token;return(n=e.call(this)||this).method=L.GET,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/mute"),n.params={limit:s,token:o},n}return u(t,e),t}(Q),ia=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.mutedUsers=[];var i=n.next,s=n.muted_list;return r.token=i,s&&s.length>0&&(r.mutedUsers=s.map((function(e){return new Yo(t,e)}))),r}return u(t,e),t}(K),sa=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return u(t,e),t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new ra(c(c({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(ia),i=r.mutedUsers,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(hs),oa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.limit,o=t.token;return(n=e.call(this)||this).method=L.GET,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/ban"),n.params=B({limit:s,token:o}),n}return u(t,e),t}(Q),aa=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.bannedUsers=[];var i=n.next,s=n.banned_list;return r.token=i,s&&s.length>0&&(r.bannedUsers=s.map((function(e){return new Yo(t,e.user)}))),r}return u(t,e),t}(K),ua=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return u(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new oa(c(c({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(aa),i=r.bannedUsers,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(hs);!function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"}(t.ReportCategory||(t.ReportCategory={}));var ca=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.operatorUserIds;return(n=e.call(this)||this).method=L.POST,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:s},n}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var la=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.operatorUserIds;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/operators"),n.params={operator_ids:s},n}return u(t,e),t}(Q);!function(e){u((function(t,n){return e.call(this,t,n)||this}),e)}(K);var ha=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=L.GET,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/mute/").concat(s),n}return u(t,e),t}(Q),da=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.isMuted=!1,r.startAt=null,r.endAt=null,r.remainingDuration=null,r.description=null;var i=n.is_muted,s=n.start_at,o=n.end_at,a=n.remaining_duration,u=n.description;return r.isMuted=i,r.startAt=s,r.endAt=o,r.remainingDuration=a,r.description=u,r}return u(t,e),t}(K),fa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.keys;return(n=e.call(this)||this).method=L.GET,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={keys:s,include_ts:!0},n}return u(t,e),t}(Q),pa=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.metadata,s=n.ts;return r.metadata=i,r.ts=null!=s?s:null,r}return u(t,e),t}(K),_a=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metadata;return(n=e.call(this)||this).method=L.POST,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:s,include_ts:!0},n}return u(t,e),t}(Q),va=function(e){function t(t,n){var r,i,s=this;return(s=e.call(this,t,n)||this).metaData=null!==(r=n.metadata)&&void 0!==r?r:{},s.ts=null!==(i=n.ts)&&void 0!==i?i:null,s}return u(t,e),t}(K),ma=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metadata,o=t.upsert;return(n=e.call(this)||this).method=L.PUT,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={metadata:s,include_ts:!0,upsert:null!=o&&o},n}return u(t,e),t}(Q),ya=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.metadata,s=n.ts;return r.metadata=i,r.ts=null!=s?s:null,r}return u(t,e),t}(K),ga=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.created=null,i.updated=null,i.deleted=null,r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return u(t,e),t}($),Ea=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.key;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metadata/").concat(s),n.params={include_ts:!0},n}return u(t,e),t}(Q),ba=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.ts;return r.ts=null!=i?i:null,r}return u(t,e),t}(K),wa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metadata"),n.params={include_ts:!0},n}return u(t,e),t}(Q),Ta=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.ts=null;var i=n.ts;return r.ts=null!=i?i:null,r}return u(t,e),t}(K),Ia=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.keys;return(n=e.call(this)||this).method=L.GET,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={keys:s},n}return u(t,e),t}(Q),Ca=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return u(t,e),t}(K),Sa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metaCounter;return(n=e.call(this)||this).method=L.POST,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:s},n}return u(t,e),t}(Q),Na=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return u(t,e),t}(K),Aa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.metaCounter,o=t.upsert,a=void 0!==o&&o,u=t.mode,c=void 0===u?"set":u;return(n=e.call(this)||this).method=L.PUT,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params={metacounter:s,upsert:a,mode:c},n}return u(t,e),t}(Q),ka=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.metaCounter=n,r}return u(t,e),t}(K),Oa=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.created=null,i.updated=null,i.deleted=null,r.data&&(i.created=r.data.created,i.updated=r.data.updated,i.deleted=r.data.deleted),i}return u(t,e),t}($),Ra=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.key;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metacounter/").concat(s),n.params=null,n}return u(t,e),t}(Q);!function(e){u((function(t,n){return e.call(this,t,n)||this}),e)}(K);var Da=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/metacounter"),n.params=null,n}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var Ua=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId,o=t.seconds,a=t.description;return(n=e.call(this)||this).method=L.POST,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/mute"),n.params={user_id:s,seconds:o,description:a},n}return u(t,e),t}(Q);!function(e){u((function(t,n){return e.call(this,t,n)||this}),e)}(K);var La=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new Yo(t,r.data),i}return u(t,e),t}($),Ma=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/mute/").concat(encodeURIComponent(s)),n}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var Pa=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new Yo(t,r.data),i}return u(t,e),t}($),xa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId,o=t.seconds,a=t.description;return(n=e.call(this)||this).method=L.POST,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/ban"),n.params=B({user_id:s,seconds:o,description:a}),n}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var qa=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.memberCount=null,i.joinedMemberCount=null,i.user=new Yo(t,r.data),r.data.member_count&&(i.memberCount=r.data.member_count),r.data.joined_member_count&&(i.joinedMemberCount=r.data.joined_member_count),i}return u(t,e),t}($),Fa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.userId;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/ban/").concat(encodeURIComponent(s)),n}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var za=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.user=new Yo(t,r.data),i}return u(t,e),t}($),Ha=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.freezing;return(n=e.call(this)||this).method=L.PUT,n.path="".concat(ts(i),"/").concat(encodeURIComponent(r),"/freeze"),n.params={freeze:s},n}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var ja=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.freeze=r.data.freeze,i}return u(t,e),t}($),Ba=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,o=t.userId,a=t.description;return(n=e.call(this)||this).method=L.POST,n.path="".concat(ns(i),"/").concat(encodeURIComponent(r)),n.params={report_category:s,reporting_user_id:o,report_description:a},n}return u(t,e),t}(Q),Ga=function(e){function n(n){var r=this,i=n.channelUrl,s=n.channelType,o=n.category,a=n.userId,u=n.offendingUserId,c=n.description;return(r=e.call(this)||this).method=L.POST,r.path="".concat(Qr,"/users/").concat(u),r.params={channel_url:i,channel_type:s===t.ChannelType.OPEN?"open_channels":"group_channels",report_category:o,reporting_user_id:a,report_description:c},r}return u(n,e),n}(Q),Qa=function(e){function t(t){var n=this,r=t.channelUrl,i=t.channelType,s=t.category,o=t.userId,a=t.offendingUserId,u=t.messageId,c=t.description;return(n=e.call(this)||this).method=L.POST,n.path="".concat(ns(i),"/").concat(encodeURIComponent(r),"/messages/").concat(u),n.params={report_category:s,reporting_user_id:o,report_description:c,offending_user_id:a},n}return u(t,e),t}(Q),Ka=function(e){function n(n){var r=[];return n.mentionType===t.MentionType.USERS&&(n.mentionedUserIds?r=n.mentionedUserIds:n.mentionedUsers&&(r=n.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MESG",ackRequired:!0,payload:B({channel_url:n.channelUrl,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrays,mention_type:n.mentionType,mentioned_user_ids:r,mentioned_message_template:n.mentionedMessageTemplate,target_langs:n.translationTargetLanguages,push_option:n.pushNotificationDeliveryOption&&n.pushNotificationDeliveryOption!==t.PushNotificationDeliveryOption.DEFAULT?n.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:n.appleCriticalAlertOptions,silent:n.silent,reply_to_channel:n.isReplyToChannel,parent_message_id:n.parentMessageId>0?n.parentMessageId:null,req_id:n.reqId,poll_id:n.pollId,pin_message:n.isPinnedMessage})})||this}return u(n,e),n}(Or),Va=function(e){function t(t,n,r){var i,s,o,a=this;(a=e.call(this,t,"MESG",r)||this).message=new Us(t,r);var u=Wi.of(t).sdkState;return a.isMentioned=rs(a.message.mentionType,null!==(i=a.message.mentionedUserIds)&&void 0!==i?i:null===(s=a.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})),u.userId),a.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,a}return u(t,e),t}($),Wa=function(e){function n(n){var r,i=null;return n.mentionType===t.MentionType.USERS&&(n.mentionedUserIds?i=n.mentionedUserIds:n.mentionedUsers&&(i=n.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"MEDI",ackRequired:!0,payload:B({channel_url:n.channelUrl,msg_id:n.messageId,message:n.message,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:i,mentioned_message_template:n.mentionedMessageTemplate,apple_critical_alert_options:null===(r=n.appleCriticalAlertOptions)||void 0===r?void 0:r.serialize(),poll_id:n.pollId})})||this}return u(n,e),n}(Or),Ya=function(e){function t(t,n,r){var i,s,o,a,u,c,l=this;(l=e.call(this,t,"MEDI",r)||this).message=new Us(t,r);var h=Wi.of(t).sdkState;return l.mentionCountChange=is({mentionType:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mention_type)&&void 0!==s?s:null,mentionedUserIds:null!==(a=null===(o=r.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==a?a:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))},h.userId),l}return u(t,e),t}($),Za=function(e){function n(n){var r=null;return n.mentionType===t.MentionType.USERS&&(n.mentionedUserIds?r=n.mentionedUserIds:n.mentionedUsers&&(r=n.mentionedUsers.map((function(e){return e.userId})))),e.call(this,{code:"FEDI",ackRequired:!0,payload:B({channel_url:n.channelUrl,msg_id:n.messageId,data:n.data,custom_type:n.customType,metaarray:n.metaArrayParams,mention_type:n.mentionType,mentioned_user_ids:r,apple_critical_alert_options:n.appleCriticalAlertOptions})})||this}return u(n,e),n}(Or),Xa=function(e){function t(t,n,r){var i,s,o,a,u,c,l=this;(l=e.call(this,t,"FEDI",r)||this).message=new Ps(t,r);var h=Wi.of(t).sdkState;return l.mentionCountChange=is({mentionType:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mention_type)&&void 0!==s?s:null,mentionedUserIds:null!==(a=null===(o=r.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==a?a:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))},h.userId),l}return u(t,e),t}($),Ja=function(e){function t(t){var n=e.call(this)||this;return n.method=L.DELETE,n.path="".concat(ts(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),n}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var $a=function(e){function t(t,n,r){var i=e.call(this,t,"DELM",r)||this;return i.channelUrl=r.channel_url,i.channelType=r.channel_type,i.messageId=Number(r.msg_id),i}return u(t,e),t}($),eu=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=L.POST,o.path="".concat(ts(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/reactions"),o.params={reaction:s},o}return u(t,e),t}(Q),tu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new ms(n),r}return u(t,e),t}(K),nu=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=L.DELETE,o.path="".concat(ts(n),"/").concat(encodeURIComponent(r),"/messages/").concat(i,"/reactions"),o.params={reaction:s},o}return u(t,e),t}(Q),ru=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.reactionEvent=new ms(c({},n)),r}return u(t,e),t}(K),iu=function(e){function t(t){var n=t.channelType,r=t.channelUrl,i=t.messageId,s=t.translationTargetLanguages,o=e.call(this)||this;return o.method=L.POST,o.path="".concat(ts(n),"/").concat(encodeURIComponent(r),"/messages/").concat(encodeURIComponent(i),"/translation"),o.params={target_langs:s},o}return u(t,e),t}(Q),su=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new Us(t,n),r}return u(t,e),t}(K),ou=function(e){function n(n){var r,i=this;i=e.call(this)||this;var s=[];n.mentionType===t.MentionType.USERS&&(n.mentionedUserIds?s=n.mentionedUserIds:n.mentionedUsers&&(s=n.mentionedUsers.map((function(e){return e.userId}))));var o=n.channelType,a=n.channelUrl;return i.method=L.POST,i.path="".concat(ts(o),"/").concat(encodeURIComponent(a),"/scheduled_messages"),i.params={req_id:n.reqId,scheduled_at:n.scheduledAt,message_type:Bi.USER,message:n.message,custom_type:n.customType,data:n.data,mention_type:n.mentionType,mentioned_user_ids:s,sorted_metaarray:null===(r=n.metaArrays)||void 0===r?void 0:r.map((function(e){return gs.payloadify(e)})),apple_critical_alert_options:ws.payloadify(n.appleCriticalAlertOptions),target_langs:n.translationTargetLanguages,push_option:n.pushNotificationDeliveryOption},i}return u(n,e),n}(Q),au=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new Us(t,n),r}return u(t,e),t}(K),uu=function(e){function n(n){var r,i=this;i=e.call(this)||this;var s=[];n.mentionType===t.MentionType.USERS&&(n.mentionedUserIds?s=n.mentionedUserIds:n.mentionedUsers&&(s=n.mentionedUsers.map((function(e){return e.userId}))));var o=n.channelType,a=n.channelUrl;return i.method=L.POST,i.path="".concat(ts(o),"/").concat(encodeURIComponent(a),"/scheduled_messages"),i.params={req_id:n.reqId,scheduled_at:n.scheduledAt,message_type:Bi.FILE,url:n.fileUrl,file_name:n.fileName,file_size:n.fileSize,file_type:n.mimeType,thumbnails:n.thumbnailSizes?n.thumbnailSizes.map((function(e){return As.payloadify(e)})):[],custom_type:n.customType,data:n.data,require_auth:n.requireAuth,mention_type:n.mentionType,mentioned_user_ids:s,sorted_metaarray:null===(r=n.metaArrays)||void 0===r?void 0:r.map((function(e){return gs.payloadify(e)})),apple_critical_alert_options:ws.payloadify(n.appleCriticalAlertOptions),push_option:n.pushNotificationDeliveryOption},i}return u(n,e),n}(Q),cu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.message=new Ps(t,n),r}return u(t,e),t}(K),lu=function(e){function t(t){var n=t.pollId,r=t.title,i=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,a=t.closeAt,u=e.call(this)||this;return u.method=L.PUT,u.path="".concat(Wr,"/").concat(encodeURIComponent(n)),u.params={title:r,data:i,allow_user_suggestion:s,allow_multiple_votes:o,close_at:a},u}return u(t,e),t}(Q),hu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new es(t,n),r}return u(t,e),t}(K),du=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=L.DELETE,r.path="".concat(Wr,"/").concat(encodeURIComponent(n)),r}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var fu=function(e){function t(t){var n=t.pollId,r=e.call(this)||this;return r.method=L.PUT,r.path="".concat(Wr,"/").concat(encodeURIComponent(n),"/close"),r}return u(t,e),t}(Q),pu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new es(t,n),r}return u(t,e),t}(K),_u=function(e){function t(t){var n=t.channelUrl,r=t.channelType,i=t.pollId,s=t.optionText,o=e.call(this)||this;return o.method=L.POST,o.path="".concat(Wr,"/").concat(encodeURIComponent(i),"/options"),o.params={channel_url:n,channel_type:r,text:s},o}return u(t,e),t}(Q),vu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new es(t,n),r}return u(t,e),t}(K),mu=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,i=t.optionText,s=e.call(this)||this;return s.method=L.PUT,s.path="".concat(Wr,"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),s.params={text:i},s}return u(t,e),t}(Q),yu=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.poll=new es(t,n),r}return u(t,e),t}(K),gu=function(e){function t(t){var n=t.pollId,r=t.pollOptionId,i=e.call(this)||this;return i.method=L.DELETE,i.path="".concat(Wr,"/").concat(encodeURIComponent(n),"/options/").concat(encodeURIComponent(r)),i}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var Eu,bu,wu,Tu=function(e){function n(n){var r=n.reqId,i=n.channelType,s=n.channelUrl,o=n.pollId,a=n.pollOptionIds;return e.call(this,{code:"VOTE",ackRequired:!0,payload:B({req_id:r,channel_type:i===t.ChannelType.OPEN?"open_channels":"group_channels",channel_url:s,poll_id:o,option_ids:a})})||this}return u(n,e),n}(Or),Iu=function(e){function t(t,n,r){var i=e.call(this,t,"VOTE",r)||this;return i.event=null,i.channelUrl=null,i.channelType=null,i.event=new Oo(r),i.channelUrl=r.channel_url,i.channelType=r.channel_type,i}return u(t,e),t}($),Cu=function(e){function n(n,r){var i,s,o,a,u=this;return(u=e.call(this,n)||this).url="",u.channelType=t.ChannelType.BASE,u.name="",u.coverUrl="",u.customType="",u.data="",u.isFrozen=!1,u.isEphemeral=!1,u.creator=null,u.createdAt=0,u._messageCollectionLastAccessedAt=0,u.url=r.channel_url,u.name=null!==(i=r.name)&&void 0!==i?i:"",u.coverUrl=null!==(s=r.cover_url)&&void 0!==s?s:"",u.customType=null!==(o=r.custom_type)&&void 0!==o?o:"",u.data=null!==(a=r.data)&&void 0!==a?a:"",u.isFrozen=!!I("boolean",r.freeze)&&r.freeze,u.isEphemeral=!!I("boolean",r.is_ephemeral)&&r.is_ephemeral,u.creator=r.created_by?new Ui(u._iid,r.created_by):null,u.createdAt=1e3*r.created_at,r.metadata&&Object.keys(r.metadata).length>0&&r.ts&&(u._cachedMetaData=new Map,Object.keys(r.metadata).forEach((function(e){u._cachedMetaData.set(e,{value:r.metadata[e],isRemoved:!1,updatedAt:r.ts})}))),u}return u(n,e),n.payloadify=function(t){return B(c(c({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:Ui.payloadify(t.creator),created_at:t.createdAt/1e3}))},n.prototype.isGroupChannel=function(){return this.channelType===t.ChannelType.GROUP},n.prototype.isOpenChannel=function(){return this.channelType===t.ChannelType.OPEN},Object.defineProperty(n.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData?(this._cachedMetaData.forEach((function(t,n){t.isRemoved||(e[n]=t.value)})),e):e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),n.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},n.prototype._update=function(e){var t=B(e);Object.assign(this,t)},n.prototype._upsertCachedMetaData=function(e,t){var n=this;Object.keys(e).forEach((function(r){n._cachedMetaData||(n._cachedMetaData=new Map);var i=n._cachedMetaData.get(r);(!i||i.updatedAt<=t)&&n._cachedMetaData.set(r,{value:e[r],isRemoved:!1,updatedAt:t})}))},n.prototype._removeFromCachedMetaData=function(e,t){var n=this;this._cachedMetaData&&e.forEach((function(e){var r=n._cachedMetaData.get(e);r&&r.updatedAt<t&&(r.isRemoved=!0,r.updatedAt=t)}))},n.prototype._generateRequestId=function(){return"rq-".concat(q())},n.prototype.isIdentical=function(e){return e&&this.url===e.url},n.prototype.isEqual=function(e){return T(this,e)},n.prototype.createOperatorListQuery=function(e){return void 0===e&&(e={}),new na(this._iid,this.url,this.channelType,e)},n.prototype.createMutedUserListQuery=function(e){return void 0===e&&(e={}),new sa(this._iid,this.url,this.channelType,e)},n.prototype.createBannedUserListQuery=function(e){return void 0===e&&(e={}),new ua(this._iid,this.url,this.channelType,e)},n.prototype.createPreviousMessageListQuery=function(e){return void 0===e&&(e={}),new co(this._iid,this.url,this.channelType,e)},n.prototype.addOperators=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new ca({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.removeOperators=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new la({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.getMyMutedInfo=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a,u,c,l;return h(this,(function(h){switch(h.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new ha({channelUrl:this.url,channelType:this.channelType,userId:t.userId}),[4,n.send(r)];case 1:return i=h.sent(),s=i.as(da),o=s.isMuted,a=s.startAt,u=s.endAt,c=s.remainingDuration,l=s.description,[2,{isMuted:o,startAt:a,endAt:u,remainingDuration:c,description:l}]}}))}))},n.prototype.getMetaData=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new fa({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return r=a.sent(),i=r.as(pa),s=i.metadata,o=i.ts,this._upsertCachedMetaData(s,o),[2,s]}}))}))},n.prototype.getAllMetaData=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new fa({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return n=o.sent(),r=n.as(pa),i=r.metadata,s=r.ts,this._upsertCachedMetaData(i,s),[2,i]}}))}))},n.prototype.createMetaData=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return t=Wi.of(this._iid).requestQueue,n=new _a({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,t.send(n)];case 1:return r=s.sent(),i=r.as(va).metaData,this._upsertCachedMetaData(i,0),[2,i]}}))}))},n.prototype.updateMetaData=function(e,t){return void 0===t&&(t=!1),l(this,void 0,void 0,(function(){var n,r,i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return n=Wi.of(this._iid).requestQueue,r=new ma({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:t}),[4,n.send(r)];case 1:return i=u.sent(),s=i.as(ya),o=s.metadata,a=s.ts,this._upsertCachedMetaData(o,a),[2,o]}}))}))},n.prototype.deleteMetaData=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new Ea({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r=s.sent(),i=r.as(ba).ts,this._removeFromCachedMetaData([e],i),[2]}}))}))},n.prototype.deleteAllMetaData=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new wa({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n=i.sent(),r=n.as(Ta).ts,this._removeFromCachedMetaData(p([],f(this._cachedMetaData.keys()),!1),r),[2]}}))}))},n.prototype.getMetaCounters=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new Ia({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Ca).metaCounter]}}))}))},n.prototype.getAllMetaCounters=function(){return l(this,void 0,void 0,(function(){var e,t;return h(this,(function(n){switch(n.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Ia({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(t)];case 1:return[2,n.sent().as(Ca).metaCounter]}}))}))},n.prototype.createMetaCounters=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=Wi.of(this._iid).requestQueue,n=new Sa({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Na).metaCounter]}}))}))},n.prototype.updateMetaCounters=function(e,t){return void 0===t&&(t=!1),l(this,void 0,void 0,(function(){var n,r;return h(this,(function(i){switch(i.label){case 0:return n=Wi.of(this._iid).requestQueue,r=new Aa({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:t}),[4,n.send(r)];case 1:return[2,i.sent().as(ka).metaCounter]}}))}))},n.prototype.increaseMetaCounters=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=Wi.of(this._iid).requestQueue,n=new Aa({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,t.send(n)];case 1:return[2,r.sent().as(ka).metaCounter]}}))}))},n.prototype.decreaseMetaCounters=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=Wi.of(this._iid).requestQueue,n=new Aa({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,t.send(n)];case 1:return[2,r.sent().as(ka).metaCounter]}}))}))},n.prototype.deleteMetaCounter=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new Ra({channelUrl:this.url,channelType:this.channelType,key:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.deleteAllMetaCounters=function(){return l(this,void 0,void 0,(function(){var e,t;return h(this,(function(n){switch(n.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Da({channelUrl:this.url,channelType:this.channelType}),[4,e.send(t)];case 1:return n.sent(),[2]}}))}))},n.prototype.muteUser=function(e,t,n){return l(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.muteUserWithUserId(e.userId,t,n)]}))}))},n.prototype.muteUserWithUserId=function(e,t,n){return l(this,void 0,void 0,(function(){var r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(I("string",e)&&I("number",t,!0)&&I("string",n,!0)).throw(E.invalidParameters),r=Wi.of(this._iid).requestQueue,i=new Ua({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.unmuteUser=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},n.prototype.unmuteUserWithUserId=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new Ma({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.banUser=function(e,t,n){return l(this,void 0,void 0,(function(){return h(this,(function(r){return[2,this.banUserWithUserId(e.userId,t,n)]}))}))},n.prototype.banUserWithUserId=function(e,t,n){return l(this,void 0,void 0,(function(){var r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(I("string",e)&&I("number",t,!0)&&I("string",n,!0)).throw(E.invalidParameters),r=Wi.of(this._iid).requestQueue,i=new xa({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:t,description:n}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.unbanUser=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this.unbanUserWithUserId(e.userId)]}))}))},n.prototype.unbanUserWithUserId=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid).requestQueue,n=new Fa({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,t.send(n)];case 1:return r.sent(),[2]}}))}))},n.prototype.freeze=function(){return l(this,void 0,void 0,(function(){var e,t;return h(this,(function(n){switch(n.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Ha({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!0,[2]}}))}))},n.prototype.unfreeze=function(){return l(this,void 0,void 0,(function(){var e,t;return h(this,(function(n){switch(n.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Ha({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(t)];case 1:return n.sent(),this.isFrozen=!1,[2]}}))}))},n.prototype.getMessagesByMessageId=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=c(c({},js),t),Ri(I("number",e)&&Bs(n)).throw(E.invalidParameters),[4,to.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMessagesByTimestamp=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=c(c({},js),t),Ri(I("number",e)&&Bs(n)).throw(E.invalidParameters),[4,to.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceTimestamp=function(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=c(c({},Gs),t),Ri(I("number",e)&&Qs(n)).throw(E.invalidParameters),[4,to.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceToken=function(e,t){return void 0===t&&(t={}),l(this,void 0,void 0,(function(){var n;return h(this,(function(r){switch(r.label){case 0:return n=c(c({},Gs),t),Ri(I("string",e)&&Qs(n)).throw(E.invalidParameters),[4,to.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,n)];case 1:return[2,r.sent()]}}))}))},n.prototype._createPendingSendableMessagePayload=function(e,n,r){var i=Wi.of(this._iid).sessionManager;return B({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(e){return gs.payloadify(e)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?ws.payloadify(e.appleCriticalAlertOptions):null,created_at:r,user:Ss.payloadify(i.currentUser),req_id:n,request_state:t.SendingStatus.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:e.mentionedUsers})},n.prototype._createPendingUserMessage=function(e,n,r){var i,s,o={};if(e.translationTargetLanguages)try{for(var a=d(e.translationTargetLanguages),u=a.next();!u.done;u=a.next())o[u.value]=""}catch(e){i={error:e}}finally{try{u&&!u.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}var l=B(c(c({},this._createPendingSendableMessagePayload(e,n,r)),{type:t.MessageType.USER,message:e.message,translations:o})),h=new Us(this._iid,l);return h.messageParams=e,h},n.prototype._createPendingScheduledUserMessage=function(e,t,n){var r=this._createPendingUserMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},n.prototype._createPendingFileMessage=function(e,n,r){var i=B(c(c({},this._createPendingSendableMessagePayload(e,n,r)),{type:t.MessageType.FILE,url:e.fileUrl,file:{name:e.fileName,size:e.fileSize,type:e.mimeType,data:e.data},thumbnails:e.thumbnailSizes?e.thumbnailSizes.map((function(e){return{url:"",width:e.maxWidth,height:e.maxHeight}})):[]})),s=new Ps(this._iid,i);return s.messageParams=e,s},n.prototype._createPendingScheduledFileMessage=function(e,t,n){var r=this._createPendingFileMessage(e,t,n);return r.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},r},n.prototype._markMessageAsFailed=function(e,n,r){void 0===r&&(r=!1),e.errorCode=n.code,n.code===_.REQUEST_CANCELED?e.sendingStatus=t.SendingStatus.CANCELED:r||(e.sendingStatus=t.SendingStatus.FAILED)},n.prototype.sendUserMessage=function(e){var t=c(c({},jo),e);return Ri(function(e){return zo(e)&&I("string",e.message)&&N("string",e.translationTargetLanguages,!0)&&I("number",e.pollId,!0)}(t)).throw(E.invalidParameters),this._sendUserMessage(t)},n.prototype._sendUserMessage=function(e,n){var r=this;void 0===n&&(n=null);var i=Wi.of(this._iid),s=i.dispatcher,o=i.requestQueue,a=n,u=Date.now(),d=new no;a||(a=this._generateRequestId(),ni(2).then((function(){var t=r._createPendingUserMessage(e,a,u);s.dispatch(new ss({messages:[t],source:Zi.EVENT_MESSAGE_SENT_PENDING})),si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(e){return[2,d._trigger(null,t)]}))}))}))})));var f=new Ka(c(c({},e),{channelUrl:this.url,channelType:this.channelType,reqId:a}));return o.send(f).then((function(e){var t=e.as(Va).message;s.dispatch(new ss({messages:[t],source:Zi.EVENT_MESSAGE_SENT_SUCCESS})),si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(e){return[2,d._trigger(null,t)]}))}))}))})).catch((function(n){if(g(n))throw n;ni(2).then((function(){var i=r._createPendingUserMessage(e,a,u),o=Wi.of(r._iid).cacheContext.localCacheEnabled&&A(n.code);r._markMessageAsFailed(i,n,o),s.dispatch(new ss({messages:[i],source:i.sendingStatus===t.SendingStatus.PENDING?Zi.REQUEST_RESEND_MESSAGE:Zi.EVENT_MESSAGE_SENT_FAILED})),si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(e){return[2,d._trigger(n,i)]}))}))}))}))})),d},n.prototype._autoResendUserMessage=function(e){return Ri(e instanceof Us).throw(E.invalidParameters),this._sendUserMessage(e.messageParams,e.reqId)},n.prototype.resendUserMessage=function(e){var t;return l(this,void 0,void 0,(function(){var n,r;return h(this,(function(i){return Ri(e instanceof Us&&!e.scheduledInfo).throw(E.invalidParameters),n=new Dr,r=null!==(t=e.messageParams)&&void 0!==t?t:function(e){var t;return B({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:null===(t=e.poll)||void 0===t?void 0:t.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations)})}(e),this._sendUserMessage(r,e.reqId).onFailed((function(e){return n.reject(e)})).onSucceeded((function(e){return n.resolve(e)})),[2,n.promise]}))}))},n.prototype.updateUserMessage=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(s){switch(s.label){case 0:return n=c(c({},Jo),t),Ri(I("number",e)&&function(e){return Xo(e)&&I("string",e.message,!0)&&N("string",e.translationTargetLanguages,!0)&&I("number",e.pollId,!0)}(n)).throw(E.invalidParameters),r=Wi.of(this._iid).requestQueue,i=new Wa(c({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return[2,s.sent().as(Ya).message]}}))}))},n.prototype.copyUserMessage=function(e,r){var i,s,o;return l(this,void 0,void 0,(function(){var a,u;return h(this,(function(l){return Ri(e instanceof n&&r instanceof Us&&r.sendingStatus===t.SendingStatus.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(E.invalidParameters),Ri(!r.poll).throw(E.notSupportedError),a=new Dr,u=null!==(i=r.messageParams)&&void 0!==i?i:c(c({},r),{mentionType:r.mentionType,mentionedUserIds:null!==(s=r.mentionedUserIds)&&void 0!==s?s:null===(o=r.mentionedUsers)||void 0===o?void 0:o.map((function(e){return e.userId})),translationTargetLanguages:Object.keys(r.translations),pushNotificationDeliveryOption:t.PushNotificationDeliveryOption.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}),e._sendUserMessage(u).onSucceeded((function(e){a.resolve(e)})).onFailed((function(e){return a.reject(e)})),[2,a.promise]}))}))},n.prototype.translateUserMessage=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return h(this,(function(i){switch(i.label){case 0:return Ri(e instanceof Us&&e.messageId>0&&N("string",t)).throw(E.invalidParameters),n=Wi.of(this._iid).requestQueue,r=new iu({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:t}),[4,n.send(r)];case 1:return[2,i.sent().as(su).message]}}))}))},n.prototype._createScheduledUserMessage=function(e,t){var n=this,r=Wi.of(this._iid).requestQueue,i=Date.now(),s=this._generateRequestId();ni(2).then((function(){var r=n._createPendingScheduledUserMessage(e,s,i);si((function(){return l(n,void 0,void 0,(function(){return h(this,(function(e){return[2,t._trigger(null,r)]}))}))}))}));var o=new ou(c({reqId:s,channelType:this.channelType,channelUrl:this.url},e));r.send(o).then((function(e){var r=e.as(au).message;si((function(){return l(n,void 0,void 0,(function(){return h(this,(function(e){return[2,t._trigger(null,r)]}))}))}))})).catch((function(r){if(g(r))throw r;ni(2).then((function(){var o=n._createPendingScheduledUserMessage(e,s,i);n._markMessageAsFailed(o,r),si((function(){return l(n,void 0,void 0,(function(){return h(this,(function(e){return[2,t._trigger(r,o)]}))}))}))}))}))},n.prototype.sendFileMessage=function(e){var t=c(c({},Ko),e);return Ri(Vo(t)).throw(E.invalidParameters),this._sendFileMessage(t)},n.prototype._sendFileMessage=function(e,n){var r=this;void 0===n&&(n=null);var i=Wi.of(this._iid).dispatcher,s=to.of(this._iid).fileMessageQueue,o=n,a=Date.now(),u=new no;return o||(o=this._generateRequestId(),ni(2).then((function(){var t=r._createPendingFileMessage(e,o,a);i.dispatch(new ss({messages:[t],source:Zi.EVENT_MESSAGE_SENT_PENDING})),si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(e){return[2,u._trigger(null,t)]}))}))}))}))),s.request(this,o,e).then((function(e){i.dispatch(new ss({messages:[e],source:Zi.EVENT_MESSAGE_SENT_SUCCESS})),si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(t){return[2,u._trigger(null,e)]}))}))}))})).catch((function(n){if(g(n))throw n;ni(2).then((function(){var s=r._createPendingFileMessage(e,o,a),c=Wi.of(r._iid).cacheContext.localCacheEnabled&&A(n.code);r._markMessageAsFailed(s,n,c),i.dispatch(new ss({messages:[s],source:s.sendingStatus===t.SendingStatus.PENDING?Zi.REQUEST_RESEND_MESSAGE:Zi.EVENT_MESSAGE_SENT_FAILED})),si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(e){return[2,u._trigger(n,s)]}))}))}))}))})),u},n.prototype._autoResendFileMessage=function(e){Ri(e instanceof Ps).throw(E.invalidParameters);var t=Wi.of(this._iid).logger;return t.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,e.reqId).onFailed((function(e){t.debug("autoResendFileMessage failed",e)})).onSucceeded((function(e){t.debug("autoResendFileMessage success",e)}))},n.prototype._createScheduledFileMessage=function(e,t,n,r){var i=this,s=Wi.of(this._iid).requestQueue,o=new uu(c(c({reqId:n,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));s.send(o).then((function(e){var n=e.as(cu).message;si((function(){return l(i,void 0,void 0,(function(){return h(this,(function(e){return[2,t._trigger(null,n)]}))}))}))})).catch((function(s){if(g(s))throw s;ni(2).then((function(){var o=i._createPendingScheduledFileMessage(e,n,r);i._markMessageAsFailed(o,s),si((function(){return l(i,void 0,void 0,(function(){return h(this,(function(e){return[2,t._trigger(s,o)]}))}))}))}))}))},n.prototype.sendFileMessages=function(e){var t,n;Ri(e.every((function(e){return Vo(c(c({},Ko),e))}))).throw(E.invalidParameters);var r=new no;try{for(var i=d(e),s=i.next();!s.done;s=i.next()){var o=s.value;this.sendFileMessage(o).onPending((function(e){return r._trigger(null,e)})).onFailed((function(e,t){return r._trigger(e,t)})).onSucceeded((function(e){return r._trigger(null,e)}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},n.prototype.resendFileMessage=function(e,t){var n;return l(this,void 0,void 0,(function(){var r,i,s;return h(this,(function(o){return r=Boolean(e.url)||k(t)||k(null===(n=e.messageParams)||void 0===n?void 0:n.file),Ri(e instanceof Ps&&r&&!e.scheduledInfo).throw(E.invalidParameters),i=new Dr,s=function(e,t){var n;return void 0===t&&(t=null),e.messageParams?(!e.url&&k(t)&&(e.messageParams.file=t),e.messageParams):B({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:null!=t?t:null===(n=e.messageParams)||void 0===n?void 0:n.file,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:e.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}}))})}(e,t),this._sendFileMessage(s,e.reqId).onFailed((function(e){return i.reject(e)})).onSucceeded((function(e){return i.resolve(e)})),[2,i.promise]}))}))},n.prototype.updateFileMessage=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(s){switch(s.label){case 0:return n=c(c({},$o),t),Ri(I("number",e)&&function(e){return Xo(e)}(n)).throw(E.invalidParameters),r=Wi.of(this._iid).requestQueue,i=new Za(c({channelType:this.channelType,channelUrl:this.url,messageId:e},n)),[4,r.send(i)];case 1:return[2,s.sent().as(Xa).message]}}))}))},n.prototype.cancelUploadingFileMessage=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return Ri(I("string",e)).throw(E.invalidParameters),to.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},n.prototype.copyFileMessage=function(e,r){var i,s;return l(this,void 0,void 0,(function(){var o,a;return h(this,(function(u){return Ri(e instanceof n&&r instanceof Ps&&r.sendingStatus===t.SendingStatus.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(E.invalidParameters),o=new Dr,a=c(c({},r),{fileUrl:r.url,fileName:r.name,fileSize:r.size,mimeType:r.type,mentionType:r.mentionType,mentionedUserIds:null!==(i=r.mentionedUserIds)&&void 0!==i?i:null===(s=r.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})),pushNotificationDeliveryOption:t.PushNotificationDeliveryOption.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:r.thumbnails.map((function(e){return{maxWidth:e.width,maxHeight:e.height}})),requireAuth:r.requireAuth,isPinnedMessage:!1}),e._sendFileMessage(a).onSucceeded((function(e){return o.resolve(e)})).onFailed((function(e){return o.reject(e)})),[2,o.promise]}))}))},n.prototype.deleteMessage=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return Ri(e instanceof Cs).throw(E.invalidParameters),e.messageId>0?(t=Wi.of(this._iid).requestQueue,n=new Ja({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId}),[4,t.send(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n.prototype.addReaction=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return h(this,(function(i){switch(i.label){case 0:return Ri(e instanceof Cs&&e.messageId>0&&I("string",t)).throw(E.invalidParameters),n=Wi.of(this._iid).requestQueue,r=new eu({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,i.sent().as(tu).reactionEvent]}}))}))},n.prototype.deleteReaction=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return h(this,(function(i){switch(i.label){case 0:return Ri(e instanceof Cs&&e.messageId>0&&I("string",t)).throw(E.invalidParameters),n=Wi.of(this._iid).requestQueue,r=new nu({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:t}),[4,n.send(r)];case 1:return[2,i.sent().as(ru).reactionEvent]}}))}))},n.prototype._updateUserMessageMetaArray=function(e,t,n,r){return l(this,void 0,void 0,(function(){var i,s,o,a,u,c;return h(this,(function(l){switch(l.label){case 0:return i=Wi.of(this._iid),s=i.dispatcher,o=i.requestQueue,a=new Wa({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,o.send(a)];case 1:return u=l.sent(),c=u.as(Ya).message,s.dispatch(new ss({messages:[c],source:Zi.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},n.prototype._updateFileMessageMetaArray=function(e,t,n,r){return l(this,void 0,void 0,(function(){var i,s,o,a,u,c;return h(this,(function(l){switch(l.label){case 0:return i=Wi.of(this._iid),s=i.dispatcher,o=i.requestQueue,a=new Za({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:t,mode:n,upsert:r}}),[4,o.send(a)];case 1:return u=l.sent(),c=u.as(Xa).message,s.dispatch(new ss({messages:[c],source:Zi.EVENT_MESSAGE_UPDATED})),[2,c]}}))}))},n.prototype.createMessageMetaArrayKeys=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){return Ri(e instanceof Cs&&e.messageId>0&&N("string",t)).throw(E.invalidParameters),n=t.map((function(e){return new gs({key:e})})),e instanceof Ps?[2,this._updateFileMessageMetaArray(e.messageId,n,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"add",!0)]}))}))},n.prototype.deleteMessageMetaArrayKeys=function(e,t){return l(this,void 0,void 0,(function(){var n;return h(this,(function(r){return Ri(e instanceof Cs&&e.messageId>0&&N("string",t)).throw(E.invalidParameters),n=t.map((function(e){return new gs({key:e})})),e instanceof Ps?[2,this._updateFileMessageMetaArray(e.messageId,n,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,n,"remove",!0)]}))}))},n.prototype.addMessageMetaArrayValues=function(e,t){return l(this,void 0,void 0,(function(){return h(this,(function(n){return Ri(e instanceof Cs&&e.messageId>0&&t.every((function(e){return e instanceof gs}))).throw(E.invalidParameters),e instanceof Ps?[2,this._updateFileMessageMetaArray(e.messageId,t,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"add",!0)]}))}))},n.prototype.removeMessageMetaArrayValues=function(e,t){return l(this,void 0,void 0,(function(){return h(this,(function(n){return Ri(e instanceof Cs&&e.messageId>0&&t.every((function(e){return e instanceof gs}))).throw(E.invalidParameters),e instanceof Ps?[2,this._updateFileMessageMetaArray(e.messageId,t,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,t,"remove",!0)]}))}))},n.prototype.report=function(e,n){return l(this,void 0,void 0,(function(){var r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return Ri(C(t.ReportCategory,e)&&I("string",n)).throw(E.invalidParameters),r=Wi.of(this._iid),i=r.sdkState,s=r.requestQueue,o=new Ba({channelUrl:this.url,channelType:this.channelType,userId:i.userId,category:e,description:n}),[4,s.send(o)];case 1:return a.sent(),[2]}}))}))},n.prototype.reportUser=function(e,n,r){return l(this,void 0,void 0,(function(){var i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return Ri(e instanceof Ui&&C(t.ReportCategory,n)&&I("string",r)).throw(E.invalidParameters),i=Wi.of(this._iid),s=i.sdkState,o=i.requestQueue,a=new Ga({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.userId,category:n,description:r}),[4,o.send(a)];case 1:return u.sent(),[2]}}))}))},n.prototype.reportMessage=function(e,n,r){return l(this,void 0,void 0,(function(){var i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return Ri(e instanceof Ns&&C(t.ReportCategory,n)&&I("string",r)).throw(E.invalidParameters),i=Wi.of(this._iid),s=i.sdkState,o=i.requestQueue,a=new Qa({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:n,description:r}),[4,o.send(a)];case 1:return u.sent(),[2]}}))}))},n.prototype.updatePoll=function(e,t){return l(this,void 0,void 0,(function(){var n,r;return h(this,(function(i){switch(i.label){case 0:return Ri(I("number",e)&&function(e){return I("string",e.title,!0)&&Ji(e.data)&&I("boolean",e.allowUserSuggestion,!0)&&I("boolean",e.allowMultipleVotes,!0)&&I("number",e.closeAt,!0)}(t)).throw(E.invalidParameters),n=Wi.of(this._iid).requestQueue,r=new lu(c({pollId:e},t)),[4,n.send(r)];case 1:return[2,i.sent().as(hu).poll]}}))}))},n.prototype.deletePoll=function(e){return l(this,void 0,void 0,(function(){var t,n,r;return h(this,(function(i){switch(i.label){case 0:return t=I("number",e),Ri(t).throw(E.invalidParameters),n=Wi.of(this._iid).requestQueue,r=new du({pollId:e}),[4,n.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.closePoll=function(e){return l(this,void 0,void 0,(function(){var t,n,r;return h(this,(function(i){switch(i.label){case 0:return t=I("number",e),Ri(t).throw(E.invalidParameters),n=Wi.of(this._iid).requestQueue,r=new fu({pollId:e}),[4,n.send(r)];case 1:return[2,i.sent().as(pu).poll]}}))}))},n.prototype.addPollOption=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(s){switch(s.label){case 0:return n=I("number",e)&&I("string",t)&&""!==t.trim(),Ri(n).throw(E.invalidParameters),r=Wi.of(this._iid).requestQueue,i=new _u({channelUrl:this.url,channelType:this.channelType,pollId:e,optionText:t}),[4,r.send(i)];case 1:return[2,s.sent().as(vu).poll]}}))}))},n.prototype.updatePollOption=function(e,t,n){return l(this,void 0,void 0,(function(){var r,i,s;return h(this,(function(o){switch(o.label){case 0:return r=I("number",e)&&I("number",t)&&I("string",n)&&""!==n.trim(),Ri(r).throw(E.invalidParameters),i=Wi.of(this._iid).requestQueue,s=new mu({pollId:e,pollOptionId:t,optionText:n}),[4,i.send(s)];case 1:return[2,o.sent().as(yu).poll]}}))}))},n.prototype.deletePollOption=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(s){switch(s.label){case 0:return n=I("number",e)&&I("number",t),Ri(n).throw(E.invalidParameters),r=Wi.of(this._iid).requestQueue,i=new gu({pollId:e,pollOptionId:t}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.votePoll=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:return n=I("number",e)&&N("number",t),Ri(n).throw(E.invalidParameters),r=Wi.of(this._iid),i=r.requestQueue,s=r.dispatcher,o=new Tu({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionIds:t}),[4,i.send(o)];case 1:return a=c.sent(),u=a.as(Iu).event,s.dispatch(new cs({event:u,source:Zi.EVENT_POLL_VOTED})),[2,u]}}))}))},n.prototype.getPollChangeLogsSinceTimestamp=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return Ri(I("number",e)).throw(E.invalidParameters),[4,Ao.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},n.prototype.getPollChangeLogsSinceToken=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return Ri(I("string",e,!0)),[4,Ao.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,t.sent()]}}))}))},n.prototype.createPollListQuery=function(e){return void 0===e&&(e=10),new Uo(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:e})},n.prototype.createPollVoterListQuery=function(e,t,n){return void 0===n&&(n=20),new Po(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionId:t,limit:n})},n}(wi);!function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(Eu||(Eu={})),function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(bu||(bu={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(wu||(wu={}));var Su,Nu=function(e){switch(e){case Eu.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case Eu.CHRONOLOGICAL:return["-createdAt","syncIndex"];case Eu.CHANNEL_NAME_ALPHABETICAL:return["name"]}},Au=function(){function e(){this.messageTypeFilter=t.MessageTypeFilter.ALL,this.customTypesFilter=null,this.senderUserIdsFilter=null,this.replyType=t.ReplyType.NONE}return e.prototype.clone=function(){var t=new e,n=JSON.parse(JSON.stringify(this));return Object.keys(n).forEach((function(e){t[e]=n[e]})),t},e.prototype.match=function(e){switch(this.messageTypeFilter){case t.MessageTypeFilter.USER:if(e.messageType!==t.MessageType.USER)return!1;break;case t.MessageTypeFilter.FILE:if(e.messageType!==t.MessageType.FILE)return!1;break;case t.MessageTypeFilter.ADMIN:if(e.messageType!==t.MessageType.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes(e.customType))return!1;if(this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0){if(!(e instanceof Ns))return!1;if(!this.senderUserIdsFilter.includes(e.sender.userId))return!1}switch(this.replyType){case t.ReplyType.NONE:if(e.parentMessageId>0)return!1;break;case t.ReplyType.ONLY_REPLY_TO_CHANNEL:if(e instanceof Ns&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},e}();!function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"}(Su||(Su={}));var ku,Ou,Ru=function(e){switch(e){case Su.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case Su.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},Du=function(){return"undefined"!=typeof document&&"undefined"!=typeof navigator&&"ReactNative"!==navigator.product},Uu=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))};!function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"}(ku||(ku={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(Ou||(Ou={}));var Lu,Mu={},Pu=function(){function e(e,t){void 0===t&&(t={});var n=this;return this._state=ku.PROCESSING,this._queue=[],this._activationQueue=[],Mu[e]&&!t.forceCreate||(this.nodeId=Uu(),this.key=e,Du()&&(t.startAsInvisible?this.registerNode():"visible"===document.visibilityState?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&n.claimHost()})),window.addEventListener("message",(function(e){var t,r,i=e.data,s=i.nodeId,o=i.requestId,a=i.key,u=i.op,c=i.data;if(s!==n.nodeId&&a===n.key)switch(u){case Ou.NEWNODE:n._sendSync();break;case Ou.CLAIM_HOST:n._sendSync(),n._hostId=s;break;case Ou.SYNC_HOST:if(!n.isInSync){n._activationTimeout&&clearTimeout(n._activationTimeout);var l=c,h=l.currentItemRequestId,f=l.queue,p=function(e){n._queue.findIndex((function(t){return t.requestId===e.requestId}))<0&&n._requestLock({nodeId:e.nodeId,requestId:e.requestId,key:n.key,op:Ou.REQUEST_LOCK,ts:e.ts})};try{for(var _=d(f),v=_.next();!v.done;v=_.next())p(v.value)}catch(e){t={error:e}}finally{try{v&&!v.done&&(r=_.return)&&r.call(_)}finally{if(t)throw t.error}}n._currentItem=n._queue.find((function(e){return e.requestId===h})),n._completeSync()}break;case Ou.REMOVENODE:n._queue=n._queue.filter((function(e){return e.nodeId!==i.nodeId})),n._currentItem&&n._currentItem.nodeId===i.nodeId&&(n._currentItem=void 0,n._acquire(n._queue[0]));break;case Ou.REQUEST_LOCK:n._requestLock(i);break;case Ou.ACQUIRE_LOCK:var m=n._queue.find((function(e){return e.requestId===o}));n._acquire(m);break;case Ou.RELEASE_LOCK:n._release(o)}})),window.addEventListener("beforeunload",(function(){n._send(Ou.REMOVENODE)}))),Mu[e]=this),Mu[e]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==ku.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(e,t){var n;void 0===t&&(t={});var r={nodeId:this.nodeId,requestId:null!==(n=null==t?void 0:t.requestId)&&void 0!==n?n:Uu(),key:this.key,op:e,data:t.data,ts:Date.now()};return Du()&&window.postMessage(r,"*"),r},e.prototype._acquire=function(e){e?(this._currentItem=e,this._currentItem.onAcquired&&this._currentItem.onAcquired(e.requestId)):this._currentItem=void 0},e.prototype._release=function(e){if(this._currentItem&&this._currentItem.requestId===e){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(Ou.RELEASE_LOCK,{requestId:t.requestId});var n=this._queue.findIndex((function(t){return t.requestId===e}));n>-1&&this._queue.splice(n,1),t.onReleased&&t.onReleased(e)}},e.prototype._requestLock=function(e){var t=this;return new Promise((function(n){var r={nodeId:e.nodeId,requestId:e.requestId,ts:e.ts,onAcquired:function(e){t.isHost&&t._send(Ou.ACQUIRE_LOCK,{requestId:e}),n()},onReleased:function(){t._acquire(t._queue[0])}},i=!1;for(var s in t._queue)if(t._queue[s].ts>r.ts){t._queue.splice(parseInt(s),0,r),i=!0;break}i||t._queue.push(r),t._currentItem||t._acquire(t._queue[0])}))},e.prototype._sendSync=function(){var e;this.isHost&&this._send(Ou.SYNC_HOST,{data:{currentItemRequestId:null===(e=this._currentItem)||void 0===e?void 0:e.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},e.prototype._waitUntilSyncCompleted=function(){return l(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){return this.isHost&&!this.isInSync?[2,new Promise((function(t){e._activationQueue.push(t)}))]:[2]}))}))},e.prototype._waitSync=function(){var e=this;this.isInSync||(this._activationTimeout=setTimeout((function(){e._completeSync()}),8))},e.prototype._completeSync=function(){this.isInSync||(this._state=ku.DONE,this._activationQueue.forEach((function(e){return e()})),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(Ou.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Ou.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),e=this._send(Ou.REQUEST_LOCK),[4,this._requestLock(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.unlock=function(){var e;(null===(e=this._currentItem)||void 0===e?void 0:e.requestId)&&this._release(this._currentItem.requestId)},e}();c(c({},jo),{scheduledAt:null}),c(c({},Fo),{scheduledAt:null,file:null,fileUrl:null,fileName:null,mimeType:null,fileSize:null,thumbnailSizes:null,requireAuth:!1});var xu="UnsentMessage",qu={},Fu=function(e){function t(t,n){var r=n.sdkState,i=n.cacheContext,s=e.call(this,t)||this;return s._sdkState=r,s._cacheContext=i,qu[t]=s,s._mutex=new Pu("unsendmessagecache.lock"),s}return u(t,e),t.of=function(e){return qu[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return e&&e.collection(xu)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){if(e.messageId>0)throw E.invalidParameters;var t,n=c({},e.serialize());return e instanceof Us?(e.messageParams&&(n.messageParams=Ho(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=(t=e.scheduledInfo.scheduledMessageParams,c(c({},Ho(t)),{scheduledAt:t.scheduledAt})))):e instanceof Ps&&(e.messageParams&&(n.messageParams=Qo(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n.scheduledInfo.scheduledMessageParams=function(e){return c(c({},Qo(e)),{scheduledAt:e.scheduledAt})}(e.scheduledInfo.scheduledMessageParams))),n},t.prototype._deserialize=function(e){return e?(e=c(c({},e),{messageId:parseInt(e.messageId)}),to.of(this._iid).buildMessageFromSerializedData(e)):null},t.prototype._deserializeWithMessageCreateParams=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return t=to.of(this._iid),n=this._deserialize(e),e.messageParams?n instanceof Us?(r=e.messageParams,n.messageParams=t.buildUserMessageCreateParamsFromSerializedData(r,n),[3,4]):[3,1]:[3,4];case 1:return n instanceof Ps?(r=e.messageParams).fileKey&&"string"==typeof r.fileKey&&Go(r.fileType)?(i=r,[4,this.collection.getBlob(r.fileKey)]):[3,3]:[3,4];case 2:i.file=a.sent(),a.label=3;case 3:n.messageParams=t.buildFileMessageCreateParamsFromSerializedData(r,n),a.label=4;case 4:return n.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?n instanceof Us?(s=e.scheduledInfo.scheduledMessageParams,n.scheduledInfo.scheduledMessageParams=t.buildScheduledUserMessageCreateParamsFromSerializedData(s,n),[3,8]):[3,5]:[3,8];case 5:return n instanceof Ps?(s=e.scheduledInfo.scheduledMessageParams).fileKey&&"string"==typeof s.fileKey&&Go(s.fileType)?(o=s,[4,this.collection.getBlob(s.fileKey)]):[3,7]:[3,8];case 6:o.file=a.sent(),a.label=7;case 7:n.scheduledInfo.scheduledMessageParams=t.buildScheduledFileMessageCreateParamsFromSerializedData(s,n),a.label=8;case 8:return[2,n]}}))}))},t.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserializeWithMessageCreateParams(t)];n.label=2;case 2:return[2,null]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=void 0===t?null:t,r=e.filter,i=void 0===r?new Au:r,s=e.order,o=void 0===s?Su.CHANNEL_LATEST:s,a=e.sendingStatus,u=void 0===a?null:a,c=e.backward,d=void 0!==c&&c,f=e.parentMessageId,p=void 0===f?null:f;return l(this,void 0,void 0,(function(){var e,t,r,s,a=this;return h(this,(function(c){switch(c.label){case 0:return this.localCacheEnabled?(e=Ru(o),t={"/where":function(e){return!!(o!==Su.NEWEST_CHILD_MESSAGE||p&&0!==e.parentMessageId&&e.parentMessageId===p)&&i.match(a._deserialize(e))}},n&&(t.channelUrl=n),u&&(t.sendingStatus=u),r={where:t,index:e,backward:d},[4,this.collection.query(r)]):[3,3];case 1:return[4,c.sent().fetch({})];case 2:return s=c.sent(),[2,Promise.all(s.map((function(e){return l(a,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this._deserializeWithMessageCreateParams(e)];case 1:return[2,t.sent()]}}))}))})))];case 3:return[2,[]]}}))}))},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new Au),l(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.fetch({filter:t,order:Su.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},t.prototype.upsert=function(e){return l(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return l(t,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return e instanceof Ps?[4,this._mutex.lock()]:[3,4];case 1:return n.sent(),[4,this.saveBlob(e)];case 2:return n.sent(),[4,this._mutex.unlock()];case 3:n.sent(),n.label=4;case 4:return t=this._serialize(e),[4,this.collection.upsertOne(t)];case 5:return n.sent(),[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.upsertChildMessages=function(e){return l(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return l(t,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:if(!this.localCacheEnabled)return[3,8];a.label=1;case 1:a.trys.push([1,6,7,8]),t=d(e),n=t.next(),a.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove(r)]);case 3:a.sent(),a.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=a.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.saveBlob=function(e){return l(this,void 0,void 0,(function(){var t,n,r;return h(this,(function(i){switch(i.label){case 0:return e instanceof Ps?e.messageParams&&(t=e.messageParams).file&&Bo(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2]:[3,4];case 1:r=i.sent(),t.fileKey=r,t.fileType=ao.BLOB,i.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(n=e.scheduledInfo.scheduledMessageParams).file&&Bo(n.file)?[4,this.collection.saveBlob(n.file,e.reqId)]:[3,4];case 3:r=i.sent(),n.fileKey=r,n.fileType=ao.BLOB,i.label=4;case 4:return[2]}}))}))},t}(wi),zu={},Hu=function(e){function t(t,n){var r=n.sdkState,i=n.cacheContext,s=n.unsentMessageCache,o=e.call(this,t)||this;return o._sdkState=r,o._cacheContext=i,o._unsentMessageCache=s,zu[t]=o,o}return u(t,e),t.of=function(e){return zu[e]},Object.defineProperty(t.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return e?e.collection(qo):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),t.prototype._serialize=function(e){return c(c({},e.serialize()),{messageId:"".concat(e.messageId)})},t.prototype._deserialize=function(e){return e=c(c({},e),{messageId:parseInt(e.messageId)}),to.of(this._iid).buildMessageFromSerializedData(e)},t.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(t=n.sent())return[2,this._deserialize(t)];n.label=2;case 2:return[2,null]}}))}))},t.prototype.fetch=function(e){var t=e.channelUrl,n=e.token,r=e.limit,i=void 0===r?100:r,s=e.filter,o=void 0===s?new Au:s,a=e.order,u=void 0===a?Su.CHANNEL_LATEST:a,c=e.backward,d=void 0!==c&&c,f=e.parentMessageId,p=void 0===f?null:f,_=e.isPollOnly,v=void 0!==_&&_;return l(this,void 0,void 0,(function(){var e,r,s,a=this;return h(this,(function(c){switch(c.label){case 0:return this.localCacheEnabled?(e=Ru(u),r={where:{channelUrl:t,"/where":function(e){if(n)switch(u){case Su.CHANNEL_LATEST:if(!d&&e.createdAt>n||d&&e.createdAt<n)return!1;break;case Su.NEWEST_CHILD_MESSAGE:if(!p||0===e.parentMessageId||e.parentMessageId!==p)return!1}return!(v&&!e._poll)&&o.match(a._deserialize(e))}},index:e,backward:d},[4,this.collection.query(r)]):[3,3];case 1:return[4,c.sent().fetch({limit:i})];case 2:return s=c.sent(),[2,Promise.all(s.map((function(e){return l(a,void 0,void 0,(function(){return h(this,(function(t){return[2,this._deserialize(e)]}))}))})))];case 3:return[2,[]]}}))}))},t.prototype.getAllChildMessages=function(e,t){return void 0===t&&(t=new Au),l(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:t,order:Su.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,n.sent()]}}))}))},t.prototype.upsert=function(e){return l(this,void 0,void 0,(function(){var t,n=this;return h(this,(function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,5];case 1:return r.sent(),t=e.map((function(e){return n._serialize(e)})),[4,this.collection.upsertMany(t)];case 2:return r.sent(),[4,this.upsertChildMessages(e)];case 3:return r.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.upsertChildMessages=function(e){return l(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(e){return l(t,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=[],(null===(n=e.threadInfo)||void 0===n?void 0:n.replyCount)>0?[4,this.getAllChildMessages(e)]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return t.length>0?(t.forEach((function(t){return t.applyParentMessage(e)})),[4,this.upsert(t)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.remove=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:if(!this.localCacheEnabled)return[3,8];a.label=1;case 1:a.trys.push([1,6,7,8]),t=d(e),n=t.next(),a.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.collection.remove("".concat(r))]);case 3:a.sent(),a.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return i=a.sent(),s={error:i},[3,8];case 7:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))}))},t.prototype.removeMessagesOfChannel=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:Ru(Su.CHANNEL_LATEST)})]:[3,6];case 1:return n.sent(),[4,(t=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return n.sent(),[4,t.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:n.sent(),n.label=6;case 6:return[2]}}))}))},t.prototype.removeUnderOffset=function(e,t){return l(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":t}},index:Ru(Su.CHANNEL_LATEST)})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.countBetween=function(e,t,n){return l(this,void 0,void 0,(function(){var r,i=this;return h(this,(function(s){switch(s.label){case 0:return this.localCacheEnabled?(r=Ru(Su.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(e){var r=i._deserialize(e);return n.includes(r.createdAt)&&t.match(r)}},index:r}).count()]):[3,2];case 1:return[2,s.sent()];case 2:return[2,0]}}))}))},t.prototype.saveBlobs=function(e){return l(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return l(t,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return e instanceof Ps&&e.messageParams&&(t=e.messageParams).file&&Bo(t.file)?[4,this.collection.saveBlob(t.file,e.reqId)]:[3,2];case 1:n=r.sent(),t.fileKey=n,r.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[2]}}))}))},t.prototype._getGroupChannelPreferenceSize=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return t=0,[4,(n=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 1:return r=a.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 2:return i=a.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 3:return s=a.sent(),[4,n.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 4:return o=a.sent(),r&&(t+=JSON.stringify(r).length),i&&(t+=JSON.stringify(i).length),s&&(t+=JSON.stringify(s).length),o&&(t+=JSON.stringify(o).length),[2,t]}}))}))},t}(wi),ju=function(e){function t(t){var n=t.message,r=e.call(this)||this;return r.message=n,r}return u(t,e),t}(j),Bu={},Gu=function(){function e(e,t){var n=t.localCacheEnabled,r=t.dispatcher,i=t.sdkState,s=t.logger,o=this;this._iid=e,Bu[e]=this,this._localCacheEnabled=n,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=r,this._logger=s,this._sdkState=i,this._localCacheEnabled&&r.on((function(e){if(e instanceof Lr)switch(e.stateType){case Ar.CONNECTED:o._isProcessingAutoResend||o.processAutoResendRegisteredPendingMessages().then((function(){return o._processNextAutoResend()}));break;case Ar.INTERNAL_DISCONNECTED:case Ar.EXTERNAL_DISCONNECTED:o._isProcessingAutoResend=!1}}))}return e.of=function(e){return Bu[e]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return l(this,void 0,void 0,(function(){var e,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=a.sent();try{for(n=d(e),r=n.next();!r.done;r=n.next())0===(i=r.value).errorCode&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",i.reqId),i.sendingStatus=t.SendingStatus.FAILED,i.errorCode=_.ACK_TIMEOUT,this._dispatcher.dispatch(new ss({messages:[i],source:Zi.LOCAL_MESSAGE_FAILED})))}catch(e){s={error:e}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}}return[2]}}))}))},e.prototype.processAutoResendRegisteredPendingMessages=function(){return l(this,void 0,void 0,(function(){var e,n,r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:e=c.sent();try{for(n=d(e),r=n.next();!r.done;r=n.next())(i=r.value).errorCode&&A(i.errorCode)&&(s=(new Date).getTime(),o=i.createdAt+2592e5,s<=o?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(i.reqId)<0&&this._autoResendQueue.push(i):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(o).toLocaleString()),i.sendingStatus=t.SendingStatus.FAILED,this._dispatcher.dispatch(new ss({messages:[i],source:Zi.LOCAL_MESSAGE_FAILED}))))}catch(e){a={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return[2]}}))}))},e.prototype.completeCurrentAndProcessNextAutoResend=function(e){if(this._localCacheEnabled&&(e.sendingStatus===t.SendingStatus.SUCCEEDED||e.sendingStatus===t.SendingStatus.FAILED&&!A(e.errorCode))){var n=this.indexOf(e);n>=0&&this._autoResendQueue.splice(n,1),0===n&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return l(this,void 0,void 0,(function(){var e,n;return h(this,(function(r){switch(r.label){case 0:return(e=Fu.of(this._iid))?[4,e.fetch({sendingStatus:t.SendingStatus.PENDING,backward:!0})]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=[],r.label=3;case 3:return[2,n]}}))}))},e.prototype.indexOf=function(e){return this._autoResendQueue.length>0?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId):-1},e.prototype._isNotInQueue=function(e){return-1===this._autoResendQueue.map((function(e){return e.reqId})).indexOf(e.reqId)},e.prototype._processNextAutoResend=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){if(this._localCacheEnabled&&"foreground"===this._sdkState.appState)try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),e=this._autoResendQueue[0],this._dispatcher.dispatch(new ju({message:e})),this._logger.debug("processing auto-resend for message request id: ",e.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(e){this._logger.warn("process auto-resend error: ",e),this._isProcessingAutoResend=!1}return[2]}))}))},e}();!function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"}(Lu||(Lu={}));var Qu,Ku,Vu=function(){function e(e){this.category=e.cat,this.data=e.data}return e.getDataAsUserBlockEvent=function(e,t){var n=t.data,r=n.blocker,i=n.blockee;return{blocker:new Ui(e,r),blockee:new Ui(e,i)}},e.getDataAsFriendDiscoveredEvent=function(e,t){var n=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(n)?n.map((function(t){return new Ui(e,t)})):[]}},e}(),Wu=function(e){function t(t,n){var r=n.userId,i=e.call(this)||this;return i._iid=t,i.userId=r,i}return u(t,e),t}(j);!function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS"}(Qu||(Qu={})),function(e){u((function(t){var n=t.channels,r=t.source,i=t.data,s=void 0===i?null:i,o=e.call(this)||this;return o.channels=n,o.source=r,o.data=s,o}),e)}(j),function(e){u((function(t){var n=t.channelUrls,r=t.source,i=e.call(this)||this;return i.channelUrls=n,i.source=r,i}),e)}(j);var Yu=function(e){function t(){return e.call(this)||this}return u(t,e),t}(j),Zu=function(e){function t(t,n,r){var i=e.call(this,t,"USEV",r)||this;return i.event=new Vu(r),i}return u(t,e),t}($),Xu={},Ju=function(){function e(e){var t=e.dbname,n=e.itemSizeLimit,r=void 0===n?1048576:n,i=e.cacheLimit,s=void 0===i?256:i,o=e.blockHashBase,a=void 0===o?2:o,u=e.blockHashMultiplier,c=void 0===u?10:u,l=e.blockHashConstant,h=void 0===l?11:l,d=e.transactionApplyDelay,f=void 0===d?200:d,p=e.disableLogger,_=void 0!==p&&p;return Xu[t]||(this.itemSizeLimit=r,this.cacheLimit=s,this.blockHashBase=a,this.blockHashMultiplier=c,this.blockHashConstant=h,this.transactionApplyDelay=f,this.disableLogger=_,Xu[t]=this),Xu[t]}return e.get=function(e){return Xu[e]},e}();!function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"}(Ku||(Ku={}));var $u,ec=function(e){function t(n){var r=n.code,i=void 0===r?Ku.UNKNOWN_ERROR:r,s=n.message,o=void 0===s?"Unknown error occurred.":s,a=e.call(this,o)||this;return a.code=i,Object.setPrototypeOf(a,t.prototype),a}return u(t,e),Object.defineProperty(t,"storeNotDefined",{get:function(){return new t({code:Ku.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailable",{get:function(){return new t({code:Ku.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotAvailableInPrivateBrowsing",{get:function(){return new t({code:Ku.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeIsFull",{get:function(){return new t({code:Ku.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeNotInitialized",{get:function(){return new t({code:Ku.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeKeyTypeIsInvalid",{get:function(){return new t({code:Ku.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenIntegrity",{get:function(){return new t({code:Ku.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeBrokenBlob",{get:function(){return new t({code:Ku.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeEncryptionInvalid",{get:function(){return new t({code:Ku.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeItemSizeExceeded",{get:function(){return new t({code:Ku.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeReadFailed",{get:function(){return new t({code:Ku.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"storeWriteFailed",{get:function(){return new t({code:Ku.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"databaseSchemaNotOnUpgrade",{get:function(){return new t({code:Ku.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionNotReady",{get:function(){return new t({code:Ku.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotMatch",{get:function(){return new t({code:Ku.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionQueryNotValid",{get:function(){return new t({code:Ku.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionInsertDuplicate",{get:function(){return new t({code:Ku.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotFound",{get:function(){return new t({code:Ku.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionKeyNotGiven",{get:function(){return new t({code:Ku.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionWriteFailed",{get:function(){return new t({code:Ku.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"collectionItemSizeExceeded",{get:function(){return new t({code:Ku.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTableIsRequired",{get:function(){return new t({code:Ku.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"indexTypesNotMatch",{get:function(){return new t({code:Ku.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"compareTypesNotMatch",{get:function(){return new t({code:Ku.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(t,"circularReferenceFound",{get:function(){return new t({code:Ku.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),t}(Error);!function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"}($u||($u={}));var tc,nc=function e(t,n){if(void 0===n&&(n=new WeakMap),"object"==typeof t&&null!==t){if(n.has(t))throw ec.circularReferenceFound;n.set(t,!0);var r=void 0;if(Array.isArray(t))r=t.map((function(t){return e(t,n)}));else if(t instanceof RegExp)r=t;else if(t instanceof Date)r=t;else for(var i in r={},t)r[i]=e(t[i],n);return n.delete(t),r}return t},rc=function(e,t){if(null==t)return 1;if(null==e)return-1;if(typeof e!=typeof t)throw ec.compareTypesNotMatch;var n=0;switch(typeof e){case"boolean":case"number":n=e-t;break;case"string":n=e.localeCompare(t)}return n},ic=function(e,t){for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+(n<<6)+(n<<16)-n;return(n>>>0)%t},sc=function(e){return new Promise((function(t){setTimeout((function(){return t()}),e)}))},oc=function e(t,n){if(!n)return!1;if("function"!=typeof t){for(var r in t)if(["/and","&&"].includes(r)){if(t[r].some((function(t){return!e(t,n)})))return!1}else if(["/or","||"].includes(r)){if(t[r].every((function(t){return!e(t,n)})))return!1}else if("/where"===r){if(!(0,t[r])(n))return!1}else{var i=r;if("object"==typeof t[i]){var s=t[i];for(var o in s)switch(o){case"/eq":case"=":if((a=n[i])!==(u=s[o]))return!1;break;case"/neq":case"!=":if((a=n[i])===(u=s[o]))return!1;break;case"/gt":case">":var a=n[i],u=s[o];if(!(rc(a,u)>0))return!1;break;case"/gte":case">=":if(a=n[i],u=s[o],!(rc(a,u)>=0))return!1;break;case"/lt":case"<":if(a=n[i],u=s[o],!(rc(a,u)<0))return!1;break;case"/lte":case"<=":if(a=n[i],u=s[o],!(rc(a,u)<=0))return!1;break;case"/in":if(a=n[i],!(u=s[o]).includes(a))return!1;break;case"/nin":if(a=n[i],(u=s[o]).includes(a))return!1;break;case"/contain":if(a=n[i],u=s[o],!a.includes(u))return!1;break;case"/regex":if(a=n[i],!(u=s[o]).test(a))return!1;break;case"/where":if(a=n[i],!(0,s[o])(a))return!1}}else if("function"==typeof t[i]){if(!t[i](n[i]))return!1}else if(t[i]!==n[i])return!1}return!0}return t(n)},ac=function(){},uc=function(){return Promise.resolve()},cc=function(e){return e},lc=function(e,t){t()};!function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"}(tc||(tc={}));var hc,dc,fc,pc=function(){function e(e){var t=e.initialPrevValue,n=void 0===t?null:t,r=e.initialNextValue,i=void 0===r?null:r,s=e.iterator,o=e.map,a=void 0===o?cc:o,u=e.backward,c=void 0===u?uc:u,l=e.forward,h=void 0===l?uc:l,d=e.complete,f=void 0===d?ac:d;this._prevValue=n,this._nextValue=i,this._error=null,this._map=a,this._backward=c,this._forward=h,this._iterator=s,this._complete=f}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return l(this,void 0,void 0,(function(){var e,t,n;return h(this,(function(r){switch(r.label){case 0:if(!this.hasPrevious)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=r.sent()||null,this._nextValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n;return h(this,(function(r){switch(r.label){case 0:if(!this.hasNext)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,4]),e=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=r.sent()||null,this._prevValue=e,[3,4];case 3:return n=r.sent(),this._error=n,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,r.sent()];case 6:this._complete(),r.label=7;case 7:return[2]}}))}))},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),_c=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,s=e.blockManager,o=e.indexer;this.condition=n,this.backward=i,this._blockManager=s,this._indexer=o}return e.prototype.findOptimizedStartPosition=function(){var e=this,t=["=","/eq",">",">=","/gt","/gte"],n=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var r=this._indexer.origin.length-1;if("function"!=typeof this.condition)for(var i in this._indexer.fields){var s=this._indexer.fields[i],o=1;if("-"===s[0]&&(s=s.slice(1),o=-1),this.condition[s])if("object"==typeof this.condition[s]){var a=o>0?n:t;for(var u in this.condition[s])if(a.includes(u))for(var c=r;c>=0;c--)if(o*rc(this._indexer.origin[c].columnValues[i],this.condition[s][u])<=0){r=c;break}}else for(c=r;c>=0;c--)if(o*rc(this._indexer.origin[c].columnValues[i],this.condition[s])<=0){r=c;break}}return Math.min(r+1,this._indexer.origin.length-1)}var l=0;if("function"!=typeof this.condition){var h=function(r){var i=d._indexer.fields[r],s=1;if("-"===i[0]&&(i=i.slice(1),s=-1),d.condition[i])if("object"==typeof d.condition[i])Object.keys(d.condition[i]).forEach((function(o){if((s>0?t:n).includes(o))for(var a=l;a<e._indexer.origin.length;a++)if(s*rc(e._indexer.origin[a].columnValues[r],e.condition[i][o])>=0){l=a;break}}));else for(var o=l;o<d._indexer.origin.length;o++)if(s*rc(d._indexer.origin[o].columnValues[r],d.condition[i])>=0){l=o;break}},d=this;for(i=0;i<this._indexer.fields.length;i++)h(i)}return Math.max(l-1,0)},e.prototype.each=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u=this;return h(this,(function(c){switch(c.label){case 0:if(t=this.findOptimizedStartPosition(),n=0,this.backward&&this._indexer.origin[t]&&(n=this._indexer.origin[t].keys.length-1),r=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[++n]){if(!u._indexer.origin[++t])return!1;n=0}return!0}return!1},i=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[--n]){if(!u._indexer.origin[--t])return!1;n=u._indexer.origin[t].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[t])return[3,4];o=this.backward?i:r,c.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])];case 2:if((a=c.sent())&&oc(this.condition,a))return s=a,[3,4];c.label=3;case 3:if(o())return[3,1];c.label=4;case 4:return[4,new Promise((function(o){var a=new pc({initialNextValue:nc(s),iterator:e,forward:function(){return l(u,void 0,void 0,(function(){var e,s;return h(this,(function(o){switch(o.label){case 0:e=this.backward?i:r,o.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=o.sent())&&oc(this.condition,s)?[2,nc(s)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return l(u,void 0,void 0,(function(){var e,s;return h(this,(function(o){switch(o.label){case 0:e=this.backward?r:i,o.label=1;case 1:return e()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[n])]:[3,3];case 2:return(s=o.sent())&&oc(this.condition,s)?[2,nc(s)]:[3,1];case 3:return[2,null]}}))}))},complete:o});e(a)}))];case 5:return[2,c.sent()]}}))}))},e}(),vc=function(){function e(e){var t=e.condition,n=void 0===t?{}:t,r=e.backward,i=void 0!==r&&r,s=e.mutex,o=e.blockManager,a=e.indexer;this._mutex=s,this._iterator=new _c({condition:n,backward:i,blockManager:o,indexer:a})}return e.prototype.fetch=function(e){return void 0===e&&(e={}),l(this,void 0,void 0,(function(){var t,n,r,i,s=this;return h(this,(function(o){switch(o.label){case 0:if(t=Math.max(e.offset||0,0),0===(n="number"==typeof e.limit?e.limit:Number.MAX_SAFE_INTEGER))return[2,[]];if(n<0)throw ec.collectionQueryNotValid;o.label=1;case 1:return o.trys.push([1,4,,5]),r=[],[4,this._mutex.lock()];case 2:return o.sent(),[4,this._iterator.each((function(e){return l(s,void 0,void 0,(function(){return h(this,(function(i){return e.error?e.stop():e.hasNext?0===t?(r.push(e.nextValue),0<n&&n<=r.length?e.stop():e.next()):(t--,e.next()):e.stop(),[2]}))}))}))];case 3:return o.sent(),this._mutex.unlock(),[2,r];case 4:throw i=o.sent(),this._mutex.unlock(),i;case 5:return[2]}}))}))},e.prototype.count=function(){return l(this,void 0,void 0,(function(){var e,t,n=this;return h(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=0,[4,this._mutex.lock()];case 1:return r.sent(),[4,this._iterator.each((function(t){return l(n,void 0,void 0,(function(){return h(this,(function(n){return t.error?t.stop():t.hasNext?(e++,t.next()):t.stop(),[2]}))}))}))];case 2:return r.sent(),this._mutex.unlock(),[2,e];case 3:throw t=r.sent(),this._mutex.unlock(),t;case 4:return[2]}}))}))},e}(),mc=function(e){return"".concat("nest","@").concat(e)},yc=function(e,t){return"".concat(mc(e),"/").concat(t)},gc=function(e,t){return"".concat(yc(e,t),".metadata")},Ec=function(e,t){return"".concat(yc(e,t),"/block.")},bc=function(e,t){return"".concat(yc(e,t),"/blob.")},wc=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this.dbname=t,this.collectionName=n,this.store=r}return e.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c;return h(this,(function(l){switch(l.label){case 0:return[4,this.store.get(e)];case 1:return(t=l.sent())?(n=t.data,r=t.type,"undefined"==typeof fetch?[3,4]:[4,fetch(n)]):[3,5];case 2:return[4,l.sent().blob()];case 3:return[2,l.sent()];case 4:for(i=[],s=atob(n.split(",")[1]),o=0;o<s.length;o+=512){for(a=s.slice(o,o+512),u=new Array(a.length),c=0;c<a.length;c++)u[c]=a.charCodeAt(c);i.push(new Uint8Array(u))}return[2,new Blob(i,{type:r})];case 5:return[2,null]}}))}))},e.prototype.save=function(e,t){return void 0===t&&(t="".concat(Date.now())),l(this,void 0,void 0,(function(){var n,r,i,s,o=this;return h(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(n){var r=function(e,t,n,r){return void 0===r&&(r=0),"".concat(bc(e,t)).concat(n,".").concat(r)}(o.dbname,o.collectionName,t),i=new FileReader;i.onload=function(){n({blobId:r,data:i.result,type:e.type})},i.readAsDataURL(e)}))];case 1:return n=a.sent(),r=n.blobId,i=n.data,s=n.type,[4,this.store.set({key:r,value:{data:i,type:s}})];case 2:return a.sent(),[2,r]}}))}))},e.prototype.remove=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.clear=function(){return l(this,void 0,void 0,(function(){var e,t,n=this;return h(this,(function(r){switch(r.label){case 0:return e=bc(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=r.sent(),[4,Promise.all(t.filter((function(t){return t.startsWith(e)})).map((function(e){return l(n,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this.store.remove(e)];case 1:return[2,t.sent()]}}))}))})))];case 2:return r.sent(),[2]}}))}))},e}();!function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"}(hc||(hc={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}(dc||(dc={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(fc||(fc={}));var Tc=[dc.PENDING,dc.VOLATILE],Ic={},Cc=function(){function e(e){var t=e.dbname,n=e.limit,r=void 0===n?256:n;return Ic[t]||(this.dbname=t,this._items=[],this._limit=r,Ic[t]=this),Ic[t]}return e.get=function(e){return Ic[e]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(e,t,n){return void 0===n&&(n=fc.DEFAULT),l(this,void 0,void 0,(function(){var r,i;return h(this,(function(s){switch(s.label){case 0:return(r=this.get(t))?[3,2]:[4,e.get(t)];case 1:return(i=s.sent())&&(r={key:t,value:i,state:n===fc.PERSISTENT?dc.PERSISTENT:dc.VOLATILE},this.put(r)),[3,3];case 2:n===fc.PERSISTENT&&(r.state=dc.PERSISTENT),s.label=3;case 3:return[2,r]}}))}))},e.prototype.get=function(e,t){void 0===t&&(t=fc.DEFAULT);var n=this._items.map((function(e){return e.key})).indexOf(e);if(n>-1){var r=this._items[n];return t===fc.PERSISTENT&&(r.state=dc.PERSISTENT),t!==fc.NO_CACHE&&this.put(r),r}return null},e.prototype.put=function(e){var t,n;if(this._limit>0){var r=this._items.map((function(e){return e.key})).indexOf(e.key);if(r>-1)Tc.includes(this._items[r].state)&&Tc.includes(e.state)?(this._items.splice(r,1),this._items.push(e)):(this._items[r].state=e.state,this._items[r].value=e.value);else{this._items.push(e);var i=this._items.filter((function(e){return e.state===dc.VOLATILE})).length-this._limit;if(i>0){var s=[];try{for(var o=d(this._items),a=o.next();!a.done;a=o.next()){var u=a.value;u.state===dc.VOLATILE&&i>0?i--:s.push(u)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}this._items=s}}}},e.prototype.remove=function(e){var t=this._items.map((function(e){return e.key})).indexOf(e);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(e){this._items=this._items.filter((function(t){return!e(t)}))},e.prototype.clear=function(e){void 0===e&&(e=!1),this._items=e?[]:this._items.filter((function(e){return e.state!==dc.VOLATILE}))},e}(),Sc=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=n,this.metadataKey=function(e,t){return"".concat(yc(e,t),"/trans.metadata")}(t,n),this.recordsetKey=function(e,t){return"".concat(yc(e,t),"/trans.recordset")}(t,n),this._store=r}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(e){return void 0===e&&(e=[]),l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=n.sent()||[]).push.apply(t,p([],f(e),!1)),[2,this._reduceRecordSet(t)]}}))}))},e.prototype._reduceRecordSet=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){for(var i=e[r],s=[],o=i.requests.length-1;o>=0;o--){var a=i.requests[o],u=a.data;n[u.key]||(s.unshift(a),n[u.key]=!0)}s.length>0&&(i.requests=s,t.unshift(i))}return t},e.prototype._applyRecord=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u,l,d;return h(this,(function(h){switch(h.label){case 0:n=Cc.get(this.dbname),r=t.generation,i=t.requests,s=null,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this._store.setMany(i.map((function(e){return c(c({},e.data),{generation:r})})))];case 2:for(o=h.sent(),a=0;a<i.length;a++)o[a]instanceof Error&&(s||(s=o[a]),u=i[a].data,n.put(c(c({},u),{state:dc.PERSISTENT})));return[3,4];case 3:return l=h.sent(),s=l,[3,4];case 4:return s?[3,6]:(d=e.filter((function(e){return e.generation!==r})),[4,this._store.set({key:this.recordsetKey,value:d})]);case 5:return h.sent(),this._onWrite.forEach((function(e){e(i.map((function(e){return e.data})))})),[3,7];case 6:this._onError.forEach((function(e){s&&e(s)})),h.label=7;case 7:return[2]}}))}))},e.prototype.init=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return e=this,[4,this._store.get(this.metadataKey)];case 1:return e._metadata=u.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),n=d(t),r=n.next(),u.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._applyRecord(t,i)]);case 5:u.sent(),u.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return s=u.sent(),o={error:s},[3,10];case 9:try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}return[7];case 10:return[2]}}))}))},e.prototype.on=function(e,t,n){switch(e){case hc.COMMIT:this._onCommit.set(t,n);break;case hc.WRITE:this._onWrite.set(t,n);break;case hc.ERROR:this._onError.set(t,n)}},e.prototype.requestWrite=function(e,t){this._requests.push({data:e,options:t}),Cc.get(this.dbname).put(c({state:dc.PENDING},e))},e.prototype.requestMultipleWrite=function(e,t){var n,r,i=Cc.get(this.dbname);try{for(var s=d(e),o=s.next();!o.done;o=s.next()){var a=o.value;this._requests.push({data:a,options:t}),i.put(c({state:dc.PENDING},a))}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){return Cc.get(this.dbname).clearByCondition((function(e){return e.state===dc.PENDING})),this._requests=[],[2]}))}))},e.prototype.commit=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a,u,l,d,f,p=this;return h(this,(function(h){switch(h.label){case 0:if(!((e=this._requests).length>0))return[3,4];for(t=[],n={},a=e.length-1;a>=0;a--)r=e[a],l=r.data,n[l.key]||(n[l.key]=!0,t.unshift(r));return i={generation:this.generation,requests:t},[4,this._getReducedRecordset([i])];case 1:return s=h.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return h.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(h.sent(),o=Cc.get(this.dbname),a=0;a<t.length;a++)u=t[a],l=u.data,d=u.options,o.put(c(c({},l),{state:d&&d.persistent?dc.PERSISTENT:dc.VOLATILE}));this._requests=[],this._onCommit.forEach((function(t){t(e.map((function(e){return e.data})))})),f=Ju.get(this.dbname),setTimeout((function(){try{p._applyRecord(s,i)}catch(e){p._onError.forEach((function(t){return t(e)}))}}),f.transactionApplyDelay),h.label=4;case 4:return[2]}}))}))},e}(),Nc=function(){function e(e){var t=e.blockId,n=e.keyName,r=e.items,i=void 0===r?[]:r,s=e.limit;this.blockId=t,this.keyName=n,this.limit=s,this._items=p([],f(i),!1)}return e.createFromCacheItem=function(t){return t?new e(t.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this._items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(e){var t=this,n=this._items.find((function(n){var r=n[t.keyName];return e===r}));return null!=n?n:null},e.prototype.has=function(e){var t=this;return this._items.map((function(e){return e[t.keyName]})).includes(e)},e.prototype.add=function(e){var t=this,n=this._items.map((function(e){return e[t.keyName]})).indexOf(e[this.keyName]);return n<0?this._items.length<this.limit&&(this._items.push(e),!0):(this._items[n]=e,!0)},e.prototype.remove=function(e){for(var t in this._items)if(this._items[t][this.keyName]===e)return this._items.splice(parseInt(t),1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),Ac=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.metadata,i=e.hashFunction,s=void 0===i?ic:i,o=e.transaction,a=e.store;this.dbname=t,this.collectionName=n,this.hashFunction=s,this.metadata=r,this._transaction=o,this._store=a}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(e,t){return void 0===t&&(t=this.metadata.blockLevel),n=this.dbname,r=this.collectionName,i=t,s="".concat(function(e,t,n){var r=n.base*Math.pow(n.multiplier,t)+n.constant;return(n.hashFunction||ic)(e,r)}(e,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(Ec(n,r)).concat(i,".").concat(s);var n,r,i,s},e.prototype._findBlock=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:t=Cc.get(this.dbname),n=this.metadata.blockLevel,o.label=1;case 1:return n>0?(r=this.createBlockId(e,n),[4,t.find(this._store,r)]):[3,4];case 2:if((i=o.sent())&&(null==(s=Nc.createFromCacheItem(i))?void 0:s.getItemByKey(e)))return[2,s];o.label=3;case 3:return n--,[3,1];case 4:return[2,null]}}))}))},e.prototype.getFromBlock=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return[2,(t=n.sent())?t.getItemByKey(e):null]}}))}))},e.prototype.putToBlock=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return n=Ju.get(this.dbname),r=this.createBlockId(e),i=Math.floor(this._store.itemSizeLimit/n.itemSizeLimit),[4,Cc.get(this.dbname).find(this._store,r)];case 1:return s=a.sent(),(null==(o=s?Nc.createFromCacheItem(s):new Nc({blockId:r,keyName:this.keyName,items:[],limit:i}))?void 0:o.add(t))?(this._transaction.requestWrite({key:o.blockId,value:o.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.removeFromBlock=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return[4,this._findBlock(e)];case 1:return(t=n.sent())&&t.remove(e)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}}))}))},e.prototype.clearAllBlocks=function(){return l(this,void 0,void 0,(function(){var e,t,n;return h(this,(function(r){switch(r.label){case 0:return e=Ec(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=r.sent(),n=t.filter((function(t){return t.startsWith(e)})),[4,this._store.removeMany(n)];case 2:return r.sent(),[4,this._transaction.clear()];case 3:return r.sent(),Cc.get(this.dbname).clearByCondition((function(t){return t.key.startsWith(e)})),[2]}}))}))},e}(),kc={},Oc=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.fields,s=e.transaction,o=e.store,a=this;this._origin=[],this._table=[];var u=function(e,t,n){return"".concat(yc(e,t),"/index.").concat(n)}(t,n,i.join(">"));return kc[u]||(this.dbname=t,this.collectionName=n,this.keyName=r,this.fields=i,this.indexerKey=u,this._transaction=s,this._store=o,this._transaction.on(hc.COMMIT,this.indexerKey,(function(){return a.commit()})),this._transaction.on(hc.ERROR,this.indexerKey,(function(){return a.abort()}))),kc[u]}return e.createKey=function(e){return e.join(">")},e.parseKey=function(e){return e.split(">")},e.clearIndexerMap=function(){for(var e in kc)delete kc[e]},e.prototype._addItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=f(this.indexOf(n),2),i=r[0];return r[1]?!this._table[i].keys.includes(t)&&(this._table[i].keys.push(t),!0):(this._table.splice(i,0,{columnValues:n,keys:[t]}),!0)},e.prototype._removeItem=function(e){var t=e[this.keyName],n=this.getColumnValues(e),r=f(this.indexOf(n),2),i=r[0];if(r[1]){var s=this._table[i].keys.indexOf(t);if(s>-1)return this._table[i].keys.splice(s,1),0===this._table[i].keys.length&&this._table.splice(i,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(e){var t,n,r,i,s=[];try{for(var o=d(this.fields),a=o.next();!a.done;a=o.next()){var u=a.value;if("-"===u[0]&&(u=u.slice(1)),i=typeof(r=e[u]),null!==r&&"undefined"!==i&&"boolean"!==i&&"number"!==i&&"string"!==i)throw ec.indexTypesNotMatch;s.push(e[u])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return s},e.prototype.diff=function(e,t){for(var n in this.fields){var r="-"===this.fields[n][0]?-1:1,i=rc(e[n],t[n]);if(0!==i)return r*i}return 0},e.prototype.indexOf=function(e){if(this._table.length>0){for(var t=0,n=this._table.length-1;t<=n;){var r=Math.floor((t+n)/2),i=this.diff(e,this._table[r].columnValues);if(i>0)t=r+1;else{if(!(i<0))return[r,!0];n=r-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a,u,c,l,f,p,_,v,m,y;return h(this,(function(h){switch(h.label){case 0:return[4,(e=Cc.get(this.dbname)).find(this._store,this.indexerKey,fc.PERSISTENT)];case 1:return(t=h.sent())?[3,11]:(n=Ec(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:r=h.sent(),h.label=3;case 3:h.trys.push([3,8,9,10]),i=d(r),s=i.next(),h.label=4;case 4:return s.done?[3,7]:(o=s.value).startsWith(n)?[4,e.find(this._store,o,fc.NO_CACHE)]:[3,6];case 5:if(a=h.sent(),u=Nc.createFromCacheItem(a))try{for(m=void 0,c=d(u.items),l=c.next();!l.done;l=c.next())f=l.value,this._addItem(f)}catch(e){m={error:e}}finally{try{l&&!l.done&&(y=c.return)&&y.call(c)}finally{if(m)throw m.error}}h.label=6;case 6:return s=i.next(),[3,4];case 7:return[3,10];case 8:return p=h.sent(),_={error:p},[3,10];case 9:try{s&&!s.done&&(v=i.return)&&v.call(i)}finally{if(_)throw _.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=nc(this._origin),h.label=12;case 12:return kc[this.indexerKey]=this,[2]}}))}))},e.prototype.drop=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return Cc.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return e.sent(),delete kc[this.indexerKey],[2]}}))}))},e.prototype.addItem=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return this._addItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.removeItem=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return this._removeItem(e)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},e.prototype.commit=function(){this._origin=this._table,this._table=nc(this._origin)},e.prototype.abort=function(){this._table=nc(this._origin)},e}(),Rc=function(){function e(e){var t=e.dbname,n=e.collectionName,r=e.keyName,i=e.keyHash,s=e.indexes,o=e.store,a=this;this._state=$u.INIT,this._indexers=[],this.dbname=t,this.name=n,this.keyName=r,this.indexes=p([[r]],f(s.filter((function(e){return Oc.createKey(e)!==a.keyName}))),!1),this._keyHash=i,this._store=o,this._mutex=new Pu(function(e,t){return"".concat(yc(e,t),".lock")}(t,n)),this._blobContainer=new wc({dbname:t,collectionName:n,store:o}),this._transaction=new Sc({dbname:t,collectionName:n,store:o})}return e.metadataOf=function(e,t,n){return l(this,void 0,void 0,(function(){var r;return h(this,(function(i){switch(i.label){case 0:return r=gc(e,t),[4,n.get(r)];case 1:return[2,i.sent()]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===$u.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c,l,_,v,m,y,g=this;return h(this,(function(h){switch(h.label){case 0:return[4,this._mutex.lock()];case 1:h.sent(),h.label=2;case 2:return h.trys.push([2,9,,10]),t=Ju.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return n=h.sent(),this._metadata=n||{keyName:this.keyName,blockLevel:1,blockHashBase:t.blockHashBase,blockHashMultiplier:t.blockHashMultiplier,blockHashConstant:t.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:h.sent(),this._blockManager=new Ac({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=p([],f(this.indexes),!1),i=[],s=r.map((function(e){return Oc.createKey(e)})),o=n?n.indexes.map((function(e){return Oc.createKey(e)})):[];try{for(a=d(o),u=a.next();!u.done;u=a.next())c=u.value,s.includes(c)||i.push(Oc.parseKey(c))}catch(e){m={error:e}}finally{try{u&&!u.done&&(y=a.return)&&y.call(a)}finally{if(m)throw m.error}}return(l=[]).push.apply(l,p([],f(r.map((function(e){var t=new Oc({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:e,transaction:g._transaction,store:g._store});return g._indexers.push(t),t.ensure()}))),!1)),l.push.apply(l,p([],f(i.map((function(e){return new Oc({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:e,transaction:g._transaction,store:g._store}).drop()}))),!1)),[4,Promise.all(l)];case 5:return h.sent(),[4,this._transaction.commit()];case 6:return h.sent(),s.sort().join(",")===o.sort().join(",")?[3,8]:(_=gc(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:_,value:this._metadata})]);case 7:h.sent(),h.label=8;case 8:return this._state=$u.READY,this._mutex.unlock(),[3,10];case 9:throw v=h.sent(),this._mutex.unlock(),v;case 10:return[2]}}))}))},e.prototype.close=function(){this._state=$u.CLOSED},e.prototype._hasPropertyOfKeyName=function(e){var t=e[this.keyName];return"string"==typeof t&&!!t},e.prototype._getIndexerBy=function(e){var t,n;void 0===e&&(e=null),e||(e=[this.keyName]);var r=Oc.createKey(e);try{for(var i=d(this._indexers),s=i.next();!s.done;s=i.next()){var o=s.value;if(r===Oc.createKey(o.fields))return o}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw ec.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return e=gc(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:e,value:this._metadata})];case 1:return t.sent(),[2]}}))}))},e.prototype._requestInsert=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return a.sent()?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return a.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return a.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:a.sent(),a.label=5;case 5:a.trys.push([5,10,11,12]),n=d(this._indexers),r=n.next(),a.label=6;case 6:return r.done?[3,9]:[4,r.value.addItem(e)];case 7:a.sent(),a.label=8;case 8:return r=n.next(),[3,6];case 9:return[3,12];case 10:return i=a.sent(),s={error:i},[3,12];case 11:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw ec.collectionInsertDuplicate;case 14:return[2]}}))}))},e.prototype._requestUpsert=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c,l,f,p,_;return h(this,(function(h){switch(h.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=h.sent())?[3,13]:[4,this._blockManager.putToBlock(t,e)];case 2:return h.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return h.sent(),[4,this._blockManager.putToBlock(t,e)];case 4:h.sent(),h.label=5;case 5:h.trys.push([5,10,11,12]),r=d(this._indexers),i=r.next(),h.label=6;case 6:return i.done?[3,9]:[4,(u=i.value).addItem(e)];case 7:h.sent(),h.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return s=h.sent(),l={error:s},[3,12];case 11:try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(l)throw l.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,e)];case 14:h.sent(),h.label=15;case 15:h.trys.push([15,21,22,23]),o=d(this._indexers),a=o.next(),h.label=16;case 16:return a.done?[3,20]:0===(u=a.value).diff(u.getColumnValues(n),u.getColumnValues(e))?[3,19]:[4,u.removeItem(n)];case 17:return h.sent(),[4,u.addItem(e)];case 18:h.sent(),h.label=19;case 19:return a=o.next(),[3,16];case 20:return[3,23];case 21:return c=h.sent(),p={error:c},[3,23];case 22:try{a&&!a.done&&(_=o.return)&&_.call(o)}finally{if(p)throw p.error}return[7];case 23:return[2]}}))}))},e.prototype._requestUpdate=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:return t=e[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(n=c.sent())?[4,this._blockManager.putToBlock(t,e)]:[3,11];case 2:c.sent(),c.label=3;case 3:c.trys.push([3,9,10,11]),r=d(this._indexers),i=r.next(),c.label=4;case 4:return i.done?[3,8]:0===(s=i.value).diff(s.getColumnValues(n),s.getColumnValues(e))?[3,7]:[4,s.removeItem(n)];case 5:return c.sent(),[4,s.addItem(e)];case 6:c.sent(),c.label=7;case 7:return i=r.next(),[3,4];case 8:return[3,11];case 9:return o=c.sent(),a={error:o},[3,11];case 10:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}return[7];case 11:return[2]}}))}))},e.prototype._requestRemove=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return[4,this._blockManager.getFromBlock(e)];case 1:return(t=a.sent())?[4,this._blockManager.removeFromBlock(e)]:[3,10];case 2:a.sent(),a.label=3;case 3:a.trys.push([3,8,9,10]),n=d(this._indexers),r=n.next(),a.label=4;case 4:return r.done?[3,7]:[4,r.value.removeItem(t)];case 5:a.sent(),a.label=6;case 6:return r=n.next(),[3,4];case 7:return[3,10];case 8:return i=a.sent(),s={error:i},[3,10];case 9:try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},e.prototype._requestClear=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),e=d(this._indexers),t=e.next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=e.next(),[3,3];case 6:return[3,9];case 7:return n=s.sent(),r={error:n},[3,9];case 8:try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}return[7];case 9:return[2]}}))}))},e.prototype.getByKey=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(e)];case 3:return t=r.sent(),this._mutex.unlock(),[2,nc(t)];case 4:throw n=r.sent(),this._mutex.unlock(),n;case 5:return[3,7];case 6:throw ec.collectionNotReady;case 7:return[2]}}))}))},e.prototype.query=function(e){if(void 0===e&&(e={}),this.isReady)return new vc({condition:e.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(e.index),backward:!!e.backward});throw ec.collectionNotReady},e.prototype.insertOne=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw ec.collectionKeyNotGiven;return[4,this._requestInsert(nc(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw ec.collectionNotReady;case 9:return[2]}}))}))},e.prototype.insertMany=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u=this;return h(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!u._hasPropertyOfKeyName(e)})))throw ec.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=d(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestInsert(nc(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=c.sent(),o={error:i},[3,10];case 9:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw ec.collectionNotReady;case 16:return[2]}}))}))},e.prototype.upsertOne=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw ec.collectionKeyNotGiven;return[4,this._requestUpsert(nc(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw ec.collectionNotReady;case 9:return[2]}}))}))},e.prototype.upsertMany=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u=this;return h(this,(function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),e.some((function(e){return!u._hasPropertyOfKeyName(e)})))throw ec.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=d(e),n=t.next(),c.label=4;case 4:return n.done?[3,7]:(r=n.value,[4,this._requestUpsert(nc(r))]);case 5:c.sent(),c.label=6;case 6:return n=t.next(),[3,4];case 7:return[3,10];case 8:return i=c.sent(),o={error:i},[3,10];case 9:try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,e];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw ec.collectionNotReady;case 16:return[2]}}))}))},e.prototype.update=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:if(n.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(e))throw ec.collectionKeyNotGiven;return[4,this._requestUpdate(nc(e))];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[2,e];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw ec.collectionNotReady;case 9:return[2]}}))}))},e.prototype.updateIf=function(e,t){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u,c,f,p,_,v,m,y,g=this;return h(this,(function(E){switch(E.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:E.sent(),E.label=2;case 2:return E.trys.push([2,13,,15]),n=e.where,r=void 0===n?{}:n,i=e.index,s=void 0===i?null:i,o=e.backward,a=void 0!==o&&o,u=[],[4,new _c({condition:r,blockManager:this._blockManager,backward:a,indexer:this._getIndexerBy(s)}).each((function(e){return l(g,void 0,void 0,(function(){var n,i;return h(this,(function(s){if(e.error)throw e.stop(),e.error;if(e.hasNext){if(n=e.nextValue,oc(r,n)&&t.set){if("function"!=typeof t.set)for(i in t.set)n[i]=t.set[i];else t.set(n);u.push(n)}e.next()}else e.stop();return[2]}))}))}))];case 3:E.sent(),E.label=4;case 4:E.trys.push([4,9,10,11]),c=d(u),f=c.next(),E.label=5;case 5:return f.done?[3,8]:(p=f.value,[4,this._requestUpdate(nc(p))]);case 6:E.sent(),E.label=7;case 7:return f=c.next(),[3,5];case 8:return[3,11];case 9:return _=E.sent(),m={error:_},[3,11];case 10:try{f&&!f.done&&(y=c.return)&&y.call(c)}finally{if(m)throw m.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return E.sent(),this._mutex.unlock(),[2,u];case 13:return v=E.sent(),[4,this._transaction.clear()];case 14:throw E.sent(),this._mutex.unlock(),v;case 15:return[3,17];case 16:throw this._transaction.clear(),ec.collectionNotReady;case 17:return[2]}}))}))},e.prototype.remove=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,7]),[4,this._requestRemove(e)];case 3:return n.sent(),[4,this._transaction.commit()];case 4:return n.sent(),this._mutex.unlock(),[3,7];case 5:return t=n.sent(),[4,this._transaction.clear()];case 6:throw n.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw ec.collectionNotReady;case 9:return[2]}}))}))},e.prototype.removeIf=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c,f,p,_,v,m,y=this;return h(this,(function(g){switch(g.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:g.sent(),g.label=2;case 2:return g.trys.push([2,13,,14]),t=e.where,n=void 0===t?{}:t,r=e.index,i=void 0===r?null:r,s=e.backward,o=void 0!==s&&s,a=[],[4,new _c({condition:n,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(i)}).each((function(e){return l(y,void 0,void 0,(function(){var t,r;return h(this,(function(i){if(e.error)throw e.stop(),e.error;return e.hasNext?(t=e.nextValue,oc(n,t)&&(r=t[this.keyName],a.push(r)),e.next()):e.stop(),[2]}))}))}))];case 3:g.sent(),g.label=4;case 4:g.trys.push([4,9,10,11]),u=d(a),c=u.next(),g.label=5;case 5:return c.done?[3,8]:(f=c.value,[4,this._requestRemove(f)]);case 6:g.sent(),g.label=7;case 7:return c=u.next(),[3,5];case 8:return[3,11];case 9:return p=g.sent(),v={error:p},[3,11];case 10:try{c&&!c.done&&(m=u.return)&&m.call(u)}finally{if(v)throw v.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return g.sent(),this._mutex.unlock(),[2,a];case 13:throw _=g.sent(),this._mutex.unlock(),_;case 14:return[3,16];case 15:throw this._transaction.clear(),ec.collectionNotReady;case 16:return[2]}}))}))},e.prototype.clear=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return e=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw ec.collectionNotReady;case 9:return[2]}}))}))},e.prototype.getBlob=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.saveBlob=function(e,t){return l(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.save(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.removeBlob=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.removeAllBlobs=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.clear()];case 1:return e.sent(),[2]}}))}))},e}(),Dc=function(){function e(e){var t,n,r;this.encryption=null!==(t=e.encryption)&&void 0!==t?t:R,this.itemSizeLimit=null!==(n=e.itemSizeLimit)&&void 0!==n?n:4194304,this.metadataBuffer=null!==(r=e.metadataBuffer)&&void 0!==r?r:256}return e.prototype._getRawKey=function(e,t){return void 0===t&&(t=""),"".concat(e).concat(t)},e.prototype._generateShardPostfixArray=function(e){return void 0===e&&(e=1),p([],f(Array(e).keys()),!1)},e.prototype._shardify=function(e){var t=this,n=e.key,r=e.value,i=JSON.stringify(this.encryption.encrypt(r)),s=Math.ceil(i.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map((function(e){var r={key:t._getRawKey(n,".".concat(e)),data:i.substring(e*t.adjustedItemSizeLimit,(e+1)*t.adjustedItemSizeLimit)};return 0===e&&(r.metadata={shards:s}),r}))},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:return e=0,[4,this._getAllRawKeys()];case 1:t=c.sent(),c.label=2;case 2:c.trys.push([2,7,8,9]),n=d(t),r=n.next(),c.label=3;case 3:return r.done?[3,6]:(i=r.value,[4,this._getRaw(i)]);case 4:(s=c.sent())&&(e+=JSON.stringify(s).length),c.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return o=c.sent(),a={error:o},[3,9];case 8:try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}return[7];case 9:return[2,e]}}))}))},e.prototype.getAllKeys=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,e.sent().filter((function(e){return e.endsWith(".0")})).map((function(e){return e.replace(/\.0$/,"")}))]}}))}))},e.prototype.get=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a=this;return h(this,(function(u){switch(u.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:if(!(n=u.sent()))return[3,7];u.label=2;case 2:return u.trys.push([2,6,,7]),r=n.data,(null==(i=n.metadata)?void 0:i.shards)&&i.shards>1?[4,Promise.all(this._generateShardPostfixArray(null==i?void 0:i.shards).map((function(t){return l(a,void 0,void 0,(function(){var n,i;return h(this,(function(s){switch(s.label){case 0:return t>0?(n=this._getRawKey(e,".".concat(t)),[4,this._getRaw(n)]):[3,2];case 1:if(!(i=s.sent()))throw ec.storeBrokenIntegrity;return[2,i.data];case 2:return[2,r]}}))}))})))]:[3,4];case 3:return o=u.sent(),[3,5];case 4:o=[r],u.label=5;case 5:return s=o,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return u.sent(),[2,null];case 7:return[2,null]}}))}))},e.prototype.set=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=this._shardify(e),[4,this._setRaw(t)];case 1:return n.sent(),[2,c({},e.value)]}}))}))},e.prototype.setMany=function(e){return l(this,void 0,void 0,(function(){var t,n=this;return h(this,(function(r){switch(r.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,p([],f(e.map((function(e){return n._shardify(e)}))),!1)))];case 1:return r.sent(),[2,e.map((function(e){return e.value}))]}}))}))},e.prototype.remove=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i=this;return h(this,(function(s){switch(s.label){case 0:return t=this._getRawKey(e,".0"),[4,this._getRaw(t)];case 1:return(n=s.sent())?(r=n.metadata,[4,this._removeRaw(this._generateShardPostfixArray(null==r?void 0:r.shards).map((function(t){return i._getRawKey(e,".".concat(t))})))]):[3,3];case 2:return s.sent(),[2,!0];case 3:return[2,!1]}}))}))},e.prototype.removeMany=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c,l=this;return h(this,(function(_){switch(_.label){case 0:t=[],n=function(e){var n,i,s;return h(this,(function(o){switch(o.label){case 0:return n=r._getRawKey(e,".0"),[4,r._getRaw(n)];case 1:return(i=o.sent())&&(s=i.metadata,t.push.apply(t,p([],f(r._generateShardPostfixArray(null==s?void 0:s.shards).map((function(t){return l._getRawKey(e,".".concat(t))}))),!1))),[2]}}))},r=this,_.label=1;case 1:_.trys.push([1,6,7,8]),i=d(e),s=i.next(),_.label=2;case 2:return s.done?[3,5]:(o=s.value,[5,n(o)]);case 3:_.sent(),_.label=4;case 4:return s=i.next(),[3,2];case 5:return[3,8];case 6:return a=_.sent(),u={error:a},[3,8];case 7:try{s&&!s.done&&(c=i.return)&&c.call(i)}finally{if(u)throw u.error}return[7];case 8:return t.length>0?[4,this._removeRaw(t)]:[3,10];case 9:_.sent(),_.label=10;case 10:return[2,e]}}))}))},e}(),Uc={},Lc=function(e){function t(t){void 0===t&&(t={});var n,r=this;r=e.call(this,c(c({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:4194304}))||this;var i=t.delay,s=void 0===i?1:i;return r.delay=s,r.observer={},r}return u(t,e),Object.defineProperty(t.prototype,"rawData",{get:function(){return Uc[this.dbname]},set:function(e){Uc[this.dbname]=e},enumerable:!1,configurable:!0}),t.prototype._getAllRawKeys=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){if(Uc[this.dbname])return[2,Object.keys(Uc[this.dbname])];throw ec.storeNotAvailable}))}))},t.prototype._getRaw=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return Uc[this.dbname]?[4,sc(this.delay)]:[3,2];case 1:return t.sent(),[2,Uc[this.dbname][e]?c({key:e},Uc[this.dbname][e]):null];case 2:throw ec.storeNotAvailable}}))}))},t.prototype._setRaw=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:return Uc[this.dbname]?[4,sc(this.delay)]:[3,2];case 1:c.sent();try{for(t=d(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,s=r.data,o=r.metadata,Uc[this.dbname][i]=Object.freeze({data:s,metadata:o})}catch(e){a={error:e}}finally{try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}}return[3,3];case 2:throw ec.storeNotAvailable;case 3:return[2]}}))}))},t.prototype._removeRaw=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return Uc[this.dbname]?[4,sc(this.delay)]:[3,2];case 1:o.sent();try{for(t=d(e),n=t.next();!n.done;n=t.next())r=n.value,Uc[this.dbname][r]&&delete Uc[this.dbname][r]}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[3,3];case 2:throw ec.storeNotAvailable;case 3:return[2]}}))}))},t.prototype.observe=function(e,t,n){var r=this;this.observer[e]||(this.observer[e]={}),t.forEach((function(t){return r.observer[e][t]=n}))},t.prototype.checkAvailability=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},t.prototype.init=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return this.dbname=e,Uc[this.dbname]={},[2]}))}))},t.prototype.set=function(t){return l(this,void 0,void 0,(function(){var n,r;return h(this,(function(i){if((n=this.observer[t.key])&&"function"==typeof n.set&&(r=n.set()))throw r;return[2,e.prototype.set.call(this,t)]}))}))},t.prototype.setMany=function(t){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u;return h(this,(function(c){try{for(n=d(t),r=n.next();!r.done;r=n.next())if(i=r.value,(s=this.observer[i.key])&&"function"==typeof s.set&&(o=s.set()))throw o}catch(e){a={error:e}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return[2,e.prototype.setMany.call(this,t)]}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,sc(this.delay)];case 1:return e.sent(),Uc[this.dbname]={},[2]}}))}))},t}(Dc),Mc="NestDBStore",Pc=function(e){function t(t){void 0===t&&(t={});var n,r=this;return(r=e.call(this,c(c({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:104857600}))||this)._storeName=Mc,r._window="undefined"!=typeof window?window:void 0,r._indexedDb=r._window?r._window.indexedDB||r._window.mozIndexedDB||r._window.webkitIndexedDB||r._window.msIndexedDB:void 0,r}return u(t,e),t.prototype._getObjectStore=function(e){if(this._database)return this._database.transaction(this._storeName,e).objectStore(this._storeName);throw ec.storeNotInitialized},t.prototype._getAllRawKeys=function(){return l(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._getObjectStore("readonly").getAllKeys();r.addEventListener("success",(function(e){t(e.target.result)})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},t.prototype._getRaw=function(e){return l(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){var i=t._getObjectStore("readonly").get(e);i.addEventListener("success",(function(e){var t;n(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.result)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))];case 1:return[2,n.sent()]}}))}))},t.prototype._setRaw=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=this._getObjectStore("readwrite"),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var i=t.put(e);i.addEventListener("success",(function(e){n(e.target.result)})),i.addEventListener("error",(function(){r("Failed to write.")}))}))})))];case 1:return n.sent(),[2]}}))}))},t.prototype._removeRaw=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return t=this._getObjectStore("readwrite"),[4,Promise.all(e.map((function(e){return new Promise((function(n,r){var i=t.delete(e);i.addEventListener("success",(function(){return n(e)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}))})))];case 1:return n.sent(),[2]}}))}))},t.prototype.checkAvailability=function(){return l(this,void 0,void 0,(function(){var e,t=this;return h(this,(function(n){switch(n.label){case 0:return(null==(e="undefined"!=typeof window?window:null)?void 0:e.indexedDB)||(null==e?void 0:e.mozIndexedDB)||(null==e?void 0:e.webkitIndexedDB)||(null==e?void 0:e.msIndexedDB)?(this._indexedDb=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,this._window&&Du()?Du()&&navigator.userAgent&&navigator.userAgent.includes("Firefox/")&&!navigator.userAgent.includes("Seamonkey/")?[4,new Promise((function(e,n){if(t._indexedDb){var r=t._indexedDb.open("_testMozilla");r.onerror=function(){return n(ec.storeNotAvailableInPrivateBrowsing)},r.onsuccess=function(){return e()}}else n(ec.storeNotAvailable)}))]:[3,2]:[3,4]):[3,6];case 1:return n.sent(),[3,3];case 2:if(Du()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")&&!this._window.indexedDB&&(e.PointerEvent||e.MSPointerEvent))throw ec.storeNotAvailableInPrivateBrowsing;n.label=3;case 3:return[3,5];case 4:throw ec.storeNotAvailable;case 5:return[3,7];case 6:throw ec.storeNotAvailable;case 7:return[2]}}))}))},t.prototype.init=function(e){return l(this,void 0,void 0,(function(){var t,n=this;return h(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,this.checkAvailability()];case 1:return r.sent(),t=this,[4,new Promise((function(t,r){if(n._indexedDb){var i=n._indexedDb.open(e);i.addEventListener("upgradeneeded",(function(e){e.target.result.createObjectStore(Mc,{keyPath:"key"})})),i.addEventListener("success",(function(e){return t(e.target.result)})),i.addEventListener("error",(function(e){return r(e.target.error)}))}else r(ec.storeNotAvailable)}))];case 2:return t._database=r.sent(),[2]}}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){var r=e._getObjectStore("readwrite").clear();r.addEventListener("success",(function(){return t()})),r.addEventListener("error",(function(e){return n(e.target.error)}))}))];case 1:return[2,t.sent()]}}))}))},t}(Dc),xc=function(e){function t(t){var n=this,r=t.AsyncStorage,i=t.itemSizeLimit,s=void 0===i?6291456:i,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["AsyncStorage","itemSizeLimit"]);return(n=e.call(this,c(c({},o),{itemSizeLimit:s}))||this)._asyncStorage=r,n}return u(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return l(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substring("".concat(e.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a;return h(this,(function(u){switch(u.label){case 0:t=[];try{for(n=d(e),r=n.next();!r.done;r=n.next())i=r.value,s=i.key,i.data.length<=this.adjustedItemSizeLimit&&t.push([this._getActualKey(s),JSON.stringify(i)])}catch(e){o={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}}return[4,this._asyncStorage.multiSet(t)];case 1:return u.sent(),[2]}}))}))},t.prototype._removeRaw=function(e){return l(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return[4,this._asyncStorage.multiRemove(e.map((function(e){return t._getActualKey(e)})))];case 1:return n.sent(),[2]}}))}))},t.prototype.checkAvailability=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){if(!this._asyncStorage)throw ec.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return this.dbname=e,[2]}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))},t}(Dc);!function(e){function t(t){var n,r=this;return(r=e.call(this,c(c({},t),{itemSizeLimit:null!==(n=t.itemSizeLimit)&&void 0!==n?n:6291456}))||this)._mmkv=t.MMKV,r}u(t,e),t.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},t.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},t.prototype._getAllRawKeys=function(){return l(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return[2,t.sent().filter((function(t){return e._isBelonging(t)})).map((function(t){return t.substring("".concat(e.dbname,"/").length)}))]}}))}))},t.prototype._getRaw=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(t=n.sent())?JSON.parse(t):null]}}))}))},t.prototype._setRaw=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){try{for(t=d(e),n=t.next();!n.done;n=t.next())r=n.value,i=r.key,r.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(i),JSON.stringify(r))}catch(e){s={error:e}}finally{try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}}return[2]}))}))},t.prototype._removeRaw=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){try{for(t=d(e),n=t.next();!n.done;n=t.next())r=n.value,this._mmkv.delete(this._getActualKey(r))}catch(e){i={error:e}}finally{try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(i)throw i.error}}return[2]}))}))},t.prototype.checkAvailability=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){if(!this._mmkv)throw ec.storeNotAvailable;return[2]}))}))},t.prototype.init=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return this.dbname=e,[2]}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.getAllKeys()];case 1:return e=t.sent(),[4,this.removeMany(e)];case 2:return t.sent(),[2]}}))}))}}(Dc);var qc,Fc="[NESTDB]",zc=!0,Hc=function(){function e(){}return e.off=function(){zc=!1},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];zc&&console.log.apply(console,p(["".concat(Fc,"[LOG]")],f(e),!1))},e.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];zc&&console.warn.apply(console,p(["".concat(Fc,"[WARNING]")],f(e),!1))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];zc&&console.error.apply(console,p(["".concat(Fc,"[ERROR]")],f(e),!1))},e}();!function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"}(qc||(qc={}));var jc=function(){function e(e){var t=e.name,n=e.version,r=e.store,i=e.config;this.name=t,this._version=n,this._state=qc.INIT,this._config=i||new Ju({dbname:t}),this._store=r,this._event={success:ac,error:ac,storeReplaced:ac,upgrade:lc},this._collections=new Map,this._globalMutex=new Pu("".concat(this.name,".lock")),this._config.disableLogger&&Hc.off(),new Cc({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype.estimateUsage=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,(t=this._store,l(void 0,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,t.usage()];case 1:return[2,e.sent()]}}))})))];case 1:return[2,e.sent()]}var t}))}))},e.prototype.commitSchema=function(e){return l(this,void 0,void 0,(function(){var t=this;return h(this,(function(n){switch(n.label){case 0:return this._state!==qc.OPENING?[3,2]:[4,Promise.all(e.map((function(e){return l(t,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return t=e.collectionName,n=e.keyName,r=e.index,i=void 0===r?[]:r,this._collections.has(t)||this._collections.set(t,new Rc({dbname:this.name,collectionName:t,keyName:n,indexes:i,store:this._store})),(s=this._collections.get(t))?[4,s.init()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))})))];case 1:return n.sent(),[3,3];case 2:throw ec.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},e.prototype.open=function(){var e;return l(this,void 0,void 0,(function(){var t,n,r,i,s=this;return h(this,(function(o){switch(o.label){case 0:return[4,this._globalMutex.lock()];case 1:if(o.sent(),this._state===qc.OPENED)return[3,15];this._state=qc.OPENING,o.label=2;case 2:return o.trys.push([2,5,,15]),[4,this._store.init(this.name)];case 3:return o.sent(),a=this.name,t="".concat(mc(a),".metadata"),n={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:return r=null!==(e=o.sent())&&void 0!==e?e:n,[2,new Promise((function(e,n){var i=function(e){r.version<s._version?s._event.upgrade(r.version,(function(n){return l(s,void 0,void 0,(function(){var i;return h(this,(function(s){switch(s.label){case 0:if(n)return[3,5];r.version++,r.collectionNames=Array.from(this._collections.keys()),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._store.set({key:t,value:r})];case 2:return s.sent(),e({continued:!0}),[3,4];case 3:return i=s.sent(),e({continued:!1,err:i}),[3,4];case 4:return[3,6];case 5:e({continued:!1,err:n}),s.label=6;case 6:return[2]}}))}))})):e({continued:!1})};i((function t(o){var a=o.continued,u=void 0!==a&&a,c=o.err,d=void 0===c?null:c;if(u)setTimeout((function(){return i(t)}),10);else if(d)Hc.error(d.message),s._globalMutex.unlock(),s._event.error(d),n(d);else{var f=[];r.collectionNames.forEach((function(e){s._collections.has(e)||f.push(l(s,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return[4,Rc.metadataOf(this.name,e,this._store)];case 1:return(t=r.sent())?(n=new Rc({dbname:this.name,collectionName:e,keyName:t.keyName,indexes:t.indexes,store:this._store}),this._collections.set(e,n),[4,n.init()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))})))})),Promise.all(f).then((function(){s._state=qc.OPENED,s._globalMutex.unlock(),s._event.success(),e()})).catch((function(e){Hc.error(e.message),s._globalMutex.unlock(),s._event.error(e),n(e)}))}}))}))];case 5:switch((i=o.sent()).code){case Ku.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,6];case Ku.STORE_NOT_AVAILABLE:return[3,8];case Ku.STORE_ENCRYPTION_INVALID:return[3,10]}return[3,13];case 6:return Hc.warning("Access to the local storage is not allowed in private browsing. Switched to MemoryStore automatically."),this._store=new Lc({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 7:return o.sent(),[3,14];case 8:return Hc.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new Lc({}),this._globalMutex.unlock(),this._event.error(i),this._event.storeReplaced(this._store),[4,this.open()];case 9:return o.sent(),[3,14];case 10:return Hc.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this._store.clear()];case 11:return o.sent(),this._globalMutex.unlock(),this._event.error(i),[4,this.open()];case 12:return o.sent(),[3,14];case 13:throw Hc.error(i.message),this._globalMutex.unlock(),this._event.error(i),i;case 14:return[3,15];case 15:return[2]}var a}))}))},e.prototype.close=function(){this._collections.forEach((function(e){return e.close()})),this._state=qc.CLOSED},e.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map((function(e){return e.clear()})))];case 1:return e.sent(),[2]}}))}))},e.prototype.reset=function(){return l(this,void 0,void 0,(function(){var e,t=this;return h(this,(function(n){switch(n.label){case 0:return this.close(),(e=Cc.get(this.name))&&e.clearByCondition((function(e){return e.key.startsWith(mc(t.name))})),[4,this._store.clear()];case 1:return n.sent(),[2]}}))}))},e.prototype.on=function(e,t){this._event[e]=t},e.prototype.off=function(e){"function"==typeof this._event[e]&&(this._event[e]="upgrade"===e?lc:ac)},e.prototype.collection=function(e){var t=this._collections.get(e);if(t)return t;throw ec.collectionNotReady},e}(),Bc=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).isMuted=!1,i.isMuted=null!==(r=n.is_muted)&&void 0!==r&&r,i}return u(t,e),t}(Ui),Gc={profileImage:null,profileUrl:null,nickname:null},Qc=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return u(t,e),t}((function(){this.onSessionExpired=ee,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=ee,this.onSessionRefreshed=ee,this.onSessionClosed=ee})),Kc=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return u(t,e),t}((function(){this.onConnected=ee,this.onReconnectStarted=ee,this.onReconnectSucceeded=ee,this.onReconnectFailed=ee,this.onDisconnected=ee})),Vc=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return u(t,e),t}((function(){this.onFriendsDiscovered=ee,this.onTotalUnreadMessageCountUpdated=ee})),Wc=function(e,t){return function(n,r){1===n?e.clear().then((function(){t.clear().then((function(){(function(e){return l(void 0,void 0,void 0,(function(){return h(this,(function(t){return[2,e.commitSchema([{collectionName:"GroupChannel",keyName:"url",index:[Nu(Eu.LATEST_LAST_MESSAGE),Nu(Eu.CHRONOLOGICAL),Nu(Eu.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:qo,keyName:"messageId",index:[Ru(Su.CHANNEL_LATEST),Ru(Su.NEWEST_CHILD_MESSAGE)]},{collectionName:xu,keyName:"reqId",index:[Ru(Su.CHANNEL_LATEST),Ru(Su.NEWEST_CHILD_MESSAGE)]},{collectionName:"Poll",keyName:"pollId"}])]}))}))})(e).then((function(){return r()})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)})):r()}},Yc=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},Zc=function(e){function t(t){var n=t.getVisibilityState,r=void 0===n?Yc:n,i=t.initialState,s=void 0===i?"visible":i,o=t.isEnabled,a=void 0===o||o,u=t.pauseCheckDelay,c=void 0===u?3e4:u,l=e.call(this)||this;return l._pauseCheckDelay=3e4,l._pauseDelayTimer=null,l._currentState="visible",l._getVisibilityState=r,l._pauseCheckDelay=c,l._currentState=s,l._isEnabled=a,l._boundToggleState=l._toggleState.bind(l),l}return u(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this,t=this._getVisibilityState();"hidden"!==t?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=null),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=null,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=t},t.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t}(z),Xc=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,i=this;this._onlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach((function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:L.GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),Jc=function(e){function t(t){var n=t.userId,r=t.nickname,i=void 0===r?null:r,s=t.profileUrl,o=void 0===s?null:s,a=t.profileImage,u=void 0===a?null:a,c=t.preferredLanguages,l=void 0===c?null:c,h=e.call(this)||this;return h.method=L.PUT,h.path="".concat(Fr,"/").concat(encodeURIComponent(n)),h.params=B({nickname:i,profile_url:o,profile_file:u,preferred_languages:l}),h}return u(t,e),t}(Q),$c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=null,r.user=new Ui(t,c({},n)),r}return u(t,e),t}(K),el=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=L.POST,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/apns"),i.params={apns_device_token:r,always_push:!0},i}return u(t,e),t}(Q);!function(e){u((function(n,r){var i=e.call(this,n,r)||this;return i.token=r.token,i.type=r.type?t.PushTokenType[r.type.toLowerCase()]:t.PushTokenType.UNKNOWN,i.user=new Ui(n,r.user),i}),e)}(K);var tl=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=L.POST,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/gcm"),i.params={gcm_reg_token:r,always_push:!0},i}return u(t,e),t}(Q);!function(e){u((function(n,r){var i=e.call(this,n,r)||this;return i.token=r.token,i.type=r.type?t.PushTokenType[r.type.toLowerCase()]:t.PushTokenType.UNKNOWN,i.user=new Ui(n,r.user),i}),e)}(K);var nl=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=L.DELETE,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),i}return u(t,e),t}(Q);!function(e){u((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new Ui(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(K);var rl=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=L.DELETE,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),i}return u(t,e),t}(Q);!function(e){u((function(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new Ui(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}),e)}(K);var il=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.DELETE,r.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/apns"),r}return u(t,e),t}(Q);!function(e){u((function(n,r){var i=e.call(this,n,r)||this;return i.type=r.type?t.PushTokenType[r.type.toLowerCase()]:t.PushTokenType.UNKNOWN,i.user=new Ui(n,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}),e)}(K);var sl=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.DELETE,r.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/gcm"),r}return u(t,e),t}(Q);!function(e){u((function(n,r){var i=e.call(this,n,r)||this;return i.type=r.type?t.PushTokenType[r.type.toLowerCase()]:t.PushTokenType.UNKNOWN,i.user=new Ui(n,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}),e)}(K);var ol=function(e){function t(t){var n=t.userId,r=t.type,i=t.token,s=t.ts,o=e.call(this)||this;return o.method=L.GET,o.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),o.params={created_ts:s,token:i},o}return u(t,e),t}(Q),al=function(e){function n(n,r){var i=e.call(this,n,r)||this;return i.pushTokens={type:r.type?t.PushTokenType[r.type.toLowerCase()]:t.PushTokenType.UNKNOWN,deviceTokens:r.device_tokens,hasMore:r.has_more,token:r.token},i}return u(n,e),n}(K),ul=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return u(t,e),t}(Q),cl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return u(t,e),t}(K),ll=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,i=e.call(this)||this;return i.method=L.PUT,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),i.params={auto_accept:r},i}return u(t,e),t}(Q),hl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return u(t,e),t}(K),dl=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push_preference"),r}return u(t,e),t}(Q),fl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return u(t,e),t}(K),pl=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,i=t.startHour,s=t.startMin,o=t.endHour,a=t.endMin,u=t.timezone,c=e.call(this)||this;return c.method=L.PUT,c.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push_preference"),c.params={do_not_disturb:r,start_hour:i,start_min:s,end_hour:o,end_min:a,timezone:u},c}return u(t,e),t}(Q),_l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return u(t,e),t}(K),vl=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push_preference"),r}return u(t,e),t}(Q),ml=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return u(t,e),t}(K),yl=function(e){function t(t){var n=t.userId,r=t.snoozeOn,i=t.startTs,s=t.endTs,o=e.call(this)||this;return o.method=L.PUT,o.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push_preference"),o.params={snooze_enabled:r,snooze_start_ts:i,snooze_end_ts:s},o}return u(t,e),t}(Q),gl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return u(t,e),t}(K),El=function(e){function t(t){var n=t.userId,r=t.blockedUserId,i=e.call(this)||this;return i.method=L.POST,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/block"),i.params={target_id:r},i}return u(t,e),t}(Q);!function(e){u((function(t,n){var r=e.call(this,t,n)||this;return r.user=new Ui(t,n),r}),e)}(K);var bl=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,i=e.call(this)||this;return i.method=L.DELETE,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),i}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var wl=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push_preference"),r}return u(t,e),t}(Q),Tl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return u(t,e),t}(K),Il=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,i=e.call(this)||this;return i.method=L.PUT,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push_preference"),i.params={push_trigger_option:r},i}return u(t,e),t}(Q),Cl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return u(t,e),t}(K),Sl=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/template"),r}return u(t,e),t}(Q),Nl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return u(t,e),t}(K),Al=function(e){function t(t){var n=t.userId,r=t.templateName,i=e.call(this)||this;return i.method=L.PUT,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/push/template"),i.params={name:r},i}return u(t,e),t}(Q),kl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return u(t,e),t}(K),Ol=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=L.GET,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/friends/changelogs"),i.params={token:r},i}return u(t,e),t}(Q),Rl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map((function(e){return new Ui(t,e)})),updatedUsers:n.updated.map((function(e){return new Ui(t,e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return u(t,e),t}(K),Dl=function(e){function t(t){var n=t.userId,r=t.discoveries,i=e.call(this)||this;return i.method=L.PUT,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discoveries:r.map((function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}}))},i}return u(t,e),t}(Q),Ul=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return u(t,e),t}(K),Ll=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,i=e.call(this)||this;return i.method=L.DELETE,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discovery_keys:r},i}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var Ml=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=L.POST,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return u(t,e),t}(Q),Pl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new Ui(t,e)})),r}return u(t,e),t}(K),xl=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=L.DELETE,i.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var ql=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Fr,"/").concat(n,"/allow_friend_discovery"),r.params={},r}return u(t,e),t}(Q),Fl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return u(t,e),t}(K),zl=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,i=e.call(this)||this;return i.method=L.PUT,i.path="".concat(Fr,"/").concat(n,"/allow_friend_discovery"),i.params={allow_friend_discovery:r},i}return u(t,e),t}(Q);!function(e){u((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(K);var Hl,jl=function(e){this.key=null,this.url=null,this.key=e.key,this.url=e.url},Bl=function(e){var t,n,r;this.id=0,this.name=null,this.url=null,this.emojis=[],this.id=null!==(t=e.id)&&void 0!==t?t:0,this.name=null!==(n=e.name)&&void 0!==n?n:"",this.url=null!==(r=e.url)&&void 0!==r?r:"",this.emojis=e.emojis?e.emojis.map((function(e){return new jl(e)})):[]},Gl=function(e){this.emojiHash=null,this.emojiCategories=[],this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new Bl(e)})):[]},Ql=function(e){function t(){var t=e.call(this)||this;return t.method=L.GET,t.path=Vr,t}return u(t,e),t}(Q),Kl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new Gl(n),r}return u(t,e),t}(K),Vl=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Vr,"/").concat(n),r}return u(t,e),t}(Q),Wl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new Bl(n),r}return u(t,e),t}(K),Yl=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=L.GET,r.path="".concat(Kr,"/").concat(n),r}return u(t,e),t}(Q),Zl=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new jl(n),r}return u(t,e),t}(K),Xl=function(e){function t(){var t=e.call(this)||this;return t.method=L.GET,t.path="".concat(Yr),t}return u(t,e),t}(Q),Jl=function(e){function t(t,n){var r,i,s=this;return(s=e.call(this,t,n)||this).uikitConfiguration={json:null!==(r=null==n?void 0:n.configuration)&&void 0!==r?r:{}},s.updatedAt=null!==(i=null==n?void 0:n.updated_at)&&void 0!==i?i:0,s}return u(t,e),t}(K),$l=function(e){function t(t){var n=t.limit,r=t.token,i=t.userIdsFilter,s=t.metaDataKeyFilter,o=t.metaDataValuesFilter,a=t.nicknameStartsWithFilter,u=e.call(this)||this;return u.method=L.GET,u.path=Fr,u.params=B({limit:n,token:r,user_ids:i,metadatakey:s,metadatavalues_in:o,nickname_startswith:a}),u}return u(t,e),t}(Q),eh=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new Ui(t,e)})),r.next=n.next,r}return u(t,e),t}(K),th=function(e){function t(t,n){var r,i,s,o=this;return(o=e.call(this,t,n)||this).userIdsFilter=null,o.metaDataKeyFilter=null,o.metaDataValuesFilter=null,o.nicknameStartsWithFilter=null,o.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,o.metaDataKeyFilter=null!==(i=n.metaDataKeyFilter)&&void 0!==i?i:null,o.metaDataValuesFilter=null!==(s=n.metaDataValuesFilter)&&void 0!==s?s:null,o.nicknameStartsWithFilter=n.nicknameStartsWithFilter||null,o}return u(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&N("string",this.userIdsFilter,!0)&&I("string",this.metaDataKeyFilter,!0)&&N("string",this.metaDataValuesFilter,!0)&&I("string",this.metaDataKeyFilter,!0)},t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new $l(c(c({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(eh),i=r.users,s=r.next,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(ls),nh=function(e){function t(t){var n=t.userId,r=t.limit,i=t.token,s=t.userIdsFilter,o=e.call(this)||this;return o.method=L.GET,o.path="".concat(Fr,"/").concat(n,"/block"),o.params=B({limit:r,token:i,user_ids:s}),o}return u(t,e),t}(Q),rh=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new Ui(t,e)})),r.next=n.next,r}return u(t,e),t}(K),ih=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).userIdsFilter=null,i.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,i}return u(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&N("string",this.userIdsFilter,!0)},t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new nh(c(c({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),s=i.as(rh),o=s.users,a=s.next,this._token=a,this._hasNext=!!a,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(ls),sh=function(e){function t(t){var n=t.userId,r=t.limit,i=t.token,s=e.call(this)||this;return s.method=L.GET,s.path="".concat(Fr,"/").concat(encodeURIComponent(n),"/friends"),s.params={limit:r,token:i},s}return u(t,e),t}(Q),oh=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.hasMore=n.has_more,r.users=n.users.map((function(e){return new Ui(t,e)})),r.next=n.next,r}return u(t,e),t}(K),ah=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,a,u;return h(this,(function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new sh(c(c({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),s=i.as(oh),o=s.users,a=s.hasMore,u=s.next,this._token=u,this._hasNext=a,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},t}(ls),uh=null,ch=function(){function e(e,t,n){var r=this;this._storeInitialized=!1,this._fcmPushToken=null,this._apnsPushToken=null,this._iid=e,this.options=t;var i=Wi.of(e),s=i.sdkState,o=i.cacheContext,a=i.dispatcher,u=i.sessionManager,c=i.requestQueue,d=i.logger,f=i.userEventHandlers,p=i.appStateToggleEnabled;this._onlineDetector=new Xc({logger:d,connectionDelegate:{reconnect:function(){var t=Wi.of(e),n=t.sdkState,r=t.connectionManager,i=t.sessionManager;i.auth.hasSession?"foreground"===n.appState&&r.resetAndReconnect():r.connect(i.auth.authToken)},disconnect:function(){Wi.of(e).connectionManager.disconnect()}}});var _=new Gu(e,{localCacheEnabled:o.localCacheEnabled,dispatcher:a,sdkState:s,logger:d});n.forEach((function(t){t.init(e,{sdkState:s,cacheContext:o,dispatcher:a,sessionManager:u,requestQueue:c,logger:d,onlineDetector:r._onlineDetector}),r[t.name]=t})),this._appStateChangeDetector=new Zc({isEnabled:p}),this._appStateChangeDetector.on("resume",(function(){d.debug("the page resumes from freeze"),r.setForegroundState()})).on("pause",(function(){d.debug("the page freezes"),r.setBackgroundState()})),a.on((function(t){if(t instanceof Lr)t.stateType===Ar.CONNECTED&&_.processNonAutoResendRegisteredPendingMessages();else if(t instanceof $){if("USEV"===t.code){var n=t.as(Zu).event;if(n.category===Lu.FRIEND_DISCOVERED){var i=Vu.getDataAsFriendDiscoveredEvent(e,n).friendDiscoveries;si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(e){return[2,f.forEach((function(e){e.onFriendsDiscovered(i)}))]}))}))}))}}}else if(t instanceof Rr){var a=Wi.of(r._iid).subscribedUnreadMessageCount,u=!1,c=t.ts;if("number"==typeof c&&c>a.ts){if(a.all!==t.all&&(u=!0),a.all=t.all>=0?t.all:0,t.customTypes)for(var p in t.customTypes)a.customTypes[p]!==t.customTypes[p]&&(u=!0),a.customTypes[p]=t.customTypes[p];u=u&&a.ts>0,a.ts=c}u&&si((function(){return l(r,void 0,void 0,(function(){return h(this,(function(e){return[2,f.forEach((function(e){e.onTotalUnreadMessageCountUpdated(a.all,a.customTypes)}))]}))}))}))}else t instanceof Li?o.preference.set(r._getUserProfileCacheKey(s.userId),Mi.payloadify(t.userProfile)):t instanceof W&&t.error&&t.error.isSessionRevokedError&&(d.debug("session revoked."),r.disconnect())}))}return e.init=function(t){var n=t.appId,r=t.appVersion,i=void 0===r?null:r,s=t.modules,o=void 0===s?[]:s,a=t.options,u=void 0===a?new O:a,c=t.debugMode,l=void 0!==c&&c,h=t.customApiHost,d=t.customWebSocketHost,_=t.newInstance,v=void 0!==_&&_,m=t.logLevel,y=t.localCacheEnabled,g=void 0!==y&&y,E=t.localCacheConfig,b=void 0===E?new P:E,w=t.localCacheEncryption,T=t.useAsyncStorageStore,I=void 0===T?null:T,C=t.appStateToggleEnabled,S=void 0===C||C;if(!uh||v){var N="su-".concat(q()),A=null!=w?w:{encrypt:function(e){return e},decrypt:function(e){return e}},k=new Lc({encryption:A});l||(k=X()?I?new xc({AsyncStorage:I,encryption:A}):new Lc({encryption:A}):new Pc({encryption:A})),new Wi(N,{appId:n,appVersion:i,options:u,apiHost:null!=h?h:"https://api-".concat(n,".sendbird.com"),websocketHost:null!=d?d:"wss://ws-".concat(n,".sendbird.com"),store:k,encryption:A,logLevel:m,localCacheEnabled:g,localCacheConfig:b,debugMode:l,appStateToggleEnabled:S});var R=[new ho,new xo],D=new e(N,u,p(p([],f(o),!1),f(R),!1));return uh||(uh=D),D}return uh},Object.defineProperty(e,"instance",{get:function(){return uh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return Wi.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appInfo",{get:function(){return Wi.of(this._iid).appInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appVersion",{get:function(){var e;return null!==(e=Wi.of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return Wi.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return Wi.of(this._iid).logger.level},set:function(e){Wi.of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCacheEnabled",{get:function(){return Wi.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCacheConfig",{get:function(){var e=Wi.of(this._iid).cacheContext;return e.localCacheEnabled?e.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ekey",{get:function(){return Wi.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentUser",{get:function(){var e;return null!==(e=Wi.of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){var e=Wi.of(this._iid).connectionManager;return e.isConnected?t.ConnectionState.OPEN:e.isConnecting?t.ConnectionState.CONNECTING:t.ConnectionState.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastConnectedAt",{get:function(){var e=Wi.of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fcmPushToken",{get:function(){return this._fcmPushToken},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apnsPushToken",{get:function(){return this._apnsPushToken},enumerable:!1,configurable:!0}),e.prototype._getCurrentPreferenceVersion=function(){return 1},e.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},e.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},e.prototype.getMemoryStoreForDebugging=function(){var e=Wi.of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof Lc?n.store:null;throw E.debugModeRequired},e.prototype.addExtension=function(e,t){var n=Wi.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&(n.extensions[e]=t)},e.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},e.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},e.prototype._safeInitializeStore=function(e){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:t=Wi.of(this._iid).cacheContext,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,t.store.init(e)];case 2:return n.sent(),this._storeInitialized=!0,[3,5];case 3:return n.sent(),t.store=new Lc,[4,this._safeInitializeStore(e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.initializeCache=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a,u,c;return h(this,(function(l){switch(l.label){case 0:return t=Wi.of(this._iid),n=t.sdkState,r=t.cacheContext,i=t.connectionManager,s=t.dispatcher,o=t.logger,n.userId&&n.userId===e?[3,10]:[4,i.logout()];case 1:if(l.sent(),a="sendbird@".concat(n.appId,"/").concat(e,".db"),!r.localCacheEnabled)return[3,8];l.label=2;case 2:return l.trys.push([2,5,,7]),r.nestdb&&r.nestdb.state!==qc.CLOSED&&r.nestdb.name===a?[3,4]:((u=r.nestdb=new jc({name:"sendbird@".concat(n.appId,"/").concat(e,".db"),version:2,store:r.store})).on("upgrade",Wc(u,r.store)),u.on("storeReplaced",(function(e){r.replaceStore(e),r.localCacheEnabled=!1,u.on("upgrade",Wc(u,r.store))})),[4,u.open()]);case 3:l.sent(),this._storeInitialized=!0,s.dispatch(new Wu(this._iid,{userId:e})),l.label=4;case 4:return n.userId=e,[3,7];case 5:return c=l.sent(),o.warn("Nest DB Open Failed. ",c),[4,this._safeInitializeStore(a)];case 6:throw l.sent(),n.userId=e,E.databaseError;case 7:return[3,10];case 8:return[4,this._safeInitializeStore(a)];case 9:l.sent(),n.userId=e,l.label=10;case 10:return[2]}}))}))},e.prototype.getCacheDataSize=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return(e=Wi.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}}))}))},e.prototype.clearCachedData=function(){return l(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return(e=Wi.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,e.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.prototype.clearCachedMessages=function(e){return l(this,void 0,void 0,(function(){var t,n,r=this;return h(this,(function(i){switch(i.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Hu.of(this._iid),n=Fu.of(this._iid),t&&n?[4,Promise.all(e.map((function(e){return l(r,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},e.prototype.connect=function(e,t){return void 0===t&&(t=null),l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u;return h(this,(function(c){switch(c.label){case 0:Ri(I("string",e)&&I("string",t,!0)).throw(E.invalidParameters),n=Wi.of(this._iid),r=n.sdkState,i=n.cacheContext,s=n.connectionManager,o=n.statLogCollector,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.initializeCache(e)];case 2:return c.sent(),Wi.of(this._iid).dispatcher.dispatch(new Yu),[3,4];case 3:return c.sent(),a=Wi.of(this._iid).logger,i.localCacheEnabled=!1,a.warn("Cache initialization failed - cache is not available."),[3,4];case 4:return[4,i.preference.init(this._getPreferenceCacheKey(e),this._getCurrentPreferenceVersion())];case 5:return c.sent(),[4,i.preference.get(this._getUserProfileCacheKey(e))];case 6:return(u=c.sent())&&new Mi(this._iid,u).apply(),[4,o.init("sendbird@".concat(r.appId,"/").concat(e,".statlog"))];case 7:c.sent(),c.label=8;case 8:return c.trys.push([8,,10,11]),[4,s.connect(t)];case 9:return c.sent(),[3,11];case 10:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 11:return[2,this.currentUser]}}))}))},e.prototype.reconnect=function(){var e=Wi.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.auth.hasSession;return r&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then((function(){n.appState="foreground"})).catch((function(){}))),r},e.prototype.disconnect=function(){return l(this,void 0,void 0,(function(){var e,t,n;return h(this,(function(r){switch(r.label){case 0:return e=Wi.of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.logout()];case 1:return r.sent(),[4,this.clearCachedData()];case 2:return r.sent(),[2]}}))}))},e.prototype.disconnectWebSocket=function(){return l(this,void 0,void 0,(function(){var e,t,n;return h(this,(function(r){switch(r.label){case 0:return e=Wi.of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.disconnectWebSocket()];case 1:return r.sent(),[2]}}))}))},e.prototype.setBackgroundState=function(){var e=Wi.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background())},e.prototype.setForegroundState=function(){var e=Wi.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"background"===n.appState&&(n.appState="foreground",r.debug("going foreground state"),t.resetAndReconnect())},e.prototype.setSessionHandler=function(e){Ri(e instanceof Qc).throw(E.invalidParameters),Wi.of(this._iid).sessionManager.handler=e},e.prototype.addUserEventHandler=function(e,t){Ri(I("string",e)&&t instanceof Vc).throw(E.invalidParameters),Wi.of(this._iid).userEventHandlers.set(e,t)},e.prototype.removeUserEventHandler=function(e){Wi.of(this._iid).userEventHandlers.delete(e)},e.prototype.removeAllUserEventHandler=function(){Wi.of(this._iid).userEventHandlers.clear()},e.prototype.addConnectionHandler=function(e,t){Ri(I("string",e)&&t instanceof Kc).throw(E.invalidParameters),Wi.of(this._iid).connectionHandlers.set(e,t)},e.prototype.removeConnectionHandler=function(e){Wi.of(this._iid).connectionHandlers.delete(e)},e.prototype.removeAllConnectionHandler=function(){Wi.of(this._iid).connectionHandlers.clear()},e.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new th(this._iid,e)},e.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new ih(this._iid,e)},e.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new ah(this._iid,e)},e.prototype.createMessageSearchQuery=function(e){return new uo(this._iid,e)},e.prototype.createPollListQuery=function(e){return new Uo(this._iid,c({},e))},e.prototype.createPollVoterListQuery=function(e){return new Po(this._iid,c({},e))},e.prototype.buildUserFromSerializedData=function(e){var t=Oi(e);return new Ui(this._iid,Ui.payloadify(t))},e.prototype.updateCurrentUserInfo=function(e){return void 0===e&&(e={}),l(this,void 0,void 0,(function(){var t,n,r,i,s,o,a;return h(this,(function(u){switch(u.label){case 0:return t=c(c({},Gc),e),Ri(function(e){return k(e.profileImage,!0)&&I("string",e.profileUrl,!0)&&I("string",e.nickname,!0)}(t)).throw(E.invalidParameters),this.currentUser?(n=Wi.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Jc(c({userId:r.userId},t)),[4,i.send(s)]):[3,2];case 1:return o=u.sent(),a=o.as($c).user,this.currentUser&&(t.nickname&&(this.currentUser.nickname=a.nickname),(t.profileUrl||t.profileImage)&&(this.currentUser.plainProfileUrl=a.profileUrl)),[2,a];case 2:throw E.connectionRequired}}))}))},e.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),this.currentUser?(t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Jc({userId:n.userId,preferredLanguages:e}),[4,r.send(i)]):[3,2];case 1:return s=a.sent(),o=s.as($c).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw E.connectionRequired}}))}))},e.prototype.registerFCMPushTokenForCurrentUser=function(e){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a=this;return h(this,(function(u){switch(u.label){case 0:if(Ri(I("string",e)).throw(E.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),n=Wi.of(this._iid),r=n.sessionManager,i=n.sdkState,s=n.requestQueue,r.hasDeviceToken(t.PushTokenType.FCM,e)?[2,t.PushTokenRegistrationState.SUCCESS]:(o=new tl({userId:i.userId,token:e}),[4,s.send(o)]);case 2:return u.sent(),[4,oi((function(){return l(a,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return r.setDeviceToken(t.PushTokenType.FCM,e),[4,r.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return u.sent(),this._fcmPushToken="",[2,t.PushTokenRegistrationState.SUCCESS];case 4:return u.sent(),[2,t.PushTokenRegistrationState.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,t.PushTokenRegistrationState.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u=this;return h(this,(function(c){switch(c.label){case 0:if(Ri(I("string",e)).throw(E.invalidParameters),!this.currentUser)return[3,6];c.label=1;case 1:return c.trys.push([1,4,,5]),n=Wi.of(this._iid),r=n.sessionManager,i=n.sdkState,s=n.requestQueue,o=new rl({userId:i.userId,token:e}),[4,s.send(o)];case 2:return a=c.sent().lastDeletedAt,[4,oi((function(){return l(u,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return r.unsetDeviceToken(t.PushTokenType.FCM,e),r.setDeviceTokenDeletedAt(a),[4,r.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return c.sent(),this._fcmPushToken="",[2,t.PushTokenRegistrationState.SUCCESS];case 4:return c.sent(),[2,t.PushTokenRegistrationState.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,t.PushTokenRegistrationState.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return l(this,void 0,void 0,(function(){var e,n,r,i,s,o,a=this;return h(this,(function(u){switch(u.label){case 0:return this.currentUser?(e=Wi.of(this._iid),n=e.sessionManager,r=e.sdkState,i=e.requestQueue,s=new sl({userId:r.userId}),[4,i.send(s)]):[3,3];case 1:return o=u.sent().lastDeletedAt,[4,oi((function(){return l(a,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return n.unsetDeviceTokens(t.PushTokenType.FCM),n.setDeviceTokenDeletedAt(o),[4,n.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},e.prototype.registerAPNSPushTokenForCurrentUser=function(e){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a=this;return h(this,(function(u){switch(u.label){case 0:if(Ri(I("string",e)).throw(E.invalidParameters),!this.currentUser)return[3,6];u.label=1;case 1:return u.trys.push([1,4,,5]),n=Wi.of(this._iid),r=n.sessionManager,i=n.sdkState,s=n.requestQueue,r.hasDeviceToken(t.PushTokenType.APNS,e)?[2,t.PushTokenRegistrationState.SUCCESS]:(o=new el({userId:i.userId,token:e}),[4,s.send(o)]);case 2:return u.sent(),[4,oi((function(){return l(a,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return r.setDeviceToken(t.PushTokenType.APNS,e),[4,r.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return u.sent(),this._apnsPushToken="",[2,t.PushTokenRegistrationState.SUCCESS];case 4:return u.sent(),[2,t.PushTokenRegistrationState.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,t.PushTokenRegistrationState.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u=this;return h(this,(function(c){switch(c.label){case 0:if(Ri(I("string",e)).throw(E.invalidParameters),!this.currentUser)return[3,6];c.label=1;case 1:return c.trys.push([1,4,,5]),n=Wi.of(this._iid),r=n.sessionManager,i=n.sdkState,s=n.requestQueue,o=new nl({userId:i.userId,token:e}),[4,s.send(o)];case 2:return a=c.sent().lastDeletedAt,[4,oi((function(){return l(u,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return r.unsetDeviceToken(t.PushTokenType.APNS,e),r.setDeviceTokenDeletedAt(a),[4,r.saveDeviceToken()];case 1:return n.sent(),[2]}}))}))}))];case 3:return c.sent(),this._apnsPushToken="",[2,t.PushTokenRegistrationState.SUCCESS];case 4:return c.sent(),[2,t.PushTokenRegistrationState.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,t.PushTokenRegistrationState.PENDING];case 7:return[2]}}))}))},e.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return l(this,void 0,void 0,(function(){var e,n,r,i,s,o,a=this;return h(this,(function(u){switch(u.label){case 0:return this.currentUser?(e=Wi.of(this._iid),n=e.sessionManager,r=e.sdkState,i=e.requestQueue,s=new il({userId:r.userId}),[4,i.send(s)]):[3,3];case 1:return o=u.sent().lastDeletedAt,[4,oi((function(){return l(a,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return n.unsetDeviceTokens(t.PushTokenType.APNS),n.setDeviceTokenDeletedAt(o),[4,n.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},e.prototype.getChannelInvitationPreference=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new ul({userId:t.userId}),[4,n.send(r)];case 1:return[2,{autoAccept:i.sent().as(cl).autoAccept}]}}))}))},e.prototype.setChannelInvitationPreference=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(I("boolean",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new ll({userId:n.userId,willAutoAccept:e}),[4,r.send(i)];case 1:return[2,{autoAccept:s.sent().as(hl).autoAccept}]}}))}))},e.prototype.getDoNotDisturb=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new dl({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(fl).preference]}}))}))},e.prototype.setDoNotDisturb=function(e,t,n,r,i,s){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=""),l(this,void 0,void 0,(function(){var o,a,u,c;return h(this,(function(l){switch(l.label){case 0:return Ri(I("boolean",e)&&I("number",t)&&I("number",n)&&I("number",r)&&I("number",i)&&I("string",s)).throw(E.invalidParameters),o=Wi.of(this._iid),a=o.sdkState,u=o.requestQueue,c=new pl({userId:a.userId,doNotDisturbOn:e,startHour:t,startMin:n,endHour:r,endMin:i,timezone:s}),[4,u.send(c)];case 1:return[2,l.sent().as(_l).preference]}}))}))},e.prototype.getSnoozePeriod=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new vl({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(ml).snoozePeriod]}}))}))},e.prototype.setSnoozePeriod=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),l(this,void 0,void 0,(function(){var r,i,s,o;return h(this,(function(a){switch(a.label){case 0:return Ri(I("boolean",e)&&I("number",t)&&I("number",n)).throw(E.invalidParameters),r=Wi.of(this._iid),i=r.sdkState,s=r.requestQueue,o=new yl({userId:i.userId,snoozeOn:e,startTs:t,endTs:n}),[4,s.send(o)];case 1:return[2,a.sent().as(gl).snoozePeriod]}}))}))},e.prototype.getMyPushTokensByToken=function(e,n){return l(this,void 0,void 0,(function(){var r,i,s,o,a,u,c,l,f,p,_,v;return h(this,(function(h){switch(h.label){case 0:return Ri(I("string",e)&&C(t.PushTokenType,n)).throw(E.invalidParameters),r=Wi.of(this._iid),i=r.sdkState,s=r.requestQueue,o=r.sessionManager,a=new ol({userId:i.userId,type:n,token:e}),[4,s.send(a)];case 1:u=h.sent(),c=u.as(al).pushTokens;try{for(l=d(c.deviceTokens),f=l.next();!f.done;f=l.next())p=f.value,o.setDeviceToken(c.type,p)}catch(e){_={error:e}}finally{try{f&&!f.done&&(v=l.return)&&v.call(l)}finally{if(_)throw _.error}}return[4,o.saveDeviceToken()];case 2:return h.sent(),[2,c]}}))}))},e.prototype.getPushTriggerOption=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new wl({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(Tl).pushTriggerOption]}}))}))},e.prototype.setPushTriggerOption=function(e){return l(this,void 0,void 0,(function(){var n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return Ri(C(t.PushTriggerOption,e)).throw(E.invalidParameters),n=Wi.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Il({userId:r.userId,pushTriggerOption:e}),[4,i.send(s)];case 1:return[2,o.sent().as(Cl).pushTriggerOption]}}))}))},e.prototype.getPushTemplate=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Sl({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(Nl).name]}}))}))},e.prototype.setPushTemplate=function(e){return l(this,void 0,void 0,(function(){var n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return Ri(C(t.PushTemplate,e)).throw(E.invalidParameters),n=Wi.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Al({userId:r.userId,templateName:e}),[4,i.send(s)];case 1:return[2,o.sent().as(kl).name]}}))}))},e.prototype.blockUser=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(e instanceof Ui||I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new El({userId:n.userId,blockedUserId:e instanceof Ui?e.userId:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},e.prototype.blockUserWithUserId=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this.blockUser(e)]}))}))},e.prototype.unblockUser=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(e instanceof Ui||I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new bl({userId:n.userId,unblockedUserId:e instanceof Ui?e.userId:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},e.prototype.unblockUserWithUserId=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this.unblockUser(e)]}))}))},e.prototype.getFriendChangeLogsByToken=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(I("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ol({userId:n.userId,token:e}),[4,r.send(i)];case 1:return[2,s.sent().as(Rl).changelogs]}}))}))},e.prototype.getAllowFriendDiscovery=function(){return l(this,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){switch(i.label){case 0:return e=Wi.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new ql({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(Fl).allowFriendDiscovery]}}))}))},e.prototype.setAllowFriendDiscovery=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(I("boolean",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new zl({userId:n.userId,allowFriendDiscovery:e}),[4,r.send(i)];case 1:return s.sent(),[2,e]}}))}))},e.prototype.uploadFriendDiscoveries=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Dl({userId:n.userId,discoveries:e}),[4,r.send(i)];case 1:return[2,s.sent().as(Ul).friendDiscoveryRequestId]}}))}))},e.prototype.deleteFriendDiscovery=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this.deleteFriendDiscoveries([e])]}))}))},e.prototype.deleteFriendDiscoveries=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ll({userId:n.userId,discoveryKeys:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},e.prototype.addFriends=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ml({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return[2,s.sent().as(Pl).users]}}))}))},e.prototype.deleteFriend=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this.deleteFriends([e])]}))}))},e.prototype.deleteFriends=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(N("string",e)).throw(E.invalidParameters),t=Wi.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new xl({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},e.prototype.getAllEmoji=function(){return l(this,void 0,void 0,(function(){var e,t;return h(this,(function(n){switch(n.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Ql,[4,e.send(t)];case 1:return[2,n.sent().as(Kl).emojiContainer]}}))}))},e.prototype.getEmojiCategory=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=Wi.of(this._iid).requestQueue,n=new Vl({categoryId:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Wl).emojiCategory]}}))}))},e.prototype.getEmoji=function(e){return l(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return t=Wi.of(this._iid).requestQueue,n=new Yl({key:e}),[4,t.send(n)];case 1:return[2,r.sent().as(Zl).emoji]}}))}))},e.prototype.getUIKitConfiguration=function(){return l(this,void 0,void 0,(function(){var e,t,n;return h(this,(function(r){switch(r.label){case 0:return e=Wi.of(this._iid),Ri(e.hasExtension("sb_uikit")).throw(E.notSupportedError),t=e.requestQueue,n=new Xl,[4,t.send(n)];case 1:return[2,r.sent().as(Jl).uikitConfiguration]}}))}))},e}();!function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"}(Hl||(Hl={}));var lh=function(){function e(e){this.channelUrl=e.channel_url,this.channelType=e.channel_type,this.category=e.cat,this.data=e.data,this.ts=e.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===t.ChannelType.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===t.ChannelType.OPEN},enumerable:!1,configurable:!0}),e}(),hh=function(e){function t(t,n,r){var i=e.call(this,t,"SYEV",r)||this;return i.event=new lh(r),i}return u(t,e),t}($),dh=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this,s=r.data.operators,o=void 0===s?[]:s;return i.operators=o.map((function(e){return new Ui(i._iid,e)})),i}return u(t,e),t}(hh),fh=function(e){function t(t,n,r){var i=e.call(this,t,"MCNT",r)||this;return i.groupChannelMemberCounts=r.group_channels.map((function(e){return{channelUrl:e.channel_url,memberCount:e.member_count,joinedMemberCount:e.joined_member_count,updatedAt:e.ts}})),i.openChannelMemberCounts=r.open_channels.map((function(e){return{channelUrl:e.channel_url,participantCount:e.participant_count,updatedAt:e.ts}})),i}return u(t,e),t}($),ph=function(e){function t(t,n,r){var i,s,o,a=this;(a=e.call(this,t,"ADMM",r)||this).message=new Rs(t,r);var u=Wi.of(t).sdkState;return a.isMentioned=rs(a.message.mentionType,null!==(i=a.message.mentionedUserIds)&&void 0!==i?i:null===(s=a.message.mentionedUsers)||void 0===s?void 0:s.map((function(e){return e.userId})),u.userId),a.forceUpdateLastMessage=null!==(o=r.force_update_last_message)&&void 0!==o&&o,a}return u(t,e),t}($),_h=function(e){function t(t,n,r){var i,s,o,a,u,c,l=this;(l=e.call(this,t,"AEDI",r)||this).message=new Rs(t,r);var h=Wi.of(t).sdkState;return l.mentionCountChange=is({mentionType:null!==(s=null===(i=r.old_values)||void 0===i?void 0:i.mention_type)&&void 0!==s?s:null,mentionedUserIds:null!==(a=null===(o=r.old_values)||void 0===o?void 0:o.mentioned_user_ids)&&void 0!==a?a:[]},{mentionType:l.message.mentionType,mentionedUserIds:null!==(u=l.message.mentionedUserIds)&&void 0!==u?u:null===(c=l.message.mentionedUsers)||void 0===c?void 0:c.map((function(e){return e.userId}))},h.userId),l}return u(t,e),t}($),vh=function(e){function t(t,n,r){var i=e.call(this,t,"MRCT",r)||this;return i.channelUrl=r.channel_url,i.channelType=r.channel_type,i.event=new ms(r),i}return u(t,e),t}($),mh=function(e){function t(t,n,r){var i=e.call(this,t,"MTHD",r)||this;return i.event=new ro(t,r),i}return u(t,e),t}($),yh=function(e){function t(t,n,r){var i=e.call(this,t,"PEDI",r)||this;return i.event=null,i.status=null,i.channelUrl=null,i.channelType=null,i.event=new ko(t,r),i.status=Xi(r.poll.status)||r.poll.status,i.channelUrl=r.channel_url,i.channelType=r.channel_type,i}return u(t,e),t}($),gh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._channels=new Map,t._enteredChannelUrls=[],t}return u(t,e),Object.defineProperty(t.prototype,"enteredChannels",{get:function(){var e=this;return this._enteredChannelUrls.map((function(t){return e._channels.get(t)})).filter((function(e){return null!==e}))},enumerable:!1,configurable:!0}),t.prototype.isEnteredChannel=function(e){return this._enteredChannelUrls.includes(e)},t.prototype.enter=function(e){this._enteredChannelUrls.indexOf(e)<0&&this._enteredChannelUrls.push(e)},t.prototype.exit=function(e){var t=this._enteredChannelUrls.indexOf(e);t>=0&&this._enteredChannelUrls.splice(t,1)},t.prototype.exitAll=function(){this._enteredChannelUrls=[]},t.prototype.get=function(e){var t;return l(this,void 0,void 0,(function(){return h(this,(function(n){return[2,null!==(t=this._channels.get(e))&&void 0!==t?t:null]}))}))},t.prototype.upsert=function(e){return l(this,void 0,void 0,(function(){var t,n=this;return h(this,(function(r){return t=[],e.forEach((function(e){if(n._channels.has(e.url)){var r=n._channels.get(e.url);Object.assign(r,e),t.push(r)}else n._channels.set(e.url,e),t.push(e)})),[2,t]}))}))},t.prototype.remove=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return this._channels.delete(e),this.exit(e),[2]}))}))},t.prototype.clear=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){return this._channels.clear(),this._enteredChannelUrls=[],[2]}))}))},t}(wi),Eh={channelUrl:null,name:null,coverUrlOrImage:null,data:null,customType:null,operatorUserIds:null,isEphemeral:null},bh=function(e){function t(t){var n=t.channelUrl,r=t.isInternalCall,i=e.call(this)||this;return i.method=L.GET,i.path="".concat(r?Br:jr,"/").concat(encodeURIComponent(n)),i}return u(t,e),t}(Q),wh=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=null,r.channel=new xh(t,n),r}return u(t,e),t}(K),Th=function(e){function t(t){var n=this,r=t.channelUrl,i=t.coverUrlOrImage,s=t.name,o=t.data,a=t.customType,u=t.operatorUserIds,c=t.isEphemeral;return(n=e.call(this)||this).method=L.POST,n.path=jr,n.params=B({channel_url:r,cover_url:I("string",i)?i:null,cover_file:k(i)?i:null,name:s,data:o,custom_type:a,operators:u,is_ephemeral:c}),n}return u(t,e),t}(Q);!function(e){u((function(t,n){var r=e.call(this,t,n)||this;return r.channel=new xh(t,n),r}),e)}(K);var Ih=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"ENTR",payload:{channel_url:n},ackRequired:!0})||this}return u(t,e),t}(Or),Ch=function(e){function t(t,n,r){var i,s,o=this;return o=e.call(this,t,"SYEV",r)||this,r.data&&(o.participantCount=null!==(i=r.data.participant_count)&&void 0!==i?i:0,o.user=new Ui(t,r.data),o.ts=null!==(s=r.data.edge_ts)&&void 0!==s?s:0),o}return u(t,e),t}(hh),Sh=function(e){function t(t){var n=t.channelUrl;return e.call(this,{code:"EXIT",payload:{channel_url:n},ackRequired:!0})||this}return u(t,e),t}(Or),Nh=function(e){function t(t,n,r){var i,s,o=this;return o=e.call(this,t,"EXIT",r)||this,r.data&&(o.participantCount=null!==(i=r.data.participant_count)&&void 0!==i?i:0,o.user=new Ui(t,r.data),o.ts=null!==(s=r.data.edge_ts)&&void 0!==s?s:0),o}return u(t,e),t}(hh),Ah={},kh=function(){function e(e,t){var n=t.sdkState,r=t.dispatcher,i=t.requestQueue,s=this;return Ah[e]||(this._iid=e,this._sdkState=n,this._requestQueue=i,this._dispatcher=r,this._openChannelCache=new gh(e),this._openChannelHandlers=new Map,this._dispatcher.on((function(e){var t,n;if(e instanceof $)s._handleEvent(e);else if(e instanceof Lr&&e.stateType===Ar.CONNECTED){var r=s._openChannelCache.enteredChannels;try{for(var i=d(r),o=i.next();!o.done;o=i.next())o.value.enter()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}})),Ah[e]=this),Ah[e]}return e.of=function(e){return Ah[e]},e.prototype.buildOpenChannelFromSerializedData=function(e){var t=Oi(e);return new xh(this._iid,xh.payloadify(t))},e.prototype.getChannelFromCache=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this._openChannelCache.get(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.upsertChannelsToCache=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return[4,this._openChannelCache.upsert(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.removeChannelsFromCache=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s,o;return h(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),t=d(e),n=t.next(),a.label=1;case 1:return n.done?[3,4]:(r=n.value,[4,this._openChannelCache.remove(r)]);case 2:a.sent(),a.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return i=a.sent(),s={error:i},[3,7];case 6:try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(s)throw s.error}return[7];case 7:return[2]}}))}))},e.prototype.setEnteredToCache=function(e){this._openChannelCache.enter(e.url)},e.prototype.setExitedToCache=function(e){this._openChannelCache.exit(e.url)},e.prototype._handleEvent=function(e){return l(this,void 0,void 0,(function(){var n,r,i,s,o,a,u,c,f,p,_,v,m,y,E,b,w,T,I,C,S,N,A,k,O,R,D,U,L,M,P,x,q,F,z,H,j,B,G,Q,K,V,W,Y,Z,X,J,$,ee,te,ne,re,ie,se,oe,ae,ue,ce,le,he,de,fe,pe,_e,ve,me,ye,ge,Ee=this;return h(this,(function(be){switch(be.label){case 0:switch(be.trys.push([0,55,,56]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,29];case"SYEV":return[3,31]}return[3,54];case 1:return s=null,"MESG"===e.code?s=e.as(Va):"FILE"===e.code?s=e.as(Fs):"ADMM"!==e.code&&"BRDM"!=e.code||(s=e.as(ph)),s?(n=s.message,r=s.isMentioned,n.channelType!==t.ChannelType.OPEN?[3,3]:[4,this.getChannel(n.channelUrl,!0)]):[3,3];case 2:i=be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){var e,t,s,o,a;return h(this,(function(u){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())s=t.value,this._openChannelCache.isEnteredChannel(i.url)&&(s.onMessageReceived(i,n),r&&s.onMentionReceived(i,n))}catch(e){o={error:e}}finally{try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(o)throw o.error}}return[2]}))}))})),be.label=3;case 3:return[3,54];case 4:return s=null,"MEDI"===e.code?s=e.as(Ya):"FEDI"===e.code?s=e.as(Xa):"AEDI"===e.code&&(s=e.as(_h)),s?(o=s.message,a=s.mentionCountChange,o.channelType!==t.ChannelType.OPEN?[3,6]:[4,this.getChannel(o.channelUrl,!0)]):[3,6];case 5:u=be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r,i;return h(this,(function(s){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(u.url)&&(n.onMessageUpdated(u,o),a>0&&n.onMentionReceived(u,o))}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),be.label=6;case 6:return[3,54];case 7:return c=e.as($a),P=c.channelUrl,x=c.channelType,f=c.messageId,x!==t.ChannelType.OPEN?[3,9]:[4,this.getChannel(P,!0)];case 8:p=be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r,i;return h(this,(function(s){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(p.url)&&n.onMessageDeleted(p,f)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),be.label=9;case 9:return[3,54];case 10:return _=e.as(vh),P=_.channelUrl,x=_.channelType,v=_.event,x!==t.ChannelType.OPEN?[3,12]:[4,this.getChannel(P,!0)];case 11:m=be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r,i;return h(this,(function(s){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(m.url)&&n.onReactionUpdated(m,v)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),be.label=12;case 12:return[3,54];case 13:return(y=e.as(mh).event).channelType!==t.ChannelType.OPEN?[3,15]:[4,this.getChannel(y.channelUrl,!0)];case 14:E=be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r,i;return h(this,(function(s){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())n=t.value,this._openChannelCache.isEnteredChannel(E.url)&&n.onThreadInfoUpdated(E,y)}catch(e){r={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(r)throw r.error}}return[2]}))}))})),be.label=15;case 15:return[3,54];case 16:b=e.as(fh).openChannelMemberCounts,w=[],be.label=17;case 17:be.trys.push([17,22,23,24]),T=d(b),I=T.next(),be.label=18;case 18:return I.done?[3,21]:(C=I.value,P=C.channelUrl,K=C.participantCount,S=C.updatedAt,[4,this.getChannelFromCache(P)]);case 19:(N=be.sent())&&N._updateParticipantCount(K,S)&&w.push(N),be.label=20;case 20:return I=T.next(),[3,18];case 21:return[3,24];case 22:return A=be.sent(),ye={error:A},[3,24];case 23:try{I&&!I.done&&(ge=T.return)&&ge.call(T)}finally{if(ye)throw ye.error}return[7];case 24:return w.length>0?[4,this.upsertChannelsToCache(w)]:[3,26];case 25:k=be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())t.value.onChannelMemberCountChanged(k)}catch(e){n={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(n)throw n.error}}return[2]}))}))})),be.label=26;case 26:return[3,54];case 27:return O=e.as(yh),R=O.event,D=O.status,P=O.channelUrl,x=O.channelType,P&&x?[4,this.getChannel(P,!0)]:[3,54];case 28:return U=be.sent(),this._dispatcher.dispatch(new us({event:R,source:Zi.EVENT_POLL_UPDATED})),si("removed"===D?function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())t.value.onPollDeleted(U,R.pollId)}catch(e){n={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(n)throw n.error}}return[2]}))}))}:function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())t.value.onPollUpdated(U,R)}catch(e){n={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(n)throw n.error}}return[2]}))}))}),[3,54];case 29:return L=e.as(Iu),M=L.event,P=L.channelUrl,x=L.channelType,P&&x?[4,this.getChannel(P,!0)]:[3,54];case 30:return q=be.sent(),this._dispatcher.dispatch(new cs({event:M,source:Zi.EVENT_POLL_VOTED})),si((function(){return l(Ee,void 0,void 0,(function(){var e,t,n,r;return h(this,(function(i){try{for(e=d(this._openChannelHandlers.values()),t=e.next();!t.done;t=e.next())t.value.onPollVoted(q,M)}catch(e){n={error:e}}finally{try{t&&!t.done&&(r=e.return)&&r.call(e)}finally{if(n)throw n.error}}return[2]}))}))})),[3,54];case 31:if(!(F=e.as(hh).event).isOpenChannelEvent)return[3,53];switch(F.category){case Hl.CHANNEL_ENTER:return[3,32];case Hl.CHANNEL_EXIT:return[3,34];case Hl.CHANNEL_OPERATOR_UPDATE:return[3,36];case Hl.USER_CHANNEL_MUTE:case Hl.USER_CHANNEL_UNMUTE:return[3,38];case Hl.USER_CHANNEL_BAN:case Hl.USER_CHANNEL_UNBAN:return[3,40];case Hl.CHANNEL_FREEZE:case Hl.CHANNEL_UNFREEZE:return[3,42];case Hl.CHANNEL_DELETED:return[3,44];case Hl.CHANNEL_PROP_CHANGED:return[3,47];case Hl.CHANNEL_META_DATA_CHANGED:return[3,49];case Hl.CHANNEL_META_COUNTERS_CHANGED:return[3,51]}return[3,53];case 32:return[4,this.getChannel(F.channelUrl,!0)];case 33:return z=be.sent(),H=e.as(Ch),K=H.participantCount,j=H.user,B=z._updateParticipantCount(K,F.ts),si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserEntered(z,j),B&&e.onChannelParticipantCountChanged(z)})),[2]}))}))})),[3,53];case 34:return[4,this.getChannel(F.channelUrl,!0)];case 35:return G=be.sent(),Q=e.as(Nh),K=Q.participantCount,V=Q.user,W=G._updateParticipantCount(K,F.ts),si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onUserExited(G,V),W&&e.onChannelParticipantCountChanged(G)})),[2]}))}))})),[3,53];case 36:return[4,this.getChannel(F.channelUrl,!0)];case 37:return Y=be.sent(),Z=e.as(dh).operators,Y.operators=Z,this.upsertChannelsToCache([Y]),si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onOperatorUpdated(Y,Z)})),[2]}))}))})),[3,53];case 38:return[4,this.getChannel(F.channelUrl,!0)];case 39:return X=be.sent(),J=F.category===Hl.USER_CHANNEL_MUTE,$=e.as(J?La:Pa).user,si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){J?e.onUserMuted(X,$):e.onUserUnmuted(X,$)})),[2]}))}))})),[3,53];case 40:return[4,this.getChannel(F.channelUrl,!0)];case 41:return ee=be.sent(),te=F.category===Hl.USER_CHANNEL_BAN,ne=e.as(te?qa:za).user,si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){te?e.onUserBanned(ee,ne):e.onUserUnbanned(ee,ne)})),[2]}))}))})),[3,53];case 42:return[4,this.getChannel(F.channelUrl,!0)];case 43:return re=be.sent(),ie=e.as(ja).freeze,re.isFrozen=ie,this.upsertChannelsToCache([re]),si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){ie?e.onChannelFrozen(re):e.onChannelUnfrozen(re)})),[2]}))}))})),[3,53];case 44:return[4,this.getChannel(F.channelUrl,!0)];case 45:return se=be.sent(),[4,this.removeChannelsFromCache([se.url])];case 46:return be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelDeleted(se.url,se.channelType)})),[2]}))}))})),[3,53];case 47:return[4,this.getChannelWithoutCache(F.channelUrl,!0)];case 48:return oe=be.sent(),si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){e.onChannelChanged(oe)})),[2]}))}))})),[3,53];case 49:return[4,this.getChannel(F.channelUrl,!0)];case 50:return ae=be.sent(),ue=e.as(ga),ce=ue.created,le=ue.updated,he=ue.deleted,ce&&ae._upsertCachedMetaData(ce,F.ts),le&&ae._upsertCachedMetaData(le,F.ts),he&&ae._removeFromCachedMetaData(he,F.ts),si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){ce&&e.onMetaDataCreated(ae,ce),le&&e.onMetaDataUpdated(ae,le),he&&e.onMetaDataDeleted(ae,he)})),[2]}))}))})),[3,53];case 51:return[4,this.getChannel(F.channelUrl,!0)];case 52:return de=be.sent(),fe=e.as(Oa),pe=fe.created,_e=fe.updated,ve=fe.deleted,si((function(){return l(Ee,void 0,void 0,(function(){return h(this,(function(e){return this._openChannelHandlers.forEach((function(e){pe&&e.onMetaCounterCreated(de,pe),_e&&e.onMetaCounterUpdated(de,_e),ve&&e.onMetaCounterDeleted(de,ve)})),[2]}))}))})),[3,53];case 53:return[3,54];case 54:return[3,56];case 55:if(me=be.sent(),g(me))throw me;return[3,56];case 56:return[2]}}))}))},e.prototype.addHandler=function(e,t){this._openChannelHandlers.set(e,t)},e.prototype.removeHandler=function(e){this._openChannelHandlers.delete(e)},e.prototype.clearHandler=function(){this._openChannelHandlers.clear()},e.prototype.getChannel=function(e,t){return l(this,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:Ri(I("string",e)).throw(E.invalidParameters),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(t=n.sent())?[2,t]:[3,4];case 3:return n.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e)];case 5:return[2,n.sent()]}}))}))},e.prototype.getChannelWithoutCache=function(e,t){return void 0===t&&(t=!1),l(this,void 0,void 0,(function(){var n,r,i;return h(this,(function(s){switch(s.label){case 0:return Ri(I("string",e)).throw(E.invalidParameters),n=new bh({channelUrl:e,isInternalCall:t}),[4,this._requestQueue.send(n)];case 1:return r=s.sent(),i=r.as(wh).channel,[4,this.upsertChannelsToCache([i])];case 2:return[2,s.sent()[0]]}}))}))},e.prototype.createChannel=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i;return h(this,(function(s){switch(s.label){case 0:return t=c(c({},Eh),e),Ri(function(e){return N("string",e.operatorUserIds,!0)&&(I("string",e.coverUrlOrImage)||k(e.coverUrlOrImage)||null===e.coverUrlOrImage)&&I("string",e.name,!0)&&I("string",e.data,!0)&&I("string",e.customType,!0)&&(I("string",e.channelUrl)&&/^\w+$/.test(e.channelUrl)||null===e.channelUrl)&&I("boolean",e.isEphemeral,!0)}(t)).throw(E.invalidParameters),n=new Th(t),[4,this._requestQueue.send(n)];case 1:return r=s.sent(),i=r.as(wh).channel,this.upsertChannelsToCache([i]),[2,i]}}))}))},e}(),Oh={name:null,coverUrlOrImage:null,data:null,customType:null,operatorUserIds:null},Rh=function(e){function t(t){var n=this,r=t.channelUrl,i=t.token,s=t.limit;return(n=e.call(this)||this).method=L.GET,n.path="".concat(jr,"/").concat(encodeURIComponent(r),"/participants"),n.params={token:i,limit:s},n}return u(t,e),t}(Q),Dh=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.participants=[];var i=n.next,s=n.participants;return r.token=i,r.participants=s.map((function(e){return new Bc(t,e)})),r}return u(t,e),t}(K),Uh=function(e){function n(n,r,i){return e.call(this,n,r,t.ChannelType.OPEN,i)||this}return u(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new Rh(c(c({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(Dh),i=r.participants,s=r.token,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw E.queryInProgress;case 4:return[3,6];case 5:throw E.invalidParameters;case 6:return[2]}}))}))},n}(hs),Lh=function(e){function t(t){var n=this,r=t.channelUrl,i=t.coverUrlOrImage,s=t.name,o=t.data,a=t.customType,u=t.operatorUserIds;return(n=e.call(this)||this).method=L.PUT,n.path="".concat(jr,"/").concat(encodeURIComponent(r)),n.params=B({cover_url:I("string",i)?i:null,cover_file:k(i)?i:null,name:s,data:o,custom_type:a,operators:u}),n}return u(t,e),t}(Q),Mh=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.channel=new xh(t,n),r}return u(t,e),t}(K),Ph=function(e){function t(t){var n=this,r=t.channelUrl;return(n=e.call(this)||this).method=L.DELETE,n.path="".concat(jr,"/").concat(encodeURIComponent(r)),n}return u(t,e),t}(Q);!function(e){u((function(t,n){return e.call(this,t,n)||this}),e)}(K);var xh=function(e){function n(n,r){var i,s=this;return(s=e.call(this,n,r)||this)._lastParticipantCountUpdated=0,s.participantCount=0,s.operators=[],s.channelType=t.ChannelType.OPEN,s.participantCount=null!==(i=r.participant_count)&&void 0!==i?i:0,s.operators=Array.isArray(r.operators)?r.operators.map((function(e){return new Ui(n,e)})):[],s}return u(n,e),n.payloadify=function(e){return e?B(c(c({},Cu.payloadify(e)),{participant_count:e.participantCount,operators:e.operators.map((function(e){return Ui.payloadify(e)}))})):null},n.prototype.serialize=function(){return ki(this)},n.prototype.isOperator=function(e){return e instanceof Ui?this.isOperator(e.userId):this.operators.some((function(t){return t.userId===e}))},n.prototype._updateParticipantCount=function(e,t){return t>this._lastParticipantCountUpdated&&(this.participantCount=e,this._lastParticipantCountUpdated=t,!0)},n.prototype.createParticipantListQuery=function(e){return new Uh(this._iid,this.url,e)},n.prototype.refresh=function(){return l(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,kh.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,e.sent()]}}))}))},n.prototype.enter=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Ih({channelUrl:this.url}),[4,e.send(t)];case 1:return n=o.sent(),r=n.as(Ch),i=r.participantCount,s=r.ts,this._updateParticipantCount(i,s),kh.of(this._iid).setEnteredToCache(this),[2]}}))}))},n.prototype.exit=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Sh({channelUrl:this.url}),[4,e.send(t)];case 1:return n=o.sent(),r=n.as(Nh),i=r.participantCount,s=r.ts,this._updateParticipantCount(i,s),kh.of(this._iid).setExitedToCache(this),to.of(this._iid).fileMessageQueue.cancel(this),[2]}}))}))},n.prototype.updateChannel=function(e){return l(this,void 0,void 0,(function(){var t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return t=c(c({},Oh),e),Ri(function(e){return N("string",e.operatorUserIds,!0)&&(I("string",e.coverUrlOrImage)||k(e.coverUrlOrImage)||null===e.coverUrlOrImage)&&I("string",e.name,!0)&&I("string",e.data,!0)&&I("string",e.customType,!0)}(t)).throw(E.invalidParameters),n=Wi.of(this._iid).requestQueue,r=new Lh(c({channelUrl:this.url},t)),[4,n.send(r)];case 1:return i=o.sent(),s=i.as(Mh).channel,this._update(s),[4,kh.of(this._iid).upsertChannelsToCache([s])];case 2:return o.sent(),[2,this]}}))}))},n.prototype.updateChannelWithOperatorUserIds=function(e,t,n,r,i){return l(this,void 0,void 0,(function(){var s;return h(this,(function(o){return s=c(c({},Oh),{name:e,coverUrlOrImage:t,data:n,operatorUserIds:r,customType:i}),[2,this.updateChannel(s)]}))}))},n.prototype.delete=function(){return l(this,void 0,void 0,(function(){var e,t;return h(this,(function(n){switch(n.label){case 0:return e=Wi.of(this._iid).requestQueue,t=new Ph({channelUrl:this.url}),[4,e.send(t)];case 1:return n.sent(),[4,kh.of(this._iid).removeChannelsFromCache([this.url])];case 2:return n.sent(),[2]}}))}))},n.prototype.sendUserMessage=function(t){return Ri(!t.isPinnedMessage).throw(E.notSupportedError),e.prototype.sendUserMessage.call(this,t)},n.prototype.sendFileMessage=function(t){return Ri(!t.isPinnedMessage).throw(E.notSupportedError),e.prototype.sendFileMessage.call(this,t)},n}(Cu),qh=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return u(t,e),t}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onUserEntered=ee,t.onUserExited=ee,t.onChannelParticipantCountChanged=ee,t.onPollUpdated=ee,t.onPollVoted=ee,t.onPollDeleted=ee,t}return u(t,e),t}((function(){this.onUserMuted=ee,this.onUserUnmuted=ee,this.onUserBanned=ee,this.onUserUnbanned=ee,this.onChannelChanged=ee,this.onChannelDeleted=ee,this.onChannelFrozen=ee,this.onChannelUnfrozen=ee,this.onOperatorUpdated=ee,this.onChannelMemberCountChanged=ee,this.onMetaDataCreated=ee,this.onMetaDataUpdated=ee,this.onMetaDataDeleted=ee,this.onMetaCounterCreated=ee,this.onMetaCounterUpdated=ee,this.onMetaCounterDeleted=ee,this.onMessageReceived=ee,this.onMessageUpdated=ee,this.onMessageDeleted=ee,this.onMentionReceived=ee,this.onReactionUpdated=ee,this.onThreadInfoUpdated=ee}))),Fh=function(e){function t(t){var n=this,r=t.token,i=t.limit,s=t.nameKeyword,o=t.urlKeyword,a=t.customTypes,u=t.includeFrozen,c=t.includeMetaData;return(n=e.call(this)||this).method=L.GET,n.path=jr,n.params=B({token:r,limit:i,name_contains:s,url_contains:o,custom_types:a,show_frozen:u,show_metadata:c}),n}return u(t,e),t}(Q),zh=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.token=null,r.channels=[],r.ts=null;var i=n.next,s=n.channels,o=n.ts;return r.token=i,s&&s.length>0&&(r.channels=s.map((function(e){return new xh(t,e)}))),r.ts="number"==typeof o?o:null,r}return u(t,e),t}(K),Hh=function(e){function t(t,n){var r,i,s,o,a,u=this;return(u=e.call(this,t,n)||this).includeFrozen=!0,u.includeMetaData=!0,u.nameKeyword=null,u.urlKeyword=null,u.customTypes=null,u.includeFrozen=null===(r=n.includeFrozen)||void 0===r||r,u.includeMetaData=null===(i=n.includeMetaData)||void 0===i||i,u.nameKeyword=null!==(s=n.nameKeyword)&&void 0!==s?s:null,u.urlKeyword=null!==(o=n.urlKeyword)&&void 0!==o?o:null,u.customTypes=null!==(a=n.customTypes)&&void 0!==a?a:null,u}return u(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&I("boolean",this.includeFrozen)&&I("boolean",this.includeMetaData)&&I("string",this.nameKeyword,!0)&&I("string",this.urlKeyword,!0)&&N("string",this.customTypes,!0)},t.prototype.next=function(){return l(this,void 0,void 0,(function(){var e,t,n,r,i,s;return h(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,e=Wi.of(this._iid).requestQueue,t=new Fh(c(c({},this),{token:this._token})),[4,e.send(t)]):[3,3]:[3,6];case 1:return n=o.sent(),r=n.as(zh),i=r.channels,s=r.token,this._token=s,this._hasNext=!!s,[4,kh.of(this._iid).upsertChannelsToCache(i)];case 2:return o.sent(),this._isLoading=!1,[2,i];case 3:return[2,[]];case 4:throw E.queryInProgress;case 5:return[3,7];case 6:throw E.invalidParameters;case 7:return[2]}}))}))},t}(ls),jh=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="openChannel",t}return u(t,e),t.prototype.init=function(t,n){var r=n.sdkState,i=n.dispatcher,s=n.sessionManager,o=n.requestQueue,a=n.logger,u=n.onlineDetector,c=n.cacheContext;e.prototype.init.call(this,t,{sdkState:r,dispatcher:i,sessionManager:s,requestQueue:o,logger:a,onlineDetector:u,cacheContext:c}),this._manager=new kh(t,{sdkState:r,dispatcher:i,requestQueue:o})},t.prototype.createOpenChannelListQuery=function(e){return void 0===e&&(e={}),new Hh(this._iid,e)},t.prototype.addOpenChannelHandler=function(e,t){this._manager.addHandler(e,t)},t.prototype.removeOpenChannelHandler=function(e){this._manager.removeHandler(e)},t.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},t.prototype.buildOpenChannelFromSerializedData=function(e){return this._manager.buildOpenChannelFromSerializedData(e)},t.prototype.getChannel=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this._manager.getChannel(e)]}))}))},t.prototype.getChannelWithoutCache=function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this._manager.getChannelWithoutCache(e)]}))}))},t.prototype.createChannel=function(e){return void 0===e&&(e={}),l(this,void 0,void 0,(function(){return h(this,(function(t){return[2,this._manager.createChannel(e)]}))}))},t.prototype.createChannelWithOperatorUserIds=function(e,t,n,r,i){return l(this,void 0,void 0,(function(){var s;return h(this,(function(o){return(s=c({},Eh)).name=e,s.coverUrlOrImage=t,s.data=n,s.operatorUserIds=r,s.customType=i,[2,this._manager.createChannel(s)]}))}))},t}(Yi),Bh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Gh={};(function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(i){var s=Object.getOwnPropertyDescriptor(i,t);return s.get?s.get.call(arguments.length<3?e:n):s.value}}).apply(this,arguments)}var a=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0,i=n.length;r<i;r++)if(n[r].callback===t)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n,r=function(){n=i[s];try{n.callback.call(t,e)}catch(e){Promise.resolve().then((function(){throw e}))}n.options&&n.options.once&&t.removeEventListener(e.type,n.callback)},i=this.listeners[e.type].slice(),s=0,o=i.length;s<o;s++)r();return!e.defaultPrevented}}}]),t}(),u=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(c,t);var u=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,n)}}(c);function c(){var t;return e(this,c),(t=u.call(this)).listeners||a.call(s(t)),Object.defineProperty(s(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(t),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(s(t),"reason",{value:void 0,writable:!0,configurable:!0}),t}return n(c,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),o(r(c.prototype),"dispatchEvent",this).call(this,e)}}]),c}(a),c=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new u,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}var n=e;if(void 0===n)if("undefined"==typeof document)(n=new Error("This operation was aborted")).name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch(e){(n=new Error("This operation was aborted")).name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();function l(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(c.prototype[Symbol.toStringTag]="AbortController",u.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(l(e))if(e.fetch){var t=function(e){"function"==typeof e&&(e={fetch:e});var t=e,n=t.fetch,r=t.Request,i=void 0===r?n.Request:r,s=t.AbortController,o=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,a=void 0!==o&&o;if(!l({fetch:n,Request:i,AbortController:s,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:a}))return{fetch:n,Request:u};var u=i;(u&&!u.prototype.hasOwnProperty("signal")||a)&&((u=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var r=new i(e,t);return n&&Object.defineProperty(r,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),r}).prototype=i.prototype);var c=n;return{fetch:function(e,t){var n=u&&u.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var r;try{r=new DOMException("Aborted","AbortError")}catch(e){(r=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(r);var i=new Promise((function(e,t){n.addEventListener("abort",(function(){return t(r)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([i,c(e,t)])}return c(e,t)},Request:u}}(e),n=t.fetch,r=t.Request;e.fetch=n,e.Request=r,Object.defineProperty(e,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:c}),Object.defineProperty(e,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:u})}else console.warn("fetch() is not available, cannot install abortcontroller-polyfill")}("undefined"!=typeof self?self:Bh)})();var Qh=function(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}({__proto__:null,default:Gh},[Gh]),Kh="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Kh&&Kh,Vh="URLSearchParams"in Kh,Wh="Symbol"in Kh&&"iterator"in Symbol,Yh="FileReader"in Kh&&"Blob"in Kh&&function(){try{return new Blob,!0}catch(e){return!1}}(),Zh="FormData"in Kh,Xh="ArrayBuffer"in Kh;if(Xh)var Jh=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],$h=ArrayBuffer.isView||function(e){return e&&Jh.indexOf(Object.prototype.toString.call(e))>-1};function ed(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function td(e){return"string"!=typeof e&&(e=String(e)),e}function nd(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Wh&&(t[Symbol.iterator]=function(){return t}),t}function rd(e){this.map={},e instanceof rd?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function id(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function sd(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function od(e){var t=new FileReader,n=sd(t);return t.readAsArrayBuffer(e),n}function ad(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function ud(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Yh&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Zh&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Vh&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Xh&&Yh&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=ad(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Xh&&(ArrayBuffer.prototype.isPrototypeOf(e)||$h(e))?this._bodyArrayBuffer=ad(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Vh&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Yh&&(this.blob=function(){var e=id(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?id(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(od)}),this.text=function(){var e,t,n,r=id(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=sd(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Zh&&(this.formData=function(){return this.text().then(hd)}),this.json=function(){return this.text().then(JSON.parse)},this}rd.prototype.append=function(e,t){e=ed(e),t=td(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},rd.prototype.delete=function(e){delete this.map[ed(e)]},rd.prototype.get=function(e){return e=ed(e),this.has(e)?this.map[e]:null},rd.prototype.has=function(e){return this.map.hasOwnProperty(ed(e))},rd.prototype.set=function(e,t){this.map[ed(e)]=td(t)},rd.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},rd.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),nd(e)},rd.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),nd(e)},rd.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),nd(e)},Wh&&(rd.prototype[Symbol.iterator]=rd.prototype.entries);var cd=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ld(e,t){if(!(this instanceof ld))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof ld){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new rd(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new rd(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),cd.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function hd(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function dd(e,t){if(!(this instanceof dd))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new rd(t.headers),this.url=t.url||"",this._initBody(e)}ld.prototype.clone=function(){return new ld(this,{body:this._bodyInit})},ud.call(ld.prototype),ud.call(dd.prototype),dd.prototype.clone=function(){return new dd(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new rd(this.headers),url:this.url})},dd.error=function(){var e=new dd(null,{status:0,statusText:""});return e.type="error",e};var fd=[301,302,303,307,308];dd.redirect=function(e,t){if(-1===fd.indexOf(t))throw new RangeError("Invalid status code");return new dd(null,{status:t,headers:{location:e}})};var pd=Kh.DOMException;try{new pd}catch(Kh){(pd=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),pd.prototype.constructor=pd}function _d(e,t){return new Promise((function(n,r){var i=new ld(e,t);if(i.signal&&i.signal.aborted)return r(new pd("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var e,t,r={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new rd,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;setTimeout((function(){n(new dd(i,r))}),0)},s.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){r(new pd("Aborted","AbortError"))}),0)},s.open(i.method,function(e){try{return""===e&&Kh.location.href?Kh.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&(Yh?s.responseType="blob":Xh&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof rd?i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,td(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",o)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}_d.polyfill=!0,Kh.fetch||(Kh.fetch=_d,Kh.Headers=rd,Kh.Request=ld,Kh.Response=dd);var vd=Object.freeze({__proto__:null});t.AdminMessage=Rs,t.AppleCriticalAlertOptions=ws,t.ApplicationUserListQuery=th,t.BannedUserListQuery=ua,t.BaseChannel=Cu,t.BaseMessage=Cs,t.BlockedUserListQuery=ih,t.CachedChannelInfo=M,t.ConnectionHandler=Kc,t.Emoji=jl,t.EmojiCategory=Bl,t.EmojiContainer=Gl,t.FileMessage=Ps,t.FriendListQuery=ah,t.LocalCacheConfig=P,t.MemoryStore=Lc,t.MessageMetaArray=gs,t.MessageModule=ho,t.MessageRequestHandler=no,t.MessageSearchQuery=uo,t.MutedUserListQuery=sa,t.OGImage=Es,t.OGMetaData=bs,t.OpenChannel=xh,t.OpenChannelHandler=qh,t.OpenChannelListQuery=Hh,t.OpenChannelModule=jh,t.OperatorListQuery=na,t.Participant=Bc,t.ParticipantListQuery=Uh,t.Plugin=Ds,t.PreviousMessageListQuery=co,t.Reaction=ys,t.ReactionEvent=ms,t.RestrictedUser=Yo,t.RestrictionInfo=Wo,t.SendbirdChatOptions=O,t.SendbirdError=E,t.Sender=Ss,t.SessionHandler=Qc,t.ThreadInfo=ps,t.ThreadInfoUpdateEvent=ro,t.Thumbnail=As,t.UIKitConfigInfo=gi,t.User=Ui,t.UserEventHandler=Vc,t.UserMessage=Us,t.default=ch,e("default",r.exports),r.exports.__esModule,r.exports.PushTokenRegistrationState,r.exports.PushTriggerOption,r.exports.PushTokenType,r.exports.PushTemplate,r.exports.ConnectionState,r.exports.UserOnlineState,r.exports.LogLevel,r.exports.MessageType,r.exports.MessageTypeFilter,r.exports.MentionType,r.exports.ReplyType,r.exports.PushNotificationDeliveryOption,r.exports.SendingStatus,r.exports.ChannelType,r.exports.Role,r.exports.ReactionEventOperation,r.exports.MessageSearchOrder,r.exports.RestrictionType,r.exports.ReportCategory,r.exports.AdminMessage,r.exports.AppleCriticalAlertOptions,r.exports.ApplicationUserListQuery,r.exports.BannedUserListQuery,r.exports.BaseChannel,r.exports.BaseMessage,r.exports.BlockedUserListQuery,r.exports.CachedChannelInfo,r.exports.ConnectionHandler,r.exports.Emoji,r.exports.EmojiCategory,r.exports.EmojiContainer,r.exports.FileMessage,r.exports.FriendListQuery,r.exports.LocalCacheConfig,r.exports.MemoryStore,r.exports.MessageMetaArray,r.exports.MessageModule,r.exports.MessageRequestHandler,r.exports.MessageSearchQuery,r.exports.MutedUserListQuery,r.exports.OGImage,r.exports.OGMetaData,r.exports.OpenChannel,r.exports.OpenChannelHandler,r.exports.OpenChannelListQuery,r.exports.OpenChannelModule,r.exports.OperatorListQuery,r.exports.Participant,r.exports.ParticipantListQuery,r.exports.Plugin,r.exports.PreviousMessageListQuery,r.exports.Reaction,r.exports.ReactionEvent,r.exports.RestrictedUser,r.exports.RestrictionInfo,r.exports.SendbirdChatOptions,r.exports.SendbirdError,r.exports.Sender,r.exports.SessionHandler,r.exports.ThreadInfo,r.exports.ThreadInfoUpdateEvent,r.exports.Thumbnail,r.exports.UIKitConfigInfo,r.exports.User,r.exports.UserEventHandler,r.exports.UserMessage,r.exports.default}),{})}}}));

System.register("chunks:///_virtual/sendbird.mjs",["cc","./sendbird.mjs_cjs=&original=.cjs","./sendbird.cjs"],(function(e){var a,s;return{setters:[function(e){a=e.cclegacy},null,function(e){s=e.default}],execute:function(){a._RF.push({},"9607dEbSspNO5HXKRf00r2t","sendbird",void 0);e("default",s.default),e("ApplicationUserListQuery",s.ApplicationUserListQuery),e("ApplicationUserListQueryParams",s.ApplicationUserListQueryParams),e("BannedUserListQuery",s.BannedUserListQuery),e("BannedUserListQueryParams",s.BannedUserListQueryParams),e("BaseChannel",s.BaseChannel),e("BlockedUserListQuery",s.BlockedUserListQuery),e("BlockedUserListQueryParams",s.BlockedUserListQueryParams),e("CachedChannelInfo",s.CachedChannelInfo),e("ChannelType",s.ChannelType),e("ConnectionHandler",s.ConnectionHandler),e("ConnectionState",s.ConnectionState),e("DoNotDisturbPreference",s.DoNotDisturbPreference),e("Emoji",s.Emoji),e("EmojiCategory",s.EmojiCategory),e("EmojiContainer",s.EmojiContainer),e("Encryption",s.Encryption),e("FileCompat",s.FileCompat),e("FriendChangelogs",s.FriendChangelogs),e("FriendDiscovery",s.FriendDiscovery),e("FriendListQuery",s.FriendListQuery),e("FriendListQueryParams",s.FriendListQueryParams),e("InvitationPreference",s.InvitationPreference),e("LocalCacheConfig",s.LocalCacheConfig),e("LogLevel",s.LogLevel),e("MemoryStore",s.MemoryStore),e("MemoryStoreParams",s.MemoryStoreParams),e("MetaCounter",s.MetaCounter),e("MetaData",s.MetaData),e("MutedInfo",s.MutedInfo),e("MutedUserListQuery",s.MutedUserListQuery),e("MutedUserListQueryParams",s.MutedUserListQueryParams),e("OnlineDetectorListener",s.OnlineDetectorListener),e("OperatorListQuery",s.OperatorListQuery),e("OperatorListQueryParams",s.OperatorListQueryParams),e("Participant",s.Participant),e("Plugin",s.Plugin),e("PushTemplate",s.PushTemplate),e("PushTokenRegistrationState",s.PushTokenRegistrationState),e("PushTokens",s.PushTokens),e("PushTokenType",s.PushTokenType),e("PushTriggerOption",s.PushTriggerOption),e("ReportCategory",s.ReportCategory),e("RestrictedUser",s.RestrictedUser),e("RestrictionInfo",s.RestrictionInfo),e("RestrictionType",s.RestrictionType),e("Role",s.Role),e("_SendbirdChatOptions",s._SendbirdChatOptions),e("_SendbirdChatParams",s._SendbirdChatParams),e("SendbirdError",s.SendbirdError),e("SessionHandler",s.SessionHandler),e("SnoozePeriod",s.SnoozePeriod),e("StoreItem",s.StoreItem),e("UIKitConfigInfo",s.UIKitConfigInfo),e("User",s.User),e("UserEventHandler",s.UserEventHandler),e("UserOnlineState",s.UserOnlineState),e("UserUpdateParams",s.UserUpdateParams),e("OpenChannel",s.OpenChannel),e("OpenChannelCreateParams",s.OpenChannelCreateParams),e("OpenChannelHandler",s.OpenChannelHandler),e("OpenChannelListQuery",s.OpenChannelListQuery),e("OpenChannelListQueryParams",s.OpenChannelListQueryParams),e("OpenChannelModule",s.OpenChannelModule),e("OpenChannelUpdateParams",s.OpenChannelUpdateParams),e("ParticipantListQuery",s.ParticipantListQuery),e("ParticipantListQueryParams",s.ParticipantListQueryParams),e("SendbirdOpenChat",s.SendbirdOpenChat),e("AdminMessage",s.AdminMessage),e("AppleCriticalAlertOptions",s.AppleCriticalAlertOptions),e("BaseMessage",s.BaseMessage),e("BaseMessageCreateParams",s.BaseMessageCreateParams),e("BaseMessageUpdateParams",s.BaseMessageUpdateParams),e("FailedMessageHandler",s.FailedMessageHandler),e("FileInfo",s.FileInfo),e("FileMessage",s.FileMessage),e("FileMessageCreateParams",s.FileMessageCreateParams),e("FileMessageUpdateParams",s.FileMessageUpdateParams),e("MentionType",s.MentionType),e("MessageChangelogs",s.MessageChangelogs),e("MessageChangeLogsParams",s.MessageChangeLogsParams),e("MessageHandler",s.MessageHandler),e("MessageListParams",s.MessageListParams),e("MessageMetaArray",s.MessageMetaArray),e("MessageModule",s.MessageModule),e("MessageRequestHandler",s.MessageRequestHandler),e("MessageRetrievalParams",s.MessageRetrievalParams),e("MessageSearchOrder",s.MessageSearchOrder),e("MessageSearchQuery",s.MessageSearchQuery),e("MessageSearchQueryParams",s.MessageSearchQueryParams),e("MessageType",s.MessageType),e("MessageTypeFilter",s.MessageTypeFilter),e("OGImage",s.OGImage),e("OGMetaData",s.OGMetaData),e("PreviousMessageListQuery",s.PreviousMessageListQuery),e("PreviousMessageListQueryParams",s.PreviousMessageListQueryParams),e("PushNotificationDeliveryOption",s.PushNotificationDeliveryOption),e("Reaction",s.Reaction),e("ReactionEvent",s.ReactionEvent),e("ReactionEventOperation",s.ReactionEventOperation),e("ReplyType",s.ReplyType),e("ScheduledInfo",s.ScheduledInfo),e("ScheduledMessageRetrievalParams",s.ScheduledMessageRetrievalParams),e("Sender",s.Sender),e("SendingStatus",s.SendingStatus),e("ThreadedMessageListParams",s.ThreadedMessageListParams),e("ThreadInfo",s.ThreadInfo),e("ThreadInfoUpdateEvent",s.ThreadInfoUpdateEvent),e("Thumbnail",s.Thumbnail),e("ThumbnailSize",s.ThumbnailSize),e("UserMessage",s.UserMessage),e("UserMessageCreateParams",s.UserMessageCreateParams),e("UserMessageUpdateParams",s.UserMessageUpdateParams);a._RF.pop()}}}));

System.register("chunks:///_virtual/sendbird.mjs_cjs=&original=.cjs",["./sendbird.cjs","./cjs-loader.mjs"],(function(e,r){var t,s;return{setters:[function(r){t=r.__cjsMetaURL;var s={};s.__cjsMetaURL=r.__cjsMetaURL,s.default=r.default,e(s)},function(e){s=e.default}],execute:function(){t||s.throwInvalidWrapper("./sendbird.cjs",r.meta.url),s.require(t)}}}));

System.register("chunks:///_virtual/SetColor.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,n;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e._decorator,n=e.Component}],execute:function(){var c;o._RF.push({},"95897bvUIdM+Y+MPxS6dBdf","SetColor",void 0);var u=r.ccclass,i=(r.property,r.executeInEditMode);e("SetColor",u("SetColor")(c=i()(c=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o}(n))||c)||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/SettleManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./Res.ts","./NodeUtils.ts","./Player.ts","./UIConstant.ts","./TwitterManager.ts","./ZKHoldemSDKManager.ts"],(function(t){var n,e,a,r,s,i,o,c,u,l,h,f,d,p,g;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){r=t.cclegacy,s=t._decorator,i=t.Animation,o=t.Label},function(t){c=t.UIBase},function(t){u=t.uiclass},function(t){l=t.Res},function(t){h=t.onClick},function(t){f=t.Player},function(t){d=t.UIType},function(t){p=t.TwitterManager},function(t){g=t.ZKHoldemSDKManager}],execute:function(){var m;r._RF.push({},"55a21+guWlH1YsiNty8G9OK","SettleManager",void 0);var y=s.ccclass;s.property,t("SettleManager",y("SettleManager")(m=u({name:"SettleManager",zhName:"",prefabInfo:l.prefab.settle,type:d.UI})(m=function(t){function r(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return(n=t.call.apply(t,[this].concat(a))||this).onClickButtonCallback=null,n.allPlayers=[],n}n(r,t);var s=r.prototype;return s.onUILoad=function(){var t=e(a().mark((function t(){var n,r,s,i,c=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(this.getUI("confirmButton"),(function(){c.runPlayerOutAnimte(),c.scheduleOnce((function(){c.close(),c.onClickButtonCallback&&c.onClickButtonCallback()}),.5)})),this.won_msg=this.getUIComponent("won_msg",o),this.pokers=this.getUI("pokers"),this.avatars=this.getUI("avatars"),this.winbar=this.getUI("winbar"),this.winbar.active=!1,t.next=8,g.instance.getGameBoard(g.instance.game);case 8:return n=t.sent,t.next=11,g.instance.game.playerIndex();case 11:r=t.sent,(s=-1!==r&&n.winners.find((function(t){return t.address===n.permanentAccounts[r]})))?s&&h(this.getUI("share-x"),e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p.instance.retweet("I have just won "+s.amount+" chips on @zkHoldem.\n\nNo funny business involved.\n\nNo dealer. Instant Cash-in/out. 100% decentralized.\n\nPlay a hand now at: "+location.href.split("?")[0]+"\n\n#zkholdemisbased");case 1:case"end":return t.stop()}}),t)})))):(this.getUI("share-x").active=!1,this.getUI("confirmButton"),(i=this.getUI("confirmButton").getPosition().clone()).x=0,this.getUI("confirmButton").setPosition(i));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.addPlayer=function(t){this.avatars.addChild(t),this.allPlayers.push(t)},s.runPlayerOutAnimte=function(){for(var t=0;t<this.allPlayers.length;t++){this.allPlayers[t].getComponent(f).hiddenWon}},s.addPokerGroup=function(t){this.pokers.addChild(t)},s.showSettle=function(t){this.winbar.active=!0,this.won_msg.string=t,this.winbar.getComponent(i).play("showIn")},s.addCommunityPoker=function(t){this.pokers.addChild(t)},s.update=function(t){},r}(c))||m)||m);r._RF.pop()}}}));

System.register("chunks:///_virtual/SetWinSize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts"],(function(e){var t,i,n,o,r,s;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,o=e.view,r=e.Component},function(e){s=e.setNodeSize}],execute:function(){var c;i._RF.push({},"195fefWBvJIe4moO5FF01xQ","SetWinSize",void 0);var u=n.ccclass,l=(n.property,n.executeInEditMode);e("SetWinSize",u("SetWinSize")(c=l(c=function(e){function i(){return e.apply(this,arguments)||this}return t(i,e),i.prototype.start=function(){s(this.node,o.getVisibleSizeInPixel())},i}(r))||c)||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/shapeFlags.ts",["cc"],(function(E){var N;return{setters:[function(E){N=E.cclegacy}],execute:function(){N._RF.push({},"7e327ljuGpKhbTvbzfEvjMD","shapeFlags",void 0);E("ShapeFlags",{ELEMENT:1,FUNCTIONAL_COMPONENT:2,STATEFUL_COMPONENT:4,TEXT_CHILDREN:8,ARRAY_CHILDREN:16,SLOTS_CHILDREN:32,TELEPORT:64,SUSPENSE:128,COMPONENT_SHOULD_KEEP_ALIVE:256,COMPONENT_KEPT_ALIVE:512,COMPONENT:6});N._RF.pop()}}}));

System.register("chunks:///_virtual/shared.ts",["cc","./makeMap.ts","./patchFlags.ts","./shapeFlags.ts","./slotFlags.ts","./globalsWhitelist.ts","./codeframe.ts","./normalizeProp.ts","./domTagConfig.ts","./domAttrConfig.ts","./escapeHtml.ts","./looseEqual.ts","./toDisplayString.ts","./typeUtils.ts"],(function(e){var t,n;return{setters:[function(e){t=e.cclegacy},function(t){n=t.makeMap,e("makeMap",t.makeMap)},function(t){var n={};n.PatchFlagNames=t.PatchFlagNames,n.PatchFlags=t.PatchFlags,e(n)},function(t){e("ShapeFlags",t.ShapeFlags)},function(t){var n={};n.SlotFlags=t.SlotFlags,n.slotFlagsText=t.slotFlagsText,e(n)},function(t){e("isGloballyWhitelisted",t.isGloballyWhitelisted)},function(t){e("generateCodeFrame",t.generateCodeFrame)},function(t){var n={};n.normalizeClass=t.normalizeClass,n.normalizeProps=t.normalizeProps,n.normalizeStyle=t.normalizeStyle,n.parseStringStyle=t.parseStringStyle,n.stringifyStyle=t.stringifyStyle,e(n)},function(t){var n={};n.isHTMLTag=t.isHTMLTag,n.isSVGTag=t.isSVGTag,n.isVoidTag=t.isVoidTag,e(n)},function(t){var n={};n.includeBooleanAttr=t.includeBooleanAttr,n.isBooleanAttr=t.isBooleanAttr,n.isKnownHtmlAttr=t.isKnownHtmlAttr,n.isKnownSvgAttr=t.isKnownSvgAttr,n.isSSRSafeAttrName=t.isSSRSafeAttrName,n.isSpecialBooleanAttr=t.isSpecialBooleanAttr,n.propsToAttrMap=t.propsToAttrMap,e(n)},function(t){var n={};n.escapeHtml=t.escapeHtml,n.escapeHtmlComment=t.escapeHtmlComment,e(n)},function(t){var n={};n.looseEqual=t.looseEqual,n.looseIndexOf=t.looseIndexOf,e(n)},function(t){e("toDisplayString",t.toDisplayString)},null],execute:function(){e("genPropsAccessExp",(function(e){return m.test(e)?"__props."+e:"__props["+JSON.stringify(e)+"]"})),t._RF.push({},"3f5b0P3n19ESbzezeLu4X4E","shared",void 0);e("EMPTY_OBJ",Object.freeze({})),e("EMPTY_ARR",Object.freeze([])),e("NOOP",(function(){})),e("NO",(function(){return!1}));var o,r=/^on[^a-z]/,i=(e("isOn",(function(e){return r.test(e)})),e("isModelListener",(function(e){return e.startsWith("onUpdate:")})),e("extend",Object.assign),e("remove",(function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)})),Object.prototype.hasOwnProperty),a=(e("hasOwn",(function(e,t){return i.call(e,t)})),e("isArray",Array.isArray),e("isMap",(function(e){return"[object Map]"===c(e)})),e("isSet",(function(e){return"[object Set]"===c(e)})),e("isDate",(function(e){return"[object Date]"===c(e)})),e("isRegExp",(function(e){return"[object RegExp]"===c(e)})),e("isFunction",(function(e){return"function"==typeof e}))),s=e("isString",(function(e){return"string"==typeof e})),l=(e("isSymbol",(function(e){return"symbol"==typeof e})),e("isObject",(function(e){return null!==e&&"object"==typeof e}))),u=(e("isPromise",(function(e){return l(e)&&a(e.then)&&a(e.catch)})),e("objectToString",Object.prototype.toString)),c=e("toTypeString",(function(e){return u.call(e)})),f=(e("toRawType",(function(e){return c(e).slice(8,-1)})),e("isPlainObject",(function(e){return"[object Object]"===c(e)})),e("isIntegerKey",(function(e){return s(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e})),e("isReservedProp",n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted")),e("isBuiltInDirective",n("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo")),function(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}),p=/-(\w)/g,g=(e("camelize",f((function(e){return e.replace(p,(function(e,t){return t?t.toUpperCase():""}))}))),/\B([A-Z])/g),d=(e("hyphenate",f((function(e){return e.replace(g,"-$1").toLowerCase()}))),e("capitalize",f((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})))),m=(e("toHandlerKey",f((function(e){return e?"on"+d(e):""}))),e("hasChanged",(function(e,t){return!Object.is(e,t)})),e("invokeArrayFns",(function(e,t){for(var n=0;n<e.length;n++)e[n](t)})),e("def",(function(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})})),e("looseToNumber",(function(e){var t=parseFloat(e);return isNaN(t)?e:t})),e("toNumber",(function(e){var t=s(e)?Number(e):NaN;return isNaN(t)?e:t})),e("getGlobalThis",(function(){return o||(o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})})),/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/);t._RF.pop()}}}));

System.register("chunks:///_virtual/slotFlags.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){var e;s._RF.push({},"f836fGfO4dO7J8FJ5bWhtf9","slotFlags",void 0);var c=t("SlotFlags",{STABLE:1,DYNAMIC:2,FORWARDED:3});t("slotFlagsText",((e={})[c.STABLE]="STABLE",e[c.DYNAMIC]="DYNAMIC",e[c.FORWARDED]="FORWARDED",e));s._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFrameList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MathUtils.ts"],(function(e){var t,r,i,n,o,a,s,p,u,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,i=e.inheritsLoose,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,s=e._decorator,p=e.SpriteFrame,u=e.Sprite,c=e.Component},function(e){l=e.randomInt}],execute:function(){var h,y,f,m,d,g,b,F,k,x,_,S,w,v,z;a._RF.push({},"daad716l9hAD7J3YfzpV8tJ","SpriteFrameList",void 0);var I=s.ccclass,O=s.property,D=s.requireComponent,L=e("SpriteFrameItem",(h=I("SpriteFrameItem"),y=O(p),h((d=t((m=function(){r(this,"spriteFrame",d,this),r(this,"key",g,this)}).prototype,"spriteFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(m.prototype,"key",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=m))||f));e("SpriteFrameList",(b=I("SpriteFrameList"),F=D(u),k=O([L]),b(x=F((S=t((_=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"spriteFrames",S,n(t)),r(t,"changeOnShow",w,n(t)),r(t,"_index",v,n(t)),r(t,"_key",z,n(t)),t}i(t,e);var a=t.prototype;return a.setKey=function(e){return this.key=e,this._key},a.setIndex=function(e){this._index=e;var t,r=this.getComponent(u);r&&(r.spriteFrame=(null==(t=this.spriteFrames[e])?void 0:t.spriteFrame)||null);return e},a.random=function(){return this.setIndex(l(0,this.spriteFrames.length-1))},a.onEnable=function(){this.changeOnShow&&this.random()},o(t,[{key:"currentSpriteFrame",get:function(){return this.spriteFrames[this._index]}},{key:"length",get:function(){return this.spriteFrames.length}},{key:"index",get:function(){return this._index},set:function(e){this.setIndex(e)}},{key:"key",get:function(){return this._key},set:function(e){var t=this.spriteFrames.findIndex((function(t){return t.key===e}));this._key=e,this.setIndex(t)}}]),t}(c)).prototype,"spriteFrames",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(_.prototype,"changeOnShow",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=t(_.prototype,"_index",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(_.prototype,"index",[O],Object.getOwnPropertyDescriptor(_.prototype,"index"),_.prototype),z=t(_.prototype,"_key",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(_.prototype,"key",[O],Object.getOwnPropertyDescriptor(_.prototype,"key"),_.prototype),x=_))||x)||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFrameListAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./SpriteFrameList.ts"],(function(e){var t,r,n,i,o,a,p,c,l,s,u,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,p=e._decorator,c=e.ccenum,l=e.Sprite,s=e.AnimationClip,u=e.Component},function(e){h=e.EDITOR_NOT_IN_PREVIEW},function(e){d=e.SpriteFrameList}],execute:function(){var f,y,_,v,g,b,w,m,M,L;a._RF.push({},"13cbezi6AlAYJkVLH7qmBNc","SpriteFrameListAnimation",void 0);var k=p.ccclass,O=p.property,A=p.executeInEditMode,P=p.requireComponent,W=e("SpriteFrameListAnimationMode",function(e){return e[e.Once=1]="Once",e[e.OnceBackflow=2]="OnceBackflow",e[e.Loop=0]="Loop",e[e.PingPong=1]="PingPong",e}({}));c(W);e("SpriteFrameListAnimation",(f=k("SpriteFrameListAnimation"),y=P([l,d]),_=O({type:s.WrapMode}),v=O({type:s.WrapMode}),f(g=y(g=A((w=t((b=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"_preview",w,i(t)),n(t,"_wrapMode",m,i(t)),n(t,"_interval",M,i(t)),n(t,"playOnLoad",L,i(t)),t._count=0,t}r(t,e);var a=t.prototype;return a.onLoad=function(){(this.playOnLoad||h)&&this.play()},a.play=function(){var e=this;this._unscheduleAllCallbacks();var t=this.getComponent(d);if(this._count=0,t.length>0){var r=!1,n=!1,i=!1;switch(this._wrapMode){case s.WrapMode.Default:case s.WrapMode.Normal:break;case s.WrapMode.Reverse:n=!0;break;case s.WrapMode.Loop:i=!0;break;case s.WrapMode.LoopReverse:i=!0,n=!0;break;case s.WrapMode.PingPong:r=!0,i=!0;break;case s.WrapMode.PingPongReverse:r=!0,n=!0,i=!0}var o=n?t.length-1:0;t.index=o;var a=n;this._schedule((function(){a?o--:o++,o>=t.length&&(r?(a=!0,o=t.length-2):(e._count++,o=i?0:t.length-1)),o<0&&(r?(a=!1,o=1,e._count++):(n&&e._count++,i&&(o=n?t.length-1:0))),e._count>0&&!i?e._unscheduleAllCallbacks():t.index=o}),this.interval)}},a.stop=function(){this._unscheduleAllCallbacks()},a._schedule=function(e,t){this.schedule(e,t)},a._unscheduleAllCallbacks=function(){this.unscheduleAllCallbacks()},a.onDestroy=function(){var e;null==(e=this._sidList)||e.forEach((function(e){return clearInterval(e)}))},o(t,[{key:"preview",get:function(){return this._preview},set:function(e){this._preview=e,e?this.play():this.stop()}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(e){this._wrapMode=e}},{key:"interval",get:function(){return this._interval},set:function(e){this._interval=e}},{key:"count",get:function(){return this._count}}]),t}(u)).prototype,"_preview",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(b.prototype,"preview",[O],Object.getOwnPropertyDescriptor(b.prototype,"preview"),b.prototype),m=t(b.prototype,"_wrapMode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.WrapMode.Normal}}),t(b.prototype,"wrapMode",[v],Object.getOwnPropertyDescriptor(b.prototype,"wrapMode"),b.prototype),M=t(b.prototype,"_interval",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),t(b.prototype,"interval",[O],Object.getOwnPropertyDescriptor(b.prototype,"interval"),b.prototype),L=t(b.prototype,"playOnLoad",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=b))||g)||g)||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/StatusCode.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a8888ISSDhMeo4ALemG5/Jg","StatusCode",void 0);t("StatusCode",{Success:200,Error:400});e._RF.pop()}}}));

System.register("chunks:///_virtual/StorageModelBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ModelBase.ts","./LocalStorage.ts"],(function(t){var e,a,r,o,n,s,i;return{setters:[function(t){e=t.inheritsLoose,a=t.assertThisInitialized,r=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){n=t.cclegacy},function(t){s=t.ModelBase},function(t){i=t.LocalStorage}],execute:function(){n._RF.push({},"2f76cwt4HlF646Get13O076","StorageModelBase",void 0);var c=t("StorageModelMode",{Local:0,Remote:1,Mix:2});t("StorageModelBase",function(t){function n(e){var r,o,n;return(n=t.call(this,e.model)||this).mode=c.Local,n.modelName=e.name,n.mode=null!=(r=e.mode)?r:n.mode,n._remoteLoadData=e.remoteLoadData,n._remoteSaveData=e.remoteSaveData,n.initData=null!=(o=e.initData)?o:n.initData,n.watch(n._watchAll,a(n)),n.loadData(),n}e(n,t);var s=n.prototype;return s.initData=function(){return null},s._watchAll=function(){this.save()},s.loadData=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;break;case 2:t.t0=this.mode,t.next=t.t0===c.Local?5:t.t0===c.Remote?7:t.t0===c.Mix?11:18;break;case 5:return this._loadLocalData(),t.abrupt("break",18);case 7:if(!this._remoteLoadData){t.next=10;break}return t.next=10,this._remoteLoadData();case 10:return t.abrupt("break",18);case 11:if(!this._remoteLoadData){t.next=16;break}return t.next=14,this._remoteLoadData();case 14:t.next=17;break;case 16:this._loadLocalData();case 17:return t.abrupt("break",18);case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s._loadLocalData=function(){var t=i.getItem(this.modelName);try{t=JSON.parse(t)}catch(e){t=null}if(t)this._model=t;else{var e=this.initData();e&&(this._model=e),this.save()}},s.save=function(){var t=r(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=this.mode,t.next=t.t0===c.Local?3:t.t0===c.Remote?5:t.t0===c.Mix?9:13;break;case 3:return this._saveLocalData(),t.abrupt("break",13);case 5:if(!this._remoteSaveData){t.next=8;break}return t.next=8,this._remoteSaveData();case 8:return t.abrupt("break",13);case 9:return this._loadLocalData(),t.next=12,this._remoteSaveData();case 12:return t.abrupt("break",13);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s._saveLocalData=function(){i.setItem(this.modelName,JSON.stringify(this._model))},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(r){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){r("formatString",(function(r,e){if(Array.isArray(e))for(var t=0;t<e.length;t++)r=r.replace(new RegExp("(\\{"+t+"\\})","g"),e[t]);else for(var n in e)r=r.replace(new RegExp("(\\{"+n+"\\})","g"),e[n]);return r})),e._RF.push({},"204825lxutFKrl8zEWexvmQ","StringUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/SubUILeaderBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletManager.ts","./ComponentExpand.ts","./AssetsManager.ts","./Res.ts","./UIRankItem.ts","./MathUtils.ts","./EthereumUtils.ts","./HttpApi.ts","./tableEnums.ts","./GameHelper.ts","./TableManager.ts","./RichTextUtils.ts","./bignumber.mjs","./SpriteFrameList.ts","./NodeUtils.ts","./WebUtils.ts","./UIManager.ts","./UIInvite.ts","./UIBuyChips.ts","./UIToastManager.ts","./Tips.ts","./UIGifts.ts","./ZKHoldemSDKManager.ts"],(function(t){var e,n,i,a,s,r,o,c,u,p,f,h,g,l,d,m,I,v,U,b,C,y,k,w,x,T,S,E,M,A,_,P,B,R,N,L,D,V;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){a=t.cclegacy,s=t._decorator,r=t.Sprite,o=t.Button,c=t.Label,u=t.Node,p=t.RichText,f=t.instantiate,h=t.Prefab},function(t){g=t.WalletManager},function(t){l=t.ComponentExpand},function(t){d=t.AssetsManager},function(t){m=t.Res},function(t){I=t.UIRankItem},function(t){v=t.formatNumberToDigitGrouping},function(t){U=t.formatAddress},function(t){b=t.HttpApi},function(t){C=t.IncentiveProgramBoostType,y=t.Tables},function(t){k=t.setENSName,w=t.formatNumberValue},function(t){x=t.TableManager},function(t){T=t.createItalic,S=t.createColor},function(t){E=t.BigNumber},function(t){M=t.SpriteFrameList},function(t){A=t.onClick},function(t){_=t.WebUtils},function(t){P=t.UIManager},function(t){B=t.UIInvite},function(t){R=t.UIBuyChips},function(t){N=t.UIToastManager},function(t){L=t.showNetErrorTips},function(t){D=t.UIGifts},function(t){V=t.ZKHoldemSDKManager}],execute:function(){var H;a._RF.push({},"7308dwZrpRDC7ouvXB3UbF5","SubUILeaderBoard",void 0);var G=s.ccclass;s.property,t("SubUILeaderBoard",G("SubUILeaderBoard")(H=function(t){function a(){return t.apply(this,arguments)||this}e(a,t);var s=a.prototype;return s.init=function(){var t=n(i().mark((function t(e){var s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.instance=this,this.uiMain=e,this._onConnect(),this.offConnect=g.instance.onConnect(this._onConnect.bind(this)),this._onSdkInit(),this.offSdkInit=V.instance.onInit(n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s._onSdkInit();case 1:case"end":return t.stop()}}),t)})))),A(this.getUI("buy-in"),(function(){P.open(R)})),A(this.getUI("gift-button"),this.openGift,this),A(this.getUI("game-play"),(function(){e.create()})),A(this.getUI("claim"),n(i().mark((function t(){var e,n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.getUIComponent("claim",o).interactable){t.next=3;break}return t.abrupt("return");case 3:return s.setClaimActive(!1),t.prev=4,t.next=7,g.instance.getAddress();case 7:return e=t.sent,t.next=10,b.instance.claim({address:e});case 10:(n=t.sent)&&(200===n.status?(N.instance.showTxStageTips(n.data.hash,"Claim successfully.","Tips:","",!1),s.updateView()):L(n.code)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.error(t.t0);case 17:return t.prev=17,s.setClaimActive(!0),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[4,14,17,20]])})))),this.schedule((function(){e.isMainView||s.updateView()}),10);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.setClaimActive=function(t){this.getUIComponent("claim",r).grayscale=!t,this.getUIComponent("claim",o).interactable=t},s.onDestroy=function(){this._onSdkInit&&this._onSdkInit(),this.offConnect&&this.offConnect(),this.offChangeAccount&&this.offChangeAccount()},s._onConnect=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.instance.adapter){t.next=2;break}return t.abrupt("return");case 2:return this.updateView(),this.offChangeAccount&&this.offChangeAccount(),t.next=6,g.instance.onAccountsChanged(this.updateView.bind(this));case 6:this.offChangeAccount=t.sent;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.updateView=function(){var t=n(i().mark((function t(){var e,n,a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.instance.adapter){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,g.instance.getAddress();case 4:return e=t.sent,t.next=7,Promise.all([b.instance.getMyLeaderBoardInfo({address:e}),b.instance.getLeaderBoardList({page:1,size:8})]);case 7:n=t.sent,a=n[0],s=n[1],a&&this._updateView(a.data),s&&this._updateRank(s.data);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s._onSdkInit=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(V.instance.sdk){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,D.canClaim();case 4:this.getUI("gift-button").active=t.sent;case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.openGift=function(){var t,e=this;P.open(D,{onceEvents:{close:(t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.canClaim();case 2:e.getUI("gift-button").active=t.sent;case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}})},s._updateView=function(t){var e=t.totalClaimed,n=t.current,i=t.last;k(n.address,this.getUIComponent("address",c)),this.setClaimActive(i&&!i.claim),this.getUIComponent("chips-claimed",c).string=e?"Chips claimed:  "+w(e):"--",this.getUI("copy-invited").active=!!n.parent,this.getUI("copy-invited").off(u.EventType.TOUCH_END),n.parent&&A(this.getUI("copy-invited"),(function(){_.copyFromWeb(n.parent)})),this.getUI("invite").off(u.EventType.TOUCH_END),A(this.getUI("invite"),(function(){P.open(B,{arg:n.parent})})),this.getUIComponent("invited",c).string="Invited by: "+(n.parent?U(n.parent):"--"),this.getUIComponent("score",c).string=i?v(i.totalPt):"--",this.getUIComponent("rank",c).string=i?i.rank>1e3?">1,000":i.rank.toString():"--",this.getUIComponent("buy-in-pt",c).string=i?v(i.buyChipsPt):"--",this.getUIComponent("game-play-pt",c).string=i?v(i.gamePlayPt):"--",this.getUIComponent("referral-pt",c).string=i?v(i.referralPt):"--",this.getUIComponent("social-media-pt",c).string=i?v(i.socialMediaPt):"--",this.getUIComponent("claim-value",c).string=i&&!i.claim?w(i.bonus):"--",this.getUIComponent("buyin-value",c).string=w(n.buyChipsTotal),this.getUIComponent("game-play-value",c).string=n.gamePlayTotal,this.getUIComponent("social-media-value",c).string=n.socialMediaTotal+"/7";var a=i&&i.boost.value!==C.None;if(this.getUI("boost").active=a,this.getUI("buy-in-boost").active=a,this.getUI("game-play-boost").active=a,this.getUI("referral-boost").active=a,this.getUI("social-media-boost").active=a,a){var s=x.filterTable(y.IncentiveProgramBoostType,"value",i.boost.value)[0].percentage,r=function(t,e){var n=new E(e).minus(new E(e).div(1+s)).integerValue(E.ROUND_DOWN).toString();t.string=T(S("#26DAE6","Boosted")+S("#E226E6",v(n)+" PTS"))};this.getUIComponent("boost",p).string=T(S("#E66B26","NUT")+S("#E1E626","NUT")+S("#26DAE6","Boost")+S("#E226E6",new E(s).times(100).toString()+"%")),r(this.getUIComponent("buy-in-boost",p),i.buyChipsPt),r(this.getUIComponent("game-play-boost",p),i.gamePlayPt),r(this.getUIComponent("referral-boost",p),i.referralPt),r(this.getUIComponent("social-media-boost",p),i.socialMediaPt)}var o=0;i&&(i.percentageRank<=.05?o=3:i.percentageRank<=.2?o=2:i.percentageRank<=.5&&(o=1)),this.getUIComponent("badge",M).index=o},s._updateRank=function(){var t=n(i().mark((function t(e){var n,a,s,r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.list,e.total,t.next=3,d.resources.load(m.prefab.rankItem.path,h);case 3:for(a=t.sent,(s=this.getUI("ranking")).children.forEach((function(t){return t.active=!1})),r=0;r<n.length;r++)(o=s[r])||((o=f(a)).parent=s),o.active=!0,o.getComponent(I).init(r,n[r]);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a}(l))||H);a._RF.pop()}}}));

System.register("chunks:///_virtual/SubUINavigationBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts","./NodeUtils.ts","./GameConfig.ts"],(function(t){var n,o,i,e,c,a,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.sys},function(t){c=t.ComponentExpand},function(t){a=t.onClick},function(t){r=t.default}],execute:function(){var s;o._RF.push({},"bca0dGSEydLK5/wVcwJCQ5S","SubUINavigationBar",void 0);var u=i.ccclass;i.property,t("SubUINavigationBar",u("SubUINavigationBar")(s=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onLoad=function(){a(this.getUI("twitter"),(function(){e.openURL(r.instance.ZKHoldemConfig.twitter)})),a(this.getUI("discord"),(function(){e.openURL(r.instance.ZKHoldemConfig.discord)}))},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/SubUIUserInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts","./WalletManager.ts","./watch.ts","./ZKHoldemSDKManager.ts","./EventConstant.ts","./GameHelper.ts","./NodeUtils.ts","./UIMain.ts","./UIManager.ts","./UIUserSettings.ts","./SpriteFrameList.ts","./GameConfig.ts","./NumberLabel.ts","./SpriteFrameListAnimation.ts","./Meson.ts","./bignumber.mjs","./ethers.umd.mjs_cjs=&original=.js","./ethers.umd.js"],(function(t){var n,e,i,r,a,s,o,u,c,p,h,f,l,m,g,d,v,I,b,U,w,y,C,k,S,x,A,N,L,E,B;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){r=t.cclegacy,a=t._decorator,s=t.Button,o=t.UIOpacity,u=t.Sprite,c=t.Label,p=t.isValid,h=t.RichText},function(t){f=t.ComponentExpand},function(t){l=t.WalletManager},function(t){m=t.watch},function(t){g=t.ZKHoldemSDKManager},function(t){d=t.EventConstant},function(t){v=t.setProfilePic,I=t.setAvatarBorder,b=t.setENSName},function(t){U=t.onClick},function(t){w=t.UIMain},function(t){y=t.UIManager},function(t){C=t.UIUserSettings},function(t){k=t.SpriteFrameList},function(t){S=t.ChainNetwork2Info,x=t.default},function(t){A=t.NumberLabel},function(t){N=t.SpriteFrameListAnimation},function(t){L=t.Meson},function(t){E=t.BigNumber},null,function(t){B=t.default}],execute:function(){var M;r._RF.push({},"d04c8kiNANE7YInwUXAnE0d","SubUIUserInfo",void 0);var F=a.ccclass;a.property,t("SubUIUserInfo",F("SubUIUserInfo")(M=function(t){function r(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this).unwatchList=[],n}n(r,t);var a=r.prototype;return a.enableBuyChips=function(){this.getUIComponent("buy-chips",s).interactable=!0,this.getUIComponent("buy-chips",o).opacity=255},a.disableBuyChips=function(){this.getUIComponent("buy-chips",s).interactable=!1,this.getUIComponent("buy-chips",o).opacity=153},a.onLoad=function(){var t=e(i().mark((function t(){var n,r=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.on(d.PROFILE_PIC_CHANGE,this.updateAvatar,this),U(this.getUI("show-all"),this.showDetails,this),U(this.getUI("avatar"),this.showDetails,this),U(this.getUI("bridge"),(function(){L.open()})),g.instance.sdk?(this.init(),this.initBalance(),this.updateSuggestedBridgeAmount()):(n=g.instance.onInit(e(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(),r.init(),r.initBalance(),r.updateSuggestedBridgeAmount();case 4:case"end":return t.stop()}}),t)})))),this.unwatchList.push(n));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.showDetails=function(){w.instance.node.activeInHierarchy&&w.instance.node.parent?w.instance.switchTab("gameAccount"):y.open(C)},a.onDestroy=function(){this.unwatchList.forEach((function(t){return t()}))},a.init=function(){var t=e(i().mark((function t(){var n,r,a=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.instance.getAccount();case 2:n=t.sent,(r=function(){var t=e(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=n.value&&n.value[0],a.getUI("address-info").active=!!e,e&&(a.updateAvatar(),b(e,a.getUIComponent("id",c))),a.getUIComponent("chain-icon",k).key=S[x.instance.chainNetwork].chainId;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())(),this.unwatchList.push(m(n,r));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.updateAvatar=function(){var t=e(i().mark((function t(){var n,e,r,a,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.instance.sdk){t.next=4;break}return n=g.instance.onInit((function(){n(),s.updateAvatar()})),this.unwatchList.push(n),t.abrupt("return");case 4:return e=this.getUIComponent("avatar",u),r=this.getUIComponent("avatar-border",k),t.next=8,l.instance.getAddress();case 8:a=t.sent,v(a,e),I(a,r);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.initBalance=function(){var t=e(i().mark((function t(){var n,r,a,s=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=null,r=null,(a=function(){var t=e(i().mark((function t(){var e,a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([g.instance.sdk.getMyChips(),g.instance.sdk.getMyChips(!0)]);case 2:if(e=t.sent,a=e[0],o=e[1],p(s)&&s._ui){t.next=7;break}return t.abrupt("return");case 7:null!==n&&a.gt(n)?(s.getUIComponent("chips-balance",A).number=a.toNumber(),s.getUIComponent("chips-animation",N).play()):s.getUIComponent("chips-balance",A).setNumberSkipAnimation(a.toNumber()),null!==r&&o.gt(r)?s.getUIComponent("zchips-balance",A).number=o.toNumber():s.getUIComponent("zchips-balance",A).setNumberSkipAnimation(o.toNumber()),n=a,r=o,s.getUI("game-info").active=!0;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())(),this.schedule(a,3),this.unwatchList.push(g.instance.onInit(a));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.updateSuggestedBridgeAmount=function(){var t=e(i().mark((function t(){var n,r=this;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=function(){var t=e(i().mark((function t(){var n,e,a,s,o,u,c,p;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new E(.005),e=new E(200),a=new E(2.5),s=g.instance.sdk.ethBuyRatio,o=B.utils.parseEther(e.toString()).div(s),u=B.utils.formatEther(o),t.next=8,g.instance.sdk.gameAccountManager.estimateTotalRequireGasForOneGame();case 8:c=t.sent,p=n.plus(u).plus(a.times(B.utils.formatEther(c).toString())).toFixed(4,E.ROUND_UP),r.getUIComponent("suggested-bridge-amount",h).string="<color=#7846E3>Suggested bridge amount: </color><color=#BF37FF>"+p.toString()+" ETH</color>";case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())(),this.schedule(n,30);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r}(f))||M);r._RF.pop()}}}));

System.register("chunks:///_virtual/super-layout.ts",["./rollupPluginModLoBabelHelpers.js","cc","./super-scrollview.ts","./UIItem.ts"],(function(t){var e,i,o,n,r,s,h,a,d,c,l,u,f,g,T,p,v,m,y,x,_,O,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass,s=t.asyncToGenerator,h=t.regeneratorRuntime},function(t){a=t.cclegacy,d=t._decorator,c=t.ccenum,l=t.UITransform,u=t.Prefab,f=t.PageViewIndicator,g=t.EventHandler,T=t.Node,p=t.Vec3,v=t.Vec2,m=t.Size,y=t.NodeEventType,x=t.Component,_=t.instantiate},function(t){O=t.SuperScrollview},function(t){I=t.UIItem}],execute:function(){var w,B,A,b,H,R,L,S,P,z,E,D,F,M,C,V,k,G,N,X,Y,W,Z,U,j,q,J,K,Q,$,tt,et,it,ot,nt,rt,st,ht,at,dt,ct,lt,ut,ft,gt,Tt,pt,vt,mt,yt,xt,_t,Ot,It,wt,Bt,At,bt,Ht,Rt,Lt,St,Pt,zt,Et;a._RF.push({},"4430bdPVstIyrMzuiBW+hni","super-layout",void 0);var Dt=d.ccclass,Ft=d.property,Mt=d.requireComponent,Ct=1e-5,Vt=function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t}(Vt||{});c(Vt);var kt=function(t){return t[t.TOP_TO_BOTTOM=0]="TOP_TO_BOTTOM",t[t.BOTTOM_TO_TOP=1]="BOTTOM_TO_TOP",t}(kt||{});c(kt);var Gt=function(t){return t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",t}(Gt||{});c(Gt);var Nt=function(t){return t[t.NONE=0]="NONE",t[t.HEADER=1]="HEADER",t[t.FOOTER=2]="FOOTER",t}(Nt||{}),Xt=function(t){return t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t}(Xt||{});c(Xt);var Yt=function(t){return t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t}(Yt||{});c(Yt);t("SuperLayout",(w=Dt("SuperLayout"),B=Mt(l),A=Ft(O),b=Ft(l),H=Ft(u),R=Ft({type:Vt}),L=Ft({type:Xt,visible:function(){return this.layoutType==Vt.VERTICAL&&!this.autoCenter}}),S=Ft({type:Yt,visible:function(){return this.layoutType==Vt.HORIZONTAL&&!this.autoCenter}}),P=Ft({type:kt}),z=Ft({type:Gt}),E=Ft({tooltip:"=11Grid"}),D=Ft({tooltip:"Prefab"}),F=Ft({tooltip:""}),M=Ft({tooltip:""}),C=Ft({tooltip:""}),V=Ft({tooltip:""}),k=Ft({tooltip:""}),G=Ft({tooltip:""}),N=Ft({tooltip:""}),X=Ft({tooltip:""}),Y=Ft({tooltip:"",visible:function(){return this.isPageView}}),W=Ft({type:f,visible:function(){return this.isPageView}}),Z=Ft({slide:!0,range:[0,1,.01],tooltip:"",visible:function(){return this.isPageView}}),U=Ft({tooltip:",",visible:function(){return this.isPageView}}),j=Ft({type:g,visible:function(){return this.isPageView}}),q=Ft({tooltip:"",visible:function(){return!this.isPageView}}),J=Ft({tooltip:"",visible:function(){return this.autoCenter}}),K=Ft({type:T,tooltip:"View",visible:function(){return this.autoCenter}}),Q=Ft({tooltip:"Item",visible:function(){return this.autoCenter}}),$=Ft({tooltip:"/ "}),tt=Ft({tooltip:"/ "}),et=Ft(g),w(it=B(((Et=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"scrollView",nt,n(e)),o(e,"view",rt,n(e)),o(e,"prefab",st,n(e)),o(e,"layoutType",ht,n(e)),o(e,"indexVerticalAxisDirection",at,n(e)),o(e,"indexHorizontalAxisDirection",dt,n(e)),o(e,"verticalAxisDirection",ct,n(e)),o(e,"horizontalAxisDirection",lt,n(e)),o(e,"groupItemTotal",ut,n(e)),o(e,"multiple",ft,n(e)),o(e,"paddingTop",gt,n(e)),o(e,"paddingBottom",Tt,n(e)),o(e,"paddingLeft",pt,n(e)),o(e,"paddingRight",vt,n(e)),o(e,"spacingX",mt,n(e)),o(e,"spacingY",yt,n(e)),o(e,"affectedByScale",xt,n(e)),o(e,"isPageView",_t,n(e)),o(e,"pageTurningSpeed",Ot,n(e)),o(e,"indicator",It,n(e)),o(e,"scrollThreshold",wt,n(e)),o(e,"autoPageTurningThreshold",Bt,n(e)),o(e,"pageEvents",At,n(e)),o(e,"autoCenter",bt,n(e)),o(e,"centerTime",Ht,n(e)),o(e,"centerNode",Rt,n(e)),o(e,"centerAnchor",Lt,n(e)),o(e,"headerLoop",St,n(e)),o(e,"footerLoop",Pt,n(e)),o(e,"refreshItemEvents",zt,n(e)),e.stretchLock={},e._currPageIndex=0,e._lastPageIndex=0,e.isRestart=!1,e.scrollDirection=Nt.NONE,e.prevPos=new p(0,0,0),e._maxPrefabTotal=0,e.currentCreateItemTotal=0,e._itemTotal=0,e._dataList=[],e}i(e,t);var a=e.prototype;return a.onLoad=function(){var t,e,i,o=this;null==(t=this.transform)||t.setAnchorPoint(new v(.5,.5)),null==(e=this.transform)||e.setContentSize(this.view.contentSize),this.node.setPosition(p.ZERO),this.isPageView&&(this.autoCenter=!1),null==(i=this.scrollView.view)||i.node.on(T.EventType.SIZE_CHANGED,this.onViewSizeChange,this),Object.defineProperty(this.transform,"contentSize",{get:function(){return o.contentSize}}),Object.defineProperty(this.transform,"width",{get:function(){return o.contentSize.width}}),Object.defineProperty(this.transform,"height",{get:function(){return o.contentSize.height}})},a.onEnable=function(){this.addEventListener()},a.onDisable=function(){this.removeEventListener()},a.totalByData=function(t){this._dataList=t,this.total(t.length)},a.total=function(t,e){void 0===e&&(e=!1),this.currentCreateItemTotal=t,this.scrollDirection=Nt.HEADER,this.createItems(t,e);var i=t-this.itemTotal;return this._itemTotal=t,this.refreshItems(i,e),e||this.updateItems(),this.scrollView.startAutoScroll(),this.scrollView.release(),this.indicator&&this.indicator.setPageView(this.scrollView),this.autoCenter&&this.scrollToCenter(),this},a.updateItems=function(){return this.resetIndexStartToEnd(this.headerIndex),this},a.updateItemSize=function(t,e){this.groupItemTotal>1||t&&e&&(t.__runtime_size=e,this.onChangeChildSize(t.getComponent(l)))},a.scrollToCenter=function(){this.soonFinish()},a.scrollToHeader=function(t){var e,i,o,n,r=0;this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?(r=this.viewHeaderBoundary,this.indexVerticalAxisDirection==Xt.BOTTOM&&(r-=(null==(e=this.header)?void 0:e.height)+this.paddingTop+this.paddingBottom)):(r=this.viewFooterBoundary,this.indexVerticalAxisDirection==Xt.TOP&&(r+=(null==(i=this.header)?void 0:i.height)+this.paddingTop+this.paddingBottom)):this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?(r=this.viewHeaderBoundary,this.indexHorizontalAxisDirection==Yt.RIGHT&&(r+=(null==(o=this.header)?void 0:o.width)+this.paddingLeft+this.paddingRight)):(r=this.viewFooterBoundary,this.indexHorizontalAxisDirection==Yt.LEFT&&(r-=(null==(n=this.header)?void 0:n.width)+this.paddingLeft+this.paddingRight));this.scrollToIndex(0,t,new p(r,r))},a.scrollToFooter=function(t){var e=0;if(this.vertical){if(this.fixedItemHeight<this.view.height)return;var i,o;if(this.verticalAxisDirection==kt.TOP_TO_BOTTOM){if(e=this.viewFooterBoundary,this.indexVerticalAxisDirection==Xt.BOTTOM)e+=(null==(i=this.footer)?void 0:i.height)+this.paddingTop+this.paddingBottom}else if(e=this.viewHeaderBoundary,this.indexVerticalAxisDirection==Xt.TOP)e-=(null==(o=this.footer)?void 0:o.height)+this.paddingTop+this.paddingBottom}else{if(this.fixedItemWidth<this.view.width)return;var n,r;if(this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT){if(e=this.viewFooterBoundary,this.indexHorizontalAxisDirection==Yt.RIGHT)e-=(null==(n=this.footer)?void 0:n.width)+this.paddingLeft+this.paddingRight}else if(e=this.viewHeaderBoundary,this.indexHorizontalAxisDirection==Yt.LEFT)e+=(null==(r=this.footer)?void 0:r.width)+this.paddingLeft+this.paddingRight}this.scrollToIndex(this.itemTotal-1,t,new p(e,e),!0)},a.isNearFooter=function(t){var e=!1;if(t>this.footerIndex&&t<this.headerIndex){var i=Math.abs(t-this.headerIndex)<Math.abs(t-this.footerIndex);e=this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?!i:i:this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?!i:i}else t>this.footerIndex?e=this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM:this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT:t<this.headerIndex&&(e=this.vertical?this.verticalAxisDirection!=kt.TOP_TO_BOTTOM:this.horizontalAxisDirection!=Gt.LEFT_TO_RIGHT);return e},a.getFooterOffset=function(t){var e=this.footerIndex%this.groupItemTotal;return t%this.groupItemTotal-e+this.groupItemTotal},a.getHeaderOffset=function(t){return this.headerIndex%this.groupItemTotal-t%this.groupItemTotal+this.groupItemTotal},a.offsetToHeader=function(t){var e=0;e=this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.getHeaderOffset(t):this.getFooterOffset(t):this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.getHeaderOffset(t):this.getFooterOffset(t),e-=this.groupItemTotal;for(var i=0;i<e;i++)this.pushToHeader(!0)},a.offsetToFooter=function(t){var e=0;e=this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.getFooterOffset(t):this.getHeaderOffset(t):this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.getFooterOffset(t):this.getHeaderOffset(t),e-=this.groupItemTotal;for(var i=0;i<e;i++)this.pushToFooter(!0)},a.resetIndexStartToEnd=function(t){for(var e=0;e<this.node.children.length;e++){var i=this.node.children[e];i.__index=t,t++,(this.headerLoop||this.footerLoop)&&(t<0||t>=this.itemTotal)&&(t=0),this.notifyRefreshItem(i)}},a.resetIndexEndToStart=function(t){for(var e=this.node.children.length-1;e>=0;e--){var i=this.node.children[e];i.__index=t,t--,(this.headerLoop||this.footerLoop)&&t<0&&(t=this.itemTotal-1),this.notifyRefreshItem(i)}},a.scrollToIndex=function(t,e,i,o){var n;if(void 0===o&&(o=!1),!(isNaN(t)||t<0||t>this.itemTotal-1)){this.scrollView.stopAutoScroll(),this.isPageView&&this.scrollView.savePageIndex(t);var r=this.node.children.find((function(e){return e.__index==t})),s=this.isNearFooter(t);if(this.stretchLock.index=t,this.stretchLock.timeInSecond=e,this.stretchLock.boundary=i,this.stretchLock.reverse=o,!r){0==t&&this.pushToHeader(),t==this.itemTotal-1&&this.pushToFooter();var h=this.vertical&&this.verticalAxisDirection==kt.TOP_TO_BOTTOM||!this.vertical&&this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT;s?(this.offsetToFooter(t),h?this.resetIndexEndToStart(t):this.resetIndexStartToEnd(t)):(this.offsetToHeader(t),h?this.resetIndexStartToEnd(t):this.resetIndexEndToStart(t)),r=this.node.children.find((function(e){return e.__index==t}))}if(r){var a=r.getPosition().clone();this.autoCenter||(this.vertical?this.indexVerticalAxisDirection==Xt.TOP?a.y=o?this.getItemYMin(r.getComponent(l))-this.paddingBottom:this.getItemYMax(r.getComponent(l))+this.paddingTop:a.y=o?this.getItemYMax(r.getComponent(l))+this.paddingTop:this.getItemYMin(r.getComponent(l))-this.paddingBottom:this.indexHorizontalAxisDirection==Yt.LEFT?a.x=o?this.getItemXMax(r.getComponent(l))+this.paddingRight:this.getItemXMin(r.getComponent(l))-this.paddingLeft:a.x=o?this.getItemXMin(r.getComponent(l))-this.paddingLeft:this.getItemXMax(r.getComponent(l))+this.paddingRight);var d,c=null==(n=this.transform)?void 0:n.convertToWorldSpaceAR(a),u=this.view.convertToNodeSpaceAR(c);d=!this.autoCenter&&i?i:this.getCenterAnchor(r.getComponent(l),this.centerPosition),u.multiply(new p(-1,-1,1)).add(d),this.scrollView.scrollToAny(u,e,!0)}}},a.onViewSizeChange=function(){var t=s(h().mark((function t(){var e,i,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.isRestart=!0,this.createItems(this.currentCreateItemTotal),this.resetChilds(!0),this.scrollToHeader(),e=0;e<this.node.children.length;e++)i=this.node.children[e],o=i.getComponent(l),this.setAndSaveSizeAndScale(o);this.isRestart=!1;case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.setAndSaveSizeAndScale=function(t){t.setContentSize(this.getItemSize(t)),t.node.__size=t.contentSize.clone(),t.node.__scale=t.node.getScale().clone()},a.getCenterAnchor=function(t,e){var i=e.clone();if(this.vertical){var o=t.height*this.centerAnchor.y,n=t.height*t.anchorY;i.y-=o-n}else{var r=t.width*this.centerAnchor.x,s=t.width*t.anchorX;i.x+=r-s}return i},a.soonFinish=function(){if(this.autoCenter&&!this.scrollView.pullRefresh){this.scrollView.stopAutoScroll();for(var t=-1,e=new p(999999,999999),i=0;i<this.node.children.length;i++){var o,n=this.node.children[i],r=null==(o=this.transform)?void 0:o.convertToWorldSpaceAR(n.position),s=this.view.convertToNodeSpaceAR(r),h={width:!1,height:!1},a=this.getCenterAnchor(n.getComponent(l),this.centerPosition),d=s.subtract(a);h.width=Math.abs(d.x)<Math.abs(e.x),h.height=Math.abs(d.y)<Math.abs(e.y),(this.vertical&&h.height||!this.vertical&&h.width)&&(e=d,t=n.__index)}e.multiply(new p(-1,-1,1)),this.scrollView.scrollToAny(e,this.centerTime),this.node.emit("scroll-to-index",{index:t,data:this._dataList&&this._dataList[t]})}},a.getItemSize=function(t){var e=new m;if(this.vertical){var i=this.spacingX*(this.groupItemTotal-1);e.width=(this.accommodWidth-i)/this.groupItemTotal,e.height=t.height}else{var o=this.spacingY*(this.groupItemTotal-1);e.height=(this.accommodHeight-o)/this.groupItemTotal,e.width=t.width}return e},a.getItemYMax=function(t){if(!t)return 0;var e=this.getScaleHeight(t)*(1-t.anchorY);return t.node.position.y+e},a.getItemYMin=function(t){if(!t)return 0;var e=this.getScaleHeight(t)*t.anchorY;return t.node.position.y-e},a.getItemXMax=function(t){if(!t)return 0;var e=this.getScaleWidth(t)*(1-t.anchorX);return t.node.position.x+e},a.getItemXMin=function(t){if(!t)return 0;var e=this.getScaleWidth(t)*t.anchorX;return t.node.position.x-e},a.getStartX=function(t){if(!t)return 0;var e=0;if(this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT){var i=this.getScaleWidth(t)*t.anchorX;e=this.viewStartPoint.x+i}else{var o=this.getScaleWidth(t)*(1-t.anchorX);e=this.viewStartPoint.x-o}return e},a.getEndX=function(t){if(!t)return 0;var e=0;if(this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT){var i=this.getScaleWidth(t)*(1-t.anchorX);e=-this.viewStartPoint.x-i-this.paddingRight+this.paddingLeft}else{var o=this.getScaleWidth(t)*t.anchorX;e=-this.viewStartPoint.x+o+this.paddingLeft-this.paddingRight}return e},a.getStartY=function(t){if(!t)return 0;var e=0;if(this.verticalAxisDirection==kt.TOP_TO_BOTTOM){var i=this.getScaleHeight(t)*(1-t.anchorY);e=this.viewStartPoint.y-i}else{var o=this.getScaleHeight(t)*t.anchorY;e=this.viewStartPoint.y+o}return e},a.getEndY=function(t){if(!t)return 0;var e=0;if(this.verticalAxisDirection==kt.TOP_TO_BOTTOM){var i=this.getScaleHeight(t)*t.anchorY;e=-this.viewStartPoint.y+i+this.paddingBottom-this.paddingTop}else{var o=this.getScaleHeight(t)*(1-t.anchorY);e=-this.viewStartPoint.y-o-this.paddingTop+this.paddingBottom}return e},a.isAccommodateByTop=function(t){return this.getItemYMax(t)+this.paddingTop<.5*this.accommodHeight},a.isAccommodateByBottom=function(t){return this.getItemYMin(t)-this.paddingBottom>-.5*this.accommodHeight},a.isAccommodateByLeft=function(t){return this.getItemXMin(t)-this.paddingLeft>-.5*this.accommodWidth},a.isAccommodateByRight=function(t){return this.getItemXMax(t)+this.paddingRight<.5*this.accommodWidth},a.getRelativeByLeft=function(t,e){return this.getItemXMin(e)-this.spacingX-this.getScaleWidth(t)*(1-t.anchorX)},a.getRelativeByRight=function(t,e){return this.getItemXMax(e)+this.spacingX+this.getScaleWidth(t)*t.anchorX},a.getRelativeByTop=function(t,e){return this.getItemYMax(e)+this.spacingY+this.getScaleHeight(t)*t.anchorY},a.getRelativeByBottom=function(t,e){return this.getItemYMin(e)-this.spacingY-this.getScaleHeight(t)*(1-t.anchorY)},a.setItemPosition=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var n=new p;o?(n.x=this.getStartX(t),n.y=this.getStartY(t)):n=this.vertical?this.getVerticalRelativePosition(t,e,i):this.getHorizontalRelativePosition(t,e,i),t.node.setPosition(n)},a.getVerticalRelativePosition=function(t,e,i){var o=new p,n=!1;return n=this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?i?this.isAccommodateByLeft(e):this.isAccommodateByRight(e):i?this.isAccommodateByRight(e):this.isAccommodateByLeft(e),this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?o.x=i?n?this.getRelativeByLeft(t,e):this.getEndX(t):n?this.getRelativeByRight(t,e):this.getStartX(t):o.x=i?n?this.getRelativeByRight(t,e):this.getEndX(t):n?this.getRelativeByLeft(t,e):this.getStartX(t),this.verticalAxisDirection==kt.TOP_TO_BOTTOM?o.y=i?n?e.node.position.y:this.getRelativeByTop(t,e):n?e.node.position.y:this.getRelativeByBottom(t,e):o.y=i?n?e.node.position.y:this.getRelativeByBottom(t,e):n?e.node.position.y:this.getRelativeByTop(t,e),o},a.getHorizontalRelativePosition=function(t,e,i){var o=new p,n=!1;return n=this.verticalAxisDirection==kt.TOP_TO_BOTTOM?i?this.isAccommodateByTop(e):this.isAccommodateByBottom(e):i?this.isAccommodateByBottom(e):this.isAccommodateByTop(e),this.verticalAxisDirection==kt.TOP_TO_BOTTOM?o.y=i?n?this.getRelativeByTop(t,e):this.getEndY(t):n?this.getRelativeByBottom(t,e):this.getStartY(t):o.y=i?n?this.getRelativeByBottom(t,e):this.getEndY(t):n?this.getRelativeByTop(t,e):this.getStartY(t),this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?o.x=i?n?e.node.position.x:this.getRelativeByLeft(t,e):n?e.node.position.x:this.getRelativeByRight(t,e):o.x=i?n?e.node.position.x:this.getRelativeByRight(t,e):n?e.node.position.x:this.getRelativeByLeft(t,e),o},a.refreshItems=function(t,e){if(void 0===e&&(e=!1),t<0){var i=this.header;if(this.contentSize.height==this.view.height)for(var o=0;o<this.node.children.length;o++){var n=this.node.children[o];this.setItemPosition(n.getComponent(l),i,!1,0==o),i=n.getComponent(l)}else for(var r=0;r<-t;r++)this.headerLoop||this.footerLoop?this.pushToHeader():this.vertical&&this.verticalAxisDirection==kt.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?(this.pushToHeader(!0),this.pushToFooter()):(this.pushToFooter(!0),this.pushToHeader());var s=this.headerIndex>0?this.headerIndex:0;s+this.node.children.length>this.itemTotal&&(s+=t),s<0&&(s=0);for(var h=0;h<this.node.children.length;h++){var a=this.node.children[h];(this.headerLoop||this.footerLoop)&&s>this.itemTotal-1&&(s=0),a.__index=s,s++,e&&this.notifyRefreshItem(a)}this.scrollView.stopAutoScroll(),this.scrollView.startAutoScroll()}else for(var d=0;d<this.node.children.length;d++)this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.pushToFooter():this.pushToHeader():this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.pushToFooter():this.pushToHeader()},a.createItems=function(t,e){var i=this;if(void 0===e&&(e=!1),this.node.children.length>t)this.removeItems(t);else if(this.needAddPrefab()||!(this._maxPrefabTotal>0)||this._maxPrefabTotal!=this.node.children.length)for(var o,n,r=t-this.node.children.length,s=function(){var t=_(i.prefab),r=t.getComponent(l);if(i.setAndSaveSizeAndScale(r),t.__index=i.node.children.length,i.node.addChild(t),!1,o=i.node.children.length-2,n=0==t.__index?i.footer:i.node.children[o].getComponent(l),t.on(T.EventType.SIZE_CHANGED,(function(){i.onChangeChildSize(r)}),i,!0),t.on(T.EventType.TRANSFORM_CHANGED,(function(t){i.onChangeChildScale(t,r)}),i,!0),e&&i.notifyRefreshItem(t),i.setItemPosition(t.getComponent(l),n,false,0==t.__index),!i.needAddPrefab())return i._maxPrefabTotal=i.node.children.length,console.log("item",i._maxPrefabTotal),1},h=0;h<r&&!s();h++);},a.needAddPrefab=function(){var t=this.vertical?this.contentSize.height:this.contentSize.width;if(t>0&&t<(this.vertical?this.view.height:this.view.width)*this.multiple)return!0;return!1},a.onChangeChildSize=function(){var t=s(h().mark((function t(e){var i,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.node,!(this.groupItemTotal>1)){t.next=6;break}return o=i.__size,e.setContentSize(o),console.warn(" Size,"),t.abrupt("return");case 6:this.stretchLock.index==i.__index&&this.scrollToIndex(this.stretchLock.index,this.stretchLock.timeInSecond,this.stretchLock.boundary,this.stretchLock.reverse),this.resetStrectchItems();case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.onChangeChildScale=function(){var t=s(h().mark((function t(e,i){var o,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===T.TransformBit.SCALE){t.next=2;break}return t.abrupt("return");case 2:if(this.affectedByScale){t.next=4;break}return t.abrupt("return");case 4:if(o=i.node,!(this.groupItemTotal>1)){t.next=10;break}return n=o.__scale,i.node.setScale(n),console.warn(" Scale,"),t.abrupt("return");case 10:this.stretchLock.index==o.__index&&this.scrollToIndex(this.stretchLock.index,this.stretchLock.timeInSecond,this.stretchLock.boundary,this.stretchLock.reverse),this.resetStrectchItems();case 12:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),a.resetStrectchItems=function(){var t=this;if(!isNaN(this.stretchLock.index)){var e=this.node.children.findIndex((function(e){return e.__index==t.stretchLock.index}));if(-1!=e){for(var i=e;i>=0;i--){var o=this.node.children[i];i!=e&&(i<e&&this.setItemPosition(o.getComponent(l),this.node.children[i+1].getComponent(l),!0))}for(var n=e;n<this.node.children.length;n++){var r=this.node.children[n];n!=e&&this.setItemPosition(r.getComponent(l),this.node.children[n-1].getComponent(l))}return}}this.scrollDirection==Nt.HEADER?(this.unschedule(this.stretchToFooter),this.scheduleOnce(this.stretchToFooter)):(this.unschedule(this.stretchToHeader),this.scheduleOnce(this.stretchToHeader))},a.stretchToHeader=function(){for(var t=this.node.children.length-1;t>=0;t--){var e=this.node.children[t];t!=this.node.children.length-1&&this.setItemPosition(e.getComponent(l),this.node.children[t+1].getComponent(l),!0)}},a.stretchToFooter=function(){for(var t=0;t<this.node.children.length;t++){var e=this.node.children[t];0!=t&&this.setItemPosition(e.getComponent(l),this.node.children[t-1].getComponent(l))}},a.removeItems=function(t){for(var e=this.node.children.length-t,i=0;i<e;i++){var o=this.node.children[this.node.children.length-1];o.off(T.EventType.SIZE_CHANGED),o.off(T.EventType.TRANSFORM_CHANGED),this.node.removeChild(o),o.destroy()}},a.addEventListener=function(){this.node.on(y.TRANSFORM_CHANGED,this.onPositionChanged,this)},a.removeEventListener=function(){this.node.off(y.TRANSFORM_CHANGED,this.onPositionChanged,this)},a.resetChilds=function(t){if(void 0===t&&(t=!1),this.vertical&&this.fixedItemHeight<=this.view.height||!this.vertical&&this.fixedItemWidth<=this.view.width){var e,i=this.getStartX(this.header),o=this.getStartY(this.header);null==(e=this.header)||e.node.setPosition(new p(i,o))}if(t)if(this.vertical){var n,r=this.getStartX(this.header);null==(n=this.header)||n.node.setPosition(new p(r,this.header.node.position.y))}else{var s,h=this.getStartY(this.header);null==(s=this.header)||s.node.setPosition(new p(this.header.node.position.x,h))}this.stretchToFooter(),t||this.scrollView.startAutoScroll()},a.onTouchBegin=function(){this.stretchLock={}},a.getUsedScaleValue=function(t){return this.affectedByScale?Math.abs(t):1},a.getScaleWidth=function(t){if(!t)return 0;var e=t.node.__runtime_size;return(e?e.width:t.width)*this.getUsedScaleValue(t.node.scale.x)},a.getScaleHeight=function(t){if(!t)return 0;var e=t.node.__runtime_size;return(e?e.height:t.height)*this.getUsedScaleValue(t.node.scale.y)},a.onPositionChanged=function(){if(!this.isRestart){if(this.vertical?this.scrollView.prevLocation.y<this.scrollView.location.y?this.scrollDirection=Nt.FOOTER:this.scrollView.prevLocation.y>this.scrollView.location.y?this.scrollDirection=Nt.HEADER:this.scrollDirection=Nt.NONE:this.scrollView.prevLocation.x>this.scrollView.location.x?this.scrollDirection=Nt.FOOTER:this.scrollView.prevLocation.x<this.scrollView.location.x?this.scrollDirection=Nt.HEADER:this.scrollDirection=Nt.NONE,this.vertical)for(var t=0;t<this.node.children.length;t++){Math.abs(this.prevPos.y-this.node.position.y)>Ct&&(this.prevPos.y<this.node.position.y?this.pushToFooter():this.prevPos.y>this.node.position.y&&this.pushToHeader())}else for(var e=0;e<this.node.children.length;e++){Math.abs(this.prevPos.x-this.node.position.x)>Ct&&(this.prevPos.x>this.node.position.x?this.pushToFooter():this.prevPos.x<this.node.position.x&&this.pushToHeader())}this.prevPos=this.node.position.clone()}},a.pushToFooter=function(t){var e,i,o,n;(void 0===t&&(t=!1),this.vertical)?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?(t||this.headerBoundary-this.paddingTop>this.viewHeaderBoundary+(null==(e=this.header)?void 0:e.height))&&this.pushToFooterHandler():(t||this.footerBoundary-this.paddingTop>this.viewHeaderBoundary+(null==(i=this.header)?void 0:i.height))&&this.pushToHeaderHandler():this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?(t||this.headerBoundary+this.paddingLeft<this.viewHeaderBoundary-(null==(o=this.header)?void 0:o.width))&&this.pushToFooterHandler():(t||this.footerBoundary+this.paddingLeft<this.viewHeaderBoundary-(null==(n=this.header)?void 0:n.width))&&this.pushToHeaderHandler()},a.pushToHeader=function(t){var e,i,o,n;(void 0===t&&(t=!1),this.vertical)?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?(t||this.footerBoundary+this.paddingBottom<this.viewFooterBoundary-(null==(e=this.footer)?void 0:e.height))&&this.pushToHeaderHandler():(t||this.headerBoundary+this.paddingBottom<this.viewFooterBoundary-(null==(i=this.footer)?void 0:i.height))&&this.pushToFooterHandler():this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?(t||this.footerBoundary-this.paddingRight>this.viewFooterBoundary+(null==(o=this.footer)?void 0:o.width))&&this.pushToHeaderHandler():(t||this.headerBoundary-this.paddingRight>this.viewFooterBoundary+(null==(n=this.footer)?void 0:n.width))&&this.pushToFooterHandler()},a.pushToFooterHandler=function(){var t,e,i=null==(t=this.header)?void 0:t.node;if(this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.footerLoop:this.headerLoop:this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.footerLoop:this.headerLoop)this.footerIndex>=this.itemTotal-1?i.__index=0:i.__index=this.footerIndex+1;else{if(!this.footer||this.footerIndex>=this.itemTotal-1)return;i.__index=this.footerIndex+1}i.__index>=0&&i.__index<this.currentCreateItemTotal&&this.notifyRefreshItem(i),this.setItemPosition(this.header,this.footer),null==(e=this.header)||e.node.setSiblingIndex(this.node.children.length)},a.pushToHeaderHandler=function(){var t,e,i,o=null==(t=this.footer)?void 0:t.node;(i=this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.headerLoop:this.footerLoop:this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.headerLoop:this.footerLoop)||0!=this.headerIndex||(this.vertical?this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.isAccommodateByLeft(this.header):this.isAccommodateByRight(this.header):this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.isAccommodateByTop(this.header):this.isAccommodateByBottom(this.header))&&this.resetChilds(!0);if(i)0==this.headerIndex?o.__index=this.itemTotal-1:o.__index=this.headerIndex-1;else{if(!this.header||0==this.headerIndex)return;o.__index=this.headerIndex-1}o.__index>=0&&o.__index<this.currentCreateItemTotal&&this.notifyRefreshItem(o),this.setItemPosition(this.footer,this.header,!0),null==(e=this.footer)||e.node.setSiblingIndex(0)},a.notifyRefreshItem=function(t){var e=t.__index;t.getComponent(I).init(e,this._dataList&&this._dataList[e]),g.emitEvents(this.refreshItemEvents,t,t.__index)},r(e,[{key:"currPageIndex",get:function(){return this._currPageIndex}},{key:"lastPageIndex",get:function(){return this._lastPageIndex}},{key:"vertical",get:function(){return this.layoutType==Vt.VERTICAL}},{key:"horizontal",get:function(){return this.layoutType==Vt.HORIZONTAL}},{key:"transform",get:function(){return this.node.getComponent(l)}},{key:"accommodWidth",get:function(){return this.view.width-this.paddingLeft-this.paddingRight}},{key:"accommodHeight",get:function(){return this.view.height-this.paddingTop-this.paddingBottom}},{key:"header",get:function(){return 0==this.node.children.length?null:this.node.children[0].getComponent(l)}},{key:"footer",get:function(){return 0==this.node.children.length?null:this.node.children[this.node.children.length-1].getComponent(l)}},{key:"headerIndex",get:function(){return this.header?this.header.node.__index:-1}},{key:"footerIndex",get:function(){return this.footer?this.footer.node.__index:-1}},{key:"viewStartPoint",get:function(){var t=new p;return this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?t.x=-.5*this.view.width+this.paddingLeft:t.x=.5*this.view.width-this.paddingRight,this.verticalAxisDirection==kt.TOP_TO_BOTTOM?t.y=.5*this.view.height-this.paddingTop:t.y=-.5*this.view.height+this.paddingBottom,t}},{key:"viewHeaderBoundary",get:function(){return this.vertical?.5*this.view.height:-.5*this.view.width}},{key:"viewFooterBoundary",get:function(){return this.vertical?-.5*this.view.height:.5*this.view.width}},{key:"headerBoundary",get:function(){return this.header?this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.node.position.y+this.getItemYMax(this.header)+this.paddingTop:this.node.position.y+this.getItemYMin(this.header)-this.paddingBottom:this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.node.position.x+this.getItemXMin(this.header)-this.paddingLeft:this.node.position.x+this.getItemXMax(this.header)+this.paddingRight:0}},{key:"footerBoundary",get:function(){return this.footer?this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?this.node.position.y+this.getItemYMin(this.footer)-this.paddingBottom:this.node.position.y+this.getItemYMax(this.footer)+this.paddingTop:this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.node.position.x+this.getItemXMax(this.footer)+this.paddingRight:this.node.position.x+this.getItemXMin(this.footer)-this.paddingLeft:0}},{key:"centerHeaderBoundary",get:function(){var t,e=this.vertical?"y":"x";return t=this.centerNode?this.viewHeaderBoundary-this.centerNode.position[e]:this.viewHeaderBoundary-this.view.node.position[e],this.vertical&&this.verticalAxisDirection==kt.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.headerBoundary+t:this.footerBoundary+t}},{key:"centerFooterBoundary",get:function(){var t,e=this.vertical?"y":"x";return t=this.centerNode?this.viewFooterBoundary-this.centerNode.position[e]:this.viewFooterBoundary-this.view.node.position[e],this.vertical&&this.verticalAxisDirection==kt.TOP_TO_BOTTOM||this.horizontal&&this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?this.footerBoundary+t:this.headerBoundary+t}},{key:"isOfLeftBoundary",get:function(){if(this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Nt.HEADER?this.centerHeaderBoundary:0;if(this.headerLoop)return this.header?0:this.viewHeaderBoundary+this.node.position.x;if(!this.header||this.fixedItemWidth<=this.view.width)return this.viewHeaderBoundary+this.node.position.x;if(this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT){if(0==this.headerIndex)return this.headerBoundary}else if(this.footerIndex==this.itemTotal-1)return this.footerBoundary;return 0}},{key:"isOfTopBoundary",get:function(){if(!this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Nt.HEADER?this.centerHeaderBoundary:0;if(this.headerLoop)return this.header?0:this.viewHeaderBoundary+this.node.position.y;if(!this.header||this.fixedItemHeight<=this.view.height)return this.viewHeaderBoundary+this.node.position.y;if(this.verticalAxisDirection==kt.TOP_TO_BOTTOM){if(0==this.headerIndex)return this.headerBoundary}else if(this.footerIndex==this.itemTotal-1)return this.footerBoundary;return 0}},{key:"isOfRightBoundary",get:function(){if(this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Nt.FOOTER?this.centerFooterBoundary:0;if(this.footerLoop)return this.footer?0:this.viewFooterBoundary+this.node.position.x;if(!this.footer||this.fixedItemWidth<=this.view.width)return this.viewFooterBoundary+this.node.position.x;if(this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT){if(this.footerIndex==this.itemTotal-1)return this.footerBoundary}else if(0==this.headerIndex)return this.headerBoundary;return 0}},{key:"isOfButtomBoundary",get:function(){if(!this.vertical)return 0;if(this.autoCenter)return this.scrollDirection==Nt.FOOTER?this.centerFooterBoundary:0;if(this.footerLoop)return this.footer?0:this.viewFooterBoundary+this.node.position.y;if(!this.footer||this.fixedItemHeight<=this.view.height)return this.viewFooterBoundary+this.node.position.y;if(this.verticalAxisDirection==kt.TOP_TO_BOTTOM){if(this.footerIndex==this.itemTotal-1)return this.footerBoundary}else if(0==this.headerIndex)return this.headerBoundary;return 0}},{key:"fixedItemHeight",get:function(){return this.header?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?Math.abs(this.getItemYMax(this.header))+Math.abs(this.getItemYMin(this.footer)):Math.abs(this.getItemYMin(this.header))+Math.abs(this.getItemYMax(this.footer)):0}},{key:"fixedItemWidth",get:function(){return this.header?this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?Math.abs(this.getItemXMin(this.header))+Math.abs(this.getItemXMax(this.footer)):Math.abs(this.getItemXMax(this.header))+Math.abs(this.getItemXMin(this.footer)):0}},{key:"contentSize",get:function(){if(0==this.node.children.length)return this.view.contentSize;var t=new m(this.view.contentSize.width,this.view.contentSize.height);return this.vertical?this.verticalAxisDirection==kt.TOP_TO_BOTTOM?t.height=this.headerBoundary+-this.footerBoundary:t.height=this.footerBoundary+-this.headerBoundary:this.horizontalAxisDirection==Gt.LEFT_TO_RIGHT?t.width=this.footerBoundary+-this.headerBoundary:t.width=this.headerBoundary+-this.footerBoundary,t.width<this.view.contentSize.width&&(t.width=this.view.contentSize.width),t.height<this.view.contentSize.height&&(t.height=this.view.contentSize.height),t}},{key:"maxPrefabTotal",get:function(){return this._maxPrefabTotal}},{key:"itemTotal",get:function(){return this._itemTotal}},{key:"centerPosition",get:function(){if(!this._centerPosition)if(this._centerPosition=new p,this.autoCenter){if(this.centerNode){var t,e=null==(t=this.centerNode.parent)||null==(t=t.getComponent(l))?void 0:t.convertToWorldSpaceAR(this.centerNode.position);this._centerPosition=this.view.convertToNodeSpaceAR(e)}}else this.vertical?this.indexVerticalAxisDirection==Xt.TOP?this._centerPosition.y=this.viewHeaderBoundary:this._centerPosition.y=this.viewFooterBoundary:this.indexHorizontalAxisDirection==Yt.LEFT?this._centerPosition.x=this.viewHeaderBoundary:this._centerPosition.x=this.viewFooterBoundary;return this._centerPosition}}]),e}(x)).VerticalAxisDirection=kt,Et.HorizontalAxisDirection=Gt,nt=e((ot=Et).prototype,"scrollView",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(ot.prototype,"view",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=e(ot.prototype,"prefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=e(ot.prototype,"layoutType",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Vt.VERTICAL}}),at=e(ot.prototype,"indexVerticalAxisDirection",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Xt.TOP}}),dt=e(ot.prototype,"indexHorizontalAxisDirection",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Yt.LEFT}}),ct=e(ot.prototype,"verticalAxisDirection",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return kt.TOP_TO_BOTTOM}}),lt=e(ot.prototype,"horizontalAxisDirection",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Gt.LEFT_TO_RIGHT}}),ut=e(ot.prototype,"groupItemTotal",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ft=e(ot.prototype,"multiple",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),gt=e(ot.prototype,"paddingTop",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tt=e(ot.prototype,"paddingBottom",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pt=e(ot.prototype,"paddingLeft",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vt=e(ot.prototype,"paddingRight",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),mt=e(ot.prototype,"spacingX",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yt=e(ot.prototype,"spacingY",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xt=e(ot.prototype,"affectedByScale",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_t=e(ot.prototype,"isPageView",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ot=e(ot.prototype,"pageTurningSpeed",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),It=e(ot.prototype,"indicator",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=e(ot.prototype,"scrollThreshold",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Bt=e(ot.prototype,"autoPageTurningThreshold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),At=e(ot.prototype,"pageEvents",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bt=e(ot.prototype,"autoCenter",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ht=e(ot.prototype,"centerTime",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Rt=e(ot.prototype,"centerNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=e(ot.prototype,"centerAnchor",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v(.5,.5)}}),St=e(ot.prototype,"headerLoop",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt=e(ot.prototype,"footerLoop",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zt=e(ot.prototype,"refreshItemEvents",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=ot))||it)||it));a._RF.pop()}}}));

System.register("chunks:///_virtual/super-scrollview.ts",["./rollupPluginModLoBabelHelpers.js","cc","./super-layout.ts"],(function(t){var i,e,o,s,r,a,n,h,l,u,c,f,d,y,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,n=t._decorator,h=t.Vec2,l=t.EventHandler,u=t.PageView,c=t.Node,f=t.ScrollView,d=t.EventTouch,y=t.Vec3},function(t){g=t.SuperLayout}],execute:function(){var v,p,_,T,E,O,m,P,S,L,b,x,B,I,C,H,M,R;a._RF.push({},"72cf528Z4dK+ofNYmM2Xf22","super-scrollview",void 0);var k=n.ccclass,A=n.property,w=1e-4,F=new h,D=t("ScrollViewDirection",function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.NONE=2]="NONE",t}({}));t("SuperScrollview",(v=k("SuperScrollview"),p=A({tooltip:",horizontalverticalverticalhorizontalhorizontalvertical "}),_=A({displayName:"",tooltip:"",visible:function(){return this.pullRefresh}}),T=A({displayName:"Header",visible:function(){return this.pullRefresh}}),E=A({displayName:"",tooltip:"",visible:function(){return this.pullRefresh}}),O=A({displayName:"Footer",visible:function(){return this.pullRefresh}}),m=A({type:l,visible:function(){return this.pullRefresh}}),P=A({type:l,visible:function(){return this.pullRefresh}}),v((b=i((L=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(i=t.call.apply(t,[this].concat(r))||this).direction=D.NONE,o(i,"isTransmitEvent",b,s(i)),o(i,"pullRefresh",x,s(i)),o(i,"headerOutOffset",B,s(i)),o(i,"headerMultiple",I,s(i)),o(i,"footerOutOffset",C,s(i)),o(i,"footerMultiple",H,s(i)),o(i,"headerEvents",M,s(i)),o(i,"footerEvents",R,s(i)),i.prevLocation=new h,i.location=new h,i._touchBeganPosition=new h,i._touchEndPosition=new h,i.isMoveHeader=!1,i.isMoveFooter=!1,i.isLockHeader=!1,i.isLockFooter=!1,i.headerProgress=0,i.footerProgress=0,i.isCustomScroll=!1,i.canTouchMove=!0,i.isCallSoonFinish=!1,i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.layout.autoCenter&&(this.brake=.7)},a.onEnable=function(){t.prototype.onEnable.call(this),this.node.on(u.EventType.SCROLL_ENG_WITH_THRESHOLD,this.dispatchPageTurningEvent,this)},a.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(u.EventType.SCROLL_ENG_WITH_THRESHOLD,this.dispatchPageTurningEvent,this)},a.getPages=function(){return new Array(this.layout.itemTotal)},a._getContentTopBoundary=function(){return this._content?0==this.layout.isOfTopBoundary?this._topBoundary:this.layout.isOfTopBoundary:-1},a._getContentBottomBoundary=function(){return this._content?0==this.layout.isOfButtomBoundary?this._bottomBoundary:this.layout.isOfButtomBoundary:-1},a._getContentLeftBoundary=function(){return this._content?0==this.layout.isOfLeftBoundary?this._leftBoundary:this.layout.isOfLeftBoundary:-1},a._getContentRightBoundary=function(){return this._content?0==this.layout.isOfRightBoundary?this._rightBoundary:this.layout.isOfRightBoundary:-1},a._onTouchBegan=function(i,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.layout.onTouchBegin(),this.canTouchMove&&(this.direction=D.NONE,this.layout.isPageView&&(i.touch.getUILocation(F),h.set(this._touchBeganPosition,F.x,F.y)),t.prototype._onTouchBegan.call(this,i,e),this.isTransmitEvent&&this.transmitEvent(i,c.EventType.TOUCH_START))},a._onTouchMoved=function(i,e){var o,s;if(this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove){if(this.isTransmitEvent){if(this.direction==D.NONE){var r=i.getStartLocation(),a=i.getLocation(),n=Math.abs(r.x-a.x),h=Math.abs(r.y-a.y);n>h?this.direction=D.HORIZONTAL:h>n&&(this.direction=D.VERTICAL)}if(this.vertical&&this.direction===D.HORIZONTAL||this.horizontal&&this.direction==D.VERTICAL)return void this.transmitEvent(i,c.EventType.TOUCH_MOVE)}if(this.prevLocation=null==(o=i.touch)?void 0:o.getPreviousLocation(),this.location=null==(s=i.touch)?void 0:s.getLocation(),t.prototype._onTouchMoved.call(this,i,e),this.pullRefresh){var u=this._getHowMuchOutOfBoundary(),f=this.vertical?u.y:-u.x;f>0&&!this.isLockHeader&&!this.isLockFooter?(this.headerProgress=f<w?0:f/this.headerOutOffset,this.isMoveHeader=this.headerProgress>=this.headerMultiple,l.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:this.isMoveHeader?"wait":"touch"}),l.emitEvents(this.footerEvents,this,{action:!1,progress:0,stage:"release"})):f<0&&!this.isLockHeader&&!this.isLockFooter?(this.footerProgress=-f<w?0:-f/this.footerOutOffset,this.isMoveFooter=this.footerProgress>=this.footerMultiple,l.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:this.isMoveFooter?"wait":"touch"}),l.emitEvents(this.headerEvents,this,{action:!1,progress:0,stage:"release"})):0!=f||this.isLockHeader||this.isLockFooter||this.clearProgress()}}},a._onTouchEnded=function(i,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove&&(this.layout.isPageView&&(i.touch.getUILocation(F),h.set(this._touchEndPosition,F.x,F.y)),t.prototype._onTouchEnded.call(this,i,e),this.isTransmitEvent&&this.transmitEvent(i,c.EventType.TOUCH_END))},a._onTouchCancelled=function(i,e){this.isCallSoonFinish=!1,this.isCustomScroll=!1,this.canTouchMove&&(this.layout.isPageView&&(i.touch.getUILocation(F),h.set(this._touchEndPosition,F.x,F.y)),this.isTransmitEvent&&this.transmitEvent(i,c.EventType.TOUCH_CANCEL),t.prototype._onTouchCancelled.call(this,i,e))},a.scrollToAny=function(t,i,e){void 0===e&&(e=!0),this.isCustomScroll=!0,i?this._startAutoScroll(t,i,e,!0):this._moveContent(t)},a.release=function(){this.isMoveHeader=!1,this.isMoveFooter=!1,(this.isLockHeader||this.isLockFooter)&&(this.vertical&&this.isLockHeader&&(this._topBoundary+=this.headerOutOffset),this.vertical&&this.isLockFooter&&(this._bottomBoundary-=this.footerOutOffset),this.horizontal&&this.isLockHeader&&(this._leftBoundary-=this.headerOutOffset),this.horizontal&&this.isLockFooter&&(this._rightBoundary+=this.footerOutOffset),this.clearProgress(),this.layout.onPositionChanged(),this.isLockHeader=!1,this.isLockFooter=!1,this.startAutoScroll())},a.startAutoScroll=function(){this._autoScrolling=!0,this._outOfBoundaryAmountDirty=!0},a._startAutoScroll=function(i,e,o,s){if(void 0===s&&(s=!1),this.pullRefresh&&(this.isMoveHeader&&!this.isLockHeader?(this.vertical&&(this._topBoundary-=this.headerOutOffset,i.y-=this.headerOutOffset),this.horizontal&&(this._leftBoundary+=this.headerOutOffset,i.x+=this.headerOutOffset),this.isLockHeader=!0,l.emitEvents(this.headerEvents,this,{action:!0,progress:this.headerProgress,stage:"lock"})):this.isMoveFooter&&!this.isLockFooter&&(this.vertical&&(this._bottomBoundary+=this.footerOutOffset,i.y+=this.footerOutOffset),this.horizontal&&(this._rightBoundary-=this.footerOutOffset,i.x-=this.footerOutOffset),this.isLockFooter=!0,l.emitEvents(this.footerEvents,this,{action:!0,progress:this.footerProgress,stage:"lock"}))),t.prototype._startAutoScroll.call(this,i,e,o),!s&&this.layout.autoCenter){var r=this._calculateTouchMoveVelocity();this.isQuicklyScrollable(r)||this.soonFinish()}},a._updateScrollBar=function(i){if(t.prototype._updateScrollBar.call(this,new h(i.x,i.y)),!this._autoScrollBraking&&this._autoScrolling&&this.pullRefresh){var e=this.vertical?i.y:-i.x;if(e>0){var o=e<w?0:e/this.headerOutOffset;this.isLockHeader?(this.headerProgress=1==this.headerProgress?this.headerProgress:Math.max(o,1),l.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:"lock"})):(this.headerProgress=o<this.headerProgress?o:this.headerProgress,l.emitEvents(this.headerEvents,this,{action:!1,progress:this.headerProgress,stage:"release"}))}else if(e<0){var s=-e<w?0:-e/this.footerOutOffset;this.isLockFooter?(this.footerProgress=1==this.footerProgress?this.footerProgress:Math.max(s,1),l.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:"lock"})):(this.footerProgress=s<this.footerProgress?s:this.footerProgress,l.emitEvents(this.footerEvents,this,{action:!1,progress:this.footerProgress,stage:"release"}))}else 0==e&&(this.isLockHeader||this.isLockFooter||this.clearProgress())}},a.clearProgress=function(){l.emitEvents(this.headerEvents,this,{action:!1,progress:0,stage:"release"}),l.emitEvents(this.footerEvents,this,{action:!1,progress:0,stage:"release"})},a.dispatchPageTurningEvent=function(){this.layout._lastPageIndex!==this.layout._currPageIndex&&(this.layout._lastPageIndex=this.layout._currPageIndex,l.emitEvents(this.layout.pageEvents,this,u.EventType.PAGE_TURNING),this.node.emit(u.EventType.PAGE_TURNING,this))},a._handleReleaseLogic=function(i){this.layout.isPageView?(this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(f.EventType.SCROLL_ENDED))):t.prototype._handleReleaseLogic.call(this,i)},a._autoScrollToPage=function(){if(this._startBounceBackIfNeeded()){var t=this._getHowMuchOutOfBoundary();this._clampDelta(t),(t.x>0||t.y<0)&&(this.layout.horizontal?this.layout.horizontalAxisDirection==g.HorizontalAxisDirection.LEFT_TO_RIGHT?this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout._currPageIndex=0:this.layout.verticalAxisDirection==g.VerticalAxisDirection.TOP_TO_BOTTOM?this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout._currPageIndex=0),(t.x<0||t.y>0)&&(this.layout.horizontal?this.layout.horizontalAxisDirection==g.HorizontalAxisDirection.LEFT_TO_RIGHT?this.layout._currPageIndex=0:this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1:this.layout.verticalAxisDirection==g.VerticalAxisDirection.TOP_TO_BOTTOM?this.layout._currPageIndex=0:this.layout._currPageIndex=0===this.layout.itemTotal?0:this.layout.itemTotal-1),this.layout.indicator&&this.layout.indicator._changedState()}else{var i=new h;h.subtract(i,this._touchBeganPosition,this._touchEndPosition);var e=this.layout._currPageIndex,o=e+this.getDragDirection(i),s=this.layout.pageTurningSpeed*Math.abs(e-o);if(this.layout.footerLoop&&o>=this.layout.itemTotal&&(o=0),this.layout.headerLoop&&o<0&&(o=this.layout.itemTotal-1),o<this.layout.itemTotal){if(this.isScrollable(i,e,o))return void this.scrollToPage(o,s);var r=this._calculateTouchMoveVelocity();if(this.isQuicklyScrollable(r))return void this.scrollToPage(o,s)}this.scrollToPage(e,s)}},a.savePageIndex=function(t){return!(t<0||t>=this.layout.itemTotal)&&(this.layout._currPageIndex=t,this.layout.indicator&&this.layout.indicator._changedState(),!0)},a.scrollToPage=function(t,i){void 0===i&&(i=.3),t<0||t>=this.layout.itemTotal||this.savePageIndex(t)&&this.layout.scrollToIndex(t,i)},a.isQuicklyScrollable=function(t){if(this.horizontal){if(Math.abs(t.x)>this.layout.autoPageTurningThreshold)return!0}else if(this.vertical&&Math.abs(t.y)>this.layout.autoPageTurningThreshold)return!0;return!1},a.getDragDirection=function(t){return this.horizontal?0===t.x?0:this.layout.horizontalAxisDirection==g.HorizontalAxisDirection.LEFT_TO_RIGHT?t.x>0?this.layout.groupItemTotal:-this.layout.groupItemTotal:t.x<0?this.layout.groupItemTotal:-this.layout.groupItemTotal:0===t.y?0:this.layout.verticalAxisDirection==g.VerticalAxisDirection.TOP_TO_BOTTOM?t.y<0?this.layout.groupItemTotal:-this.layout.groupItemTotal:t.y>0?this.layout.groupItemTotal:-this.layout.groupItemTotal},a.isScrollable=function(t,i,e){var o=this.view;return!!o&&(this.horizontal?Math.abs(t.x)>=o.width*this.layout.scrollThreshold:!!this.vertical&&Math.abs(t.y)>=o.height*this.layout.scrollThreshold)},a.transmitEvent=function(t,i){var e=new d(t.getTouches(),t.bubbles,i);e.touch=t.touch,t.target.parent.dispatchEvent(e)},a.soonFinish=function(){this.isCallSoonFinish=!0,this.layout.soonFinish()},a._processAutoScrolling=function(t){var i=this._isNecessaryAutoScrollBrake(),e=i?.015:1;this._autoScrollAccumulatedTime+=t*(1/e);var o,s=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=s,s=(o-=1)*o*o*o*o+1);var r=this._autoScrollTargetDelta.clone();r.multiplyScalar(s);var a=this._autoScrollStartPosition.clone();a.add(r);var n=Math.abs(s-1)<=w;if(Math.abs(s-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(f.EventType.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var h=a.clone();h.subtract(this._autoScrollBrakingStartPosition),i&&h.multiplyScalar(e),a.set(this._autoScrollBrakingStartPosition),a.add(h)}else{var l=a.clone();l.subtract(this.getContentPosition());var u=this._getHowMuchOutOfBoundary(l);u.equals(y.ZERO,w)||(a.add(u),n=!0)}n&&(this._autoScrolling=!1),!this.layout.autoCenter||this.isCallSoonFinish||this.isCustomScroll||(this._autoScrollTotalTime<2||s>=.8)&&this.soonFinish();var c=a.clone();c.subtract(this.getContentPosition()),this._clampDelta(c),this._moveContent(c,n),this._dispatchEvent(f.EventType.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(f.EventType.SCROLL_ENDED))},r(i,[{key:"autoScrolling",set:function(t){this._autoScrolling=t}},{key:"layout",get:function(){var t;this._layout||(this._layout=null==(t=this.content)?void 0:t.getComponent(g));return this._layout}},{key:"curPageIdx",get:function(){return this.layout._currPageIndex}}]),i}(f)).prototype,"isTransmitEvent",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=i(L.prototype,"pullRefresh",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=i(L.prototype,"headerOutOffset",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),I=i(L.prototype,"headerMultiple",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),C=i(L.prototype,"footerOutOffset",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),H=i(L.prototype,"footerMultiple",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),M=i(L.prototype,"headerEvents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=i(L.prototype,"footerEvents",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=L))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/Switch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts"],(function(e){var t,i,r,o,n,s,a,c,p,l,y,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){s=e.cclegacy,a=e._decorator,c=e.Sprite,p=e.CCBoolean,l=e.SpriteFrame,y=e.Component},function(e){u=e.onClick}],execute:function(){var h,f,m,_,g,b,d,v,S,F,O,k,w,C,A,D,P,z,N,j,B;s._RF.push({},"04c460PgS5K55BIENi2VMl4","Switch",void 0);var L=a.ccclass,I=a.property,M=a.requireComponent;e("Switch",(h=L("Switch"),f=M(c),m=I(p),_=I({type:p,displayName:""}),g=I(p),b=I({type:p,displayName:""}),d=I(p),v=I({type:p,displayName:""}),S=I(l),F=I({type:l,displayName:""}),O=I(l),k=I({type:l,displayName:""}),w=I({type:p,displayName:""}),h(C=f((D=t((A=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"_editor",D,o(t)),r(t,"_isOnClick",P,o(t)),r(t,"_isActive",z,o(t)),r(t,"_activeSpriteFrame",N,o(t)),r(t,"_disableSpriteFrame",j,o(t)),r(t,"_grayscale",B,o(t)),t}i(t,e);var s=t.prototype;return s.onLoad=function(){this._isOnClick&&u(this.node,this._onClick,this),this.refresh()},s._onClick=function(){this.isActive=!this.isActive},s.refresh=function(){var e=this.getComponent(c);e.spriteFrame=this._isActive?this.activeSpriteFrame:this.disableSpriteFrame,this._grayscale&&!this._isActive&&(e.grayscale=!0),this.node.emit("switch-change",this._isActive)},n(t,[{key:"editor",get:function(){return this._editor},set:function(e){this._editor=e,this.refresh()}},{key:"isOnClick",get:function(){return this._isOnClick},set:function(e){this._isOnClick=e}},{key:"isActive",get:function(){return this._isActive},set:function(e){this._isActive=e,this.refresh()}},{key:"activeSpriteFrame",get:function(){return this._activeSpriteFrame},set:function(e){this._activeSpriteFrame=e,this.refresh()}},{key:"disableSpriteFrame",get:function(){return this._disableSpriteFrame},set:function(e){this._disableSpriteFrame=e,this.refresh()}},{key:"grayscale",get:function(){return this._grayscale},set:function(e){this._grayscale=e,this.refresh()}}]),t}(y)).prototype,"_editor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(A.prototype,"editor",[_],Object.getOwnPropertyDescriptor(A.prototype,"editor"),A.prototype),P=t(A.prototype,"_isOnClick",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(A.prototype,"isOnClick",[b],Object.getOwnPropertyDescriptor(A.prototype,"isOnClick"),A.prototype),z=t(A.prototype,"_isActive",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(A.prototype,"isActive",[v],Object.getOwnPropertyDescriptor(A.prototype,"isActive"),A.prototype),N=t(A.prototype,"_activeSpriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(A.prototype,"activeSpriteFrame",[F],Object.getOwnPropertyDescriptor(A.prototype,"activeSpriteFrame"),A.prototype),j=t(A.prototype,"_disableSpriteFrame",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(A.prototype,"disableSpriteFrame",[k],Object.getOwnPropertyDescriptor(A.prototype,"disableSpriteFrame"),A.prototype),B=t(A.prototype,"_grayscale",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(A.prototype,"grayscale",[w],Object.getOwnPropertyDescriptor(A.prototype,"grayscale"),A.prototype),C=A))||C)||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/table.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"bb281hx8mhMIJGvg+qD4l1S","table",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Table2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TableManager.ts"],(function(t){var e,a,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy},function(t){n=t.TableManager}],execute:function(){a._RF.push({},"a3ce21rx+xBhquc9eIrBVUe","Table",void 0);t("Table",function(){function t(){this._init=!1}var a=t.prototype;return a.init=function(t){if(!this._init){this._init=!0,this._tableName=t.name;try{this._raw=t.json,this._data=this._raw.table;for(var a,r=n.instance,i=e(this._raw.idField);!(a=i()).done;){var o=a.value;this._data.forEach((function(t){r.registerDataById(t[o],t)}))}}catch(e){throw new Error("Excel tableName:"+t.name+" err:"+e)}return this}},a.getTableName=function(){return this._tableName},a.getPath=function(){return this._path},a.getRows=function(){return this._data},a.getById=function(t){return n.getDataById(t)},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/tableEnums.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5009fcMybZEIKUWbzfylA/R","tableEnums",void 0);e("Tables",function(e){return e.ActivityType="ActivityType",e.IncentiveProgramBoostType="IncentiveProgramBoostType",e.IncentiveProgramTaskType="IncentiveProgramTaskType",e.I18n="I18n",e.PFPNft="PFPNft",e.PlayThemeType="PlayThemeType",e}({})),e("ActivityType",function(e){return e[e.INCENTIVE_PROGRAM=0]="INCENTIVE_PROGRAM",e}({})),e("IncentiveProgramBoostType",function(e){return e[e.None=0]="None",e[e.TWO_PAIRS=1]="TWO_PAIRS",e[e.THREE_KIND=2]="THREE_KIND",e[e.STRAIGHT=3]="STRAIGHT",e[e.FLUSH=4]="FLUSH",e[e.FULL_HOUSE=5]="FULL_HOUSE",e[e.FOUR_KIND=6]="FOUR_KIND",e[e.STRAIGHT_FLUSH=7]="STRAIGHT_FLUSH",e[e.ROYAL_FLUSH=8]="ROYAL_FLUSH",e}({})),e("IncentiveProgramTaskType",function(e){return e[e.BUY_CHIPS=0]="BUY_CHIPS",e[e.REFERRAL=1]="REFERRAL",e[e.GAME_PLAY=2]="GAME_PLAY",e[e.SOCIAL_MEDIA=3]="SOCIAL_MEDIA",e}({})),e("PlayThemeType",function(e){return e[e.Default=0]="Default",e[e.Azuki=1]="Azuki",e[e.BaycMayc=2]="BaycMayc",e[e.Ethlizard=3]="Ethlizard",e[e.CryptoonGoonz=4]="CryptoonGoonz",e[e.CryptoonGoonzPortal=5]="CryptoonGoonzPortal",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TableManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Table2.ts","./AssetsManager.ts","./Res.ts","./EditorUtils.ts","./QueueManager.ts","./PromiseUtils.ts"],(function(t){var e,n,r,a,i;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy,a=t._decorator},function(t){i=t.Table},null,null,null,null,null],execute:function(){var u;r._RF.push({},"0a6cdJCFaJMYaSJHzXXuiPy","TableManager",void 0);a.ccclass,a.property;var l=t("TableManager",function(){function t(){this._tables={},this._id2row={},this._cache=Object.create(null)}t.getDataById=function(t){return null},t.filterTable=function(t,e,n){return null},t.getTableByName=function(t){return null};var r=t.prototype;return r.waitInit=function(){return null},r.init=function(){return null},r._createTable=function(){var t=e(n().mark((function t(e){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=new i).init(e),this._tables[e.name]=r;case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r.registerDataById=function(t,e){if(this._id2row[t])throw new Error("excelidid:"+t+" data:"+JSON.stringify(e)+", :"+JSON.stringify(this._id2row[t]));this._id2row[t]=e},r.getDataById=function(t){return null},r.filterTable=function(t,e,n){var r=this._cache[t];r||(r=this._cache[t]=Object.create(null));var a=r[e];return a||(a=this._cache[t][e]=Object.create(null)),a[n]||(a[n]=this._tables[t].getRows().filter((function(t){return null}))),null},r.getTableByName=function(t){return null},t}());u=l,l.instance=new u,r._RF.pop()}}}));

System.register("chunks:///_virtual/Tips.ts",["cc","./UIManager.ts","./UITips.ts","./UITipsPanel.ts","./UIToastManager.ts","./I18n.ts"],(function(t){var e,n,o,s,i,r,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.UIManager},function(t){o=t.UITips},function(t){s=t.UITipsPanelConfig,i=t.UITipsPanel},function(t){r=t.UIToastManager},function(t){a=t.I18n}],execute:function(){function c(t,e){return void 0===e&&(e=!0),e?r.instance.showAwayToast(t,a.get("Error:")):r.instance.showTips(t,a.get("Error:"))}t({showErrorToast:c,showNetErrorTips:function(t){u[t]&&c(u[t],!0)},showTipsPanel:function(t){var e;e="string"==typeof t?(new s).set("text",t):t;return n.open(i,{arg:e})},showTipsText:function(t){return n.open(o,{arg:t})},showToast:function(t,e){void 0===e&&(e=!0);return e?r.instance.showAwayToast(t,a.get("Tips:")):r.instance.showTips(t,a.get("Tips:"))}}),e._RF.push({},"4fd6eBtw9NLC6kkr/Cc6j4m","Tips",void 0);var u={30001:"Session expired",30002:"Tweet not found",30003:"Tweet did not follow specified content",30004:"Tweet has already been used",30005:"Share rate limited to once per day",30006:"Tweet does not belong to the user",40001:"Activity not found",40002:"Activity settlement in progress",50001:"User not found",50002:" Already claimed",50003:"No amount available to claim"};e._RF.pop()}}}));

System.register("chunks:///_virtual/toDisplayString.ts",["cc","./shared.ts"],(function(t){var i,n,r,e,s,c,u,o,a;return{setters:[function(t){i=t.cclegacy},function(t){n=t.isString,r=t.isArray,e=t.isObject,s=t.objectToString,c=t.isFunction,u=t.isMap,o=t.isSet,a=t.isPlainObject}],execute:function(){i._RF.push({},"7ec20/NlglD/LwD10LlwZ4j","toDisplayString",void 0);t("toDisplayString",(function(t){return n(t)?t:null==t?"":r(t)||e(t)&&(t.toString===s||!c(t.toString))?JSON.stringify(t,g,2):String(t)}));var g=function t(i,n){return n&&n.__v_isRef?t(i,n.value):u(n)?((s={})["Map("+n.size+")"]=[].concat(n.entries()).reduce((function(t,i){var n=i[0],r=i[1];return t[n+" =>"]=r,t}),{}),s):o(n)?((c={})["Set("+n.size+")"]=[].concat(n.values()),c):!e(n)||r(n)||a(n)?n:String(n);var s,c};i._RF.pop()}}}));

System.register("chunks:///_virtual/TokenAbi.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9ec36uj6tlN4qwBdGvmrff6","TokenAbi",void 0);e("default",[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint256",name:"initialSupply",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/TweenUtils.ts",["cc"],(function(t){var n,e,o,r,a,i,c,u,l;return{setters:[function(t){n=t.cclegacy,e=t._decorator,o=t.tween,r=t.Tween,a=t.Node,i=t.UIOpacity,c=t.v3,u=t.UIRenderer,l=t.color}],execute:function(){n._RF.push({},"2e742FwrKBF1bvkWlaP4aWA","TweenUtils",void 0);e.ccclass,e.property;function p(t,n,e){return n in t?t[n]:e}function s(t,n){n.stop&&r.stopAllByTarget(t)}t("TweenUtils",function(){function t(){}return t.createPromise=function(t){var n=o(t);return n.start=function(){return new Promise((function(t){r.prototype.start.call(n.call(t))}))},n},t.toPromise=function(t){return new Promise((function(n){t.call(n).start()}))},t.fadeIn=function(t,n){void 0===n&&(n={}),s(t=t instanceof a?t.getComponent(i)||t.addComponent(i):t,n);var e=p(n,"endOpacity",255);return t.opacity=p(n,"startOpacity",n.useCurrentValue&&t.opacity!=e?t.opacity:0),t.node.active=!0,o(t).to(p(n,"duration",1),{opacity:e})},t.fadeOut=function(t,n){void 0===n&&(n={}),s(t=t instanceof a?t.getComponent(i)||t.addComponent(i):t,n);var e=p(n,"endOpacity",0);return o(t).set({opacity:p(n,"startOpacity",n.useCurrentValue&&t.opacity!=e?t.opacity:255)}).to(p(n,"duration",1),{opacity:p(n,"endOpacity",0)})},t.rotate=function(t,n){return void 0===n&&(n={}),s(t,n),o(t).by(p(n,"duration",10),{eulerAngles:c(0,0,-360)}).union().repeatForever()},t.antiRotate=function(t,n){return void 0===n&&(n={}),s(t,n),o(t).by(p(n,"duration",10),{eulerAngles:c(0,0,360)}).union().repeatForever()},t.white2Black=function(t,n){void 0===n&&(n={}),s(t,n);var e={val:p(n,"startValue",255)};return o(e).to(p(n,"duration",.5),{val:p(n,"endValue",0)},{onUpdate:function(){(t instanceof a?t.getComponent(u):t).color=l(e.val,e.val,e.val,255)}})},t.black2White=function(t,n){void 0===n&&(n={}),s(t,n);var e={val:p(n,"startValue",0)};return o(e).to(p(n,"duration",.5),{val:p(n,"endValue",255)},{onUpdate:function(){(t instanceof a?t.getComponent(u):t).color=l(e.val,e.val,e.val,255)}})},t.bezierTo=function(t,n,e,r,a,i){i=i||Object.create(null);return i.onUpdate=function(n,o){var i,u,l,p,s,d;t.position=(l=r,p=a,s=(1-(i=o))*(1-i)*(u=e).x+2*i*(1-i)*l.x+i*i*p.x,d=(1-i)*(1-i)*u.y+2*i*(1-i)*l.y+i*i*p.y,c(s,d,0))},o(t).to(n,{},i)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TwitterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StatusCode.ts","./GameStorageModel.ts","./HttpApi.ts","./Logger.ts","./ref.ts","./watch.ts","./Tips.ts"],(function(t){var e,n,r,o,s,a,c,i,u,f,p;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){s=t.StatusCode},function(t){a=t.GameStorageModel},function(t){c=t.HttpApi},function(t){i=t.Logger},function(t){u=t.shallowRef},function(t){f=t.watch},function(t){p=t.showErrorToast}],execute:function(){var h;o._RF.push({},"cf36cDFpxtNtZjKV2XaJXos","TwitterManager",void 0);var l=t("TwitterManager",function(){function t(){this._connecting=!1,this._userInfo=u(null)}var o=t.prototype;return o.init=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.instance.token){t.next=3;break}return t.next=3,this.getUserInfo();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.connect=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._connecting){t.next=2;break}return t.abrupt("return");case 2:return this._connecting=!0,t.prev=3,t.next=6,c.instance.twitterAuth();case 6:if(!(e=t.sent)||e.status!==s.Success){t.next=11;break}return a.instance.token=e.data.token,location.href=e.data.url,t.abrupt("return");case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),p(t.t0.message),i.error("connect twitter error ",t.t0);case 17:this._connecting=!1;case 18:case"end":return t.stop()}}),t,this,[[3,13]])})));return function(){return t.apply(this,arguments)}}(),o.disconnect=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._userInfo.value=null,c.instance.twitterDisconnect();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.retweet=function(t){var e="https://twitter.com/intent/tweet?text="+encodeURIComponent(t);window.open(e,"targetWindow","noopener,noreferrer,".concat("toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=500, height=434, top=224, left=603.5"))},o.onUserInfoChange=function(t){return f(this._userInfo,t)},o.getUserInfo=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.instance.getTwitterUserInfo();case 3:(e=t.sent)&&e.data&&(this._userInfo.value=e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i.error("get twitter user info error",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),e(t,[{key:"userInfo",get:function(){return this._userInfo.value}}]),t}());h=l,l.instance=new h,o._RF.pop()}}}));

System.register("chunks:///_virtual/Types.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"75e69RPyrVCD5nDwBSW/MI2","Types",void 0);e("WalletType",function(e){return e[e.MetaMask=0]="MetaMask",e[e.OKX=1]="OKX",e[e.WalletConnect=2]="WalletConnect",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/typeUtils.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2dbefgIWthF+rQyqQiW7aRR","typeUtils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/UIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts","./UIManager.ts","./UIConstant.ts","./EventTarget.ts","./TweenUtils.ts"],(function(n){var t,e,o,i,r,s,c,a,u,h,l,f,p,I,d;return{setters:[function(n){t=n.inheritsLoose,e=n.extends,o=n.createClass,i=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){s=n.cclegacy,c=n._decorator,a=n.Tween,u=n.UIOpacity},function(n){h=n.ComponentExpand},function(n){l=n.UIManager},function(n){f=n.UIEventType,p=n.UIStatus},function(n){I=n.EventTarget},function(n){d=n.TweenUtils}],execute:function(){var U;s._RF.push({},"129c2EWu0dMcpMAuQmocZsZ","UIBase",void 0);var k=c.ccclass;c.property,n("UIBase",k("UIBase")(U=function(n){function s(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this).children=[],t._closeIng=!1,t.disableAnimation=!1,t._eventTarget=new I,t._isCloseWithClickBlank=!1,t}t(s,n);var c=s.prototype;return c.setParent=function(n){var t=this._parent;t!==n&&(this._parent=n,t&&(t.children.splice(t.children.indexOf(this),1),t.node.emit(f.UI_CHILD_REMOVED)),n&&(n.children.push(this),n.node.emit(f.UI_CHILD_ADDED)),this.node.emit(f.UI_PARENT_CHANGED))},c.addChild=function(n){n.setParent(this)},c.pop=function(){return this.children.pop().close()},c.show=function(){this.children.forEach((function(n){n.show()}));try{this.onUIShow()}catch(n){console.error("onUIShow error:",n)}this.onRunShowAnimation(),this.node.active=!0},c.hide=function(){var n=i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.children.forEach((function(n){n.hide()})),n.next=3,this.onRunHideAnimation();case 3:this.node.active=!1;try{this.onUIHide()}catch(n){console.error("onUIHide error:",n)}case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.close=function(){var n=i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._closeIng&&l.instance.isActive(this)){n.next=2;break}return n.abrupt("return");case 2:return this._closeIng=!0,this._eventTarget.emit("close-before",this),this.children.forEach((function(n){n.close()})),n.next=7,this.onRunHideAnimation();case 7:this.setParent(null);try{this.onUIClose()}catch(n){console.error("onUIClose error:",n)}l.instance.close(this),this._eventTarget.emit("close",this),this._closeIng=!1;case 12:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.init=function(){try{this.onUIInit()}catch(n){console.error("onUIInit error:",n)}},c.onOpen=function(n){try{this.onUIOpen(n),this.onRunShowAnimation(),this._eventTarget.emit("open",this)}catch(n){console.error("onUIOpen error:",n)}},c.onLoad=function(){try{this.onUILoad()}catch(n){console.error("onUILoad error:",n)}},c.start=function(){try{this.onUIStart()}catch(n){console.error("onUIStart error:",n)}},c.onDestroy=function(){n.prototype.onDestroy.call(this),this.setParent(null),this._isCloseWithClickBlank&&this.unCloseWithClickBlank();try{this.onUIDestroy()}catch(n){console.error("onUIDestroy error:",n)}},c.onEnable=function(){try{this.onUIEnable()}catch(n){console.error("onUIEnable error:",n)}},c.onDisable=function(){try{this.onUIDisable()}catch(n){console.error("onUIDisable error:",n)}},c.update=function(n){try{this.onUIUpdate(n)}catch(n){console.error("onUIUpdate error:",n)}},c.onTopping=function(){try{this.onUITopping()}catch(n){console.error("onUITopping error:",n)}},c.onRunShowAnimation=function(){var n=i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.stopAllByTarget(this.node),!this.disableAnimation){n.next=5;break}this.node.active=!0,n.next=7;break;case 5:return n.next=7,this.onUIRunShowAnimation();case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.onRunHideAnimation=function(){var n=i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.stopAllByTarget(this.node),!this.disableAnimation){n.next=5;break}this.node.active=!1,n.next=7;break;case 5:return n.next=7,this.onUIRunHideAnimation();case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.onUIInit=function(){},c.onUIOpen=function(n){},c.onUIShow=function(){},c.onUIHide=function(){},c.onUIClose=function(){},c.onUILoad=function(){},c.onUIStart=function(){},c.onUIDestroy=function(){},c.onUIEnable=function(){},c.onUIDisable=function(){},c.onUIUpdate=function(n){},c.onUITopping=function(){},c.onUIRunShowAnimation=function(){var n=i(r().mark((function n(){var t=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.createPromise(this.node.getComponent(u)||this.addComponent(u)).set({opacity:0}).to(.2,{opacity:255}).call((function(){t._eventTarget.emit("show-animation-end",t)})).start();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.onUIRunHideAnimation=function(){var n=i(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.uiInfo.config.hideBlockInputEventsOnClose&&l.instance.uiBlockInputEvents.hide(),n.next=3,d.createPromise(this.node.getComponent(u)||this.addComponent(u)).to(.2,{opacity:0}).start();case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),c.openUI=function(n,t){return l.instance.open(n,e({},t,{parent:this}))},c.closeWithClickBlank=function(){this._isCloseWithClickBlank||(this._isCloseWithClickBlank=!0,l.instance.onClickBlank(this._onClickBlank,this))},c.unCloseWithClickBlank=function(){this._isCloseWithClickBlank=!1,l.instance.offClickBlank(this._onClickBlank,this)},c._onClickBlank=function(){this._uiInfo.status===p.SHOW&&l.instance.getCurrentTopUI()===this&&this.close()},o(s,[{key:"uiInfo",get:function(){return this._uiInfo},set:function(n){this._uiInfo=n}},{key:"parent",get:function(){return this._parent}},{key:"eventTarget",get:function(){return this._eventTarget}}]),s}(h))||U);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIBlackView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts"],(function(e){var t,n,c,s,a,i,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){s=e.UIBase},function(e){a=e.uiclass},function(e){i=e.UIType},function(e){r=e.Res}],execute:function(){var o;n._RF.push({},"d8da16dOCFFuJj0SUVNLrXF","UIBlackView",void 0);var u=c.ccclass;c.property,e("UIBlackView",u("UIBlackView")(o=a({name:"UIBlackView",zhName:"",type:i.LOADING,prefabInfo:r.prefab.blackView})(o=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(s))||o)||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIBlockInputEvents.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts"],(function(t){var n,e,o,i,c,r,s,a,u,p,f;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,c=t._decorator,r=t.UIOpacity,s=t.tween},function(t){a=t.uiclass},function(t){u=t.UIType},function(t){p=t.Res},function(t){f=t.UIBase}],execute:function(){var h;i._RF.push({},"0199d3iekxJP7liFf8XJVNm","UIBlockInputEvents",void 0);var l=c.ccclass;c.property,t("UIBlockInputEvents",l("UIBlockInputEvents")(h=a({name:"UIBlockInputEvents",zhName:"UI",type:u.PUT_EVENT,prefabInfo:p.prefab.blockInputEvents})(h=function(t){function i(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this)._opacity=178,n}n(i,t);var c=i.prototype;return c.setOpacity=function(t){this._opacity=t,this.getComponent(r).opacity=t},c.onUIRunShowAnimation=function(){var t=e(o().mark((function t(){var n=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,e){s(n.node.getComponent(r)||n.addComponent(r)).set({opacity:0}).to(.5,{opacity:n._opacity}).call(t).start()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c.onUIRunHideAnimation=function(){var t=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._hideAction&&this._hideAction.stop(),this.node.active=!0,this._hideAction=s(this.node.getComponent(r)).to(.5,{opacity:0}).delay(.1).set({opacity:this._opacity}).start();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i}(f))||h)||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIBuyChips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./MathUtils.ts","./GameConfig.ts","./ZKHoldemSDKManager.ts","./ethers.umd.mjs_cjs=&original=.js","./NodeUtils.ts","./WalletManager.ts","./Meson.ts","./Validate.ts","./bignumber.mjs","./Hover.ts","./ZKHoldemSDK.mjs","./Tips.ts","./I18n.ts","./ethers.umd.js"],(function(t){var e,n,r,i,s,a,o,u,c,h,l,p,f,g,d,m,v,b,y,_,k,I,E,U,x,C,N,T,S,B,w,V,D;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){i=t.cclegacy,s=t._decorator,a=t.EditBox,o=t.Sprite,u=t.NodeEventType,c=t.Label,h=t.Node,l=t.isValid},function(t){p=t.UIBase},function(t){f=t.uiclass},function(t){g=t.UIType},function(t){d=t.Res},function(t){m=t.formatNumberToDigitGrouping},function(t){v=t.ChainNetwork2Info,b=t.default},function(t){y=t.ZKHoldemSDKManager},null,function(t){_=t.onClick},function(t){k=t.WalletManager},function(t){I=t.Meson},function(t){E=t.isInteger},function(t){U=t.BigNumber},function(t){x=t.HoverEventType},function(t){C=t.getStoneBalance,N=t.getEstimatedStoneInput,T=t.swapStoneForChips,S=t.approveStoneToDepositor,B=t.needApprove},function(t){w=t.showErrorToast},function(t){V=t.I18n},function(t){D=t.default}],execute:function(){var A;i._RF.push({},"7f04dw6a4xO7ppvu3NiGgm7","UIBuyChips",void 0);var M=s.ccclass,G=(s.property,function(t){return t[t.Eth=0]="Eth",t[t.Stone=1]="Stone",t}(G||{}));t("UIBuyChips",M("UIBuyChips")(A=f({name:"UIBuyChips",zhName:"buy chips",type:g.PANEL,prefabInfo:d.prefab.buyChips,multiplexing:!0,only:!0})(A=function(t){function i(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).item=[{node:"item-0",value:2e3},{node:"item-1",value:2e4},{node:"item-2",value:2e6}],e.tokenItem=[{node:"eth-item",token:G.Eth},{node:"stone-item",token:G.Stone}],e._buyChipsValue=e.item[0].value,e._token=G.Eth,e}e(i,t);var s=i.prototype;return s.onUIInit=function(){var t=this;this._initItem(),this.closeWithClickBlank(),_(this.getUI("cancel"),this.close,this),_(this.getUI("buy"),this.buy,this),this._updateBalance(),this.schedule(this._updateBalance,10),this._changeValue(this._buyChipsValue),_(this.getUI("bridge"),(function(){I.open()})),this._initSelectToken(),this.getUI("buy-chips-edit").on(a.EventType.EDITING_DID_BEGAN,(function(){t.getUI("buy-chips-value").active=!1,t.getUIComponent("buy-chips-edit",a).string=t._buyChipsValue.toString()})),this.getUI("buy-chips-edit").on(a.EventType.TEXT_CHANGED,(function(){var e=t.getUIComponent("buy-chips-edit",a),n=e.string;(!E(n)||U(n).gt(Number.MAX_VALUE)||U(n).lte(0))&&(n="1",e.string="1"),t._changeValue(Number(n))})),this.getUI("buy-chips-edit").on(a.EventType.EDITING_DID_ENDED,(function(){var e=t.getUIComponent("buy-chips-edit",a),n=e.string;e.string="",(!E(n)||U(n).gt(Number.MAX_VALUE)||U(n).lte(0))&&(n="1"),t.getUI("buy-chips-value").active=!0,t._changeValue(Number(n))}))},s._initSelectToken=function(){var t=this,e=this.getUI("select-token-layout");e.on(x.Start,(function(){e.children.forEach((function(t){return t.active=!0}))})),e.on(x.End,(function(){e.children.forEach((function(t,e){return t.active=0===e}))})),this.tokenItem.forEach((function(n){var r=t.getUI(n.node),i=t.getUIComponent(n.node,o);r.on(u.MOUSE_ENTER,(function(){i.enabled=!0}),t,!0),r.on(u.MOUSE_LEAVE,(function(){i.enabled=!1}),t,!0),_(r,(function(){t._token!==n.token&&(t._token=n.token,r.setSiblingIndex(0),t._updateBalance(),t._changeValue(t._buyChipsValue),t._initItem(),e.children.forEach((function(t,e){return t.active=0===e})))}))}))},s.getTokenName=function(){switch(this._token){case G.Eth:return v[b.instance.chainNetwork].nativeCurrency.name;case G.Stone:return"STONE"}},s.getTokenBalance=function(){var t=n(r().mark((function t(){var e,n,i,s,a,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.instance.getProvider();case 2:return e=t.sent,t.next=5,k.instance.getAddress();case 5:n=t.sent,t.t0=this._token,t.next=t.t0===G.Eth?9:t.t0===G.Stone?13:19;break;case 9:return t.next=11,e.getBalance(n);case 11:return i=t.sent,t.abrupt("return",D.utils.formatEther(i.toString()));case 13:return t.next=15,C(e,n);case 15:return s=t.sent,a=s.balance,o=s.decimals,t.abrupt("return",D.utils.formatUnits(a,o));case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s._chips2Token=function(){var t=n(r().mark((function t(e){var n,i,s,a,o,u,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=y.instance.sdk.ethBuyRatio,t.t0=this._token,t.next=t.t0===G.Eth?4:t.t0===G.Stone?6:17;break;case 4:return i=D.utils.parseEther(e.toString()).div(n),t.abrupt("return",D.utils.formatEther(i));case 6:return t.next=8,k.instance.getProvider();case 8:return s=t.sent,t.next=11,N(D.BigNumber.from(e),n,s);case 11:return a=t.sent,o=a.requiredEth,u=a.requiredStoneAmount,c=a.stoneDecimals,console.log("requiredEth:"+D.utils.formatEther(o.toString())+" \n            requiredStoneAmount:"+D.utils.formatUnits(u,c)),t.abrupt("return",new U(D.utils.formatUnits(u,c)).toFixed(6));case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.buy=function(){var t=n(r().mark((function t(){var e,n,i,s,a,u,c,h;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.getUIComponent("buy",o)).grayscale){t.next=3;break}return t.abrupt("return");case 3:t.prev=3,e.grayscale=!0,n=this._buyChipsValue,i=this.getTokenName(),t.t0=this._token,t.next=t.t0===G.Eth?10:t.t0===G.Stone?13:46;break;case 10:return t.next=12,y.instance.requestChips(n,!0);case 12:return t.abrupt("break",46);case 13:return t.next=15,k.instance.getProvider();case 15:return s=t.sent,t.next=18,k.instance.getSigner();case 18:return a=t.sent,u=y.instance.sdk.ethBuyRatio,t.t1=Promise,t.t2=N(D.BigNumber.from(n),u,s),t.t3=C,t.t4=s,t.next=26,a.getAddress();case 26:return t.t5=t.sent,t.t6=(0,t.t3)(t.t4,t.t5),t.t7=[t.t2,t.t6],t.next=31,t.t1.all.call(t.t1,t.t7);case 31:if(c=t.sent,h=c[0].requiredStoneAmount,!c[1].balance.lte(h)){t.next=36;break}return t.abrupt("return",w(V.get("error_tips_buy_chips_insufficient",[i,m(n)]),!0));case 36:return t.next=38,B(h,a);case 38:if(!t.sent){t.next=43;break}return t.next=41,S(a);case 41:t.next=36;break;case 43:return l(e)&&(e.grayscale=!1),t.next=46,T(n,u,D.BigNumber.from(h),a);case 46:t.next=51;break;case 48:t.prev=48,t.t8=t.catch(3),t.t8&&-32603===t.t8.code&&-32e3===t.t8.data.code&&(t.t8.data.message.includes("gas required exceeds allowance")||t.t8.data.message.includes("insufficient funds"))?w(V.get("error_tips_buy_chips_insufficient",[this.getTokenName(),m(this._buyChipsValue)]),!0):y.instance.showError(null,t.t8);case 51:return t.prev=51,l(e)&&(e.grayscale=!1),t.finish(51);case 54:case"end":return t.stop()}}),t,this,[[3,48,51,54]])})));return function(){return t.apply(this,arguments)}}(),s._updateBalance=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k.instance.adapter){t.next=9;break}return e=this.getTokenName(),t.next=4,this.getTokenBalance();case 4:t.t0=t.sent,t.t1="Balance: "+t.t0,t.t2=t.t1+" ",t.t3=e,this.getUIComponent("balance",c).string=t.t2+t.t3;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s._initItem=function(){var t=this,e=this.getTokenName();this.item.forEach(n(r().mark((function n(i){var s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s=t.getUI(i.node)).off(h.EventType.TOUCH_END),_(s,(function(){t._changeValue(i.value)}),t),s.getChildByName("value").getComponent(c).string="Buy "+m(i.value),n.next=6,t._chips2Token(i.value);case 6:n.t0=n.sent,n.t1=" "+n.t0,n.t2=n.t1+" ",n.t3=e,s.getChildByName("eth-value").getComponent(c).string=n.t2+n.t3;case 11:case"end":return n.stop()}}),n)}))))},s._changeValue=function(){var t=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getTokenName(),this._buyChipsValue=e,this.getUIComponent("buy-chips-value",c).string=""+m(e),t.next=5,this._chips2Token(e);case 5:t.t0=t.sent,t.t1=" "+t.t0,t.t2=t.t1+" ",t.t3=n,this.getUIComponent("buy-chips-eth",c).string=t.t2+t.t3;case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i}(p))||A)||A);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIBuyIn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts","./ZKHoldemSDKManager.ts","./Loading.ts","./UILoadingPanel.ts","./Logger.ts","./I18n.ts","./Switch.ts","./ethers.umd.mjs_cjs=&original=.js","./Tips.ts","./GameHelper.ts","./ethers.umd.js"],(function(e){var t,n,i,s,r,a,o,c,u,p,h,l,d,g,m,f,I,y,x,C,U,v,b,k,B;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,r=e._decorator,a=e.UIOpacity,o=e.Slider,c=e.Label},function(e){u=e.uiclass},function(e){p=e.Res},function(e){h=e.UIBase},function(e){l=e.setNodeWidth,d=e.getNodeWidth,g=e.addClickButtonEvent,m=e.onClick},function(e){f=e.ChipType,I=e.ZKHoldemSDKManager},function(e){y=e.Loading},function(e){x=e.UILoadingPanelType},function(e){C=e.Logger},function(e){U=e.I18n},function(e){v=e.Switch},null,function(e){b=e.showErrorToast},function(e){k=e.formatChipType},function(e){B=e.default}],execute:function(){var T;s._RF.push({},"d65ba6y4/RDoapWwqsYpeoG","UIBuyIn",void 0);var S=r.ccclass,_=(r.property,function(e){return e[e.JoinGame=0]="JoinGame",e[e.LoadResources=1]="LoadResources",e}(_||{}));e("UIBuyIn",S("UIBuyIn")(T=u({name:"UIBuyIn",zhName:"chips",prefabInfo:p.prefab.buyIn})(T=function(e){function s(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).min=5e3,t.max=5e4,t.sliderStep=1,t.step=_.JoinGame,t.type=f.Chip,t._ing=!1,t}t(s,e);var r=s.prototype;return r.onUIStart=function(){var e=n(i().mark((function e(){var t,n,s,r,a=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("onUIStart buyin"),this.smallBlind){e.next=6;break}return e.next=4,I.instance.getGameBoard(I.instance.game);case 4:t=e.sent,this.smallBlind=t.bigBlindSize/2;case 6:n=I.instance.sdk.getBuyInRange(2*this.smallBlind),s=n[0],r=n[1],this.min=s,this.max=r,this.sliderStep=s,this.getUIComponent("sub-title",c).string="SB/BB: "+this.smallBlind+"/"+2*this.smallBlind,this.onSlider(),this.getUIComponent("min",c).string=this.min.toString(),this.getUIComponent("max",c).string=this.max.toString(),this.getUIComponent("slider",o).slideEvents.push(g(null,this.node,"UIBuyIn","onSlider")),m(this.getUI("buy-in"),this.buyIn,this),m(this.getUI("back"),this.close,this),m(this.getUI("select-chips"),(function(){a.setType(f.Chip)})),m(this.getUI("select-zchips"),(function(){a.setType(f.ZChip)}));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.onUIOpen=function(){var e=n(i().mark((function e(t){var n,s,r,a,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(n=void 0===t?{}:t).playThemeTypeRow,r=n.smallBlind,this.playThemeTypeRow=s,this.smallBlind=r,a=!!this.playThemeTypeRow,this.getUI("select-chips").active=a,this.getUI("select-zchips").active=a,!a){e.next=10;break}this.setType(f.Chip),e.next=17;break;case 10:return e.next=12,I.instance.getGameBoard(I.instance.game);case 12:o=e.sent,c=o.isZToken,this.getUI("chips").active=!c,this.getUI("zchips").active=c,this.type=c?f.ZChip:f.Chip;case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.setType=function(e){this.type=e;var t=this.getUI("select-chips"),n=this.getUI("select-zchips");t.getComponentInChildren(v).isActive=e===f.Chip,n.getComponentInChildren(v).isActive=e===f.ZChip,t.getComponentsInChildren(a).forEach((function(t){t.opacity=e===f.Chip?255:51})),n.getComponentsInChildren(a).forEach((function(t){t.opacity=e===f.ZChip?255:51}))},r.buyIn=function(){var e=n(i().mark((function e(){var t=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("buyin clicked"),this.step===_.LoadResources){e.next=9;break}return e.prev=2,e.next=5,y.loadingRunCode(x.Loading,n(i().mark((function e(n){var s,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("ready check game account balance"),n.updateText(U.get("tips_fund_game_account")),e.next=4,I.instance.sdk.fundGameAccount(2);case 4:if(s=t.min+t.curStep*t.sliderStep,n.updateText(k(U.get("tips_request_chips"),t.type)),t.type!==f.ZChip){e.next=15;break}return e.next=9,I.instance.getAccountInfo();case 9:if(r=e.sent,!B.BigNumber.from(r.zchips).lt(s)){e.next=13;break}return e.abrupt("return",b("Insufficient zCHIP to start the game"));case 13:e.next=17;break;case 15:return e.next=17,I.instance.requestChips(s);case 17:if(!t.playThemeTypeRow){e.next=24;break}return C.info("ready create and join game amount:"+s),n.updateText(U.get("tips_create_and_join_room")),e.next=22,I.instance.createGame(t.smallBlind,s,t.playThemeTypeRow.value,t.type===f.ZChip);case 22:e.next=34;break;case 24:return C.info("ready joinGame amount:"+s),n.updateText(U.get("tips_check_room")),e.next=28,I.instance.getGameAndCheck(I.instance.game.gameId);case 28:if(e.sent){e.next=31;break}return e.abrupt("return");case 31:return n.updateText(U.get("tips_join_room")),e.next=34,I.instance.callJoinGame(s,t.type===f.ZChip);case 34:t.step=_.LoadResources;case 35:case"end":return e.stop()}}),e)}))));case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:if(this.step===_.LoadResources){e.next=11;break}return e.abrupt("return");case 11:this.close(),I.instance.loadResources(!0);case 13:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),r.onSlider=function(){if(!this._ing){this._ing=!0;var e=this.max-this.min,t=this.sliderStep/e,n=this.getUIComponent("slider",o).progress,i=Math.round(n/t);n=i*t;var s=this.min+i*this.sliderStep;this.getUIComponent("slider",o).progress=n,i!==this.curStep?(this.curStep=i,this.getUIComponent("current",c).string=s.toString(),l(this.getUI("line"),n*d(this.getUI("slider"))),this._ing=!1):this._ing=!1}},s}(h))||T)||T);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIBuyInHistory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts","./ZKHoldemSDKManager.ts","./Logger.ts","./MathUtils.ts","./GameHelper.ts"],(function(t){var n,e,o,r,i,s,c,a,u,p,l,y,f,g,I,h,m;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){r=t.cclegacy,i=t._decorator,s=t.instantiate,c=t.Label,a=t.UIOpacity},function(t){u=t.uiclass},function(t){p=t.UIType},function(t){l=t.Res},function(t){y=t.UIBase},function(t){f=t.onClick},function(t){g=t.ZKHoldemSDKManager},function(t){I=t.Logger},function(t){h=t.formatNumberToDigitGrouping},function(t){m=t.setENSName}],execute:function(){var U;r._RF.push({},"dae07NwV0pO6rFBnK0olYVF","UIBuyInHistory",void 0);var d=i.ccclass;i.property,t("UIBuyInHistory",d("UIBuyInHistory")(U=u({name:"UIBuyInHistory",zhName:"BuyIn",type:p.PANEL,prefabInfo:l.prefab.buyInHistory,multiplexing:!0,createSort:!1,closeSort:!1,hideBlockInputEventsOnClose:!1})(U=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var i=r.prototype;return i.onUIInit=function(){f(this.getUI("close"),this.close,this)},i.onUIOpen=function(){var t=e(o().mark((function t(n){var e,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.getUI("content").children.forEach((function(t){return t.getComponent(a).opacity=0})),t.next=3,g.instance.getGameBoard(g.instance.game);case 3:r=t.sent,I.log("UIBuyInHistory ------ board ----",r),i=this.getUI("content"),null==(e=r.permanentAccounts)||e.forEach((function(t,n){var e=i.children[n];e||((e=s(i.children[0])).parent=i),m(t,e.getChildByName("id")),e.getChildByName("buy-in").getComponent(c).string=h(r.chips[n]+r.bets[n]),e.getChildByName("chips-left").getComponent(c).string=h(r.chips[n]),e.getComponent(a).opacity=255}));case 7:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),r}(y))||U)||U);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIBuyNft.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts","./NftCard.ts","./NftBox.ts"],(function(t){var n,e,o,r,s,a,i,u,c,f,p,h,l,y;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){r=t.cclegacy,s=t._decorator},function(t){a=t.uiclass},function(t){i=t.UIType},function(t){u=t.Res},function(t){c=t.UIBase},function(t){f=t.onClick},function(t){p=t.NftCardEventType,h=t.NftCardState},function(t){l=t.NftBox,y=t.NftBoxState}],execute:function(){var I;r._RF.push({},"d2d08bSWkFOk6MWa5d3M4bY","UIBuyNft",void 0);var N=s.ccclass;s.property,t("UIBuyNft",N("UIBuyNft")(I=a({name:"UIBuyNft",zhName:"NFT",type:i.PANEL,prefabInfo:u.prefab.buyNft,multiplexing:!0})(I=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var s=r.prototype;return s.onUIInit=function(){f(this.getUI("close"),this.close,this),this.getUI("leftNFT").on(p.StateChanged,this._onCardStateChange,this)},s.onUIOpen=function(){var t=e(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),s._onCardStateChange=function(t){t===h.Buy&&this.getUIComponent("box",l).changeState(y.Buy)},r}(c))||I)||I);r._RF.pop()}}}));

System.register("chunks:///_virtual/UIBuyNftConfirm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./ZKHoldemSDKManager.ts","./Loading.ts","./UILoadingPanel.ts","./NodeUtils.ts","./ButtonUtils.ts"],(function(t){var n,i,e,s,r,o,a,u,c,h,p,f,m,l,g,d,I,U,v,C,y,x;return{setters:[function(t){n=t.inheritsLoose,i=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){s=t.cclegacy,r=t._decorator,o=t.EditBox,a=t.Slider,u=t.Label,c=t.Sprite,h=t.Button},function(t){p=t.uiclass},function(t){f=t.UIType},function(t){m=t.Res},function(t){l=t.UIBase},function(t){g=t.ZKHoldemSDKManager},function(t){d=t.Loading},function(t){I=t.UILoadingPanelType},function(t){U=t.addClickButtonEvent,v=t.onClick,C=t.setNodeWidth},function(t){y=t.disableButton,x=t.enabledButton}],execute:function(){var B;s._RF.push({},"3f93e5tx8FO64GQ16Vf2HmQ","UIBuyNftConfirm",void 0);var N=r.ccclass;r.property,t("UIBuyNftConfirm",N("UIBuyNftConfirm")(B=p({name:"UIBuyNftConfirm",zhName:"NFT",type:f.PANEL,prefabInfo:m.prefab.buyNftConfirm,multiplexing:!0})(B=function(t){function s(){for(var n,i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this).sliderStep=100,n.min=100,n.max=200,n._ing=!1,n}n(s,t);var r=s.prototype;return r.onUIInit=function(){this.closeWithClickBlank(),this.getUI("input").on(o.EventType.TEXT_CHANGED,this._updateViewWithInput,this),this.getUIComponent("slider",a).slideEvents.push(U(null,this.node,"UIBuyNftConfirm","_updateViewWithSlider")),v(this.getUI("cancel"),this.close,this),v(this.getUI("confirm"),this.buy,this)},r.onUIOpen=function(){var t=i(e().mark((function t(n){var i,s;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.instance.sdk.getMyChips();case 2:i=t.sent,s=i.toNumber(),this.max=s-s%100,0===this.max?(this.min=0,this.getUIComponent("slider",a).progress=1):(this.min=100,this.getUIComponent("slider",a).progress=0),this.getUIComponent("input",o).string=""+Math.min(this.min,100),this.getUIComponent("max",u).string="Max "+this.max,this._updateViewWithSlider();case 9:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),r._updateViewWithSlider=function(){this._updateView("slider")},r._updateViewWithInput=function(){this._updateView("input")},r._updateView=function(t){if(!this._ing){this._ing=!0;var n=this.max-this.min,i=this.getUIComponent("input",o),e=this.getUIComponent("slider",a);if(0===n)return i.string=""+this.min,e.progress=0,C(this.getUI("line"),0),this.getUIComponent("cost",u).string="Convert "+this.min+" chips to NFT Power",0==this.min?y(this.getUI("confirm")):x(this.getUI("confirm")),void(this._ing=!1);var s=0===n?0:this.sliderStep/n,r=e.progress;if("input"===t){var h=Number(i.string);r=((h=isNaN(h)?0:h-h%100)-this.min)/n}r=Math.max(0,Math.min(1,r));var p=Math.round(r/s);r=p*s;var f=this.min+p*this.sliderStep;e.progress=r,i.string=""+f,0===f?y(this.getUI("confirm")):x(this.getUI("confirm")),p!==this.curStep?(this.curStep=p,this.getUIComponent("cost",u).string="Convert "+f+" chips to NFT Power",C(this.getUI("line"),(r<.3?r+.05:r)*this.getUIComponent("line",c).spriteFrame.width),this._ing=!1):this._ing=!1}},r.buy=function(){var t=i(e().mark((function t(){var n,s=this;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.getUIComponent("confirm",h).interactable){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,n=this.min+this.curStep*this.sliderStep,t.next=6,d.loadingRunCode({type:I.Loading,text:"Buy NFT Power"},i(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.instance.sdk.batchBuyBoxWithBestCombination(n);case 2:s.eventTarget.emit("buy",n),s.close();case 4:case"end":return t.stop()}}),t)}))));case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}(),s}(l))||B)||B);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIBuyZChips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts","./GameConfig.ts"],(function(t){var n,i,e,s,o,c,r,u,a,p;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator},function(t){s=t.uiclass},function(t){o=t.UIType},function(t){c=t.Res},function(t){r=t.UIBase},function(t){u=t.onClick},function(t){a=t.ChainNetwork2Info,p=t.default}],execute:function(){var l;i._RF.push({},"66f41pmS2NC/5BNCUrz1Lwr","UIBuyZChips",void 0);var f=e.ccclass;e.property,t("UIBuyZChips",f("UIBuyZChips")(l=s({name:"UIBuyZChips",zhName:"buy z-chips",type:o.PANEL,prefabInfo:c.prefab.buyZChips,multiplexing:!0,only:!0})(l=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.onUIInit=function(){this.closeWithClickBlank(),u(this.getUI("cancel"),this.close,this),u(this.getUI("go"),(function(){var t=a[p.instance.chainNetwork].renewParadigmUrl;t&&window.open(t)}))},i}(r))||l)||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIConfig.ts",["cc","./UIConstant.ts"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy},function(e){t=e.UIType}],execute:function(){e("createDefaultUIConfig",(function(e){return Object.assign({name:"",zhName:"",type:t.UI,prefabInfo:null,only:!0,release:!1,multiplexing:!1,hideOnBackstage:!1,disableBlockInput:!1,disableBlockInputEventsAnimation:!1,hideBlockInputEventsOnClose:!0,showBlockInputEvents:!0,coverPanelIsShowBlockInputEvents:!1,createSort:!0,closeSort:!0,useMask:!0},null!=e?e:{})})),n._RF.push({},"ff810SEO1xG5q/iM1K/iMnc","UIConfig",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/UIConstant.ts",["cc"],(function(I){var E;return{setters:[function(I){E=I.cclegacy}],execute:function(){var D;E._RF.push({},"db2856xvb9HtaTZN46Xoq8W","UIConstant",void 0);I("UIEventType",{UI_CHILD_ADDED:"UI_CHILD_ADDED",UI_CHILD_REMOVED:"UI_CHILD_REMOVED",UI_PARENT_CHANGED:"UI_PARENT_CHANGED"}),I("UIStatus",{LOADING:0,SHOW:1,HIDE:2,PUT:3,DESTROY:4});var t=I("UIType",{SCENE:0,UI:1,TOOL_BAR:2,PANEL:3,DIALOG:4,GUIDE:5,NOTICE:6,LOADING:7,TIPS:8,PUT_EVENT:9});I("UIType2UIZIndex",((D={})[t.SCENE]=100,D[t.UI]=200,D[t.TOOL_BAR]=300,D[t.PANEL]=400,D[t.DIALOG]=500,D[t.GUIDE]=600,D[t.NOTICE]=700,D[t.LOADING]=800,D[t.TIPS]=900,D));E._RF.pop()}}}));

System.register("chunks:///_virtual/UIDecorator.ts",["cc","./UIManager.ts"],(function(t){var e,c;return{setters:[function(t){e=t.cclegacy},function(t){c=t.UIManager}],execute:function(){t("uiclass",(function(t){return function(e){c.registerUIClass(e,t)}})),e._RF.push({},"e0fdcMtpA5Dtp69EY1kph4V","UIDecorator",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIErrorInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./NodeUtils.ts"],(function(t){var n,o,r,e,s,i,c,f,u;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,e=t.Label},function(t){s=t.UIBase},function(t){i=t.uiclass},function(t){c=t.UIType},function(t){f=t.Res},function(t){u=t.onClick}],execute:function(){var I;o._RF.push({},"f21d3RrKDhCgr4npijOKAdB","UIErrorInfo",void 0);var a=r.ccclass;r.property,t("UIErrorInfo",a("UIErrorInfo")(I=i({name:"UIErrorInfo",zhName:"",type:c.PANEL,prefabInfo:f.prefab.errorInfo,only:!1})(I=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onUIOpen=function(t){this.getUIComponent("text",e).string="string"==typeof t?t:JSON.stringify(t,null,2),u(this.getUI("Button"),this.close,this)},o}(s))||I)||I);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIFund.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UITipsPanel.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./NodeUtils.ts","./Switch.ts","./Tips.ts","./I18n.ts","./ZKHoldemSDKManager.ts","./UIManager.ts","./Validate.ts"],(function(t){var e,n,i,s,c,o,r,a,u,l,f,p,h,g,I,d,m,b,U;return{setters:[function(t){e=t.inheritsLoose,n=t.extends,i=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){c=t.cclegacy,o=t._decorator,r=t.EditBox,a=t.UIOpacity},function(t){u=t.UITipsPanel},function(t){l=t.uiclass},function(t){f=t.UIType},function(t){p=t.Res},function(t){h=t.onClick},function(t){g=t.Switch},function(t){I=t.showToast},function(t){d=t.I18n},function(t){m=t.ZKHoldemSDKManager},function(t){b=t.UIManager},function(t){U=t.isInteger}],execute:function(){var x;c._RF.push({},"855daSNKcdFQYCl74El0Sp4","UIFund",void 0);var k=o.ccclass;o.property,t("UIFund",k("UIFund")(x=l({name:"UIFund",zhName:"game account",type:f.TIPS,prefabInfo:p.prefab.fund})(x=function(t){function c(){return t.apply(this,arguments)||this}e(c,t),c.open=function(t,e){return new Promise((function(i){b.open(c,n({},e,{arg:t.set("confirmCallback",(function(){i(!0)})).set("cancelCallback",(function(){i(!1)}))}))}))};var o=c.prototype;return o.onUIInit=function(){t.prototype.onUIInit.call(this),h(this.getUI("1-games"),this.select.bind(this,0)),h(this.getUI("5-games"),this.select.bind(this,1)),h(this.getUI("other"),this.select.bind(this,2)),h(this.getUI("edit-box"),this.select.bind(this,2)),this.select(0)},o.select=function(t){this._selectIndex!==t&&(this._selectIndex=t,this.getUIComponent("1-games-switch",g).isActive=0===t,this.getUIComponent("5-games-switch",g).isActive=1===t,2===t&&this.getUIComponent("edit-box",r).focus(),this.getUIComponent("1-games-label",a).opacity=0===t?255:102,this.getUIComponent("5-games-label",a).opacity=1===t?255:102,this.getUIComponent("other-label",a).opacity=2===t?255:102,this.getUIComponent("TEXT_LABEL",a).opacity=2===t?255:102)},o.confirm=function(){var t=i(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e={0:1,1:5,2:Number(this.getUIComponent("edit-box",r).string)}[this._selectIndex],U(e)&&!(e<1)){t.next=4;break}return I(d.get("tips_input_positive_integer"),!1),t.abrupt("return");case 4:if(t.t0=this.config.checkCallback,!t.t0){t.next=9;break}return t.next=8,this.config.checkCallback();case 8:t.t0=!t.sent;case 9:if(!t.t0){t.next=11;break}return t.abrupt("return");case 11:return t.prev=11,t.next=14,m.instance.sdk.fundGameAccount(e,!0);case 14:if(I(d.get("tips_fund_game_account_successful"),!1),t.t1=this.config.confirmCallback,!t.t1){t.next=21;break}return t.next=19,this.config.confirmCallback();case 19:t.t2=t.sent,t.t1=!1===t.t2;case 21:if(!t.t1){t.next=23;break}return t.abrupt("return");case 23:this.close(),t.next=29;break;case 26:t.prev=26,t.t3=t.catch(11),console.error("fund game account error:",t.t3);case 29:case"end":return t.stop()}}),t,this,[[11,26]])})));return function(){return t.apply(this,arguments)}}(),c}(u))||x)||x);c._RF.pop()}}}));

System.register("chunks:///_virtual/UIGifts.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./NodeUtils.ts","./GiftsUtils.ts","./GameHelper.ts","./UIToastManager.ts","./Loading.ts","./UILoadingPanel.ts","./ZKHoldemSDKManager.ts"],(function(t){var n,e,r,s,a,i,c,o,u,f,l,p,h,m,g,I,U,d,v;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,a=t._decorator,i=t.Label},function(t){c=t.UIBase},function(t){o=t.uiclass},function(t){u=t.UIType},function(t){f=t.Res},function(t){l=t.onClick},function(t){p=t.getMyGiftsInfo,h=t.claim,m=t.camClaim},function(t){g=t.formatNumberValue},function(t){I=t.UIToastManager},function(t){U=t.Loading},function(t){d=t.UILoadingPanelType},function(t){v=t.ZKHoldemSDKManager}],execute:function(){var y;s._RF.push({},"0d971mmYkhPI5gQeMrhNhe0","UIGifts",void 0);var x=a.ccclass;a.property,t("UIGifts",x("UIGifts")(y=o({name:"UIGifts",zhName:"chips",type:u.PANEL,prefabInfo:f.prefab.gifts})(y=function(t){function s(){return t.apply(this,arguments)||this}n(s,t),s.canClaim=function(){var t=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();var a=s.prototype;return a.onUIInit=function(){this.closeWithClickBlank(),l(this.getUI("close"),this.close,this),l(this.getUI("claim"),this.claim,this)},a.onUIOpen=function(){var t=e(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:n=t.sent,this.getUIComponent("value",i).string=g(n[1]);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.claim=function(){var t=e(r().mark((function t(){var n,s=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U.loadingRunCode({type:d.Loading,text:"Claim in progress"},e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:n=t.sent,I.instance.showTxStageTips("\n"+n.hash,"Claim successfully.","Tips:","",!1),s.close();case 5:case"end":return t.stop()}}),t)}))));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),console.error("claim error:",t.t0,n);try{v.instance.showError(null,t.t0)}catch(t){}case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}(),s}(c))||y)||y);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIGM.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtils.ts","./ZKHoldemSDKManager.ts","./Tips.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./WalletManager.ts","./I18n.ts","./ethers.umd.mjs_cjs=&original=.js","./UIManager.ts","./UIBuyInHistory.ts","./EthereumUtils.ts","./UIFund.ts","./UITipsPanel.ts","./ethers.umd.js"],(function(t){var n,e,s,a,r,c,i,o,u,f,p,l,h,d,g,I,m,U,y,k,_;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,r=t._decorator,c=t.Label},function(t){i=t.onClick},function(t){o=t.ZKHoldemSDKManager},function(t){u=t.showErrorToast},function(t){f=t.uiclass},function(t){p=t.UIType},function(t){l=t.Res},function(t){h=t.UIBase},function(t){d=t.WalletManager},function(t){g=t.I18n},null,function(t){I=t.UIManager},function(t){m=t.UIBuyInHistory},function(t){U=t.scanAddress},function(t){y=t.UIFund},function(t){k=t.UITipsPanelConfig},function(t){_=t.default}],execute:function(){var x;a._RF.push({},"bfd40XpGORAb5R5c/VyXSPP","UIGM",void 0);var b=r.ccclass;r.property,t("UIGM",b("UIGM")(x=f({name:"UIGM",zhName:"GM",type:p.PANEL,prefabInfo:l.prefab.gm,multiplexing:!0})(x=function(t){function a(){return t.apply(this,arguments)||this}n(a,t);var r=a.prototype;return r.onUIInit=function(){this.closeWithClickBlank(),i(this.getUI("close"),this.close,this),i(this.getUI("fund"),this.fund,this),i(this.getUI("withdraw"),this.withdraw,this),i(this.getUI("buy-in-history"),this.buyInHistory,this),i(this.getUI("scan-account"),this.scanAccount,this),i(this.getUI("scan-game-account"),this.scanGameAccount,this),this.schedule(this._updateGameAccountBalance,30)},r.onUIOpen=function(t){this._updateGameAccountBalance()},r._updateGameAccountBalance=function(){var t=e(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.instance.sdk){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,o.instance.sdk.getGameAccountBalance();case 4:n=t.sent,this.getUIComponent("game-account-balance",c).string="Game Account Balance: "+_.utils.formatEther(n.toString());case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.withdraw=function(){o.instance.withdraw()},r.fund=function(){var t=e(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.instance.sdk){t.next=10;break}return t.prev=1,t.next=4,y.open((new k).set("title",g.get("tips_fund_title")).set("text",g.get("tips_fund_content")).set("confirmText",g.get("tips_fund_confirm")),{createSort:!1,closeSort:!1,hideBlockInputEventsOnClose:!1});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:t.next=11;break;case 10:u(g.get("tips_login"));case 11:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),r.scanAccount=function(){var t=e(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d.instance.adapter){t.next=8;break}return t.t0=U,t.next=4,d.instance.getAddress();case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=9;break;case 8:u(g.get("tips_login"));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.scanGameAccount=function(){var t=e(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.instance.sdk){t.next=8;break}return t.t0=U,t.next=4,o.instance.sdk.getGameAccountAddress();case 4:t.t1=t.sent,(0,t.t0)(t.t1),t.next=9;break;case 8:u(g.get("tips_login"));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.buyInHistory=function(){o.instance.game?I.open(m):u(g.get("error_tips_no_run_game"))},a}(h))||x)||x);a._RF.pop()}}}));

System.register("chunks:///_virtual/UIInfo.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"d0315LRhrJOOJQ1jXXvTdHT","UIInfo",void 0);t("UIInfo",(function(t,s,i,n){this.id=t,this.uiClass=s,this.config=i,this.status=n}));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIInvite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts","./WebUtils.ts","./Tips.ts","./QueryString.ts","./WalletManager.ts","./I18n.ts","./EthereumUtils.ts"],(function(t){var n,e,i,s,o,r,c,u,a,l,p,f,h,I,U,v,y;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){s=t.cclegacy,o=t._decorator,r=t.Label},function(t){c=t.uiclass},function(t){u=t.UIType},function(t){a=t.Res},function(t){l=t.UIBase},function(t){p=t.onClick},function(t){f=t.WebUtils},function(t){h=t.showToast},function(t){I=t.default},function(t){U=t.WalletManager},function(t){v=t.I18n},function(t){y=t.formatAddress}],execute:function(){var g;s._RF.push({},"518b9tt/7VCWr5y0kHe0QjT","UIInvite",void 0);var d=o.ccclass;o.property,t("UIInvite",d("UIInvite")(g=c({name:"UIInvite",zhName:"",type:u.PANEL,prefabInfo:a.prefab.invite,multiplexing:!0})(g=function(t){function s(){return t.apply(this,arguments)||this}n(s,t);var o=s.prototype;return o.onUIInit=function(){this.closeWithClickBlank(),p(this.getUI("copy"),this.copy,this),p(this.getUI("close"),this.close,this)},o.onUIOpen=function(){var t=e(i().mark((function t(n){var e,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.getUIComponent("invited",r).string="You are invited by: "+(n?y(n):"--"),this.getUI("copy-invited").active=!!n,e=location.href.split("?"),s=e[0],t.t0=s+"?",t.t1=I,t.next=7,U.instance.getAddress();case 7:t.t2=t.sent,t.t3={invite:t.t2},t.t4=t.t1.stringify.call(t.t1,t.t3),this.url=t.t0+t.t4,this.getUIComponent("url",r).string=this.url;case 12:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),o.copy=function(){f.copyFromWeb(this.url),h(v.get("tips_copy_successfully"),!1)},s}(l))||g)||g);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIInviteToRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./ZKHoldemSDKManager.ts","./NodeUtils.ts","./WebUtils.ts","./Tips.ts","./QueryString.ts","./I18n.ts","./TwitterManager.ts"],(function(t){var n,o,e,i,s,r,c,a,u,l,f,I,p,h,m;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Label},function(t){s=t.uiclass},function(t){r=t.UIType},function(t){c=t.Res},function(t){a=t.UIBase},function(t){u=t.ZKHoldemSDKManager},function(t){l=t.onClick},function(t){f=t.WebUtils},function(t){I=t.showToast},function(t){p=t.default},function(t){h=t.I18n},function(t){m=t.TwitterManager}],execute:function(){var g;o._RF.push({},"da979L0qbBFWJFnr9YK2TO7","UIInviteToRoom",void 0);var U=e.ccclass;e.property,t("UIInviteToRoom",U("UIInviteToRoom")(g=s({name:"UIInviteToRoom",zhName:"",type:r.PANEL,prefabInfo:c.prefab.inviteToRoom,multiplexing:!0})(g=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.onUIInit=function(){var t=this;this.closeWithClickBlank(),l(this.getUI("copy"),this.copy,this),l(this.getUI("close"),this.close,this),l(this.getUI("share-x"),(function(){m.instance.retweet("Getting Full tilted Sucks.\n\nNo dealer. Instant Cash-in/out. 100% decentralized.\n\n#zkholdemisbased\n\nJoin me for a hand of fully on-chain poker on @zkHoldem:\n"+t.getUIComponent("url",i).string)}))},e.onUIOpen=function(t){var n=u.instance.game;this.getUIComponent("room",i).string="Room ID: "+n.gameId;var o=location.href.split("?"),e=o[0],s=o[1],r=s?p.parse(s):{};r.room=n.gameId,this.url=e+"?"+p.stringify(r),this.getUIComponent("url",i).string=this.url},e.copy=function(){f.copyFromWeb(this.url),I(h.get("tips_copy_successfully"),!1)},o}(a))||g)||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ComponentExpand.ts"],(function(t){var n,e,r,o,i,c;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator},function(t){c=t.ComponentExpand}],execute:function(){var u;o._RF.push({},"b46cb//nlJH3r11bi6tSZuz","UIItem",void 0);var s=i.ccclass;i.property,t("UIItem",s("UIItem")(u=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.init=function(){var t=e(r().mark((function t(n,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.index=n,this.data=e,t.next=4,this.onInit();case 4:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),i.onInit=function(){},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIJoinRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts","./ZKHoldemSDKManager.ts","./Logger.ts","./Tips.ts","./Loading.ts","./UILoadingPanel.ts","./I18n.ts"],(function(n){var t,e,o,r,i,s,c,a,u,p,f,h,g,I,l,m,d;return{setters:[function(n){t=n.inheritsLoose,e=n.asyncToGenerator,o=n.regeneratorRuntime},function(n){r=n.cclegacy,i=n._decorator,s=n.EditBox},function(n){c=n.uiclass},function(n){a=n.UIType},function(n){u=n.Res},function(n){p=n.UIBase},function(n){f=n.onClick},function(n){h=n.ZKHoldemSDKManager},function(n){g=n.Logger},function(n){I=n.showErrorToast},function(n){l=n.Loading},function(n){m=n.UILoadingPanelType},function(n){d=n.I18n}],execute:function(){var U;r._RF.push({},"7c231Nu00lOIqB5kkB4hQ32","UIJoinRoom",void 0);var _=i.ccclass;i.property,n("UIJoinRoom",_("UIJoinRoom")(U=c({name:"UIJoinRoom",zhName:"roomID",type:a.PANEL,prefabInfo:u.prefab.joinRoom,multiplexing:!0})(U=function(n){function r(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this)._joinIng=!1,t}t(r,n);var i=r.prototype;return i.onUIInit=function(){this.closeWithClickBlank(),f(this.getUI("join"),this.join,this),this.getUI("EditBox").on(s.EventType.EDITING_RETURN,this.join,this)},i.onUIOpen=function(){var n=this.getUIComponent("EditBox",s);n.string="",this.scheduleOnce((function(){n.focus()}),.5)},i.join=function(){var n=e(o().mark((function n(){var t,r=this;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._joinIng){n.next=2;break}return n.abrupt("return");case 2:if(this._joinIng=!0,n.prev=3,t=this.getUIComponent("EditBox",s).string){n.next=7;break}return n.abrupt("return",I(d.get("tips_input_room_id")));case 7:if(!isNaN(Number(t))){n.next=9;break}return n.abrupt("return",I(d.get("tips_input_correct_room_id")));case 9:return n.next=11,l.loadingRunCode({type:m.Loading,text:d.get("tips_check_room")},e(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.instance.joinGame(Number(t));case 2:n.sent&&r.close();case 4:case"end":return n.stop()}}),n)}))));case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),g.error("join room error:",n.t0);case 16:return n.prev=16,this._joinIng=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,this,[[3,13,16,19]])})));return function(){return n.apply(this,arguments)}}(),r}(p))||U)||U);r._RF.pop()}}}));

System.register("chunks:///_virtual/UILoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts"],(function(t){var e,n,o,s,r,i,a,c,u,p,h,l,g,d,f,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.createClass,s=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){i=t.cclegacy,a=t._decorator,c=t.ccenum,u=t.Label,p=t.ProgressBar,h=t.tween,l=t.UIOpacity},function(t){g=t.UIBase},function(t){d=t.uiclass},function(t){f=t.UIType},function(t){_=t.Res}],execute:function(){var m,y,I,U,v;i._RF.push({},"a87cfEBaCxE568+y9zqwMj3","UILoading",void 0);var P=a.ccclass,x=a.property,C=t("LoadingMode",function(t){return t[t.Gradual=0]="Gradual",t[t.RealTime=1]="RealTime",t}({}));c(C);t("UILoading",(m=P("UILoading"),y=d({name:"UILoading",zhName:"loading",type:f.LOADING,prefabInfo:_.prefab.loading,release:!1,multiplexing:!1,only:!0}),I=x({type:C}),m(U=y((e((v=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this)._mode=C.RealTime,e.pointCount=0,e.__close=!1,e}n(e,t);var i=e.prototype;return i.onUIInit=function(){},i.onUIOpen=function(t){var e=this,n=null!=t?t:{},o=n.mode,s=n.speed,r=n.text;this._progress=0,this._currentProgress=0,this._speed=null!=s?s:.005,this._ok=!1,this._closeIng=!1,this.mode="number"==typeof o?o:this._mode,this._text="string"==typeof r?r:"loading",this.updateText(),this.schedule(this.updateText,1),this._promise=new Promise((function(t,n){e._resolve=t}))},i.updateText=function(){this.pointCount++,this.pointCount>3&&(this.pointCount=0),this.getUIComponent("text",u).string=this._text+".".repeat(this.pointCount)},i.getOnProgress=function(){var t=this;return function(e,n,o){t.onProgress(e,n)}},i.$wait=function(){return this._promise},i.$then=function(){var t;return(t=this._promise).then.apply(t,arguments)},i.onProgress=function(t,e){var n=t/e;this.mode===C.Gradual?(this._progress=n,1===n&&(this._ok=!0)):this.mode===C.RealTime&&(this.changeProgress(n),1===n&&this.close())},i.onUIRunHideAnimation=function(){var t=s(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){h(e.node.getComponent(l)).set({opacity:255}).call(t).start()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.onUIClose=function(){this._resolve()},i.changeProgress=function(t){this.getUIComponent("progress-bar",p).progress=t},i.onUIUpdate=function(t){if(this.mode===C.Gradual&&!this._closeIng&&!this.__close){if(this._ok&&1===this._currentProgress)return this.close(),void(this.__close=!0);this._progress>this._currentProgress&&(this._currentProgress=Math.min(this._progress,this._currentProgress+this._speed),this.changeProgress(this._currentProgress))}},o(e,[{key:"mode",get:function(){return this._mode},set:function(t){this._mode=t}}]),e}(g)).prototype,"mode",[I],Object.getOwnPropertyDescriptor(v.prototype,"mode"),v.prototype),U=v))||U)||U));i._RF.pop()}}}));

System.register("chunks:///_virtual/UILoadingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Res.ts","./UIBase.ts","./UIConstant.ts","./UIDecorator.ts","./NodeUtils.ts"],(function(t){var e,n,o,i,a,r,s,c,u,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.RichText,a=t.Node},function(t){r=t.Res},function(t){s=t.UIBase},function(t){c=t.UIType},function(t){u=t.uiclass},function(t){l=t.onClick}],execute:function(){var p;n._RF.push({},"d3ba1xvupxNd6wwLoFaCiT3","UILoadingPanel",void 0);var d=o.ccclass,g=(o.property,t("UILoadingPanelType",function(t){return t[t.Loading=0]="Loading",t[t.Error=1]="Error",t}({})));t("UILoadingPanel",d("UILoadingPanel")(p=u({name:"UILoadingPanel",zhName:"loading",type:c.LOADING,prefabInfo:r.prefab.loadingPanel,multiplexing:!0,hideBlockInputEventsOnClose:!1,createSort:!1,closeSort:!1,useMask:!1})(p=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onUIOpen=function(t){var e=t.type,n=t.text,o=t.onTextClick;switch(e){case g.Loading:this.getUI("loading").active=!0,this.getUI("error").active=!1,n=n||"loading\n...";break;case g.Error:this.getUI("error").active=!0,this.getUI("loading").active=!1,n=n||"Unable to\nConnect"}this.updateText(n,o)},o.updateText=function(t,e){this.getUIComponent("text",i).string=t,this.updateOnTextClick(e)},o.updateOnTextClick=function(t){this.getUI("text").off(a.EventType.TOUCH_END),"function"==typeof t&&l(this.getUI("text"),t)},n}(s))||p)||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/UIMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./EventTarget.ts","./EventConstant.ts","./Res.ts","./NodeUtils.ts","./WalletManager.ts","./GameConfig.ts","./Loading.ts","./UILoadingPanel.ts","./UIManager.ts","./ZKHoldemSDKManager.ts","./LaunchArguments.ts","./Logger.ts","./TweenUtils.ts","./UIJoinRoom.ts","./HttpApi.ts","./ethers.umd.mjs_cjs=&original=.js","./GameManager.ts","./I18n.ts","./SubUILeaderBoard.ts","./UIUserSettings.ts","./UINftBag.ts","./UISetStakeLevel.ts","./UINotNftTip.ts","./WebUtils.ts","./UISelectWallet.ts","./GameStorageModel.ts","./ethers.umd.js"],(function(t){var e,n,a,r,s,i,o,c,u,l,p,f,h,g,d,b,I,m,U,y,k,v,x,w,_,T,S,C,A,M,L,N,K,E,B,R,V,j,G,W,D,H,F,O,P,J;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,i=t._decorator,o=t.find,c=t.Label,u=t.ScrollView,l=t.UIOpacity,p=t.Tween,f=t.UITransform,h=t.tween},function(t){g=t.UIBase},function(t){d=t.uiclass},function(t){b=t.EventTarget},function(t){I=t.EventConstant},function(t){m=t.Res},function(t){U=t.onClick,y=t.offClick,k=t.getNodeHeight,v=t.getNodeWidth},function(t){x=t.WalletManager},function(t){w=t.GameVersion,_=t.default},function(t){T=t.Loading},function(t){S=t.UILoadingPanelType,C=t.UILoadingPanel},function(t){A=t.UIManager},function(t){M=t.ZKHoldemSDKManager},function(t){L=t.default},function(t){N=t.Logger},function(t){K=t.TweenUtils},function(t){E=t.UIJoinRoom},function(t){B=t.HttpApi},null,function(t){R=t.GameManager},function(t){V=t.I18n},function(t){j=t.SubUILeaderBoard},function(t){G=t.UIUserSettings},function(t){W=t.UINftBag},function(t){D=t.UISetStakeLevel},function(t){H=t.UINotNftTip},function(t){F=t.WebUtils},function(t){O=t.UISelectWallet},function(t){P=t.GameStorageModel},function(t){J=t.default}],execute:function(){var Z;s._RF.push({},"520bctZRjBJ97kIHrKOxnRD","UIMain",void 0);var q,z,Q=i.ccclass,X=(i.property,!1);t("UIMain",Q("UIMain")(Z=d({name:"UIMain",zhName:"",prefabInfo:m.prefab.main,multiplexing:!0,only:!0})(Z=function(t){function s(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).tabs=[{key:"home",nodeKey:"home"},{key:"gameAccount",nodeKey:"game-account"},{key:"myNFTs",nodeKey:"my-nfts"}],e._playing=!1,e.isMainView=!0,e}e(s,t);var i=s.prototype;return i.onUIInit=function(){s._instance=this,U(this.getUI("play"),this.play,this);var t=o("Canvas/UIManager/version");t&&(t.getComponent(c).string="version "+w),this._initTabs(),this.getUIComponent("leaderBoard",j).init(this),b.eventManager.emit(I.GAME_MAIN_START),R.instance.preloadRes()},i.onUIOpen=function(){x.instance.enableAccountChanged(!0),x.instance.adapter?this.play():(x.instance.onConnect(this.play.bind(this)),void 0!==P.instance.walletType?x.instance.connect(P.instance.walletType):this.play())},i.play=function(){var t=a(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._playing){t.next=2;break}return t.abrupt("return");case 2:if(x.instance.adapter){t.next=4;break}return t.abrupt("return",A.open(O));case 4:return this._playing=!0,t.prev=5,t.next=8,T.loadingRunCode(S.Loading,a(r().mark((function t(n){var a,s,i,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.updateText(V.get("tips_switch_network")),t.next=3,x.instance.switchChain(_.instance.chainNetwork);case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:if(M.instance.sdk){t.next=9;break}return n.updateText(V.get("tips_generate_game_account")),t.next=9,M.instance.init();case 9:return M.instance.preloadResources(),t.next=12,e._onWalletEvent();case 12:return n.updateText(V.get("tips_check_room")),t.next=15,M.instance.checkAccountGameAndStart();case 15:if(!t.sent){t.next=17;break}return t.abrupt("return");case 17:if(F.delQueryField("room"),X||!L.room||isNaN(Number(L.room))){t.next=26;break}return t.next=21,M.instance.joinGame(Number(L.room));case 21:if(!(a=t.sent)){t.next=26;break}return X=!0,N.success("join LaunchArguments.room game:",a),t.abrupt("return");case 26:if(e._updateView(),!J.utils.isAddress(L.invite)){t.next=37;break}return t.next=30,x.instance.getAddress();case 30:if(s=t.sent,i=J.utils.getAddress(L.invite),s===i){t.next=37;break}return t.next=35,B.instance.invite({address:s,parent:i});case 35:(o=t.sent)&&o.data&&j.instance.updateView();case 37:case"end":return t.stop()}}),t)}))));case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(5);case 12:this._playing=!1;case 13:case"end":return t.stop()}}),t,this,[[5,10]])})));return function(){return t.apply(this,arguments)}}(),i._updateView=function(){var t=this;y(this.getUI("play"),this.play,this),U(this.getUI("create"),this.create,this),U(this.getUI("join"),this.join,this),K.fadeOut(this.getUI("play")).call((function(){return t.getUI("play").active=!1})).start(),K.fadeIn(this.getUI("create")).start(),K.fadeIn(this.getUI("join")).start(),K.fadeIn(this.getUI("tabs")).start(),K.fadeIn(this.getUI("tabs-point")).start(),K.fadeIn(this.getUI("buy-nft")).start(),K.fadeIn(this.getUI("scroll-img")).start(),K.fadeIn(this.getUI("scroll-text")).start(),U(this.getUI("scroll-text"),this.scrollToLeaderBoard,this),U(this.getUI("scroll-img"),this.scrollToLeaderBoard,this),this.getUIComponent("ScrollView",u).enabled=!0,this.getUI("ScrollView").on(u.EventType.SCROLL_ENDED,this._onScrollEnd,this)},i._onWalletEvent=function(){var t=a(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._onAccountsChanged();case 2:return q&&q(),t.next=5,x.instance.onChainChanged((function(){window.location.reload()}));case 5:return q=t.sent,z&&z(),t.next=9,x.instance.onDisconnect((function(){window.location.reload()}));case 9:z=t.sent;case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i._onAccountsChanged=function(){var t=a(r().mark((function t(){var e,n,s=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.instance.onAccountsChanged(a(r().mark((function t(a){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a[0]){t.next=4;break}return location.reload(),t.abrupt("return");case 4:if(i=n=Date.now().toString()+Math.random(),t.t0=e,t.t0){t.next=10;break}return t.next=9,A.open(C,{arg:{type:S.Loading,text:V.get("tips_generate_game_account")}});case 9:t.t0=t.sent;case 10:e=t.t0;case 11:return t.prev=12,t.next=15,M.instance.init();case 15:return t.next=17,M.instance.checkAccountGameAndStart();case 17:if(!t.sent){t.next=19;break}s.close();case 19:return t.abrupt("break",28);case 22:if(t.prev=22,t.t1=t.catch(12),i===n){t.next=26;break}return t.abrupt("return");case 26:t.next=11;break;case 28:if(i===n){t.next=30;break}return t.abrupt("return");case 30:A.close(e),e=null;case 32:case"end":return t.stop()}}),t,null,[[12,22]])}))));case 2:this._offAccountsChanged=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.create=function(){var t=a(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:A.open(D);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.join=function(){A.open(E)},i.onUIClose=function(){x.instance.enableAccountChanged(!1),this._offAccountsChanged&&this._offAccountsChanged()},i._onScrollEnd=function(t){var e=this.getUIComponent("ScrollView",u),n=e.content;n.getPosition().y>=k(n)/2?this.scrollToLeaderBoard():this.scrollToMain(),Math.abs(e._autoScrollTargetDelta.y)<1&&e.stopAutoScroll()},i.scrollToMain=function(){this.getUIComponent("ScrollView",u).scrollToTop(.3),this.isMainView=!0},i.scrollToLeaderBoard=function(){this.getUIComponent("ScrollView",u).scrollToBottom(.3),this.isMainView=!1},i._initTabs=function(){var t=this;this.tabs.forEach((function(e){U(t.getUI(e.nodeKey),(function(){t.switchTab(e.key)}))})),this.switchTab(this.tabs[0].key)},i.switchTab=function(){var t=a(r().mark((function t(e){var n=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._tabKey!==e){t.next=2;break}return t.abrupt("return");case 2:this.tabs.forEach((function(t){var a=n.getUI(t.nodeKey),r=t.key===e;if(a.getComponent(l).opacity=r?255:127.5,r){var s=n.getUI("tabs-point");p.stopAllByTarget(s);var i=s.parent.getComponent(f).convertToNodeSpaceAR(a.getWorldPosition());i.x-=v(a)/2-v(s)/2,i.y-=k(a)/2,h(s).to(.5,{position:i},{easing:"quadInOut"}).start()}})),t.t0=this._tabKey,t.next="home"===t.t0?6:"gameAccount"===t.t0?8:"stake"===t.t0?10:"myNFTs"===t.t0?11:14;break;case 6:return this.getUIComponent("ScrollView",u).enabled=!1,t.abrupt("break",14);case 8:return A.close(G),t.abrupt("break",14);case 10:return t.abrupt("break",14);case 11:return this.getUI("blockInputEvents").active=!1,A.close(W),t.abrupt("break",14);case 14:this._lastTabKey=this._tabKey,this._tabKey=e,t.t1=e,t.next="home"===t.t1?19:"gameAccount"===t.t1?21:"stake"===t.t1?23:"myNFTs"===t.t1?24:29;break;case 19:return this.getUIComponent("ScrollView",u).enabled=!!M.instance.sdk,t.abrupt("break",29);case 21:return A.open(G),t.abrupt("break",29);case 23:return t.abrupt("break",29);case 24:return t.next=26,M.instance.getHoldemNftInfoList();case 26:return 0===t.sent.reduce((function(t,e){return t+e.data.length}),0)?(A.open(H),this.backTab()):(this.getUI("blockInputEvents").active=!0,A.open(W)),t.abrupt("break",29);case 29:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.backTab=function(){this._lastTabKey&&this.switchTab(this._lastTabKey)},n(s,null,[{key:"instance",get:function(){return s._instance}}]),s}(g))||Z)||Z);s._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIConstant.ts","./UIConfig.ts","./Logger.ts","./AssetsManager.ts","./UIInfo.ts","./NodePoolManager.ts","./UIRoot.ts","./NodeUtils.ts","./QueueManager.ts"],(function(t){var n,e,i,o,s,r,a,u,c,f,l,p,I,g,h,d,b,_,k,v,m,y,C,U,E,B,x,w;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.createClass,o=t.initializerDefineProperty,s=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,u=t._decorator,c=t.Prefab,f=t.isValid,l=t.director,p=t.Component,I=t.js,g=t.instantiate},function(t){h=t.UIBase},function(t){d=t.UIStatus,b=t.UIType,_=t.UIType2UIZIndex},function(t){k=t.createDefaultUIConfig},function(t){v=t.Logger},function(t){m=t.AssetsManager},function(t){y=t.UIInfo},function(t){C=t.putNode,U=t.getNode},function(t){E=t.UIRoot},function(t){B=t.onClick,x=t.offClick},function(t){w=t.QueueManager}],execute:function(){var L,P,T,S,N,O,A,D,M,z,R,j,q,G,H,V,F;a._RF.push({},"770aeXlw+lPEZD33mviIqsN","UIManager",void 0);var Q=u.ccclass,W=u.property,Y=(u.executeInEditMode,L=Q("EditorUIInfo"),P=W({serializable:!1}),T=W({serializable:!1}),S=W({serializable:!1}),N=W({serializable:!1}),L((D=n((A=function(){function t(){o(this,"name",D,this),o(this,"prefabPath",M,this),o(this,"bundle",z,this),o(this,"clsName",R,this)}return t.prototype.setPrefab=function(){var t=s(r().mark((function t(n,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.bundle=n,this.prefabPath=e;case 2:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),t}()).prototype,"name",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),M=n(A.prototype,"prefabPath",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=n(A.prototype,"bundle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),R=n(A.prototype,"clsName",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=A))||O);t("UIManager",(j=Q("UIManager"),q=W({type:[Y]}),G=W({}),j(((F=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._queue=w.getInstance("UIManager"),n._autoIncrement=0,n._stack=[],n._uiInfoList=[],n}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=s(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.instance||(n.instance=this),t.next=3,this.open(I.getClassByName("UIBlockInputEvents"));case 3:this._uiBlockInputEvents=t.sent;case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.onDestroy=function(){n.instance=null},o.onClickBlank=function(t,n){B(this._uiBlockInputEvents.node,t,n)},o.offClickBlank=function(t,n){x(this._uiBlockInputEvents.node,t,n)},n.registerUIClass=function(t,e){n._uiClassInfos.has(t)?v.fatal("registerUIClass cls"):n._uiClassInfos.set(t,{cls:t,config:k(e)})},n.getUIClassByName=function(t){var e;return n._uiClassInfos.forEach((function(n,i){n.config.name===t&&(e=n.cls)})),e},o.preload=function(t,e){return e=Object.assign({},n._uiClassInfos.get(t).config,e),m.getInstance(e.prefabInfo.bundle).preload(e.prefabInfo.path,c,e.progressCallback)},n.has=function(t){return n.instance.getUIInfoListByUIClass(t).length>0},n.open=function(t,e){return n.instance.open(t,e)},n.close=function(t){return n.instance.close(t)},o.open=function(){var t=s(r().mark((function t(e,i){var o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._queue.push(s(r().mark((function t(){var s,a,u,f,l,p,I,h,b,_,k,C,E,B,x,w,L,P;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o._curUIClass=e,i=Object.assign({},n._uiClassInfos.get(e).config,i||{}),v.info("open ui:",i.name),!((s=o.getUIInfoListByUIClass(e)).length>0&&i.only)){t.next=14;break}t.t0=s[0].status,t.next=t.t0===d.LOADING?8:11;break;case 8:return v.warn("ui "+i.name.toString()+" "),t.abrupt("return");case 11:return s[0].config.createSort&&o._sort("open"),v.warn("ui,"+i.name.toString()+" ui"),t.abrupt("return");case 14:if(u=(a=i).prefabInfo,f=a.progressCallback,l=a.events,p=a.onceEvents,I=a.parent,h=m.getInstance(u.bundle)){t.next=20;break}return t.next=19,m.newInstance(u.bundle);case 19:h=t.sent;case 20:if(!i.multiplexing){t.next=43;break}if(!(b=U(i.name))){t.next=43;break}if(!i.release){t.next=30;break}return t.next=26,h.load(u.path,c,f);case 26:t.sent.addRef(),t.next=31;break;case 30:f&&f(1,1,null);case 31:for(k in _=b.getComponent(e),l)_.eventTarget.on(k,l[k]);for(C in p)_.eventTarget.once(C,p[C]);return _.uiInfo.config=i,o.root.addChild(b),_.onOpen(i.arg),_.uiInfo.status=d.SHOW,I&&I.addChild(_),o._stack.push(_),o._uiInfoList.push(_.uiInfo),_.uiInfo.config.createSort&&o._sort("open"),t.abrupt("return",_);case 43:return E=new y(++o._autoIncrement,e,i,d.LOADING),o._uiInfoList.push(E),console.time(e.name+" load"),t.next=48,h.load(u.path,c,f);case 48:if(B=t.sent,console.timeEnd(e.name+" load"),E.status===d.LOADING){t.next=52;break}return t.abrupt("return");case 52:for(L in B.addRef(),E.prefab=B,console.time(e.name+" init"),x=g(B),w=x.getComponent(e)||x.addComponent(e),console.timeEnd(e.name+" init"),l)w.eventTarget.on(L,l[L]);for(P in p)w.eventTarget.once(P,p[P]);return E.ui=w,w.uiInfo=E,w.init(),console.time(e.name+" add"),o.root.addChild(x),console.timeEnd(e.name+" add"),E.status=d.SHOW,w.onOpen(i.arg),I&&I.addChild(w),o._stack.push(w),E.config.createSort&&o._sort("open"),t.abrupt("return",w);case 72:case"end":return t.stop()}}),t)}))));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(n,e){return t.apply(this,arguments)}}(),o.pop=function(){return this._stack.pop().close()},o.isActive=function(t){var n;return(n=t instanceof h?t.uiInfo:this.getUIInfoListByUIClass(t).pop()).status!==d.HIDE&&n.status!==d.PUT&&n.status!==d.DESTROY},o.close=function(t){var n=this;return this._queue.push((function(){if(!(t instanceof h)){var e=n.getUIInfoListByUIClass(t).pop();return e&&n.isActive(t)&&e.ui.close()}n._curUIClass=t.uiInfo.uiClass;var i=t.uiInfo;if(n.isActive(t)){var o;if(v.info("close ui:",i.config.name),i.config.multiplexing)i.status=d.PUT,C(i.config.name,t.node);else i.status=d.DESTROY,null==(o=t.node)||o.destroy();i.config.release&&i.prefab&&(i.prefab.decRef(!0),i.prefab=null),n._uiInfoList.splice(n._uiInfoList.indexOf(i),1),n._stack.splice(n._stack.indexOf(t),1),i.config.closeSort&&n._sort("close")}}))},o.getUIInfoListByUIClass=function(t){return this._uiInfoList.filter((function(n){return n.uiClass===t}))},o.getCurrentTopUI=function(){for(var t=this._stack.length-1;t>=0;t--){var n=this._stack[t];if(n.uiInfo.config.type<b.TIPS)return n}},o._sort=function(t,e){void 0===e&&(e=!1),this._stack.sort((function(t,n){return t.uiInfo.config.type===b.PUT_EVENT?-1:n.uiInfo.config.type===b.PUT_EVENT?1:_[t.uiInfo.config.type]-_[n.uiInfo.config.type]})),this._stack.forEach((function(t,n){t.node.setSiblingIndex(n)}));for(var i=n._uiClassInfos.get(this._curUIClass).config,o="close"===t||!e&&i.type>=b.TIPS,s=-1,r=this._stack.length-1;r>=0;r--){var a=this._stack[r],u=a.uiInfo.config,c=u.type,f=u.disableBlockInput,l=u.disableBlockInputEventsAnimation,p=u.coverPanelIsShowBlockInputEvents;if(u.useMask&&c<b.TIPS){this._uiBlockInputEvents&&(!p&&c>=b.PANEL&&this._stack[r-1]&&this._stack[r-1].uiInfo.config.type===b.PANEL&&a.parent===this._stack[r-1]&&(o=!0,s--),f?this._uiBlockInputEvents.node.active=!1:(this._uiBlockInputEvents.disableAnimation=o||l||i.type===b.TIPS,this._uiBlockInputEvents.show(),this._uiBlockInputEvents.disableAnimation=!1,this._uiBlockInputEvents.node.setSiblingIndex(r+s))),a.onTopping();break}}},i(n,[{key:"uiBlockInputEvents",get:function(){return this._uiBlockInputEvents}},{key:"uiList",get:function(){var t=[];return n._uiClassInfos.forEach((function(n,e){var i=new Y;i.name=n.config.zhName,i.clsName=n.config.name,i.setPrefab(n.config.prefabInfo.bundle,n.config.prefabInfo.path),t.push(i)})),t}},{key:"root",get:function(){if(!this._root||!f(this._root)){var t=l.getScene().getComponentInChildren(E);t&&(this._root=t.node)}return this._root}}]),n}(p))._uiClassInfos=new Map,n((V=F).prototype,"uiList",[q],Object.getOwnPropertyDescriptor(V.prototype,"uiList"),V.prototype),n(V.prototype,"root",[G],Object.getOwnPropertyDescriptor(V.prototype,"root"),V.prototype),H=V))||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ContractManager.ts","./GameplayManager.ts","./enum.ts","./PopupManager.ts"],(function(n){var t,e,o,r,i,a,u,c,l,s,p,f,d,h,g,b;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized,i=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){u=n.cclegacy,c=n._decorator,l=n.Node,s=n.Button,p=n.Label,f=n.Component},function(n){d=n.ContractManager},function(n){h=n.GameplayManager},function(n){g=n.PopupType},function(n){b=n.PopupManager}],execute:function(){var m,y,v,B,C,M,w,x,k,T,N,z,I,R,j,S,D,L,P,F,J,E,G,K,A,U,_,q,H,O,Q,W,V,X;u._RF.push({},"4ffedqIOAtGNJ8ns5504oeM","UIMenu",void 0);var Y=c.ccclass,Z=c.property;n("UIMenu",(m=Y("UIMenu"),y=Z({tooltip:"connect node"}),v=Z(l),B=Z({tooltip:"connected node"}),C=Z(l),M=Z({tooltip:"connected node"}),w=Z(s),x=Z({tooltip:"connect button"}),k=Z(s),T=Z({tooltip:"connect button"}),N=Z(s),z=Z({tooltip:"join button"}),I=Z(s),R=Z({tooltip:"join random button"}),j=Z(s),S=Z(p),D=Z(p),L=Z(p),P=Z(b),F=Z(h),m((G=t((E=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=n.call.apply(n,[this].concat(i))||this,o(t,"connectNode",G,r(t)),o(t,"connectedNode",K,r(t)),o(t,"disconnectButton",A,r(t)),o(t,"connectButton",U,r(t)),o(t,"createButton",_,r(t)),o(t,"joinButton",q,r(t)),o(t,"joinRandomButton",H,r(t)),o(t,"addressText",O,r(t)),o(t,"balanceText",Q,r(t)),o(t,"rollupText",W,r(t)),o(t,"popupManager",V,r(t)),o(t,"gameplayManager",X,r(t)),t}e(t,n);var u=t.prototype;return u.onLoad=function(){this.connectButton.node.on(s.EventType.CLICK,this.onClickConnectButton,this),this.disconnectButton.node.on(s.EventType.CLICK,this.onClickDisconnectButton,this),this.createButton.node.on(s.EventType.CLICK,this.onClickCreateButton,this),this.joinButton.node.on(s.EventType.CLICK,this.onClickJoinButton,this),this.joinRandomButton.node.on(s.EventType.CLICK,this.onClickJoinRandomButton,this),this.contractManager=d.instance,this.connectNode.active=!0,this.connectedNode.active=!1},u.onClickConnectButton=function(){var n=i(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.gameplayManager.connectWallet();case 2:null==(t=n.sent)?console.log("Connect fail"):(this.connectNode.active=!1,this.connectedNode.active=!0,this.setAddress(t));case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.onClickCreateButton=function(){var n=i(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.popupManager.ShowPopupInput(g.Create);case 2:t=n.sent,console.log("buyIn",t),this.gameplayManager.createSession(Number(t));case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.onClickJoinButton=function(){var n=this;this.popupManager.ShowPopupJoinGame((function(t,e){n.gameplayManager.joinSession(t,Number(e))}))},u.onClickJoinRandomButton=function(){var n=this.popupManager.ShowPopupInput(g.JoinRandom);this.gameplayManager.joinRandomSession(Number(n))},u.onClickDisconnectButton=function(){var n=this;console.log("onClickDisconnectButton"),this.gameplayManager.onDisconnect((function(){n.connectNode.active=!0,n.connectedNode.active=!1}))},u.setAddress=function(){var n=i(a().mark((function n(t){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.addressText.string=this.abbreviateString(t,7,5),this.updateBalance();case 2:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),u.updateBalance=function(){var n=i(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.gameplayManager.getBalance();case 2:t=n.sent,this.balanceText.string="Balance: "+this.formatBalance(t)+" ";case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.updateRollup=function(){var n=i(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.gameplayManager.getPlayerData();case 2:n.sent,this.rollupText.string="Rollup: "+this.gameplayManager.playerData.rollupBalance;case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),u.abbreviateString=function(n,t,e){return n.length<=t+e?n:n.substring(0,t)+"..."+n.substring(n.length-e)},u.formatBalance=function(n){return n>=1e15?(n/1e15).toFixed(2)+"Q":n>=1e12?(n/1e12).toFixed(2)+"T":n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":n>=1e3?(n/1e3).toFixed(2)+"k":n.toString()},t}(f)).prototype,"connectNode",[y,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(E.prototype,"connectedNode",[B,C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(E.prototype,"disconnectButton",[M,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(E.prototype,"connectButton",[x,k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(E.prototype,"createButton",[T,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(E.prototype,"joinButton",[z,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(E.prototype,"joinRandomButton",[R,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"addressText",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(E.prototype,"balanceText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(E.prototype,"rollupText",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(E.prototype,"popupManager",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(E.prototype,"gameplayManager",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=E))||J));u._RF.pop()}}}));

System.register("chunks:///_virtual/UINftBag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./AssetsManager.ts","./SpriteFrameList.ts","./ZKHoldemSDKManager.ts"],(function(t){var e,n,r,a,i,o,s,c,u,f,p,g,l,h,m,d;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,o=t.instantiate,s=t.Label,c=t.Sprite,u=t.Prefab},function(t){f=t.uiclass},function(t){p=t.UIType},function(t){g=t.Res},function(t){l=t.UIBase},function(t){h=t.AssetsManager},function(t){m=t.SpriteFrameList},function(t){d=t.ZKHoldemSDKManager}],execute:function(){var I;a._RF.push({},"1ece03gGxVBNbpibkbsIFhI","UINftBag",void 0);var y=i.ccclass;i.property,t("UINftBag",y("UINftBag")(I=f({name:"UINftBag",zhName:"nft",type:p.PANEL,prefabInfo:g.prefab.nftBag,multiplexing:!0,useMask:!1})(I=function(t){function a(){return t.apply(this,arguments)||this}return e(a,t),a.prototype.onUIOpen=function(){var t=n(r().mark((function t(e){var a,i,f,p,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.resources.load([g.prefab.nftGroupItem.path,g.prefab.nftItem.path],u);case 2:return a=t.sent,i=a[0],f=a[1],t.next=7,d.instance.getHoldemNftInfoList();case 7:p=t.sent,console.log("nftList",p),l=this.getUI("content"),p.filter((function(t){return t.data.length>0})).sort((function(t,e){return e.tier-t.tier})).forEach((function(t,e){var a=l.children[e];a||((a=o(i)).parent=l),a.getChildByPath("top/star").getComponent(m).index=t.tier-1,a.getChildByPath("top/num").getComponent(s).string=""+(t.data?t.data.length:0);var u=a.getChildByName("list");u.children.forEach((function(t){return t.active=!1})),u.getChildByName("empty").active=!t.data||0===t.data.length,t.data.forEach(n(r().mark((function e(n,a){var i,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=u.children[a+1])||((i=o(f)).parent=u),i.active=!0,i.getComponent(m).index=t.tier,i.getChildByName("text").getComponent(s).string="#"+n.id.toString(),e.next=7,d.instance.getHoldemNftImageByTokenUri(n.uri);case 7:p=e.sent,i.getChildByName("mask").getChildByName("icon").getComponent(c).spriteFrame=p;case 9:case"end":return e.stop()}}),e)}))))}));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a}(l))||I)||I);a._RF.pop()}}}));

System.register("chunks:///_virtual/UINotNftTip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts"],(function(t){var n,o,i,e,s,c,r,f;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator},function(t){e=t.uiclass},function(t){s=t.UIType},function(t){c=t.Res},function(t){r=t.UIBase},function(t){f=t.onClick}],execute:function(){var u;o._RF.push({},"c6bf4FZMRJC4IirsLvSQIWM","UINotNftTip",void 0);var p=i.ccclass;i.property,t("UINotNftTip",p("UINotNftTip")(u=e({name:"UINotNftTip",zhName:"nft",type:s.PANEL,prefabInfo:c.prefab.notNftTip,multiplexing:!0})(u=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onUIInit=function(){this.closeWithClickBlank(),f(this.getUI("close"),this.close,this)},o}(r))||u)||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIPlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Res.ts","./UIBase.ts","./UIDecorator.ts","./ChipsManager.ts","./GameLogic.ts","./OperationManager.ts","./PlayerManger.ts","./PokerManger.ts","./I18n.ts","./UIToastManager.ts","./SpriteFrameList.ts","./GameplayManager.ts","./NetworkManager.ts","./enum.ts"],(function(e){var t,n,i,a,r,o,s,l,c,u,p,h,g,f,m,y,w,b,d,M,I,v,k,L,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Label,u=e.Button,p=e.isValid},function(e){h=e.Res},function(e){g=e.UIBase},function(e){f=e.uiclass},function(e){m=e.ChipsManager},function(e){y=e.GameLogic},function(e){w=e.OperationManager},function(e){b=e.PlayerManger},function(e){d=e.PokerManager},function(e){M=e.I18n},function(e){I=e.UIToastManager},function(e){v=e.SpriteFrameList},function(e){k=e.GameplayManager},function(e){L=e.NetworkManager},function(e){S=e.ClientMessage}],execute:function(){var C,G,N,T,U,z,B,P,R,E,x,D,Q,V,A,F,_,K,H,O,j,q,Z,J;s._RF.push({},"e7452N/GDZHeb6hTy0tvapc","UIPlay",void 0);var W=l.ccclass,X=l.property;e("UIPlay",(C=W("UIPlay"),G=f({name:"UIPlay",zhName:"",prefabInfo:h.prefab.play}),N=X(k),T=X(L),U=X(b),z=X(d),B=X(m),P=X(w),R=X(c),E=X(u),x=X(u),D=X(u),C(Q=G((A=t((V=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"gameplayManager",A,a(t)),i(t,"networkManager",F,a(t)),i(t,"playerNode",_,a(t)),i(t,"pokerNode",K,a(t)),i(t,"chipsNode",H,a(t)),i(t,"operationNode",O,a(t)),i(t,"labelRoomId",j,a(t)),i(t,"startGame",q,a(t)),i(t,"resetButton",Z,a(t)),i(t,"buttonQuit",J,a(t)),t.allSettleItems=[],t}n(t,e);var s=t.prototype;return s.start=function(){this.gameLogic=y.instance,this.startGame.node.on(u.EventType.CLICK,this.onClickStartGame,this),this.resetButton.node.on(u.EventType.CLICK,this.onClickResetGame,this),this.buttonQuit.node.on(u.EventType.CLICK,this.onClickQuit,this),this.gameLogic.registerEvent(this.networkManager)},s.onUIStart=function(){var e=r(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initUI();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.reloadGasPrice=function(){var e=r(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.reloadBalance=function(){var e=r(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.initData=function(){this.gameLogic.init(this)},s.setNetwork=function(){this.gameLogic=y.instance,this.gameLogic.registerEvent(this.networkManager)},s.initUI=function(){var e=r(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.settleBg=this.getUI("settle"),this.settleBg.active=!1,this.gameLogic.playerManager=this.playerNode,this.gameLogic.pokerManager=this.pokerNode,this.gameLogic.chipsManager=this.chipsNode,this.gameLogic.operationManager=this.operationNode,this.roomLabel=this.labelRoomId,this.initData();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.showStartButton=function(e){this.startGame.node.active=e},s.showResetButton=function(e){this.resetButton.node.active=e},s.onClickStartGame=function(){this.networkManager.sendEvent(S.StartGame)},s.onClickResetGame=function(){this.networkManager.sendEvent(S.ResetGame)},s.onClickQuit=function(){this.gameplayManager.quitSession()},s.clearAllsettleItems=function(){for(var e=0;e<this.allSettleItems.length;e++){this.allSettleItems[e].destroy()}this.allSettleItems=[]},s.setChipType=function(){this.getUIComponent("chip",v).index=1},s.showErrorTips=function(e){I.instance.showTips(e,M.get("Error:"))},s.showTips=function(e){I.instance.showTips(e,M.get("Tips:")),this.showSystemMessage(e)},s.showSystemMessage=function(e){!this.gameLogic.gameEnd&&p(this.chatView.node)&&this.chatView.showSystemMessageInfo(e)},s.showTxStageAction=function(e,t,n){p(this.chatView.node)&&this.chatView.showTxStageAction(e,t,n)},t}(g)).prototype,"gameplayManager",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(V.prototype,"networkManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(V.prototype,"playerNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(V.prototype,"pokerNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(V.prototype,"chipsNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(V.prototype,"operationNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(V.prototype,"labelRoomId",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(V.prototype,"startGame",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(V.prototype,"resetButton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(V.prototype,"buttonQuit",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=V))||Q)||Q));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIRanking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./super-layout.ts","./NodeUtils.ts","./GameHelper.ts","./HttpApi.ts"],(function(t){var n,e,a,i,o,s,r,c,u,p,l,f,h,g;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){i=t.cclegacy,o=t._decorator,s=t.Label},function(t){r=t.uiclass},function(t){c=t.UIType},function(t){u=t.Res},function(t){p=t.UIBase},function(t){l=t.SuperLayout},function(t){f=t.onClick},function(t){h=t.formatNumberValue},function(t){g=t.HttpApi}],execute:function(){var I;i._RF.push({},"eecc7piyHhNbLnAn3zv0i2K","UIRanking",void 0);var U=o.ccclass;o.property,t("UIRanking",U("UIRanking")(I=r({name:"UIRanking",zhName:"",type:c.PANEL,prefabInfo:u.prefab.ranking,multiplexing:!0})(I=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var o=i.prototype;return o.onUIInit=function(){this.closeWithClickBlank(),f(this.getUI("close"),this.close,this),this._updateRank()},o._updateRank=function(){var t=e(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.instance.getLeaderBoardList({page:1,size:100});case 2:n=t.sent,this.getUIComponent("total",s).string="(Total:"+h(n.data.total)+")",this.getUIComponent("content",l).totalByData([].concat(n.data.list));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i}(p))||I)||I);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIItem.ts","./MathUtils.ts","./TableManager.ts","./tableEnums.ts","./ColorUtils.ts","./EthereumUtils.ts","./bignumber.mjs"],(function(t){var n,e,r,o,s,i,a,u,c,p,l,g,m,f,h;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,i=t.Label,a=t.isValid},function(t){u=t.UIItem},function(t){c=t.formatNumberToDigitGrouping},function(t){p=t.TableManager},function(t){l=t.Tables,g=t.IncentiveProgramBoostType},function(t){m=t.hex2Color},function(t){f=t.getEnsName},function(t){h=t.BigNumber}],execute:function(){var I;o._RF.push({},"6224cBgQRVNboQNSCq0/O8D","UIRankItem",void 0);var v=s.ccclass;s.property,t("UIRankItem",v("UIRankItem")(I=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var s=o.prototype;return s.onInit=function(){var t=e(r().mark((function t(){var n,e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.data,e=p.filterTable(l.IncentiveProgramBoostType,"value",n.boost.value)[0],this.getUIComponent("no",i).string=n.rank.toString(),this.getUIComponent("points",i).string=c(n.totalPt),this._setENS(n.address),this.getUIComponent("boost",i).string=new h(e.percentage).times(100).toString()+"%",e.value===g.None?this.getUIComponent("boost",i).color=m("#FFFFFF"):this.getUIComponent("boost",i).color=m("#E226E6");case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s._setENS=function(){var t=e(r().mark((function t(n){var e,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.getUIComponent("address",i)).string=n,t.next=4,f(n);case 4:(o=t.sent)&&a(e)&&this.data.address===n&&(e.string=o);case 6:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),o}(u))||I);o._RF.pop()}}}));

System.register("chunks:///_virtual/UIRetweet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./NodeUtils.ts","./WalletManager.ts","./SpriteFrameList.ts","./Logger.ts","./HttpApi.ts","./Tips.ts","./I18n.ts","./TwitterManager.ts","./UITipsPanel.ts","./SubUILeaderBoard.ts"],(function(t){var e,n,r,i,s,o,a,c,u,f,p,l,h,g,d,I,v,U,w,y,m,b,x,k;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){i=t.cclegacy,s=t._decorator,o=t.Button,a=t.EditBox},function(t){c=t.UIBase},function(t){u=t.uiclass},function(t){f=t.UIType},function(t){p=t.Res},function(t){l=t.onClick},function(t){h=t.WalletManager},function(t){g=t.SpriteFrameList},function(t){d=t.Logger},function(t){I=t.HttpApi},function(t){v=t.showErrorToast,U=t.showNetErrorTips,w=t.showToast,y=t.showTipsPanel},function(t){m=t.I18n},function(t){b=t.TwitterManager},function(t){x=t.UITipsPanelConfig},function(t){k=t.SubUILeaderBoard}],execute:function(){var T;i._RF.push({},"56815G7vFhAJqaTiUcwY/HH","UIRetweet",void 0);var C=s.ccclass;s.property,t("UIRetweet",C("UIRetweet")(T=u({name:"UIRetweet",zhName:"",type:f.PANEL,prefabInfo:p.prefab.retweet})(T=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var s=i.prototype;return s.onUIInit=function(){this.closeWithClickBlank(),l(this.getUI("close"),this.close,this),l(this.getUI("verify"),this.verify,this)},s.retweet=function(){var t=n(r().mark((function t(){var e;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=encodeURIComponent,t.next=3,h.instance.getAddress();case 3:t.t1=t.sent,t.t2="Verifying my Twitter account for my #zkHoldemID address:"+t.t1,t.t3=t.t2+" @zkHoldem\n\n\n",t.t4=(0,t.t0)(t.t3),t.t5="https://twitter.com/intent/tweet?text="+t.t4,t.t6=t.t5+"&url=",t.t7=encodeURIComponent(""+location.href.split("?")[0]),e=t.t6+t.t7,window.open(e,"targetWindow","noopener,noreferrer,".concat("toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=500, height=434, top=224, left=603.5")),this.getUIComponent("step-1",g).index=2,this.getUIComponent("step-2",g).index=1,this.getUIComponent("verify",o).interactable=!0;case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.verify=function(){var t=n(r().mark((function t(){var e,n,i=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getUIComponent("url",a).string){t.next=3;break}return t.abrupt("return",v(m.get("tips_input_retweet_link")));case 3:if(b.instance.userInfo){t.next=5;break}return t.abrupt("return",y((new x).set("text","Please connect to X").set("confirmCallback",(function(){b.instance.connect()}))));case 5:return this.getUI("verify").active=!1,this.getUI("verifying").active=!0,t.prev=7,t.t0=I.instance,t.next=11,h.instance.getAddress();case 11:return t.t1=t.sent,t.t2=e,t.t3={address:t.t1,url:t.t2},t.next=16,t.t0.verify.call(t.t0,t.t3);case 16:if(!(n=t.sent)||!n.data){t.next=27;break}return this.getUI("verifying").active=!1,this.getUI("verified").active=!0,this.getUIComponent("url",a).enabled=!1,w(m.get("tips_verification_successful"),!1),this.scheduleOnce((function(){i.close()}),2),k.instance.updateView(),t.abrupt("return");case 27:U(n.code);case 28:t.next=34;break;case 30:t.prev=30,t.t4=t.catch(7),d.error("verify tweet error:",t.t4),v(m.get("error_tips_validation_failed"));case 34:this.getUI("verify").active=!0,this.getUI("verifying").active=!1;case 36:case"end":return t.stop()}}),t,this,[[7,30]])})));return function(){return t.apply(this,arguments)}}(),i}(c))||T)||T);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIRoot.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,i,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.Widget,r=t.Component}],execute:function(){var s;e._RF.push({},"8390eH2tfhOUaOK570zPoZ/","UIRoot",void 0);var c=n.ccclass,u=(n.property,n.executeInEditMode);t("UIRoot",c("UIRoot")(s=u()(s=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){var t=this.getComponent(i)||this.addComponent(i);t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignTop=!0,t.isAlignBottom=!0,t.left=0,t.right=0,t.top=0,t.bottom=0},e}(r))||s)||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/UISelectPlayTheme.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./super-layout.ts","./NodeUtils.ts","./TableManager.ts","./tableEnums.ts","./EthereumUtils.ts","./WalletManager.ts"],(function(e){var t,n,s,r,c,a,o,i,l,u,f,h,m,p,y,I;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,s=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){c=e.cclegacy,a=e._decorator},function(e){o=e.UIBase},function(e){i=e.uiclass},function(e){l=e.UIType},function(e){u=e.Res},function(e){f=e.SuperLayout},function(e){h=e.onClick},function(e){m=e.TableManager},function(e){p=e.Tables},function(e){y=e.getPlayThemeNftList},function(e){I=e.WalletManager}],execute:function(){var g;c._RF.push({},"b9983AwSSlLOoKt1ZZa+q8r","UISelectPlayTheme",void 0);var U=a.ccclass;a.property,e("UISelectPlayTheme",U("UISelectPlayTheme")(g=i({name:"UISelectPlayTheme",zhName:"",type:l.PANEL,prefabInfo:u.prefab.selectPlayTheme,multiplexing:!0,only:!0})(g=function(e){function c(){return e.apply(this,arguments)||this}t(c,e);var a=c.prototype;return a.onUIInit=function(){var e=this;c.instance=this,h(this.getUI("close"),this.close,this),h(this.getUI("select"),(function(){e.items&&e.currentSelectItem&&(e.eventTarget.emit("select",e.currentSelectItem.row),e.close())}))},a.onUIOpen=function(){var e=s(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,I.instance.getAddress();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:n=e.sent,this.items=m.getTableByName(p.PlayThemeType).getRows().filter((function(e){var t=e.contractAddress?e.contractAddress.trim().toLocaleLowerCase():"";return!t||"*"===t&&n.length>0||n.find((function(e){return e.contract.address.toLocaleLowerCase()===t}))})).map((function(e){return{row:e,select:!1}})),this.selectItem(0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.selectItem=function(e){this.items.forEach((function(t,n){t.select=n===e})),this.getUIComponent("content",f).totalByData(this.items)},n(c,[{key:"currentSelectItem",get:function(){return this.items.find((function(e){return e.select}))}}]),c}(o))||g)||g);c._RF.pop()}}}));

System.register("chunks:///_virtual/UISelectWallet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./NodeUtils.ts","./Types.ts","./TweenUtils.ts","./Loading.ts","./UILoadingPanel.ts","./I18n.ts","./WalletManager.ts"],(function(t){var e,n,a,o,i,l,c,s,r,u,f,p,d,y,I,U,h;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator,l=t.NodeEventType},function(t){c=t.UIBase},function(t){s=t.uiclass},function(t){r=t.UIType},function(t){u=t.Res},function(t){f=t.onClick},function(t){p=t.WalletType},function(t){d=t.TweenUtils},function(t){y=t.Loading},function(t){I=t.UILoadingPanelType},function(t){U=t.I18n},function(t){h=t.WalletManager}],execute:function(){var g;o._RF.push({},"f3dc54S7tJHOoFwxm1xTFry","UISelectWallet",void 0);var T=i.ccclass;i.property,t("UISelectWallet",T("UISelectWallet")(g=s({name:"UISelectWallet",zhName:"select wallet",type:r.PANEL,prefabInfo:u.prefab.selectWallet,multiplexing:!0,only:!0})(g=function(t){function o(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).walletList=[{node:"metamask",walletType:p.MetaMask},{node:"okx",walletType:p.OKX}],e}e(o,t);var i=o.prototype;return i.onUIInit=function(){this.closeWithClickBlank(),f(this.getUI("cancel"),this.close,this),this._initWalletItem()},i._initWalletItem=function(){var t=this;this.walletList.forEach((function(e){var o=t.getUI(e.node),i=o.getChildByName("connect");o.on(l.MOUSE_ENTER,(function(){d.fadeIn(i,{stop:!0,useCurrentValue:!0,endOpacity:255,duration:.3}).start()}),t,!0),o.on(l.MOUSE_LEAVE,(function(){d.fadeOut(i,{stop:!0,useCurrentValue:!0,endOpacity:153,duration:.3}).start()}),t,!0),f(o,(function(){y.loadingRunCode({text:U.get("tips_authorization"),type:I.Loading},n(a().mark((function n(o){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.instance.connect(e.walletType);case 2:if(!n.sent){n.next=4;break}t.close();case 4:case"end":return n.stop()}}),n)}))))}))}))},o}(c))||g)||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/UISetStakeLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./Res.ts","./UIBase.ts","./NodeUtils.ts","./UIManager.ts","./UIBuyIn.ts","./UISelectPlayTheme.ts","./Validate.ts","./bignumber.mjs"],(function(t){var e,n,r,s,i,o,a,c,u,l,p,g,h,I,d,m,f,U,v,x,S;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){i=t.cclegacy,o=t._decorator,a=t.Label,c=t.Slider,u=t.EditBox},function(t){l=t.uiclass},function(t){p=t.Res},function(t){g=t.UIBase},function(t){h=t.addClickButtonEvent,I=t.setNodeWidth,d=t.getNodeWidth,m=t.onClick},function(t){f=t.UIManager},function(t){U=t.UIBuyIn},function(t){v=t.UISelectPlayTheme},function(t){x=t.isInteger},function(t){S=t.BigNumber}],execute:function(){var y;i._RF.push({},"8943dl2qklB4bg4rF4R7kFn","UISetStakeLevel",void 0);var L=o.ccclass;o.property,t("UISetStakeLevel",L("UISetStakeLevel")(y=l({name:"UISetStakeLevel",zhName:"",prefabInfo:p.prefab.setStakeLevel})(y=function(t){function i(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).min=1,e.max=1e3,e.stepIndex=-1,e.stepList=[1,2,5,10,20,50].concat(new Array(e.max/100).fill(0).map((function(t,e){return 100*(e+1)}))),e._ing=!1,e}e(i,t);var o=i.prototype;return o.onUIStart=function(){var t=this;this.updateByIndex(6),this.getUIComponent("min",a).string=this.min+"/"+2*this.min,this.getUIComponent("max",a).string=this.max+"/"+2*this.max,this.getUIComponent("slider",c).slideEvents.push(h(null,this.node,"UISetStakeLevel","onSlider")),this.getUI("current").on(u.EventType.EDITING_DID_BEGAN,(function(){t.getUIComponent("sub-title",a).string="Set SB",t.getUI("current-text").active=!1,t.getUIComponent("current",u).string=t.current.toString()})),this.getUI("current").on(u.EventType.EDITING_DID_ENDED,(function(){t.getUIComponent("sub-title",a).string="SB/BB",t.getUI("current-text").active=!0;var e=t.getUIComponent("current",u),n=e.string;if(e.string="",!x(n)||S(n).gt(Number.MAX_VALUE)||S(n).lte(0))t.getUIComponent("current-text",a).string=t.current+"/"+2*t.current;else{var r=Number(n),s=t.stepList.findIndex((function(t){return t===r}));if(-1!==s)t.updateByIndex(s);else{var i=1;if(r<t.max){var o=t.stepList.findIndex((function(t){return t>r})),l=t.stepList.length-1,p=new S(o-1).div(l).toNumber(),g=t.stepList[o],h=t.stepList[o-1];i=new S(1).div(l).times((r-h)/(g-h)).plus(p).toNumber()}t.getUIComponent("slider",c).progress=Math.min(1,i),I(t.getUI("line"),t.getUIComponent("slider",c).progress*d(t.getUI("slider")))}t._current=r,t.getUIComponent("current-text",a).string=t.current+"/"+2*t.current}})),m(this.getUI("create-game"),this.createGame,this),m(this.getUI("back"),this.close,this)},o.createGame=function(){var t=r(s().mark((function t(){var e,n=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.current,console.log("sb size",e),f.open(v,{onceEvents:{select:function(){var t=r(s().mark((function t(r,i){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.open(U,{arg:{smallBlind:e,playThemeTypeRow:i}});case 2:n.close();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}});case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.onSlider=function(){if(!this._ing){this._ing=!0,this._current=null;var t=this.getUIComponent("slider",c).progress,e=this.stepList.length-1,n=Math.round(t*e);t=n/e,this.getUIComponent("slider",c).progress=t,this.updateByIndex(n),this._ing=!1}},o.updateByIndex=function(t){this.stepIndex=t;var e=this.stepList[this.stepIndex];this.getUIComponent("slider",c).progress=t/(this.stepList.length-1),this.getUIComponent("current-text",a).string=e+"/"+2*e,I(this.getUI("line"),this.getUIComponent("slider",c).progress*d(this.getUI("slider")))},n(i,[{key:"current",get:function(){return this._current||this.stepList[this.stepIndex]}}]),i}(g))||y)||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/UISpectating.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./ZKHoldemSDKManager.ts","./WalletManager.ts","./GameHelper.ts","./NodeUtils.ts","./Loading.ts","./UILoadingPanel.ts","./I18n.ts","./Logger.ts","./Tips.ts","./GameLogic.ts","./ZKHoldemSDK.mjs","./ethers.umd.mjs_cjs=&original=.js","./ethers.umd.js"],(function(e){var t,n,r,a,i,s,u,c,o,p,f,g,h,l,d,x,m,b,v,I,k,y,U,w,_,S,T;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,i=e._decorator,s=e.instantiate,u=e.Label},function(e){c=e.UIBase},function(e){o=e.uiclass},function(e){p=e.UIType,f=e.UIStatus},function(e){g=e.Res},function(e){h=e.ZKHoldemSDKManager,l=e.ChipType},function(e){d=e.WalletManager},function(e){x=e.setProfilePic,m=e.formatChipType},function(e){b=e.onClick},function(e){v=e.Loading},function(e){I=e.UILoadingPanelType},function(e){k=e.I18n},function(e){y=e.Logger},function(e){U=e.showToast,w=e.showErrorToast},function(e){_=e.GameLogic},function(e){S=e.GameStage},null,function(e){T=e.default}],execute:function(){var L;a._RF.push({},"08eb56o9MpKQJCE8ZOWTTLh","UISpectating",void 0);var G=i.ccclass;i.property,e("UISpectating",G("UISpectating")(L=o({name:"UISpectating",zhName:"",type:p.PANEL,prefabInfo:g.prefab.spectating,multiplexing:!0,only:!0,useMask:!1})(L=function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var i=a.prototype;return i.onUIInit=function(){b(this.getUI("quitgame-small-button"),this.quit,this),b(this.getUI("exit-queue-button"),this.exitQueue,this),b(this.getUI("join-queue-button"),this.joinQueue,this)},i.onUIOpen=function(){var e=n(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initView(),this.schedule(this._initView,5),!(t=h.instance.game)){e.next=10;break}return e.next=6,h.instance.getGameBoard(t);case 6:n=e.sent,a=k.get(n.stage>S.GatheringPlayers?"tips_room_playing":"tips_room_full"),U(a,!1),_.instance.addSystemMessage(a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i._initView=function(){var e=n(r().mark((function e(){var t,n,a,i,c,o,p,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.instance.game){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,d.instance.getAddress();case 5:return n=e.sent,e.next=8,t.getWaitQueue();case 8:if(a=e.sent,this.uiInfo.status===f.SHOW){e.next=11;break}return e.abrupt("return");case 11:for(i=a.indexOf(n),(c=this.getUI("queue")).children.forEach((function(e){return e.active=!1})),o=Math.min(5,a.length),p=0;p<o;p++)(g=c.children.length-1===p?null:c.children[p])||((g=s(c.children[0])).parent=c,g.setSiblingIndex(p)),g.active=!0,x(a[p],g.getChildByName("avatar"));this.getUI("exit-queue-button").active=-1!==i,this.getUI("join-queue-button").active=-1===i,this.getUIComponent("position",u).string=-1===i?"--":(i+1).toString(),this.getUI("more").active=a.length>5;case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.quit=function(){var e=n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.getUI("exit-queue-button").active,!e.t0){e.next=5;break}return e.next=4,this.exitQueue();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,h.instance.destroyGame();case 9:this.close();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.exitQueue=function(){var e=n(r().mark((function e(){var t,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.instance.game){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,v.loadingRunCode({type:I.Loading,text:"Exit"},n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leaveWaitingQueue();case 2:a._initView();case 3:case"end":return e.stop()}}),e)}))));case 6:return e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),i.joinQueue=function(){var e=n(r().mark((function e(){var t,a=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.instance.game){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,v.loadingRunCode(I.Loading,n(r().mark((function e(n){var i,s,u,c,o,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.info("ready check game account balance"),n.updateText(k.get("tips_fund_game_account")),e.next=4,h.instance.sdk.fundGameAccount(2);case 4:return e.next=6,h.instance.sdk.authorizeGameAccount();case 6:return e.next=8,h.instance.getGameBoard(t);case 8:if(i=e.sent,s=h.instance.sdk.getBuyInRange(i.bigBlindSize),u=s[0],n.updateText(m(k.get("tips_request_chips"),i.isZToken?l.ZChip:l.Chip)),!i.isZToken){e.next=20;break}return e.next=14,h.instance.getAccountInfo();case 14:if(c=e.sent,!T.BigNumber.from(c.zchips).lt(u)){e.next=18;break}return e.abrupt("return",w("Insufficient zCHIP to start the game"));case 18:e.next=22;break;case 20:return e.next=22,h.instance.requestChips(u);case 22:if(n.updateText(k.get("tips_join_room")),(o=h.instance.sdk.getPlayersRange())[0],p=o[1],!(i.stage===S.GatheringPlayers&&i.permanentAccounts.length<p)){e.next=29;break}return e.next=27,h.instance.callJoinGame(u,i.isZToken);case 27:e.next=37;break;case 29:return e.next=31,t.joinWaitingQueue(u);case 31:return e.next=33,h.instance.getGameBoard(t);case 33:if(e.sent.stage!==S.Ended){e.next=37;break}return e.next=37,t.leaveWaitingQueue();case 37:a._initView();case 38:case"end":return e.stop()}}),e)}))));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}(),a}(c))||L)||L);a._RF.pop()}}}));

System.register("chunks:///_virtual/UIStaticBatchMarkAsDirty.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,c,i,a,n;return{setters:[function(t){r=t.inheritsLoose},function(t){c=t.cclegacy,i=t._decorator,a=t.UIStaticBatch,n=t.Component}],execute:function(){var o;c._RF.push({},"69fcf1zUK1Ax4+tmHl87ZHB","UIStaticBatchMarkAsDirty",void 0);var e=i.ccclass;i.property,t("UIStaticBatchMarkAsDirty",e("UIStaticBatchMarkAsDirty")(o=function(t){function c(){return t.apply(this,arguments)||this}return r(c,t),c.prototype.start=function(){(this.getComponent(a)||this.addComponent(a)).markAsDirty()},c}(n))||o);c._RF.pop()}}}));

System.register("chunks:///_virtual/UIThemeItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIItem.ts","./NodeUtils.ts","./UISelectPlayTheme.ts","./PlayThemeManager.ts"],(function(e){var t,n,o,r,a,i,s,c,u,h,l,p,m,d;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,i=e.NodeEventType,s=e.Tween,c=e.tween,u=e.v3,h=e.Sprite},function(e){l=e.UIItem},function(e){p=e.onClick},function(e){m=e.UISelectPlayTheme},function(e){d=e.PlayThemeManager}],execute:function(){var f;r._RF.push({},"0021eXKPWVBl6CjngFS+Sod","UIThemeItem",void 0);var v=a.ccclass;a.property,e("UIThemeItem",v("UIThemeItem")(f=function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var a=r.prototype;return a.onLoad=function(){var e=this;this.onHover(),p(this.node,(function(){m.instance.selectItem(e.index)}))},a.onInit=function(){var e=n(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tag=Date.now().toString()+Math.random(),this.getUI("select").active=this.data.select,e.prev=2,e.next=5,d.instance.getSpriteFrame(this.data.row.preview,this.data.row);case 5:n=e.sent,this.tag===t&&(this.getUIComponent("icon",h).spriteFrame=n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),a.onHover=function(){var e=this;this.node.on(i.MOUSE_ENTER,(function(){s.stopAllByTarget(e.node),c(e.node).to(.2,{scale:u(1.05,1.05,1.05)}).start()})),this.node.on(i.MOUSE_LEAVE,(function(){s.stopAllByTarget(e.node),c(e.node).to(.2,{scale:u(1,1,1)}).start()}))},r}(l))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/UITips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIBase.ts","./UIConstant.ts","./Res.ts","./UIDecorator.ts"],(function(t){var n,e,o,i,r,s,a,c,p,u,f,l,h,y;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){i=t.cclegacy,r=t._decorator,s=t.Label,a=t.tween,c=t.Vec3,p=t.UIOpacity,u=t.Widget},function(t){f=t.UIBase},function(t){l=t.UIType},function(t){h=t.Res},function(t){y=t.uiclass}],execute:function(){var I;i._RF.push({},"87f64YfL89OfoGpojib0lVT","UITips",void 0);var m=r.ccclass;r.property,t("UITips",m("UITips")(I=y({name:"UITips",zhName:"",type:l.TIPS,only:!1,prefabInfo:h.prefab.tips,release:!1,multiplexing:!0,createSort:!1,closeSort:!1})(I=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var r=i.prototype;return r.onUIOpen=function(t){this.text=t},r.onUIRunShowAnimation=function(){var t=e(o().mark((function t(){var n,e=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getComponent(s).string=this.text,n=this.node.getPosition(),a(this.node).to(2,{position:new c(n.x,n.y+200,n.z)}).start(),a(this.node.getComponent(p)).to(.5,{opacity:255}).delay(1).to(.5,{opacity:0}).call((function(){e.close()})).start();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onUIRunHideAnimation=function(){var t=e(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.getComponent(u).updateAlignment(),this.node.getComponent(p).opacity=0;case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i}(f))||I)||I);i._RF.pop()}}}));

System.register("chunks:///_virtual/UITipsPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./ColorUtils.ts","./NodeUtils.ts"],(function(t){var e,n,i,c,r,s,o,a,l,u,h,f,p,g;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){c=t.cclegacy,r=t._decorator,s=t.RichText,o=t.Label,a=t.Sprite},function(t){l=t.uiclass},function(t){u=t.UIType},function(t){h=t.Res},function(t){f=t.UIBase},function(t){p=t.hex2Color},function(t){g=t.onClick}],execute:function(){var x;c._RF.push({},"43a5fCdQ1JCzICjcA9Tx9QM","UITipsPanel",void 0);var C=r.ccclass,I=(r.property,t("UITipsPanelType",function(t){return t[t.Success=0]="Success",t[t.Warning=1]="Warning",t[t.Error=2]="Error",t}({})));t("UITipsPanelConfig",function(){function t(){this.richText=!1,this.title="Tips",this.text="",this.type=I.Success,this.showConfirmButton=!0,this.showCancelButton=!0,this.confirmButtonColor=p("#FFFFFF"),this.cancelButtonColor=p("#FFFFFF"),this.confirmText="Confirm",this.cancelText="Cancel"}return t.prototype.set=function(t,e){return this[t]=e,this},t}()),t("UITipsPanel",C("UITipsPanel")(x=l({name:"UITipsPanel",zhName:"",type:u.PANEL,only:!1,prefabInfo:h.prefab.tipsPanel,release:!1})(x=function(t){function c(){return t.apply(this,arguments)||this}e(c,t);var r=c.prototype;return r.onUIOpen=function(t){if(this.config=t,t.richText?(this.getUI("textLabel").active=!t.richText,this.getUI("richTextLabel").active=t.richText,this.getUIComponent("richTextLabel",s).string=t.text):this.getUIComponent("textLabel",o).string=t.text,this.getUIComponent("titleLabel",o).string=t.title,this.getUIComponent("confirmLabel",o).string=t.confirmText,this.getUIComponent("cancelLabel",o).string=t.cancelText,this.getUIComponent("confirmBtn",a).color=t.confirmButtonColor,this.getUIComponent("cancelBtn",a).color=t.cancelButtonColor,!t.showCancelButton){this.getUI("cancelBtn").active=!1;var e=this.getUI("confirmBtn").getPosition();e.x=0,this.getUI("confirmBtn").setPosition(e)}if(!t.showConfirmButton){this.getUI("confirmBtn").active=!1;var n=this.getUI("cancelBtn").getPosition();n.x=0,this.getUI("cancelBtn").setPosition(n)}},r.onUIStart=function(){this.closeWithClickBlank(),g(this.getUI("confirmBtn"),this.confirm,this),g(this.getUI("cancelBtn"),this.cancel,this)},r.confirm=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.config.checkCallback,!t.t0){t.next=5;break}return t.next=4,this.config.checkCallback();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=7;break}return t.abrupt("return");case 7:if(t.t1=this.config.confirmCallback,!t.t1){t.next=13;break}return t.next=11,this.config.confirmCallback();case 11:t.t2=t.sent,t.t1=!1===t.t2;case 13:if(!t.t1){t.next=15;break}return t.abrupt("return");case 15:this.close();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.cancel=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.config.checkCallback,!t.t0){t.next=5;break}return t.next=4,this.config.checkCallback();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=7;break}return t.abrupt("return");case 7:if(t.t1=this.config.cancelCallback,!t.t1){t.next=13;break}return t.next=11,this.config.cancelCallback();case 11:t.t2=t.sent,t.t1=!1===t.t2;case 13:if(!t.t1){t.next=15;break}return t.abrupt("return");case 15:this.close();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c}(f))||x)||x);c._RF.pop()}}}));

System.register("chunks:///_virtual/UIToast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIBase.ts","./UIConstant.ts","./Res.ts"],(function(t){var e,s,i,o,n,a,r,c,l,p,u,d,h,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,r=t.Node,c=t.Label,l=t.RichText,p=t.tween,u=t.isValid},function(t){d=t.uiclass},function(t){h=t.UIBase},function(t){f=t.UIType},function(t){g=t.Res}],execute:function(){var v,I,T,y,U,M;n._RF.push({},"79afeZ1AUJIAL2VP4Wt9Apr","UIToast",void 0);var m=a.ccclass,R=a.property;t("UIToast",(v=m("UIToast"),I=d({name:"UIToast",zhName:"toast",type:f.TIPS,only:!1,prefabInfo:g.prefab.toast,release:!1,multiplexing:!0,createSort:!1,closeSort:!1}),T=R(r),v(y=I((M=e((U=function(t){function e(){for(var e,s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"toast",M,o(e)),e}s(e,t);var n=e.prototype;return n.onUILoad=function(){this.tipsTitle=this.getUIComponent("tipsTitle",c),this.tipsMessage=this.getUIComponent("tipsMessage",c),this.tipsRichMessage=this.getUIComponent("chatItem",l),this.tipsTitle.node.active=!1,this.tipsMessage.node.active=!1,this.tipsRichMessage.node.active=!1},n.showTips=function(t,e,s){var i=this;return new Promise((function(o,n){i.toast.active=!0,i.tipsTitle.node.active=!0,i.tipsTitle.string=e,i.tipsMessage.node.active=!0,i.tipsMessage.string=t,i.tipsRichMessage.node.active=!1,s?p(i.node).delay(3).call((function(t){i.hidden(),o()})).start():o()}))},n.hidden=function(t){var e=this;return void 0===t&&(t=!1),new Promise((function(s,i){u(e.node)&&(t?p(e.node).delay(3).call((function(t){console.log("destroy toast"),s(),e.toast.active=!1})).start():(console.log("destroy toast"),s(),e.toast.active=!1))}))},n.showRichTextMessage=function(t,e,s){var i=this;return new Promise((function(o,n){i.toast.active=!0,i.tipsTitle.node.active=!0,i.tipsTitle.string=t,i.tipsRichMessage.node.active=!0,i.tipsRichMessage.string=e,i.tipsMessage.node.active=!1,s?p(i.node).delay(3).call((function(t){i.hidden(),o()})).start():o()}))},e}(h)).prototype,"toast",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=U))||y)||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/UIToastManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./UIToast.ts","./GameHelper.ts","./GameConst.ts","./I18n.ts"],(function(t){var s,e,o,n,a,i,r,h,u,c;return{setters:[function(t){s=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){n=t.UIManager},function(t){a=t.UIToast},function(t){i=t.shortName},function(t){r=t.chatBotFontColor,h=t.chatBotMessageFontColor,u=t.linkFontColor},function(t){c=t.I18n}],execute:function(){var l;o._RF.push({},"e50a9/251tEgr3R0lqQ0lHF","UIToastManager",void 0);var w=t("UIToastManager",function(){function t(){this.showToast=null,this.isShowToast=!1,this.toastQueue=[]}var o=t.prototype;return o.showTips=function(){var t=s(e().mark((function t(s,o){var i,r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("showTips "+s+"  title   "+o),console.log("this.isShowToast",this.isShowToast),!this.isShowToast){t.next=5;break}return this.toastQueue.push({msg:s,title:o,autoHidden:!0,type:0}),t.abrupt("return");case 5:return this.isShowToast=!0,t.next=8,n.open(a);case 8:return i=t.sent,t.next=11,i.showTips(s,o,!0);case 11:return this.isShowToast=!1,this.toastQueue.length>0&&(0==(r=this.toastQueue.shift()).type?r.autoHidden?this.showTips(r.msg,r.title):this.showAwayToast(r.msg,r.title):this.showTxStageTips(r.hash,r.msg,r.title,r.status,r.autoHidden)),t.abrupt("return",i);case 14:case"end":return t.stop()}}),t,this)})));return function(s,e){return t.apply(this,arguments)}}(),o.showAwayToast=function(){var t=s(e().mark((function t(s,o){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isShowToast=!0,this.showToast){t.next=5;break}return t.next=4,n.open(a);case 4:this.showToast=t.sent;case 5:this.showToast.showTips(s,o,!1);case 6:case"end":return t.stop()}}),t,this)})));return function(s,e){return t.apply(this,arguments)}}(),o.showTxStageTips=function(){var t=s(e().mark((function t(s,o,l,w,p){var T,f,g,d;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===p&&(p=!0),console.log("showTips "+o+"  title   "+l),console.log("this.isShowToast",this.isShowToast),!this.isShowToast||!p){t.next=6;break}return this.toastQueue.push({hash:s,msg:o,title:l,autoHidden:p,status:w,type:1}),t.abrupt("return");case 6:if(T=i(s),f="<color=#"+r+"> "+c.get("System")+": </color><color=#"+h+"> "+o+"  "+w+' </color><on click="clickLink" param="'+s+'"><u><color=#'+u+">"+T+"</color><u></on>",console.log("messageItem",f),!p){t.next=20;break}return this.isShowToast=!0,t.next=13,n.open(a);case 13:return g=t.sent,t.next=16,g.showRichTextMessage(l,f,p);case 16:this.isShowToast=!1,this.toastQueue.length>0&&(0==(d=this.toastQueue.shift()).type?d.autoHidden?this.showTips(d.msg,d.title):this.showAwayToast(d.msg,d.title):this.showTxStageTips(d.hash,d.msg,d.title,d.status,d.autoHidden)),t.next=26;break;case 20:if(this.isShowToast=!0,this.showToast){t.next=25;break}return t.next=24,n.open(a);case 24:this.showToast=t.sent;case 25:this.showToast.showRichTextMessage(l,f,p);case 26:case"end":return t.stop()}}),t,this)})));return function(s,e,o,n,a){return t.apply(this,arguments)}}(),o.hiddenAwayToast=function(){var t=s(e().mark((function t(s){var o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===s&&(s=!0),!this.showToast){t.next=6;break}return t.next=4,this.showToast.hidden(s);case 4:this.showToast=null,this.isShowToast=!1;case 6:this.toastQueue.length>0&&(0==(o=this.toastQueue.shift()).type?o.autoHidden?this.showTips(o.msg,o.title):this.showAwayToast(o.msg,o.title):this.showTxStageTips(o.hash,o.msg,o.title,o.status,o.autoHidden));case 7:case"end":return t.stop()}}),t,this)})));return function(s){return t.apply(this,arguments)}}(),t}());l=w,w.instance=new l,o._RF.pop()}}}));

System.register("chunks:///_virtual/UIType.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"28833OOZidOGZ9WBJ1nyv8f","UIType",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIUserSettings.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIDecorator.ts","./UIConstant.ts","./Res.ts","./UIBase.ts","./WalletManager.ts","./EthereumUtils.ts","./watch.ts","./ZKHoldemSDKManager.ts","./ethers.umd.mjs_cjs=&original=.js","./NodeUtils.ts","./Icon.ts","./TweenUtils.ts","./QueueManager.ts","./Loading.ts","./UILoadingPanel.ts","./EventTarget.ts","./EventConstant.ts","./I18n.ts","./TableManager.ts","./tableEnums.ts","./UIMain.ts","./IpfsUtils.ts","./TwitterManager.ts","./ethers.umd.js"],(function(t){var n,e,a,i,r,s,c,o,u,f,l,p,g,h,d,I,U,v,m,w,E,y,x,C,N,T,k,b,_,M,B,A,S,P,L,O;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){i=t.cclegacy,r=t._decorator,s=t.Label,c=t.Node,o=t.NodeEventType,u=t.instantiate,f=t.Sprite,l=t.isValid},function(t){p=t.uiclass},function(t){g=t.UIType},function(t){h=t.Res},function(t){d=t.UIBase},function(t){I=t.WalletManager},function(t){U=t.getPFPNftList,v=t.formatAddress,m=t.getEnsName},function(t){w=t.watch},function(t){E=t.ZKHoldemSDKManager},null,function(t){y=t.onClick},function(t){x=t.Icon},function(t){C=t.TweenUtils},function(t){N=t.QueueManager},function(t){T=t.Loading},function(t){k=t.UILoadingPanelType},function(t){b=t.EventTarget},function(t){_=t.EventConstant},function(t){M=t.I18n},function(t){B=t.TableManager},function(t){A=t.Tables},function(t){S=t.UIMain},function(t){P=t.IpfsUtils},function(t){L=t.TwitterManager},function(t){O=t.default}],execute:function(){var R;i._RF.push({},"b87a5OBiDBAeIDFN9aUbnGU","UIUserSettings",void 0);var j=r.ccclass;r.property,t("UIUserSettings",j("UIUserSettings")(R=p({name:"UIUserSettings",zhName:"",type:g.PANEL,prefabInfo:h.prefab.userSettings,multiplexing:!0})(R=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var r=i.prototype;return r.onUIInit=function(){var t=e(a().mark((function t(){var n,i,r=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.closeWithClickBlank(),y(this.getUI("close"),this.close,this),y(this.getUI("withdraw"),this.withdraw,this),this.eventTarget.on("close",(function(){S.instance.node.activeInHierarchy&&S.instance.node.parent&&S.instance.backTab()})),t.next=6,I.instance.isConnect();case 6:if(!t.sent){t.next=10;break}this.initAccount(),t.next=11;break;case 10:n=I.instance.onConnect(e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(),r.initAccount();case 2:case"end":return t.stop()}}),t)}))));case 11:E.instance.sdk?this.initBalance():i=E.instance.onInit(e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(),r.initBalance();case 2:case"end":return t.stop()}}),t)})))),this._initNftItem(this.getUI("item")),y(this.getUI("connect-x"),(function(){L.instance.connect()})),y(this.getUI("disconnect-x"),(function(){L.instance.disconnect(),r.getUI("connect-x").active=!0,r.getUI("disconnect-x").active=!1})),this._initNftTips();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r._initNftTips=function(){var t=this;this.getUIComponent("pfp-nft-list",s).string=B.getTableByName(A.PFPNft).getRows().map((function(t){return t.name})).join(", ");var n=!1;this.getUI("hoverQM").on(c.EventType.MOUSE_ENTER,(function(){n||(n=!0,C.fadeIn(t.getUI("pfp-nft-panel"),{useCurrentValue:!0,stop:!0,duration:.3}).start())})),this.getUI("hoverQM").on(c.EventType.MOUSE_LEAVE,(function(){n&&(n=!1,C.fadeOut(t.getUI("pfp-nft-panel"),{useCurrentValue:!0,stop:!0,duration:.3}).start())}))},r.initAccount=function(){var t=e(a().mark((function t(){var n,i,r=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.instance.getAccount();case 2:n=t.sent,(i=function(){var t=e(a().mark((function t(){var e,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.value&&n.value[0],r.getUI("wallet-address").active=!!e,!e){t.next=8;break}return r.getUIComponent("wallet-address",s).string="Wallet:"+v(e),t.next=6,m(e);case 6:(i=t.sent)&&(r.getUIComponent("wallet-address",s).string="Wallet:"+i);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())(),w(n,i);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r.initBalance=function(){var t=e(a().mark((function t(){var n,i=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=function(){var t=e(a().mark((function t(){var n,e,r,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([E.instance.sdk.getMyChips(),E.instance.sdk.getGameAccountBalance(),E.instance.sdk.getGameAccountAddress()]);case 2:if(n=t.sent,e=n[0],r=n[1],c=n[2],l(i)&&i._ui){t.next=8;break}return t.abrupt("return");case 8:i.getUIComponent("chips",s).string="Balance: "+e.toString()+" Chips",i.getUIComponent("game-account-address",s).string="Game Account: "+v(c),i.getUIComponent("game-account-balance",s).string="Balance: "+O.utils.formatEther(r.toString()),i.getUI("chips").active=!0,i.getUI("game-account-address").active=!0,i.getUI("game-account-balance").active=!0;case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())(),this.schedule(n,30),E.instance.onInit(n);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.onUIOpen=function(){var t=e(a().mark((function t(){var n,i,r,o,l,p,g=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=L.instance.userInfo,this.getUI("connect-x").active=!n,this.getUI("disconnect-x").active=!!n,t.t0=U,t.next=6,I.instance.getAddress();case 6:return t.t1=t.sent,t.next=9,(0,t.t0)(t.t1);case 9:(i=t.sent)&&i.length>0&&(this.getUI("title").active=!0,this.getUI("content").active=!0,r=Object.create(null),i.forEach((function(t){var n=O.utils.getAddress(t.contract.address);r[n]||(r[n]={row:B.instance.getTableByName(A.PFPNft).getRows().find((function(t){return O.utils.getAddress(t.contractAddress)===n})),data:[]}),r[n].data.push(t)})),o=N.getInstance("UIUserSettings#onUIOpen"),l=this.getUI("content"),p=this.getUI("pfp-group-item"),l.children.forEach((function(t,n){return t.active=!1})),Object.values(r).forEach((function(t,n){var i=l.children[n];i||((i=u(p)).parent=l,g._initNftItem(i.getChildByName("list").children[0])),i.active=!0,i.getChildByName("title").getComponent(s).string=t.row.name;var r=i.getChildByName("list"),h=g.getUI("item");r.children.forEach((function(t,n){return t.active=!1})),t.data.forEach((function(t,n){o.push((function(){var s=r.children[n];s||((s=u(h)).parent=r,g._initNftItem(s)),s.off(c.EventType.TOUCH_END),s.active=!0;var o=t.contract.openSea.imageUrl||P.getImageUrl(t.media[0].raw);y(i,(function(){try{T.loadingRunCode({text:M.get("tips_set_profile_pic"),type:k.Loading},e(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.instance.sdk.setProfilePic(o);case 2:b.eventManager.emit(_.PROFILE_PIC_CHANGE);case 3:case"end":return t.stop()}}),t)}))))}catch(t){}})),x.getByUrl(o).then((function(t){return s.getChildByPath("mask/icon").getComponent(f).spriteFrame=t}))}))}))})),o.push((function(){o.destroy()})));case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r._initNftItem=function(t){var n=t.getChildByName("hover");t.on(o.MOUSE_ENTER,(function(){C.fadeIn(n,{useCurrentValue:!0,duration:.2}).start()})),t.on(o.MOUSE_LEAVE,(function(){C.fadeOut(n,{duration:.2}).start()}))},r.withdraw=function(){E.instance.withdraw()},i}(d))||R)||R);i._RF.pop()}}}));

System.register("chunks:///_virtual/UserStorageModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StorageModelBase.ts","./EventConstant.ts"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.StorageModelBase},function(e){o=e.EventConstant}],execute:function(){var s;n._RF.push({},"dfd24obrT5DpJ2yRd/Ue3sa","UserStorageModel",void 0);var i=e("UserStorageModel",function(e){function n(){return e.call(this,{name:"user"})||this}t(n,e);var r=n.prototype;return r.getFieldConfig=function(){return[]},r.getEventList=function(){var e;return(e={})[o.LOGOUT]=this.clear,e},n}(r));s=i,i.instance=new s,n._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t({nanoid:function(t){void 0===t&&(t=21);var n="",r=t;for(;r--;)n+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return n},uuid:function(t,n){var r,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(n=n||e.length,t)for(r=0;r<t;r++)i[r]=e[0|Math.random()*n];else{var o;for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",r=0;r<36;r++)i[r]||(o=0|16*Math.random(),i[r]=e[19==r?3&o|8:o])}return i.join("")}}),n._RF.push({},"3e5d3UhcIRKgqPlkePDxbsj","Utils",void 0);n._RF.pop()}}}));

System.register("chunks:///_virtual/Validate.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t({isFloat:function(t){var e=Number(t);return!isNaN(e)&&e!==1/0&&e!==-1/0&&parseFloat(t.toString())===e},isInteger:function(t){var e=Number(t);return!isNaN(e)&&e!==1/0&&e!==-1/0&&parseInt(t.toString())===e}}),e._RF.push({},"a9178kqcMlMja385lDuRzkD","Validate",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Vector2Utils.ts",["cc"],(function(t){var e,c,n,r,s,o;return{setters:[function(t){e=t.cclegacy,c=t._decorator,n=t.misc,r=t.v3,s=t.math,o=t.v2}],execute:function(){t({getABPosAngle:function(t,e){return 90-s.toDegree(o(t.x,t.y).subtract(o(e.x,e.y)).signAngle(o(1,0)))},getPositionPositiveCalculation:function(t,e,c){var s=n.degreesToRadians(e),o=Math.cos(s)*c,i=Math.sin(s)*c;return r(t.x+o,t.y+i)}}),e._RF.push({},"ca74bg6MKdHdru3y06pT0bn","Vector2Utils",void 0);c.ccclass,c.property;e._RF.pop()}}}));

System.register("chunks:///_virtual/WalletConnectAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletConnectionAdapter.ts","./GameConfig.ts","./ethers.umd.mjs_cjs=&original=.js","./ethers.umd.js"],(function(e){var n,t,r,c,a,o,i,u;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){c=e.cclegacy},function(e){a=e.WalletConnectionAdapter},function(e){o=e.ChainNetwork2Info,i=e.default},null,function(e){u=e.default}],execute:function(){c._RF.push({},"65f85VuBINOCqO+uT910466","WalletConnectAdapter",void 0);var s="364b19834260ace768d204c782209555";e("WalletConnectAdapter",function(e){function c(){return e.apply(this,arguments)||this}n(c,e);var a=c.prototype;return a.connect=function(){var e=t(r().mark((function e(){var n,c,a,p,f,d,l,h,v,b,m,w,C,x,k,g,y,_,j,W,A,M,I;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=window.getWalletConnect()).mainnet,c=n.configureChains,a=n.createConfig,p=n.EthereumClient,f=n.w3mConnectors,n.w3mProvider,d=n.Web3Modal,n.switchNetwork,n.MetaMaskConnector,l=n.jsonRpcProvider,h=o[i.instance.chainNetwork],v={id:Number(h.chainId),name:h.chainName,network:h.chainName,nativeCurrency:{name:h.nativeCurrency.name,symbol:h.nativeCurrency.symbol,decimals:h.nativeCurrency.decimals},rpcUrls:{default:{http:[h.rpcUrl]},public:{http:[h.rpcUrl]}}},m=c(b=[v],[l({rpc:function(e){return{http:b.find((function(n){return n.id===e.id})).rpcUrls.default.http[0]}}})]),w=m.publicClient,C=a({autoConnect:!0,connectors:[].concat(f({projectId:s,chains:b})),publicClient:w}),x=new p(C,b),k=new d({projectId:s,defaultChain:v},x),g=b[0].id,y=function(){var e=t(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x.getWalletConnectConnector(),e.t0=n,!e.t0){e.next=6;break}return e.next=5,n.isAuthorized();case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=8;break}return e.abrupt("return",n);case 8:if(t=x.getConnectors().find((function(e){return"injected"===e.id})),e.t1=t,!e.t1){e.next=14;break}return e.next=13,t.isAuthorized();case 13:e.t1=e.sent;case 14:if(!e.t1){e.next=16;break}return e.abrupt("return",t);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=12,y();case 12:if(_=e.sent,j=!1,_){e.next=19;break}return e.next=17,k.openModal();case 17:return e.next=19,new Promise((function(e,n){var c=!1;k.subscribeModal(t(r().mark((function t(a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return");case 2:if(c=!0,a.open){t.next=9;break}return t.next=6,y();case 6:_=t.sent,k.closeModal(),_?(j=!0,e()):n(new Error("User Rejected"));case 9:case"end":return t.stop()}}),t)}))))}));case 19:return e.prev=19,e.next=22,_.connect({chainId:b[0].id});case 22:W=e.sent,A=W.account,this._account.value=[A],e.next=30;break;case 27:throw e.prev=27,e.t0=e.catch(19),new Error(e.t0.message);case 30:return e.next=32,_.getProvider({chainId:g});case 32:if(M=e.sent,I=new u.providers.Web3Provider(M,"any"),this._ethereumClient=x,this._web3modal=k,this._wagmiConfig=C,this._provider=I,this._ethereumProvider=M,this._connector=_,this._onAccountsChanged(),j||!M.connected){e.next=44;break}return e.next=44,k.openModal();case 44:return e.abrupt("return",!0);case 45:case"end":return e.stop()}}),e,this,[[19,27]])})));return function(){return e.apply(this,arguments)}}(),a.disconnect=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connector){e.next=4;break}return e.next=3,this._connector.disconnect();case 3:return e.abrupt("return",!0);case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.onDisconnect=function(){var e=t(r().mark((function e(n){var t=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._connector.on("disconnect",n),e.abrupt("return",(function(){t._connector.off("disconnect",n)}));case 2:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c}(a));c._RF.pop()}}}));

System.register("chunks:///_virtual/WalletConnectionAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ethers.umd.mjs_cjs=&original=.js","./reactivity.ts","./watch.ts","./Logger.ts","./ERC20.ts","./WalletUtils.ts","./ethers.umd.js","./ref.ts"],(function(t){var n,r,e,u,c,i,a,o,s;return{setters:[function(t){n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){e=t.cclegacy},null,null,function(t){u=t.watch},function(t){c=t.Logger},function(t){i=t.default},function(t){a=t.addPreZero},function(t){o=t.default},function(t){s=t.ref}],execute:function(){var p;e._RF.push({},"8f149/K0LpKAYpC23tKJN5P","WalletConnectionAdapter",void 0);t("WalletConnectionAdapter",function(){function t(){this._account=s([]),this._tag=Date.now(),p=this._tag}var e=t.prototype;return e.connect=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.disconnect=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.onAccountsChanged=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u(this._account,n));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e._updateTag=function(t){p=t},e._onAccountsChanged=function(){var t=n(r().mark((function t(){var n=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._ethereumProvider.once("accountsChanged",(function(t){p===n._tag&&(c.info(t),n._account.value=t.map((function(t){return o.utils.getAddress(t)})),n._onAccountsChanged())}));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.onChainChanged=function(){var t=n(r().mark((function t(n){var e,u,c=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!1,u=function t(){e||(n&&n.apply(void 0,arguments),c._ethereumProvider.once("chainChanged",t))},this._ethereumProvider.once("chainChanged",u),t.abrupt("return",(function(){e=!0}));case 4:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e.onDisconnect=function(){var t=n(r().mark((function t(n){var e,u,c=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!1,u=function t(){e||(n&&n.apply(void 0,arguments),c._ethereumProvider.once("disconnect",t))},this._ethereumProvider.once("disconnect",u),t.abrupt("return",(function(){e=!0}));case 4:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e.isConnect=function(){return this._account.value&&0!==this._account.value.length},e.getAccount=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._account);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getChainId=function(){return this._provider.send("eth_chainId",[])},e.getBalance=function(){var t=n(r().mark((function t(n){var e,u,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._provider.send("eth_getBalance",[n,"latest"]);case 2:return e=t.sent,u=BigInt(e),c=Number(u)/Math.pow(10,18),t.abrupt("return",c);case 6:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e.getProvider=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._provider);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getSigner=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._provider.getSigner());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.addChain=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",this._provider.send("wallet_addEthereumChain",[{chainId:o.utils.hexValue(Number(n.chainId)),chainName:n.chainName,rpcUrls:[n.rpcUrl],nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockchainExplorer]}]));case 4:t.prev=4,t.t0=t.catch(0),console.log(t.t0);case 7:case"end":return t.stop()}}),t,this,[[0,4]])})));return function(n){return t.apply(this,arguments)}}(),e.switchChain=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._provider.send("wallet_switchEthereumChain",[{chainId:o.utils.hexValue(Number(n.chainId))}]));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e.switchChainById=function(){var t=n(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._provider.send("wallet_switchEthereumChain",[{chainId:o.utils.hexValue(Number(n))}]));case 1:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e.sendTransaction=function(t){return this._provider.send("eth_sendTransaction",[t])},e.requestContract=function(t,n){for(var r=new o.Contract(t,i,this._provider),e=o.utils.id(r.interface.getFunction(n).format("sighash")).substring(0,10),u=arguments.length,c=new Array(u>2?u-2:0),s=2;s<u;s++)c[s-2]=arguments[s];return this.sendTransaction({to:t,data:e+c.map((function(t){return a(o.utils.hexValue(t).substring(2))})).join("")})},e.callContract=function(){var t=n(r().mark((function t(n,e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(n,r){return t.apply(this,arguments)}}(),e.getGasPrice=function(){var t=n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._provider.getGasPrice();case 2:return t.abrupt("return",t.sent.toString());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.getBlockNumber=function(){return this._provider.getBlockNumber()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/WalletManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Types.ts","./MetaMaskAdapter.ts","./Tips.ts","./WalletConnectAdapter.ts","./StorageModelBase.ts","./GameConfig.ts","./ref.ts","./watch.ts","./PromiseUtils.ts","./OKXAdapter.ts","./GameStorageModel.ts"],(function(t){var e,n,r,a,u,c,s,i,o,p,f,h,l,d,v,g;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime,a=t.createClass},function(t){u=t.cclegacy},function(t){c=t.WalletType},function(t){s=t.MetaMaskAdapter},function(t){i=t.showErrorToast},function(t){o=t.WalletConnectAdapter},function(t){p=t.StorageModelBase},function(t){f=t.ChainNetwork2Info},function(t){h=t.shallowRef},function(t){l=t.watch},function(t){d=t.delay},function(t){v=t.OKXAdapter},function(t){g=t.GameStorageModel}],execute:function(){var _;u._RF.push({},"34d39eipudGXKF7Pgr6CvlH","WalletManager",void 0);var k=t("WalletManager",function(t){function u(){var e;return(e=t.call(this,{name:"wallet"})||this)._adapter=h(null),e._enableAccountChanged=!0,e._connecting=!1,e}e(u,t);var p=u.prototype;return p.getFieldConfig=function(){return[{key:"type"}]},p.onConnect=function(t){return l(this._adapter,t)},p.isConnect=function(){return!!this._adapter.value&&this._adapter.value.isConnect()},p.onAccountsChanged=function(t){var e=this;return this._safeRun("onAccountsChanged",(function(){return e._adapter.value.onAccountsChanged(t)}))},p.onChainChanged=function(t){var e=this;return this._safeRun("onChainChanged",(function(){return e._adapter.value.onChainChanged(t)}))},p.onDisconnect=function(t){var e=this;return this._safeRun("onDisconnect",(function(){return e._adapter.value.onDisconnect(t)}))},p.enableAccountChanged=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._enableAccountChanged=e,!this.isConnect()){t.next=10;break}if(!e){t.next=8;break}this._lockAddress="",this._unlockFn&&this._unlockFn(),this._unlockFn=null,t.next=10;break;case 8:return t.next=10,this._lockAccount();case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),p._lockAccount=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAddress();case 2:return this._lockAddress=t.sent,this._unlockFn&&this._unlockFn(),t.next=6,this._adapter.value.onAccountsChanged(n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._adapter.value.getAccount();case 2:t.sent.value[0]!==e._lockAddress&&window.location.reload();case 4:case"end":return t.stop()}}),t)}))));case 6:this._unlockFn=t.sent;case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),p.connect=function(){var t=n(r().mark((function t(e){var a=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._connecting){t.next=2;break}return t.abrupt("return",!1);case 2:if(!this.isConnect()){t.next=4;break}return t.abrupt("return",!0);case 4:return this._connecting=!0,t.next=7,this._safeRun("connect",n(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===c.MetaMask?3:t.t0===c.WalletConnect?5:t.t0===c.OKX?7:9;break;case 3:return n=new s,t.abrupt("break",9);case 5:return n=new o,t.abrupt("break",9);case 7:return n=new v,t.abrupt("break",9);case 9:if(n){t.next=13;break}return a._connecting=!1,i("Unknown wallet type"),t.abrupt("return",!1);case 13:return t.next=15,n.connect();case 15:if(t.sent){t.next=18;break}return a._connecting=!1,t.abrupt("return",!1);case 18:if(a._connecting=!1,a._adapter.value=n,a.type=e,g.instance.walletType=e,a._enableAccountChanged){t.next=25;break}return t.next=25,a._lockAccount();case 25:return t.abrupt("return",!0);case 26:case"end":return t.stop()}}),t)}))),(function(){return a._connecting=!1,!1}));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),p.getChainId=function(){var t=this;return this._safeRun("getChainId",(function(){return t._adapter.value.getChainId()}))},p.getAccount=function(){var t=this;return this._safeRun("getAccount",(function(){return t._adapter.value.getAccount()}))},p.getAddress=function(){var t=this;return this._safeRun("getAccount",n(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._adapter.value.getAccount();case 2:return e.abrupt("return",e.sent.value[0]);case 3:case"end":return e.stop()}}),e)}))))},p.switchChain=function(t){var e=this;return this._safeRun("switchChain",n(r().mark((function n(){var a,u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getChainId();case 2:if(a=n.sent,(u=f[t]).chainId===Number(a).toString()){n.next=27;break}return n.prev=5,n.next=8,e._adapter.value.switchChain(u);case 8:n.next=27;break;case 10:if(n.prev=10,n.t0=n.catch(5),4902!==n.t0.code&&-32e3!==n.t0.code&&!n.t0.message.includes("Missing or invalid. request() method: wallet_switchEthereumChain")&&!n.t0.message.includes("not approved. Please use one of the following:")){n.next=26;break}return n.prev=13,n.next=16,e._adapter.value.addChain(u);case 16:return n.next=18,d(500);case 18:return n.next=20,e._adapter.value.switchChain(u);case 20:return n.abrupt("return",!0);case 23:throw n.prev=23,n.t1=n.catch(13),n.t1;case 26:throw n.t0;case 27:return n.abrupt("return",!0);case 28:case"end":return n.stop()}}),n,null,[[5,10],[13,23]])}))),(function(){return!1}))},p.getProvider=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._safeRun("getProvider",n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._adapter.value.getProvider();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),p.getBlockNumber=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._safeRun("getBlockNumber",n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._adapter.value.getBlockNumber();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),p.getSigner=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._safeRun("getSigner",n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._adapter.value.getSigner();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),p.getGasPrice=function(){var t=n(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._safeRun("getGasPrice",n(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._adapter.value.getGasPrice();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),p._safeRun=function(){var t=n(r().mark((function t(e,n,a){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"connect"===e){t.next=6;break}return t.next=4,this.connect(this.type);case 4:if(t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,n();case 8:return t.abrupt("return",t.sent);case 11:return t.prev=11,t.t0=t.catch(0),"Error"!=t.t0.toString()&&i(t.t0.message||t.t0.msg),console.error(e+" error:",t.t0),t.abrupt("return",a&&a(t.t0));case 16:case"end":return t.stop()}}),t,this,[[0,11]])})));return function(e,n,r){return t.apply(this,arguments)}}(),a(u,[{key:"adapter",get:function(){return this._adapter.value}}]),u}(p));_=k,k.instance=new _,u._RF.pop()}}}));

System.register("chunks:///_virtual/WalletUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("addPreZero",(function(t){return t.toString().padStart(64,"0")})),e._RF.push({},"99821KFRDlKPYlIwvhrvwcC","WalletUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/warning.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){n("warn",(function(n){for(var r,e=arguments.length,c=new Array(e>1?e-1:0),t=1;t<e;t++)c[t-1]=arguments[t];(r=console).warn.apply(r,["[Vue warn] "+n].concat(c))})),r._RF.push({},"e4b31Pn/CxOIoOlqQFJX0dx","warning",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/watch.ts",["cc","./reactivity.ts","./shared.ts","./errorHandling.ts","./ref.ts","./reactive.ts","./effect.ts"],(function(n){var t,e,r,c,i,u,a,o,f,s,l,v,h;return{setters:[function(n){t=n.cclegacy},null,function(n){e=n.isArray,r=n.isFunction,c=n.NOOP,i=n.hasChanged,u=n.isObject},function(n){a=n.callWithErrorHandling,o=n.warn,f=n.callWithAsyncErrorHandling},function(n){s=n.isRef},function(n){l=n.isShallow,v=n.isReactive},function(n){h=n.ReactiveEffect}],execute:function(){n({watch:function(n,t,e){return w(n,t,e)},watchEffect:function(n,t){return w(n,null,t)}}),t._RF.push({},"33db0qAwKJJjoTF7GlYvIDJ","watch",void 0);var d={};function w(n,t,u){var w,p,y=void 0===u?{}:u,m=y.immediate,E=y.deep,R=y.flush,S=!1,b=!1;if(s(n)?(w=function(){return n.value},S=l(n)):v(n)?(w=function(){return n},E=!0):e(n)?(b=!0,S=n.some(v),w=function(){return n.map((function(n){return s(n)?n.value:v(n)?g(n):r(n)?a(n,"watch getter"):o("invalid source")}))}):w=r(n)?t?function(){return a(n,"watch getter")}:function(){return p&&p(),f(n,"watch callback",[O])}:c,t&&E){var F=w;w=function(){return g(F())}}var O=function(n){p=A.onStop=function(){a(n,"watch cleanup")}},j=b?[]:d,k=function(){if(A.active)if(t){var n=A.run();(E||S||(b?n.some((function(n,t){return i(n,j[t])})):i(n,j)))&&(p&&p(),f(t,"watch value",[n,j===d?void 0:j,O]),j=n)}else A.run()};k.allowRecurse=!!t;var A=new h(w,"sync"===R?k:function(){k()});return t?m?k():j=A.run():A.run(),function(){return A.stop()}}function g(n,t){if(void 0===t&&(t=new Set),!u(n)||t.has(n))return n;if(t.add(n),e(n))for(var r=0;r<n.length;r++)g(n[r],t);else if(n instanceof Map)n.forEach((function(e,r){g(n.get(r),t)}));else if(n instanceof Set)n.forEach((function(n){g(n,t)}));else for(var c=0,i=Object.keys(n);c<i.length;c++){var a=i[c];g(n[a],t)}return n}t._RF.pop()}}}));

System.register("chunks:///_virtual/WebUtils.ts",["cc","./QueryString.ts"],(function(e){var t,n,r;return{setters:[function(e){t=e.cclegacy,n=e.sys},function(e){r=e.default}],execute:function(){t._RF.push({},"3cf2eXfdgRHvK3ZQWEle3pE","WebUtils",void 0);e("WebUtils",function(){function e(){}return e.getUrlParams=function(e){if(!n.isBrowser)return{};var t=(e||window.location.href).match(/([?&])(.+?=[^&]+)/gim);return t?t.reduce((function(e,t){var n=t.slice(1).split("=");return e[n[0]]=n[1],e}),{}):{}},e.getUrlParam=function(e){if(!n.isBrowser)return null;var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),r=decodeURI(window.location.search).substr(1).match(t);return null!=r?unescape(r[2]):null},e.delQueryField=function(e){if(window.history&&history.pushState){var t=location.href.replace(location.hash,"").split("?"),n=t[0],o=t[1];if(!o)return;var i=r.parse(o);delete i[e];var c=n+"?"+r.stringify(i)+location.hash;window.history.pushState({},"",c)}},e.copyFromWeb=function(e){var t=e+"",n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";var r=getSelection(),o=!1;r.rangeCount>0&&(o=r.getRangeAt(0)),document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length;var i=!1;try{i=document.execCommand("copy")}catch(e){console.log("err:",e)}return document.body.removeChild(n),o&&(r.removeAllRanges(),r.addRange(o)),i},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ZKHoldemAnalytics.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletManager.ts","./GameConfig.ts","./Logger.ts"],(function(n){var t,e,o,a,c,r,i,s;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){o=n.cclegacy,a=n._decorator},function(n){c=n.WalletManager},function(n){r=n.default,i=n.ChainNetwork2Info},function(n){s=n.Logger}],execute:function(){var u;o._RF.push({},"a1d61bfHe1KBqprdwsVrRhm","ZKHoldemAnalytics",void 0);a.ccclass,a.property;var l=n("ChainId",function(n){return n[n.MANTA_PACIFIC=169]="MANTA_PACIFIC",n[n.MANTA_PACIFIC_TESTNET=3441005]="MANTA_PACIFIC_TESTNET",n}({})),d=(n("LogType",function(n){return n[n.MINT_CHIPS=1]="MINT_CHIPS",n[n.CREATE_ROOM=2]="CREATE_ROOM",n[n.JOIN_ROOM=3]="JOIN_ROOM",n[n.QUIT_ROOM=4]="QUIT_ROOM",n}({})),function(n){return n.official="official",n.channel_01="channel_01",n}(d||{})),f=n("ZKHoldemAnalytics",function(){function n(){}var o=n.prototype;return o.sendLog=function(){var n=t(e().mark((function n(t,o){var a;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=location.pathname.split("/")[1],n.t0=this,n.next=4,c.instance.getAddress();case 4:return n.t1=n.sent,n.t2=o.hash||o.transactionHash,n.t3=t,n.t4=i[r.instance.chainNetwork].chainId,n.t5=o.contractAddress||o.to,n.t6=d[a]||d.official,n.abrupt("return",n.t0._sendLog.call(n.t0,n.t1,n.t2,n.t3,n.t4,n.t5,n.t6));case 11:case"end":return n.stop()}}),n,this)})));return function(t,e){return n.apply(this,arguments)}}(),o._sendLog=function(n,t,e,o,a,c){if(s.info("send analytics log:",[n,t,e,o]),r.instance.ZKHoldemAnalyticsConfig.enable&&Object.values(l).includes(Number(o))){var i=r.instance.ZKHoldemAnalyticsConfig.hostName+"/api/sendLog?address="+encodeURIComponent(n)+"&txHash="+encodeURIComponent(t)+"&type="+encodeURIComponent(e)+"&chainId="+encodeURIComponent(o)+"&contract="+encodeURIComponent(a)+"&utm_source="+encodeURIComponent(c);(new Image).src=i}},n}());u=f,f.instance=new u,o._RF.pop()}}}));

System.register("chunks:///_virtual/ZKHoldemSDKManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletManager.ts","./ref.ts","./watch.ts","./UIManager.ts","./UILoading.ts","./UIPlay.ts","./ZKHoldemSDK.mjs","./GameConfig.ts","./Tips.ts","./Logger.ts","./PlayThemeManager.ts","./Identicon.ts","./ethers.umd.mjs_cjs=&original=.js","./I18n.ts","./Loading.ts","./UILoadingPanel.ts","./Icon.ts","./UIBuyIn.ts","./GameLogic.ts","./UIMain.ts","./UIFund.ts","./UITipsPanel.ts","./ZKHoldemAnalytics.ts","./MathUtils.ts","./IpfsUtils.ts","./UISpectating.ts","./EthereumUtils.ts","./ethers.umd.js"],(function(e){var t,n,r,a,s,i,u,c,o,f,p,h,l,d,g,m,x,v,w,k,y,b,_,I,G,P,C,L,A,R,U,T,S,E,H,K,M,B;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime,r=e.createClass},function(e){a=e.cclegacy},function(e){s=e.WalletManager},function(e){i=e.shallowRef},function(e){u=e.watch},function(e){c=e.UIManager},function(e){o=e.UILoading,f=e.LoadingMode},function(e){p=e.UIPlay},function(e){h=e.Game,l=e.ZKHoldemSDK,d=e.GameStage},function(e){g=e.default,m=e.ChainNetwork2Info},function(e){x=e.showErrorToast,v=e.showToast},function(e){w=e.Logger},function(e){k=e.PlayThemeManager},function(e){y=e.identicon},null,function(e){b=e.I18n},function(e){_=e.Loading},function(e){I=e.UILoadingPanelType},function(e){G=e.Icon},function(e){P=e.UIBuyIn},function(e){C=e.GameLogic},function(e){L=e.UIMain},function(e){A=e.UIFund},function(e){R=e.UITipsPanel,U=e.UITipsPanelConfig},function(e){T=e.ZKHoldemAnalytics,S=e.LogType},function(e){E=e.formatNumberToDigitGrouping},function(e){H=e.IpfsUtils},function(e){K=e.UISpectating},function(e){M=e.getJsonRpcProvider},function(e){B=e.default}],execute:function(){var N;a._RF.push({},"0b368kZWM9FKahfyFSvAl69","ZKHoldemSDKManager",void 0);var O=e("ChipType",function(e){return e[e.Chip=0]="Chip",e[e.ZChip=1]="ZChip",e}({})),Z=e("ZKHoldemSDKManager",function(){function e(){this._rawSdk=null,this._sdk=i(null),this._game=i(null),this._nftCache=null,this._onProgressList=[]}var a=e.prototype;return a.init=function(){var e=t(n().mark((function e(){var t,r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.instance.ZKHoldemSDKConfig.useBuiltInWsProvider||((t=new B.providers.JsonRpcProvider(m[g.instance.chainNetwork].rpcUrl)).pollingInterval=2e3),e.t0=l,e.next=4,s.instance.getSigner();case 4:return e.t1=e.sent,e.t2=t,e.t3=g.instance.ZKHoldemSDKConfig.enableLog,e.t4=g.instance.ZKHoldemSDKConfig.useEvent,e.t5={signer:e.t1,provider:e.t2,enableLog:e.t3,useEvent:e.t4},r=new e.t0(e.t5),console.log("create sdk",r),a=this._buildProxy(r),e.next=14,a.init();case 14:this._rawSdk=r,this._sdk.value=a;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.onInit=function(e){return u(this._sdk,e)},a.getGasPrice=function(){var e=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(g.instance.chainNetwork).getGasPrice();case 2:if(t=e.sent,!this.sdk.getL1GasPrice){e.next=9;break}return e.t0=t,e.next=7,this.sdk.getL1GasPrice();case 7:return e.t1=e.sent.toString(),e.abrupt("return",e.t0.add.call(e.t0,e.t1));case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.requestChips=function(){var e=t(n().mark((function e(t,r){var a,s,i,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=7;break}return e.next=3,this.getAccountInfo();case 3:if(a=e.sent,!B.BigNumber.from(a.chips).gte(t)){e.next=7;break}return e.abrupt("return");case 7:return s=t,w.info("ready buyChipWithETH amount:"+s),e.prev=9,e.next=12,this.rawSdk.buyChipWithETH(s);case 12:i=e.sent,T.instance.sendLog(S.MINT_CHIPS,i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),e.t0&&-32603===e.t0.code&&-32e3===e.t0.data.code&&(e.t0.data.message.includes("gas required exceeds allowance")||e.t0.data.message.includes("insufficient funds"))?(u=m[g.instance.chainNetwork].nativeCurrency.name,x(b.get("error_tips_buy_chips_insufficient",[u,E(s)]),!0)):this._showError(this.rawSdk,e.t0);case 19:case"end":return e.stop()}}),e,this,[[9,16]])})));return function(t,n){return e.apply(this,arguments)}}(),a.equalCurGame=function(e){return this.game&&e.gameId===this.game.gameId},a.createGame=function(e,r,a,s){var i=this;return new Promise(t(n().mark((function u(c,o){var f;return n().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,i.sdk.createGame(e,r,a,s);case 3:(f=u.sent).onAndCall("game",t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.instance.sendLog(S.CREATE_ROOM,f.data.tx),T.instance.sendLog(S.JOIN_ROOM,f.data.tx),e.t0=c,e.next=5,i.setGame(f.data.game);case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})))),f.onAndCall("error",(function(){o(f.data.error)})),u.next=11;break;case 8:u.prev=8,u.t0=u.catch(0),o(u.t0);case 11:case"end":return u.stop()}}),u,null,[[0,8]])}))))},a.setGame=function(){var e=t(n().mark((function e(t){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=r._buildProxy(t);r._game.value=n;var a=Date.now();n.onBoardUpdate((function(t){console.log("board update interval:",Date.now()-a),a=Date.now(),k.instance.theme=t.themeId,e&&e(n),e=null}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getGameAndCheck=function(){var r=t(n().mark((function t(r,a){var s,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===a&&(a=d.GatheringPlayers),t.next=3,e.instance.sdk.getGame(Number(r));case 3:if(s=t.sent){t.next=7;break}return x(b.get("error_tips_not_room")),t.abrupt("return",null);case 7:return t.next=9,this.getGameBoard(s);case 9:if(i=t.sent,"number"!=typeof a||i.stage===a){t.next=13;break}return x(b.get("error_tips_join_room_error")),t.abrupt("return",null);case 13:return t.abrupt("return",s);case 14:case"end":return t.stop()}}),t,this)})));return function(e,t){return r.apply(this,arguments)}}(),a.getFinalGameId=function(){var e=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.sdk.getNextGameId(t);case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",t);case 6:t=r,e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getGameChipType=function(){var e=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGameBoard(this.game);case 2:return t=e.sent,r=t.isZToken,e.abrupt("return",r?O.ZChip:O.Chip);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getGameBoard=function(e){return new Promise((function(t){var n=!1;e.onBoardUpdate((function r(a){n||(n=!0,t(a),e.off("boardUpdated",r))}))}))},a.isWatchGame=function(){var e=t(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.game.playerIndex();case 2:if(-1!==(t=e.sent)){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,this.getGameBoard(this.game);case 7:if((r=e.sent).playerInPots[t]||r.autoJoin[t]){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getHoldemNftIdList=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.sdk,e.next=3,s.instance.getAddress();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.getNftIdList.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getHoldemNftInfoList=function(){var e=t(n().mark((function e(t){var r,a=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),this._nftCache&&!t){e.next=8;break}return e.next=4,this.getHoldemNftIdList();case 4:r=e.sent,this._nftCache=new Array(5).fill("").map((function(e,t){return{tier:t+1,data:[]}})),r.forEach((function(e){e.forEach((function(e){a._nftCache[e.tier-1].data.push(e)}))})),console.log("update nft cache:",this._nftCache);case 8:return e.abrupt("return",Array.from(this._nftCache));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.getHoldemNftImageByTokenUri=function(){var e=t(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getJson(t);case 2:return r=e.sent,e.next=5,H.getImage(r.image);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.callJoinGame=function(){var e=t(n().mark((function e(t,r){var a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.authorizeGameAccount();case 2:return e.next=4,this.game.joinGame(t,r);case 4:a=e.sent,T.instance.sendLog(S.JOIN_ROOM,a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a.joinGame=function(){var e=t(n().mark((function e(t){var r,a,s,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFinalGameId(t);case 2:return t=e.sent,e.next=5,this.getGameAndCheck(t,null);case 5:if(r=e.sent,e.t0=r,!e.t0){e.next=11;break}return e.next=10,this.getGameBoard(r);case 10:e.t0=e.sent;case 11:if(a=e.t0,r&&a.stage!==d.Uncreated&&(a.stage!==d.Ended||a.winners&&0!==a.winners.length)){e.next=15;break}return x(b.get("error_tips_not_room")),e.abrupt("return",null);case 15:return w.success("ready join game:",r),e.next=18,this.setGame(r);case 18:if((s=this.sdk.getPlayersRange())[0],i=s[1],!(a.stage===d.GatheringPlayers&&a.permanentAccounts.length<i)){e.next=24;break}return e.next=22,c.open(P);case 22:e.next=27;break;case 24:return w.success("watch game:",r),e.next=27,this.loadResources();case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.quitGame=function(){var e=t(n().mark((function e(){var r,a,s,i,u,o=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.isWatchGame();case 4:if(!e.sent){e.next=6;break}return e.abrupt("return",this.destroyGame());case 6:return e.next=8,this.game.playerIndex();case 8:return r=e.sent,e.next=11,this.getGameBoard(this.game);case 11:a=e.sent,u=function(){var e=t(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.safeCallGameApi("quit");case 2:return t=e.sent,e.next=5,C.instance.showTxActionState("Quit",t);case 5:T.instance.sendLog(S.QUIT_ROOM,t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.stage<=d.GatheringPlayers?(s="Are you sure you want to leave this table?.",i=u):a.playerInPots[r]?a.isInBetRound&&a.nextPlayer===r?(s="Are you sure you want to leave this table? Your card will be folded and all your chips in the pot will be lost.",i=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.instance.gameEnd=!0,e.prev=1,e.next=4,o.game.disableAutoJoin();case 4:return e.next=6,o.safeCallGameApi("fold");case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),C.instance.gameEnd=!1,e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()):(s="We highly recommend you to quit at your own turn.\nIf you quit now, you will lose ALL THE CHIPS YOU BROUGHT INTO THIS ROOM as compensation for other players.",i=u):(s="Are you sure you want to leave this table?.",i=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.game.disableAutoJoin();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),c.open(R,{arg:(new U).set("title",b.get("tips_quit_game_title")).set("text",s).set("confirmText",b.get("tips_quit_game_confirm")).set("confirmCallback",t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.loadingRunCode({type:I.Loading,text:"Quit"},t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return e.next=4,o.destroyGame();case 4:case"end":return e.stop()}}),e)}))));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])}))))});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.safeCallGameApi=function(){var e=t(n().mark((function e(t){var r,a,s,i,u,c=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game){e.next=2;break}return e.abrupt("return");case 2:for(r=c.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=c[s];console.log("safe call game api "+t+":",a);case 4:return e.prev=5,e.next=8,(i=this.game)[t].apply(i,a);case 8:return u=e.sent,e.next=11,this.sdk.checkRequireGas(1);case 11:if(e.sent){e.next=13;break}A.open((new U).set("title",b.get("tips_fund_title")).set("text",b.get("tips_fund_content")).set("confirmText",b.get("tips_fund_confirm")));case 13:return console.log("safe call game api "+t+" result:",a,u),e.abrupt("return",u);case 17:if(e.prev=17,e.t0=e.catch(5),console.error("safe call game api "+t+" error:",e.t0),!e.t0||!e.t0.toString().includes("insufficient funds for intrinsic transaction cost")){e.next=30;break}return e.prev=21,e.next=24,A.open((new U).set("title",b.get("tips_warning_fund_title")).set("text",b.get("tips_warning_fund_content")).set("confirmText",b.get("tips_warning_confirm")));case 24:e.next=28;break;case 26:e.prev=26,e.t1=e.catch(21);case 28:e.next=31;break;case 30:throw e.t0;case 31:e.next=4;break;case 33:case"end":return e.stop()}}),e,this,[[5,17],[21,26]])})));return function(t){return e.apply(this,arguments)}}(),a.kickPlayer=function(){var r=t(n().mark((function r(a){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.game){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,_.loadingRunCode({type:I.Loading,text:"Kick Player"},t(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.safeCallGameApi("kickPlayer",a);case 2:case"end":return t.stop()}}),t)}))));case 5:return r.abrupt("return",!0);case 8:r.prev=8,r.t0=r.catch(2);case 10:return r.abrupt("return",!1);case 11:case"end":return r.stop()}}),r,this,[[2,8]])})));return function(e){return r.apply(this,arguments)}}(),a.destroyGame=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game){e.next=2;break}return e.abrupt("return");case 2:return this.game.destroy(),this._game.value=null,C.instance.gameEnd=!0,e.next=7,c.open(L);case 7:c.close(p),c.close(K);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a._loadResources=function(){var e=t(n().mark((function e(t){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._onProgressList){e.next=4;break}t&&this._onProgressList&&this._onProgressList.push(t),e.next=6;break;case 4:return t&&t(100),e.abrupt("return");case 6:if(!this._loadResourcesPromise){e.next=10;break}return e.next=9,this._loadResourcesPromise;case 9:return e.abrupt("return");case 10:return this._loadResourcesPromise=this.sdk.loadResources((function(e){r._onProgressList.forEach((function(t){return t(e)}))})),e.next=13,this._loadResourcesPromise;case 13:this._onProgressList=null;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.preloadResources=function(){return this._loadResources()},a.loadResources=function(){var e=t(n().mark((function e(t){var r,a,s,i,u,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!1),e.next=3,c.open(o,{arg:{mode:f.RealTime,text:"Before you quit a table, \nmake sure to fold your hand before closing the window to avoid slashing.\nDownloading the ZKP generator, please be patient."}});case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:return a=101,i=r.getOnProgress(),e.next=10,Promise.all([c.open(p).then((function(e){return i(s,a-=1,null),e})),this._loadResources((function(e){s=e,i(e,a,null)})),t&&this.sdk.authorizeGameAccount(),c.close(L)]);case 10:return u=e.sent,h=u[0],e.next=14,r.$wait();case 14:h.initData();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.onCreateGame=function(e){return u(this._game,e)},a.getAccountInfo=function(){var e=t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.sdk,e.next=3,s.instance.getAddress();case 3:return e.t1=e.sent,e.next=6,e.t0.getAccountInfo.call(e.t0,e.t1);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.getProfilePic=function(){var r=t(n().mark((function t(r){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.instance.sdk.getProfilePic(r);case 2:if(!(a=t.sent)){t.next=9;break}return t.next=6,G.getByUrl(a);case 6:return t.abrupt("return",t.sent);case 9:return t.next=11,y(r,64);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e){return r.apply(this,arguments)}}(),a.checkAccountGameAndStart=function(){var e=t(n().mark((function e(){var t,r,a,s,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfo();case 2:if(t=e.sent,w.success("accountInfo:",t),!(t.gameId&&t.gameId>-0)){e.next=14;break}return e.next=7,this.sdk.getGame(t.gameId);case 7:if(!(r=e.sent)){e.next=14;break}return w.success("ready join accountInfo.gameId game:",r),e.next=12,this.setGame(r);case 12:return this.loadResources(!0),e.abrupt("return",r);case 14:return e.next=16,this.sdk.getWaitQueueId();case 16:if(!(a=e.sent)){e.next=33;break}if(!((s=a.toNumber())&&s>-0)){e.next=33;break}return e.t0=this.sdk,e.next=23,this.getFinalGameId(s);case 23:return e.t1=e.sent,e.next=26,e.t0.getGame.call(e.t0,e.t1);case 26:if(!(i=e.sent)){e.next=33;break}return w.success("ready join wait queue game:",i),e.next=31,this.setGame(i);case 31:return this.loadResources(!0),e.abrupt("return",i);case 33:return e.abrupt("return",null);case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.withdraw=function(){var e=t(n().mark((function e(){var r=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sdk){e.next=10;break}return e.prev=1,e.next=4,_.loadingRunCode({type:I.Loading,text:"Withdrawal in progress."},t(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.sdk.withdrawGameAccount();case 2:v(b.get("tips_withdrawal_successful"),!1);case 3:case"end":return e.stop()}}),e)}))));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:e.next=11;break;case 10:x(b.get("tips_login"));case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),a.showError=function(e,t){return this._showError(e,t)},a._showError=function(e,t){if(!(e instanceof h)||this._game.value&&e.gameId===this._game.value.gameId){var n="";throw t&&(t.data&&t.data.message?n=t.data.message:t.reason?n=t.reason:t.message?n=t.message:t.msg&&(n=t.msg)),n&&(n.includes("gas required exceeds allowance")&&(n="Insufficient ETH balance"),x(n,!this.game)),t}console.error("Errors that occur after the game is released: ",t)},a._buildProxy=function(e){var t=this,n=function(n){t._showError(e,n)};return new Proxy(e,{get:function(e,t,r){var a=Reflect.get(e,t,r);return"function"==typeof a?function(){try{for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i=a.apply(e,r);return i&&"function"==typeof i.then&&"function"==typeof i.catch?i.catch((function(e){n(e)})):i}catch(e){n(e)}}:a}})},r(e,[{key:"sdk",get:function(){return this._sdk.value}},{key:"rawSdk",get:function(){return this._rawSdk}},{key:"game",get:function(){return this._game.value}}]),e}());N=Z,Z.instance=new N,Z.defaultBBSize=100,a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});